{"version":3,"sources":["webpack:///./../ehuodiManagement/scms/trunk/src/libs/ueditor/index.js","webpack:///../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/images/icons-all.gif","webpack:///../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/images/icons.png","webpack:///../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/images/tangram-colorpicker.png","webpack:///../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/images/wordpaste.png","webpack:///./../ehuodiManagement/scms/trunk/src/libs/ueditor/ueditor.config.js","webpack:///./../ehuodiManagement/scms/trunk/src/libs/ueditor/ueditor.all.js","webpack:///../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/css/ueditor.css?62b7","webpack:///../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/css/ueditor.css","webpack:///../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/images/scale.png","webpack:///../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/images/sparator_v.png","webpack:///../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/images/charts.png","webpack:///../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/images/dialog-title-bg.png","webpack:///../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/images/unhighlighted.gif","webpack:///../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/images/highlighted.gif","webpack:///../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/images/arrow_down.png","webpack:///../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/images/arrow_up.png","webpack:///../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/images/table-cell-align.png","webpack:///./../ehuodiManagement/scms/trunk/src/libs/ueditor/third-party/zeroclipboard/ZeroClipboard.js","webpack:///../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/iframe.css?e62e","webpack:///../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/iframe.css","webpack:///./../ehuodiManagement/scms/trunk/src/libs/ueditor/lang/zh-cn/zh-cn.js"],"names":["URL","window","location","href","indexOf","split","UEDITOR_CONFIG","UEDITOR_HOME_URL","serverUrl","toolbars","elementPathEnabled","maximumWords","xssFilterRules","inputXssFilter","outputXssFilter","whitList","a","abbr","address","area","article","aside","audio","b","bdi","bdo","big","blockquote","br","caption","center","cite","code","col","colgroup","dd","del","details","div","dl","dt","em","font","footer","h1","h2","h3","h4","h5","h6","header","hr","i","img","ins","li","mark","nav","ol","p","pre","s","section","small","span","sub","sup","strong","table","tbody","td","tfoot","th","thead","tr","tt","u","ul","video","getUEBasePath","docUrl","confUrl","getBasePath","self","document","getConfigFilePath","configPath","getElementsByTagName","length","src","basePath","test","exec","replace","optimizationPath","path","protocol","tmp","res","shift","pop","push","join","UE","baidu","editor","plugins","commands","instants","I18N","_customizeUI","version","dom","browser","agent","navigator","userAgent","toLowerCase","opera","ie","webkit","mac","quirks","compatMode","gecko","product","v1","match","v2","Math","max","ie11Compat","documentMode","ie9Compat","ie8","ie8Compat","ie7Compat","ie6Compat","ie9above","ie9below","ie11above","ie11below","geckoRelease","chrome","RegExp","safari","parseFloat","isCompatible","mobile","air","utils","each","obj","iterator","context","l","call","key","hasOwnProperty","makeInstance","noop","Function","prototype","extend","t","k","extend2","arguments","x","inherits","subClass","superClass","oldP","newP","constructor","bind","fn","apply","defer","delay","exclusion","timerID","clearTimeout","setTimeout","array","item","start","index","isNumber","v","removeItem","splice","trim","str","listToMap","list","isArray","ci","toUpperCase","unhtml","reg","unhtmlForUrl","html","m","cssStyleToDomStyle","createElement","style","cache","cssFloat","undefined","styleFloat","cssName","charAt","loadFile","tmpList","getItem","doc","url","e","ready","funs","body","write","tag","id","getElementById","element","setAttribute","onload","onreadystatechange","readyState","fi","onerror","Error","appendChild","isEmptyObject","isString","fixColor","name","value","color","parseInt","toString","optCss","val","padding","margin","border","opt","top","bottom","left","r","right","clone","source","target","transUnitToPx","unit","round","domReady","fnArr","doReady","isReady","onready","win","documentElement","doScroll","error","callee","attachEvent","addEventListener","removeEventListener","cssRule","indexList","nodeType","styleSheets","cssText","sheetStyle","createStyleSheet","head","node","innerHTML","parentNode","removeChild","sort","compareFn","item1","item2","localeCompare","len","j","serializeParam","json","strArr","encodeURIComponent","formatUrl","isCrossDomainUrl","hostname","port","clearEmptyAttrs","str2json","JSON","parse","json2str","stringify","encodeString","c","escapeMap","charCodeAt","floor","encodeArray","result","preComma","pad","encodeDate","getFullYear","getMonth","getDate","getHours","getMinutes","getSeconds","isFinite","String","isDate","encode","Object","EventBase","addListener","types","listener","ti","getListener","on","off","removeListener","trigger","fireEvent","listeners","type","force","allListeners","__allListeners","dtd","_","X","A","isindex","fieldset","B","input","button","select","textarea","label","C","D","iframe","E","menu","noscript","dir","noframes","F","script","G","acronym","kbd","strike","q","samp","dfn","H","embed","object","basefont","map","applet","I","J","K","form","L","M","N","O","param","P","Q","R","S","base","link","meta","title","T","U","V","block","empty","command","dialog","keygen","track","wbr","$nonBodyContent","$block","$inline","$inlineWithA","$body","$cdata","$empty","$nonChild","$listItem","$list","$isNotEmpty","$removeEmpty","$removeEmptyBlock","$tableContent","$notTransContent","option","optgroup","legend","getDomNode","ltr","startFromChild","guard","tmpNode","parent","tagName","attrFix","tabindex","readonly","maxlength","cellspacing","cellpadding","rowspan","colspan","usemap","frameborder","styleBlock","domUtils","NODE_ELEMENT","NODE_DOCUMENT","NODE_TEXT","NODE_COMMENT","NODE_DOCUMENT_FRAGMENT","POSITION_IDENTICAL","POSITION_DISCONNECTED","POSITION_FOLLOWING","POSITION_PRECEDING","POSITION_IS_CONTAINED","POSITION_CONTAINS","fillChar","keys","getPosition","nodeA","nodeB","parentsA","parentsB","reverse","nextSibling","getNodeIndex","ignoreTextNode","preNode","previousSibling","inDoc","findParent","filterFn","includeSelf","isBody","findParentByTagName","tagNames","excludeFn","findParents","closerFirst","parents","insertAfter","newNode","insertBefore","remove","keepChildren","child","hasChildNodes","firstChild","getNextDomNode","getPreDomNode","isBookmarkNode","getWindow","ownerDocument","defaultView","parentWindow","getCommonAncestor","clearEmptySibling","ignoreNext","ignorePre","clear","next","isEmptyInlineElement","nodeValue","offset","createTextNode","retval","splitText","isWhitespace","getXY","y","offsetParent","offsetTop","offsetLeft","handler","_d","els","evt","srcElement","event","un","detachEvent","isSameElement","thisAttrs","attributes","otherAttrs","attrA","attrB","al","bl","nodeName","specified","isSameStyle","getNamedItem","styleA","styleB","isBlockElm","getComputedStyle","breakParent","parentClone","leftNodes","rightNodes","cloneNode","trimWhiteTextNode","mergeChild","attrs","childNodes","filter","className","hasClass","arr","n","ni","mergeToParent","textDecoration","mergeSibling","merge","rtl","lastChild","unSelectable","onselectstart","onclick","onkeyup","onkeydown","unselectable","all","MozUserSelect","webkitUserSelect","msUserSelect","KhtmlUserSelect","removeAttributes","attrNames","getAttributeNode","removeAttributeNode","removeAttribute","setAttributes","attr","styleName","pros","fontSize","offsetHeight","getStyle","getPropertyValue","currentStyle","removeClasses","elm","classNames","cls","addClass","isRegExp","preventDefault","returnValue","removeStyle","removeProperty","setStyle","setStyles","styles","removeDirtyAttr","nodes","getChildCount","count","first","isEmptyNode","isBr","clearSelectedArr","scrollToView","getViewPaneSize","mode","width","clientWidth","height","clientHeight","getScrollPosition","pageXOffset","pageYOffset","scrollLeft","scrollTop","winHeight","elementPosition","currentScroll","scrollTo","isFillChar","isInStart","text","isStartInblock","range","tmpRange","cloneRange","flag","startContainer","startOffset","setStartBefore","setStart","collapse","isEmptyBlock","setViewportOffset","rect","getBoundingClientRect","fillNode","moveChild","hasNoAttributes","outerHTML","isCustomeNode","getAttribute","isTagNode","filterNodeList","nodelist","forAll","results","isFunction","isInNodeEndBoundary","rng","isBoundaryNode","fillHtml","fillCharReg","guid","fillData","updateCollapse","collapsed","endContainer","endOffset","selectOneNode","setEndPoint","toStart","execContentsAction","action","end","frag","createDocumentFragment","tmpStart","tmpEnd","substringData","deleteData","current","currentLevel","startParents","endParents","si","slice","ei","Range","me","removeFillData","excludeNode","contains","cloneContents","deleteContents","txt","extractContents","setEnd","setStartAfter","setEndAfter","setEndBefore","setStartAtFirst","setStartAtLast","setEndAtFirst","setEndAtLast","selectNode","selectNodeContents","shrinkBoundary","ignoreEnd","check","trimBoundary","txtToElmBoundary","textNode","ignoreCollapsed","adjust","container","insertNode","nextNode","setCursor","toEnd","noFillData","createBookmark","serialize","same","endNode","startNode","moveToBookmark","bookmark","enlarge","toBlock","stopFn","enlargeToBlockElm","adjustmentBoundary","applyInlineStyle","level","aNode","removeInlineStyle","getClosedNode","textRange","nativeRange","createControlRange","addElement","createTextRange","moveToElementText","moveStart","nativeRangeEnd","tmpText","notInsertFillData","checkOffset","sel","getSelection","txtNode","focus","removeAllRanges","createRange","addRange","inFillChar","createAddress","ignoreTxt","addr","getAddress","isStart","addrs","firstIndex","startAddress","endAddress","concat","moveToAddress","getNode","equals","traversal","doFn","getBoundaryInformation","getIndex","duplicate","parentElement","siblings","children","testRange","startIndex","endIndex","distance","position","compareEndPoints","transformIERangeToRange","ieRange","bi","_getIERange","getNative","el","Selection","frameElement","_bakIERange","getIERange","ex","rangeInBody","txtRange","selection","_cachedRange","getRange","_cachedStartElement","getStart","_cachedStartElementPath","getStartElementPath","isFocus","rangeCount","optimze","firstRange","getRangeAt","lastRange","_bakRange","min","getText","nativeSel","clearRange","uid","_selectionChangeTimer","setValue","tis","options","hasContents","allHtmlEnabled","getAllHtml","getContent","loadPlugins","pi","checkCurLang","lang","langReadied","langIsReady","Editor","shortcutkeys","inputRules","outputRules","setOpt","defaultOptions","loadServerConfig","plugin","load","langPath","registerCommand","getOpt","destroy","display","offsetWidth","delEditor","render","getStyleValue","initialFrameWidth","minFrameWidth","initialFrameHeight","minFrameHeight","zIndex","iframeCssUrl","initialStyle","customDomain","domain","overflow","_setup","disabled","contentEditable","spellcheck","geckoSel","_initEvents","autoSyncData","initialContent","autoClearinitialContent","oldExecCommand","execCommand","_setDefaultContent","setContent","focusInEnd","_selectionChange","fullscreen","ui","setFullScreen","_bindshortcutKeys","_bakNativeRange","setInterval","isShow","setHide","setDisabled","sync","formId","setHeight","notSetHeight","addshortcutkey","cmd","keyCode","which","$1","ctrlKey","metaKey","$2","$3","queryCommandState","notSetCursor","ignoreBlank","formatter","root","htmlparser","filterOutputRule","toHtml","headHtml","headHtmlForIE9","charset","getPlainTxt","getContentTxt","isAppendTo","notFireSelectionchange","filterInputRule","isCdataDiv","enterTag","blur","nativeRng","_proxyDomEvent","stopPropagation","shiftKey","altKey","hackForMouseUp","mouseX","mouseY","clientX","clientY","moveToPoint","bakGetIERange","_callCmdFn","fnName","args","cmdName","cmdFn","notNeedUndo","__hasEnterExecCommand","ignoreContentChange","_ignoreContentChange","queryCommandValue","tags","cn","reset","setEnabled","lastBk","bkqueryCommandState","bkqueryCommandValue","enable","except","disable","cont","setShow","show","hide","getLang","getContentLength","ingoneHtml","addInputRule","rule","addOutputRule","getActionUrl","actionName","imageUrl","_url","autoClearEmptyNode","imagePopup","theme","themePath","scaleEnabled","tableNativeEditInFF","fileNameFormat","configUrl","isJsonp","_serverConfigLoaded","ajax","request","config","eval","responseText","showErrorMsg","msg","console","isServerConfigLoaded","afterConfigReady","readyHandler","fnStr","ActiveXObject","creatAjaxRequest","doAjax","ajaxOptions","xhr","timeIsOut","defaultAjaxOptions","method","timeout","async","data","onsuccess","ajaxOpts","submitStr","abort","Date","open","status","setRequestHeader","send","doJsonp","opts","successhandler","scr","callbackField","callbackFnName","timeOut","timer","matches","random","getCallBack","search","queryStr","createScriptTag","onTimeOut","exception","oncomplete","dataType","getJSONP","filterWord","isWordDocument","transUnit","filterPasteWord","marks","parts","uNode","notTransAttrs","notTransTagName","indentChar","breakChar","insertLine","begin","insertIndent","createText","noTrans","nodeToHtml","isText","isElement","isComment","attrhtml","getNodeById","getAttr","getNodesByTagName","nodeTraversal","htmlstr","tmpRoot","innerText","textStr","getData","replaceChild","cj","attrName","setAttr","attrVal","isObject","cssStyle","re_tag","re_attr","allowEmptyTags","needParentNode","needChild","htmlattr","needParentTag","tmpParent","hasParent","comment","currentIndex","nextIndex","currentParent","lastIndex","filterNode","rules","tmpAttrs","tmpVal","tmpCssStyle","_plugins","register","pluginName","oldOptionName","afterDisabled","optionName","execFn","_export","eventName","execName","run","exeFn","keymap","LocalStorage","storage","localStorage","getUserData","LOCAL_FILE","saveLocalData","setItem","getLocalData","addBehavior","save","ROOTKEY","setPreferences","getPreferences","removePreferences","allowDivTransToP","tdParent","cdata_tag","cdata_data","last","tmpNodes","disabledTableInTable","notNeedFilter","filterRules","hadBreak","tmpLi","autoHeightEnabled","mergeEmptyline","removeClass","removeEmptyline","textAlign","imageBlockLine","pasteFilter","clearFontSize","clearFontFamily","removeEmptyNode","removeTagNames","indent","indentValue","bdc2sb","tobdc","autotypeset","remainClass","remainTag","highlightCont","readLocalOpts","isLine","notEmpty","removeNotAttributeSpan","autotype","fontFamily","textIndent","pN","pNode","ToDBC","DBC2SB","fromCharCode","txtstring","cookieOpt","shortcutkey","submit","cssRuleId","isSetColored","stringToObj","substr","setBackground","orgFn","bindEvents","su","imagePath","substring","bgObj","inputRule","outputRule","align","floatStyle","unhtmlData","imgCi","_src","alt","hspace","vspace","defaultValue","justify","doJustify","bookmark2","common","cell","fonts","needCmd","needSetChild","mergeWithParent","bk","mergesibling","backgroundColor","spanParent","styleVal","optimize","highlight","doLink","rngClone","textValue","_href","as","ps","pe","deleteIframe","_iframe","notIncludeA","tagReg","removeFormatTags","removeFormatAttributes","isRedundantSpan","doRemove","bookmark1","getObj","startBlock","endBlock","blockquotes","doEnd","childs","bkEnd","curNode","print","w","d","close","notExchange","doParagraph","sourceCmdName","para","doDirectionality","forward","format","date","formatTime","hh","ii","ss","formatDate","yyyy","yy","mm","filterTxtRules","brs","notNeedCodeQuery","help","undo","redo","searchreplace","preview","insertparagraph","elementpath","insertcode","inserthtml","selectall","orgQuery","fillchar","evtName","anchorname","anchor","ignores","notBreakTags","isHr","pageBreakTag","noshade","size","images","urlList","word_img","saveSceneTimer","maxUndoCount","maxInputCount","noNeedFillCharTags","orgState","compareAddr","indexA","indexB","compareRangeAddress","rngAddrA","rngAddrB","UndoManager","hasUndo","hasRedo","content","restore","scene","update","clearKey","getScene","rngAddress","notCompareRange","currentScene","lastScene","keycont","lastKeyCode","undoManger","saveScene","Array","exclude","inputType","isCollapsed","interalTimer","clearInterval","stopCmdUndo","startCmdUndo","initZeroClipboard","ZeroClipboard","debug","swfPath","client","zeroclipboard","setText","textContent","setHtml","alert","getClipboardData","callback","pastebin","pastebins","querySelectorAll","retainOnlyLabelPasted","txtContent","htmlContent","getPureHtml","atr","divs","di","tmpP","metas","dirtyNodes","spans","plainType","tmpAddress","transP","removeNode","$","pasteplain","customStyle","listDefaultPaddingLeft","listiconpath","maxListLevel","disablePInList","listToArray","listStyle","insertorderedlist","insertunorderedlist","liiconpath","customCss","pn","newChildrens","lastNode","autoTransWordToList","checkListType","unorderlisttype","orderlisttype","appendLi","cacheNode","adjustListStyle","ignore","nodeStyleType","parentStyleType","styleIndex","setListStyle","paddingLeft","adjustList","ignoreEmpty","nextList","preList","preventAndSave","findList","parentList","nextLi","checkLevel","levelNum","parentLi","closeList","getLi","bko","modifyStart","modifyEnd","startParent","endParent","nodeStyle","tmpFrag","tmpfrag","hasBlock","tmpDiv","tmpDivs","sourceEditors","holder","onresize","setSelectionRange","dispose","codemirror","codeEditor","CodeMirror","tabMode","lineNumbers","lineWrapping","getWrapperElement","getScrollerElement","refresh","getCodeMirror","getValue","sourceMode","sourceEditor","orgSetContent","sourceEditorFirst","createSourceEditor","bakCssText","oldGetContent","bakAddress","oldQueryCommandState","hTag","doSave","h","startTd","endTd","Backspace","Tab","excludeTagNameForTabKey","tabSize","tabNode","autoClearTagName","elementUpdated","Scale","resizer","cover","prePos","startPos","init","dragId","hands","getDom","initStyle","initEvents","isDraging","_eventHandler","hand","proxy","updateContainerStyle","updateTargetElement","attachTo","_validScaledProp","prop","ele","wrap","isNaN","hideCover","showCover","editorPos","iframePos","targetObj","imgPos","borderLeftWidth","borderTopWidth","imageScale","imageScaleEnabled","_keyDownHandler","_mouseDownHandler","charCode","keyCodes","checkIsCludeLink","bakOverflow","lastHeight","currentHeight","adjustHeight","isFullscreen","f","enableAutoHeight","overflowY","disableAutoHeight","lastScrollY","onscroll","scrollY","topOffset","optsAutoFloatEnabled","autoFloatEnabled","uiUtils","LteIE6","checkHasUI","autofloatMsg","fixIE6FixedPos","docStyle","backgroundImage","backgroundAttachment","placeHolder","toolbarBox","orgTop","setFloating","toobarBoxPos","origalFloat","origalLeft","unsetFloating","updateFloating","rect3","toolbarTopOffset","defer_updateFloating","getClientRect","enabled","creatInsertStr","classname","ext","lastIndexOf","switchImgAndVideo","img2video","videoObjs","cl","vi","UETable","indexTable","selectedTds","cellsRange","removeSelectedClass","cells","addSelectedClass","getWidth","getTableCellAlignState","tempStatus","isSame","cellNode","currentState","getTableItemsByRange","getUETableBySelected","ueTable","getDefaultValue","borderMap","thin","medium","thick","tableBorder","tdPadding","tdBorder","tmpValue","insertRow","insertCell","getUETable","tdOrTable","cloneCell","ignoreMerge","keepPro","tmpCell","rowSpan","colSpan","borderLeftStyle","borderTopStyle","borderLeftColor","borderRightColor","borderRightWidth","borderTopColor","borderBottomColor","borderBottomWidth","getMaxRows","rows","maxLen","row","currentMax","getMaxCols","cellRows","cellsNum","getCellColIndex","getHSideCell","cellInfo","getCellInfo","previewRowIndex","previewColIndex","colIndex","beginColIndex","colsNum","endColIndex","rowIndex","beginRowIndex","getCell","cellIndex","showError","getTabNextCell","preRowIndex","nextCell","getVSideCell","ignoreRange","nextRowIndex","nextColIndex","rowsNum","endRowIndex","getSameEndPosCells","xOrY","returns","setCellContent","getSameStartPosXCells","dNum","tds","selectTds","startInfo","endInfo","rowInfo","numCols","deleteCell","getCellsRange","cellA","cellB","checkRange","tmpBeginRowIndex","tmpBeginColIndex","tmpEndRowIndex","tmpEndColIndex","cellAInfo","cellBInfo","getCells","clearSelected","tdHash","returnTds","setSelected","isFullRow","isFullCol","ths","getNextCell","getPreviewCell","moveContent","cellTo","cellFrom","mergeRight","rightColIndex","rightCellInfo","rightCell","mergeDown","downRowIndex","downCellInfo","downCell","mergeRange","leftTopCell","info","deleteRow","curIndex","sourceCell","isInsertTitle","replaceTdToTh","tableRow","infoRow","nextRow","insertCellIndex","preMerged","getPreviewMergedCellsNum","deleteTds","cacheMap","tmpRowIndex","tmpCellIndex","mergeTds","insertCol","backWidth","isInsertTitleCol","preCell","updateWidth","tmpWidth","deleteCol","tableRows","backTableWidth","backTdWidth","toFixed","splitToCells","splitToRows","splitToCols","endRow","indexRow","num","endCol","isLastCell","getLastCell","firstInfo","cols","selectRow","selectTable","repeat","colorList","colors","getColor","removeBackground","UT","createTable","tdWidth","numRows","tdvalign","defaultCols","defaultRows","firstParentBlock","tableWidth","getSelectedArr","valign","firstRow","lastRow","resetTdWidth","tableItems","ut","maxRowNum","newCell","maxColNum","getAverageWidth","tb","averageWidth","sumWidth","tbAttr","ceil","setAverageWidth","getAverageHeight","averageHeight","rowNum","sumHeight","tdpadding","captionArr","thArr","captionHeight","thHeight","trs","setAverageHeight","verticalAlign","vAlign","activeMenuCell","borderColor","bkColor","interlaced","classList","borderWidth","borderStyle","getTableWidth","tdsWidths","needIEHack","tabTimer","tableDragTimer","tableResizeTimer","cellMinWidth","isInResizeBuffer","cellBorderWidth","offsetOfTableCell","singleClickState","userActionStatus","dblclickTime","orgGetText","currentTd","onDrag","onBorder","dragButton","dragOver","dragLine","dragTd","mousedown","tableCopyList","toggleDraggableState","cloneTd","tables","removeStyleSize","wordBreak","hideDragLine","onmouseover","onmousemove","tableDragable","toggleDragButton","onmouseout","getParentTdOrTh","inTableSide","endTdCol","endTdRow","switchBorderColor","mouseMoveEvent","getClass","mouseDownEvent","mouseUpEvent","currentRowIndex","ua","notCtrlKey","ratio","backWidths","datatat","cmdFun","lastState","lastValue","state","replaceToProperty","mouseCoords","pageX","pageY","clientLeft","clientTop","isEditorDisabled","pos","abs","clearTableDragTimer","tableBorderDrag","getPermissionX","getPermissionY","getRelation","cursor","cursorpath","curCell","dragButtonTimer","createDragButton","doClick","doDblClick","capHeight","preTd","nextTd","mousePosY","draggable","mousePos","getDragLine","showDragLineAt","getResizeLineByUETable","lineId","line","contnetEditable","background","updateResizeLine","uetable","showResizeLine","elePos","getTargetTd","tableClickHander","clearTableTimer","tableDbclickHandler","getCellsByMoveBorder","extractArray","oldWidth","newWidth","changeable","change","getTabcellSpace","mouseOverEvent","borderActionHandler","reconstruct","originArr","newObj","dragTdPos","dragLinePos","changeColWidth","changeRowHeight","tar","setCellHeight","backHeight","lineHight","tmpHeight","changeValue","correctChangeValue","cellGroup","isContainMergeCell","temp","borderCells","tabRow","currIndex","tabCell","getMinWidthByTableCells","minWidth","Number","MAX_VALUE","getTableCellWidth","relatedCell","direction","getTableCellOffset","tab","offsetVal","prev","tabcellSpace","trow","tabcell","mirror","paddingSpace","tmpTabWidth","contenteditable","tablePos","cellPos","css","tableArr","cellWidth","cellHeight","sortTable","sortByCellIndex","trArray","lastRowIndex","Fn","td1","td2","value1","value2","tr1","tr2","fragment","items","contextMenu","cleardoc","confirm","confirmclear","unlink","group","paragraph","icon","subMenu","justifyleft","justifyright","justifycenter","justifyjustify","inserttable","deletetable","deleterow","deletecol","insertcol","insertcolnext","insertrow","insertrownext","insertcaption","deletecaption","inserttitle","deletetitle","inserttitlecol","deletetitlecol","mergecells","mergeright","mergedown","splittorows","splittocols","splittocells","averageDiseRow","averageDisCol","edittd","getDialog","edittable","setbordervisible","tablesort","enablesort","disablesort","reversecurrent","orderbyasc","reversebyasc","orderbynum","reversebynum","borderbk","setcolor","unsetcolor","setbackground","unsetbackground","redandblue","threecolorgradient","aligntd","aligntable","tableleft","tablecenter","tableright","insertparagraphbefore","insertparagraphafter","getViewportOffsetByEvent","contextItems","subItem","query","getLabel","Menu","showAt","clip","shortcutMenu","customEvt","screenX","screenY","ShortCutMenu","isHidden","basestyles","names","addList","addFormat","imgT","_blockElm","findTextInString","searchStr","casesensitive","findTextBlockElm","methodName","findNTextInBlockElm","currentNode","currentNodeLength","searchReplace","startBlockNode","rngText","replaceStr","replaceText","rngStart","rngEnd","tmpObj","catchRemoteImageEnable","catcherLocalDomain","catcherActionUrl","catcherUrlPrefix","catcherFieldName","remoteImages","imgs","urls","host","catchremoteimage","success","oldSrc","newSrc","callbacks","params","snapplugin","getLocation","pathname","hash","local","onSuccess","rs","snapscreenUrlPrefix","snapscreenImgAlign","callBackErrorMsg","saveSnapshot","_dialogs","front","createInsertStr","toEmbed","logo","cssfloat","tnode","musicObj","sendAndInsertFile","file","fieldName","urlPrefix","maxSize","allowFiles","actionUrl","loadingHtml","errorHandler","successHandler","filetype","loadingId","loader","original","fileext","XMLHttpRequest","fd","FormData","append","response","er","getPasteImage","clipboardData","getDropImage","dataTransfer","files","FileReader","hasImg","getAsFile","lastSaveTime","MIN_TIME","saveKey","saveData","_saveFlag","saveInterval","_suffix","tableNode","flagText","validData","subTitle","xTitle","yTitle","suffix","tip","dataFormat","tableDataFormat","chartType","firstRows","cellCount","Section","nextSection","previousSection","parentSection","getSection","getNodeFromAddress","bindMultiEvents","levels","levelFn","getSectionLevel","Directory","previous","tmpSection","sourceSection","targetSection","isAfter","targetAddress","isContainsAddress","addressTarget","isAfterStartAddress","isBeforeEndAddress","isLoaded","containerBtn","initUploadBtn","btnIframe","btnStyle","timestrap","wrapper","btnIframeDoc","btnIframeBody","contentDocument","contentWindow","imageFieldName","imageActionUrl","imageurl","imageUrlPrefix","showErrorLoader","filename","stateTimer","serverParam","getFileIcon","maps","filelist","iconDir","xssFilter","tagList","magic","uidMagic","uidCount","hook","dg","_callbacks","createElementByHtml","getViewportElement","bcr","getViewportRect","viewportEl","innerWidth","innerHeight","fixedLayer","getFixedLayer","getEventOffset","frameEl","setGlobal","unsetGlobal","copyAttributes","tgt","attrNode","elA","elB","compareDocumentPosition","startDrag","startX","startY","handleMouseMove","ondragmove","cancelBubble","handleMouseUp","ondragstop","releaseCaptrue","releaseCapture","setCapture","ondragstart","layer","bindFixedLayer","updateFixedOffset","makeUnselectable","WebkitUserSelect","adjOffset","UIBase","uiName","initOptions","initUIBase","_globalKey","renderHtml","seatEl","postRender","getHtmlTpl","formatHtml","tpl","prefix","box","Separator","initSeparator","Mask","_fill","_onMouseDown","_onClick","vpRect","Popup","initPopup","allPopups","closeAllPopup","queryAutoHide","postHide","ANCHOR_CLASSES","SHADOW_RADIUS","_hidden","autoRender","canSideLeft","canSideUp","getContentHtmlTpl","_UIBase_postRender","captureWheel","captured","_height","_top","combox","ifr","wheelDelta","detail","_doAutoRender","mesureSize","fitSize","sized","__size","popBodyEl","showAnchor","hoz","showAnchorRect","adj","visibility","_show","popSize","sideLeft","sideUp","popEl","notNofity","ColorPicker","noColorText","genColorPicker","_onTableClick","_onTableOver","_onTableOut","_onPickNoColor","COLORS","TablePicker","initTablePicker","defaultNumRows","defaultNumCols","maxNumRows","maxNumCols","lengthOfCellSide","_UIBase_render","_track","sideLen","_onMouseOver","rel","relatedTarget","fromElement","_onMouseOut","toElement","_onMouseMove","TPL_STATEFUL","Stateful","alwalysHoverable","Stateful_init","_Stateful_dGetHtmlTpl","Stateful_getHtmlTpl","Stateful_onMouseEnter","isDisabled","addState","Stateful_onMouseLeave","removeState","Stateful_onMouseOver","Stateful_onMouseOut","Stateful_onMouseDown","Stateful_onMouseUp","Stateful_postRender","hasState","getStateDom","isChecked","setChecked","checked","Button","btnName","cssRules","initButton","showIcon","showText","setTitle","SplitButton","initSplitButton","popup","setPopup","_onPopupShow","_onPopupHide","showPopup","_onArrowClick","_onButtonClick","ColorButton","initColorButton","onpickcolor","_onPickColor","onpicknocolor","_SplitButton_postRender","setColor","TableButton","initTableButton","onpicktable","_onPickTable","AutoTypeSetPicker","initAutoTypeSetPicker","textAlignInputName","imageBlockInputName","symbolConverInputName","mergeLine","delLine","removeFormat","alignment","imageFloat","removeFontsize","removeFontFamily","removeHtml","symbol","AutoTypeSetButton","initAutoTypeSetButton","getPara","editorId","ipts","ipt","attrValue","iptChilds","iptchild","selects","popupUI","btn","radioTd","radios","defalutSelect","checkboxs","CellAlignPicker","initSelected","initCellAlignPicker","middle","selected","selectedIndex","alignType","COUNT","tempClassName","tempIndex","tmpl","PastePicker","initPastePicker","_isTransfer","cur","screenHt","subPop","Toolbar","initToolbar","add","buff","initMenu","menuSeparator","initItems","getSeparator","MenuItem","createItem","_Popup_getContentHtmlTpl","_Popup_postRender","ownerMenu","clearItems","_showingTimer","_closingTimer","parentMenu","renderLabelHtml","delayShowSubMenu","delayHideSubMenu","hideSubMenu","_bakQueryAutoHide","tabIndex","showSubMenu","this_","Combox","initCombox","onbuttonclick","selectByIndex","setLabel","initValue","indexByValue","getLabelForUnknowValue","Dialog","autoReset","onok","oncancel","onclose","ok","holdScroll","initDialog","modalMask","dragMask","activeDialog","closeButton","closeDialog","initResizeEvent","buttons","__resizeTimer","dialogWrapNode","contentNode","wrapRect","contentRect","safeSetOffset","showAtCenter","titleHeight","_originalContext","overflowX","getContentHtml","contentHtml","iframeUrl","footHtml","_hide","dialogBodyStyle","_onTitlebarMouseDown","wrapNode","_onCloseButtonClick","MenuButton","initMenuButton","_value","MultiMenuPop","initMultiMenu","iframe_rendered","onshow","UI","allMenus","timeID","isSubMenuShow","initShortCutMenu","hideAllMenu","SPACE","initEvent","getSubMenuMark","eventType","wt","ht","distanceX","distanceY","setOpacity","relatedTgt","opacity","layerEle","hasContextmenu","fixedlayer","setPos","setPosByCxtMenu","Breakline","Message","initMessage","keepshow","setType","closer","getType","editorui","_Dialog","scrollX","iframeUrlMap","btnCmds","labelMap","causeByUi","uiReady","typeset","cmd2","dialogBtns","noOk","vals","mapUrl","unNeedCheckState","snapscreen","onselect","fontfamily","langLabel","fontsize","customstyle","langCs","ck","lineheight","rowspacings","ri","lists","_onMenuClick","isFullScreen","iconSpan","nodeStack","EditorUI","initEditorUI","_initToolbars","_actualFrameWidth","wordCount","countFn","setCount","_scale","enableScale","disableScale","pastePop","isPaste","wordCountMsg","wordOverFlowMsg","errMsg","countDom","_onEditButtonClick","linkDialog","_onImgEditButtonClick","_onImgSetFloat","_setIframeAlign","frame","anchorEl","newFrame","_updateIframe","mapDialog","insertframeDialog","_onRemoveButtonClick","dialogs","dialogName","toolbarUis","toolbar","toolbarUi","toolbarItem","toolbarItemUi","itemUI","renderToolbarBoxHtml","showWordImageDialog","_fullscreen","_bakHtmlOverflow","_bakBodyOverflow","_bakAutoHeight","_bakScrollTop","_bakEditorContaninerWidth","_bakCssText","_bakCssText1","_updateFullScreen","scroll","triggerLayout","_updateElementPath","disableElementPath","enableElementPath","editorHolder","editorDocument","bottombar","scale","scalelayer","isMouseMove","minEditorHeight","minEditorWidth","scaleWidth","scaleHeight","down","move","up","fullScreen","clearSelection","timerId","updateFullScreenTime","showToolbarMsg","hideToolbarMsg","zoom","instances","oldRender","renderUI","newDiv","displays","styleWidth","getEditor","registerUI","_messageItems","updateHolderPos","message","mid","toolbarbox","_currentElement","_flashState","bridge","pluginType","outdated","unavailable","deactivated","overdue","_clipData","_clipDataFormatMap","_clientIdCounter","_clientMeta","_elementIdCounter","_elementMeta","_camelizeCssPropName","matcherRegex","replacerFn","_getStyle","camelProp","_elementMouseOver","activate","_addEventHandler","func","_removeEventHandler","_addClass","setClass","_removeClass","_getZoomFactor","physicalWidth","logicalWidth","zoomFactor","_getDOMObjectPosition","defaultZIndex","_getSafeZIndex","leftBorderWidth","topBorderWidth","_cacheBust","cacheBust","getTime","_vars","domains","trustedOriginsExpanded","trustedDomains","_extractDomain","forceEnhancedClipboard","_inArray","elem","fromIndex","_prepClip","elements","TypeError","_dispatchCallback","_globalConfig","_extend","arg","copy","originOrUrl","protocolIndex","pathIndex","_determineScriptAccess","_extractAllDomains","origins","resultsArray","currentDomain","configOptions","swfDomain","trustedOrigins","_objectKeys","_deleteOwnProperties","_safeActiveElement","activeElement","err","_pick","_omit","_mapClipDataToFlash","clipData","newClipData","formatMap","rtf","_mapClipResultsFromFlash","clipResults","newResults","tmpHash","_args","arraySlice","_detectFlashSupport","ax","mimeType","hasFlash","isActiveX","isPPAPI","flashVersion","parseFlashVersion","desc","isPepperFlash","flashPlayerFileName","inspectPlugin","description","mimeTypes","enabledPlugin","GetVariable","e1","e2","e3","instance","handlers","isFlashUnusable","_client","maxWait","flashLoadTimeout","emit","_bridge","setData","setRichText","richText","clearData","setSize","_setSize","_setHandCursor","setHandCursor","unclip","_getAllClients","clients","clientIds","forceHandCursor","autoActivate","deactivate","clientId","flashBridge","htmlBridge","_getHtmlBridge","removeSwfFromIE","hoverClass","activeClass","_reposition","newTitle","useHandCursor","flash","dataObj","allowScriptAccess","allowNetworking","flashvars","swfUrl","_createHtmlBridge","divToBeReplaced","oldIE","eventObj","performCallbackAsync","eventCopy","returnVal","_createEvent","_preprocessEvent","_dispatchClientCallbacks","_getAllClientsClippedToElement","originalContext","handleEvent","_eventMessages","currentTarget","minimumVersion","_getRelatedTarget","targetEl","relatedTargetId","wasDeactivated","events","added","errorTypes","foundIndex","perEventHandlers","zcClippingId","clippedElements","arrayIndex","elementMetaId","searchError","lang_city","lang_address","city","lang_search","lang_dynamicmap","cityMsg","errorMsg","lang_tab_search","lang_tab_replace","lang_search1","lang_search2","lang_replace","lang_searchReg","lang_searchReg1","lang_case_sensitive1","lang_case_sensitive2","nextFindBtn","preFindBtn","nextReplaceBtn","preReplaceBtn","repalceBtn","repalceAllBtn","getEnd","countMsg","lang_showMsg","lang_download","lang_step1","lang_step2","tsfh","lmsz","szfh","rwfh","xlzm","ewzm","pyzm","yyyb","zyzf","captionName","titleName","cellsName","lang_delRow","lang_delCol","lang_tdBkColor","lang_resave","uploadBtn","clipboard","lang_step"],"mappings":";;;;;;;;AAAA;;AACA;;AACA,yB;;;;;;;ACFA,gF;;;;;;;ACAA,gF;;;;;;;ACAA,gF;;;;;;;ACAA,gF;;;;;;;;;;ACAA;;;;AAIA;;;;;;;AAOE;;;;;;;;AAQA;;AAEA,IAAIA,MACFC,OAAOC,QAAP,CAAgBC,IAAhB,CAAqBC,OAArB,CAA6B,QAA7B,IAAyC,CAAC,CAA1C,GACIH,OAAOC,QAAP,CAAgBC,IAAhB,CAAqBE,KAArB,CAA2B,QAA3B,EAAqC,CAArC,IAA0C,GAD9C,GAEIJ,OAAOC,QAAP,CAAgBC,IAAhB,CAAqBE,KAArB,CAA2B,GAA3B,EAAgC,CAAhC,CAHN;AAIA;;;AAGAJ,OAAOK,cAAP,GAAwB;AACtB;AACAC,oBAAkBP,MAAM,oBAFF;;AAItB;AACAQ,aAAWR,MAAM,gCALK;;AAOtB;AACA;;;;;;;;;;;;;AAaAS,YAAU,CACR,CACE,YADF,EAEE,GAFF,EAGE,MAHF,EAIE,MAJF,EAKE,GALF,EAME,MANF,EAOE,QAPF,EAQE,WARF,EASE,YATF,EAUE,eAVF,EAWE,aAXF,EAYE,WAZF,EAaE,cAbF,EAcE,aAdF,EAeE,aAfF,EAgBE,YAhBF,EAiBE,YAjBF,EAkBE,GAlBF,EAmBE,WAnBF,EAoBE,WApBF,EAqBE,mBArBF,EAsBE,qBAtBF,EAuBE,WAvBF,EAwBE,UAxBF,EAyBE,GAzBF,EA0BE,eA1BF,EA2BE,kBA3BF,EA4BE,YA5BF,EA6BE,GA7BF,EA8BE,aA9BF,EA+BE,WA/BF,EAgCE,YAhCF,EAiCE,UAjCF,EAkCE,GAlCF,EAmCE,mBAnCF,EAoCE,mBApCF,EAqCE,QArCF,EAsCE,GAtCF,EAuCE,aAvCF,EAwCE,eAxCF,EAyCE,cAzCF,EA0CE,gBA1CF,EA2CE,GA3CF,EA4CE,aA5CF,EA6CE,aA7CF,EA8CE,GA9CF,EA+CE,MA/CF,EAgDE,QAhDF,EAiDE,QAjDF,EAkDE,GAlDF,EAmDE,WAnDF,EAoDE,WApDF,EAqDE,YArDF,EAsDE,aAtDF,EAuDE,GAvDF,EAwDE,cAxDF,EAyDE,aAzDF,EA0DE,SA1DF,EA2DE,QA3DF,EA4DE,YA5DF,EA6DE,WA7DF,EA8DE,YA9DF,EA+DE,GA/DF,EAgEE,YAhEF,EAiEE,MAjEF,EAkEE,MAlEF,EAmEE,GAnEF,EAoEE,aApEF,EAqEE,aArEF,EAsEE,QAtEF,EAuEE,GAvEF,EAwEE,OAxEF,EAyEE,SAzEF,EA0EE,eA1EF,EA2EE,QA3EF,EA4EE,MA5EF,CADQ,CArBY;AAqGtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACAC,sBAAoB,KA/SE;AAgTtB;AACA;AACA;AACAC,gBAAc,IAnTQ;AAoTtB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA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","file":"0.chunk.js","sourcesContent":["import './ueditor.config';\nimport './ueditor.all';\nimport './lang/zh-cn/zh-cn';\n\n\n// WEBPACK FOOTER //\n// ./../ehuodiManagement/scms/trunk/src/libs/ueditor/index.js","module.exports = __webpack_public_path__ + \"885afa097b98821279ea8aa3c68cc293.gif\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/images/icons-all.gif\n// module id = 124\n// module chunks = 0","module.exports = __webpack_public_path__ + \"6ffe01bf317ac098a88868d5036cc5f8.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/images/icons.png\n// module id = 125\n// module chunks = 0","module.exports = __webpack_public_path__ + \"c58df79dc817794353a65858035b71b6.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/images/tangram-colorpicker.png\n// module id = 126\n// module chunks = 0","module.exports = __webpack_public_path__ + \"c78d50851eeb7922d57ef3281f676dd1.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/images/wordpaste.png\n// module id = 127\n// module chunks = 0","/**\n * ueditor完整配置项\n * 可以在这里配置整个编辑器的特性\n */\n/**************************提示********************************\n * 所有被注释的配置项均为UEditor默认值。\n * 修改默认配置请首先确保已经完全明确该参数的真实用途。\n * 主要有两种修改方案，一种是取消此处注释，然后修改成对应参数；另一种是在实例化编辑器时传入对应参数。\n * 当升级编辑器时，可直接使用旧版配置文件替换新版配置文件,不用担心旧版配置文件中因缺少新功能所需的参数而导致脚本报错。\n **************************提示********************************/\n\n  /**\n   * 编辑器资源文件根路径。它所表示的含义是：以编辑器实例化页面为当前路径，指向编辑器资源文件（即dialog等文件夹）的路径。\n   * 鉴于很多同学在使用编辑器的时候出现的种种路径问题，此处强烈建议大家使用\"相对于网站根目录的相对路径\"进行配置。\n   * \"相对于网站根目录的相对路径\"也就是以斜杠开头的形如\"/myProject/ueditor/\"这样的路径。\n   * 如果站点中有多个不在同一层级的页面需要实例化编辑器，且引用了同一UEditor的时候，此处的URL可能不适用于每个页面的编辑器。\n   * 因此，UEditor提供了针对不同页面的编辑器可单独配置的根路径，具体来说，在需要实例化编辑器的页面最顶部写上如下代码即可。当然，需要令此处的URL等于对应的配置。\n   * window.UEDITOR_HOME_URL = \"/xxxx/xxxx/\";\n   */\n  // var URL = window.UEDITOR_HOME_URL || getUEBasePath();\n\n  var URL =\n    window.location.href.indexOf('/scms/') > -1\n      ? window.location.href.split('/scms/')[0] + '/'\n      : window.location.href.split('#')[0];\n  /**\n   * 配置项主体。注意，此处所有涉及到路径的配置别遗漏URL变量。\n   */\n  window.UEDITOR_CONFIG = {\n    //为编辑器实例添加一个路径，这个不能被注释\n    UEDITOR_HOME_URL: URL + 'scms/libs/ueditor/',\n\n    // 服务器统一请求接口路径\n    serverUrl: URL + '/goodstaxiAdmin/controller.jsp',\n\n    //工具栏上的所有的功能按钮和下拉框，可以在new编辑器的实例时选择自己需要的重新定义\n    /*, toolbars: [[\n            'fullscreen', 'source', '|', 'undo', 'redo', '|',\n            'bold', 'italic', 'underline', 'fontborder', 'strikethrough', 'superscript', 'subscript', 'removeformat', 'formatmatch', 'autotypeset', 'blockquote', 'pasteplain', '|', 'forecolor', 'backcolor', 'insertorderedlist', 'insertunorderedlist', 'selectall', 'cleardoc', '|',\n            'rowspacingtop', 'rowspacingbottom', 'lineheight', '|',\n            'customstyle', 'paragraph', 'fontfamily', 'fontsize', '|',\n            'directionalityltr', 'directionalityrtl', 'indent', '|',\n            'justifyleft', 'justifycenter', 'justifyright', 'justifyjustify', '|', 'touppercase', 'tolowercase', '|',\n            'link', 'unlink', 'anchor', '|', 'imagenone', 'imageleft', 'imageright', 'imagecenter', '|',\n            'simpleupload', 'insertimage', 'emotion', 'scrawl', 'insertvideo', 'music', 'attachment', 'map', 'gmap', 'insertframe', 'insertcode', 'webapp', 'pagebreak', 'template', 'background', '|',\n            'horizontal', 'date', 'time', 'spechars', 'snapscreen', 'wordimage', '|',\n            'inserttable', 'deletetable', 'insertparagraphbeforetable', 'insertrow', 'deleterow', 'insertcol', 'deletecol', 'mergecells', 'mergeright', 'mergedown', 'splittocells', 'splittorows', 'splittocols', 'charts', '|',\n            'print', 'preview', 'searchreplace', 'drafts', 'help'\n        ]]*/\n    toolbars: [\n      [\n        'fullscreen',\n        '|',\n        'undo',\n        'redo',\n        '|',\n        'bold',\n        'italic',\n        'underline',\n        'fontborder',\n        'strikethrough',\n        'superscript',\n        'subscript',\n        'removeformat',\n        'formatmatch',\n        'autotypeset',\n        'blockquote',\n        'pasteplain',\n        '|',\n        'forecolor',\n        'backcolor',\n        'insertorderedlist',\n        'insertunorderedlist',\n        'selectall',\n        'cleardoc',\n        '|',\n        'rowspacingtop',\n        'rowspacingbottom',\n        'lineheight',\n        '|',\n        'customstyle',\n        'paragraph',\n        'fontfamily',\n        'fontsize',\n        '|',\n        'directionalityltr',\n        'directionalityrtl',\n        'indent',\n        '|',\n        'justifyleft',\n        'justifycenter',\n        'justifyright',\n        'justifyjustify',\n        '|',\n        'touppercase',\n        'tolowercase',\n        '|',\n        'link',\n        'unlink',\n        'anchor',\n        '|',\n        'imagenone',\n        'imageleft',\n        'imageright',\n        'imagecenter',\n        '|',\n        'simpleupload',\n        'insertimage',\n        'emotion',\n        'scrawl',\n        'attachment',\n        'pagebreak',\n        'background',\n        '|',\n        'horizontal',\n        'date',\n        'time',\n        '|',\n        'inserttable',\n        'deletetable',\n        'charts',\n        '|',\n        'print',\n        'preview',\n        'searchreplace',\n        'drafts',\n        'help',\n      ],\n    ],\n    //当鼠标放在工具栏上时显示的tooltip提示,留空支持自动多语言配置，否则以配置值为准\n    //,labelMap:{\n    //    'anchor':'', 'undo':''\n    //}\n\n    //语言配置项,默认是zh-cn。有需要的话也可以使用如下这样的方式来自动多语言切换，当然，前提条件是lang文件夹下存在对应的语言文件：\n    //lang值也可以通过自动获取 (navigator.language||navigator.browserLanguage ||navigator.userLanguage).toLowerCase()\n    //,lang:\"zh-cn\"\n    //,langPath:URL +\"lang/\"\n\n    //主题配置项,默认是default。有需要的话也可以使用如下这样的方式来自动多主题切换，当然，前提条件是themes文件夹下存在对应的主题文件：\n    //现有如下皮肤:default\n    //,theme:'default'\n    //,themePath:URL +\"themes/\"\n\n    //,zIndex : 900     //编辑器层级的基数,默认是900\n\n    //针对getAllHtml方法，会在对应的head标签中增加该编码设置。\n    //,charset:\"utf-8\"\n\n    //若实例化编辑器的页面手动修改的domain，此处需要设置为true\n    //,customDomain:false\n\n    //常用配置项目\n    //,isShow : true    //默认显示编辑器\n\n    //,textarea:'editorValue' // 提交表单时，服务器获取编辑器提交内容的所用的参数，多实例时可以给容器name属性，会将name给定的值最为每个实例的键值，不用每次实例化的时候都设置这个值\n\n    //,initialContent:'欢迎使用ueditor!'    //初始化编辑器的内容,也可以通过textarea/script给值，看官网例子\n\n    //,autoClearinitialContent:true //是否自动清除编辑器初始内容，注意：如果focus属性设置为true,这个也为真，那么编辑器一上来就会触发导致初始化的内容看不到了\n\n    //,focus:false //初始化时，是否让编辑器获得焦点true或false\n\n    //如果自定义，最好给p标签如下的行高，要不输入中文时，会有跳动感\n    //,initialStyle:'p{line-height:1em}'//编辑器层级的基数,可以用来改变字体等\n\n    //,iframeCssUrl: URL + '/themes/iframe.css' //给编辑区域的iframe引入一个css文件\n\n    //indentValue\n    //首行缩进距离,默认是2em\n    //,indentValue:'2em'\n\n    //,initialFrameWidth:1000  //初始化编辑器宽度,默认1000\n    //,initialFrameHeight:320  //初始化编辑器高度,默认320\n\n    //,readonly : false //编辑器初始化结束后,编辑区域是否是只读的，默认是false\n\n    //,autoClearEmptyNode : true //getContent时，是否删除空的inlineElement节点（包括嵌套的情况）\n\n    //启用自动保存\n    //,enableAutoSave: true\n    //自动保存间隔时间， 单位ms\n    //,saveInterval: 500\n\n    //,fullscreen : false //是否开启初始化时即全屏，默认关闭\n\n    //,imagePopup:true      //图片操作的浮层开关，默认打开\n\n    //,autoSyncData:true //自动同步编辑器要提交的数据\n    //,emotionLocalization:false //是否开启表情本地化，默认关闭。若要开启请确保emotion文件夹下包含官网提供的images表情文件夹\n\n    //粘贴只保留标签，去除标签所有属性\n    //,retainOnlyLabelPasted: false\n\n    //,pasteplain:false  //是否默认为纯文本粘贴。false为不使用纯文本粘贴，true为使用纯文本粘贴\n    //纯文本粘贴模式下的过滤规则\n    //'filterTxtRules' : function(){\n    //    function transP(node){\n    //        node.tagName = 'p';\n    //        node.setStyle();\n    //    }\n    //    return {\n    //        //直接删除及其字节点内容\n    //        '-' : 'script style object iframe embed input select',\n    //        'p': {$:{}},\n    //        'br':{$:{}},\n    //        'div':{'$':{}},\n    //        'li':{'$':{}},\n    //        'caption':transP,\n    //        'th':transP,\n    //        'tr':transP,\n    //        'h1':transP,'h2':transP,'h3':transP,'h4':transP,'h5':transP,'h6':transP,\n    //        'td':function(node){\n    //            //没有内容的td直接删掉\n    //            var txt = !!node.innerText();\n    //            if(txt){\n    //                node.parentNode.insertAfter(UE.uNode.createText(' &nbsp; &nbsp;'),node);\n    //            }\n    //            node.parentNode.removeChild(node,node.innerText())\n    //        }\n    //    }\n    //}()\n\n    //,allHtmlEnabled:false //提交到后台的数据是否包含整个html字符串\n\n    //insertorderedlist\n    //有序列表的下拉配置,值留空时支持多语言自动识别，若配置值，则以此值为准\n    //,'insertorderedlist':{\n    //      //自定的样式\n    //        'num':'1,2,3...',\n    //        'num1':'1),2),3)...',\n    //        'num2':'(1),(2),(3)...',\n    //        'cn':'一,二,三....',\n    //        'cn1':'一),二),三)....',\n    //        'cn2':'(一),(二),(三)....',\n    //     //系统自带\n    //     'decimal' : '' ,         //'1,2,3...'\n    //     'lower-alpha' : '' ,    // 'a,b,c...'\n    //     'lower-roman' : '' ,    //'i,ii,iii...'\n    //     'upper-alpha' : '' , lang   //'A,B,C'\n    //     'upper-roman' : ''      //'I,II,III...'\n    //}\n\n    //insertunorderedlist\n    //无序列表的下拉配置，值留空时支持多语言自动识别，若配置值，则以此值为准\n    //,insertunorderedlist : { //自定的样式\n    //    'dash' :'— 破折号', //-破折号\n    //    'dot':' 。 小圆圈', //系统自带\n    //    'circle' : '',  // '○ 小圆圈'\n    //    'disc' : '',    // '● 小圆点'\n    //    'square' : ''   //'■ 小方块'\n    //}\n    //,listDefaultPaddingLeft : '30'//默认的左边缩进的基数倍\n    //,listiconpath : 'http://bs.baidu.com/listicon/'//自定义标号的路径\n    //,maxListLevel : 3 //限制可以tab的级数, 设置-1为不限制\n\n    //,autoTransWordToList:false  //禁止word中粘贴进来的列表自动变成列表标签\n\n    //fontfamily\n    //字体设置 label留空支持多语言自动切换，若配置，则以配置值为准\n    //,'fontfamily':[\n    //    { label:'',name:'songti',val:'宋体,SimSun'},\n    //    { label:'',name:'kaiti',val:'楷体,楷体_GB2312, SimKai'},\n    //    { label:'',name:'yahei',val:'微软雅黑,Microsoft YaHei'},\n    //    { label:'',name:'heiti',val:'黑体, SimHei'},\n    //    { label:'',name:'lishu',val:'隶书, SimLi'},\n    //    { label:'',name:'andaleMono',val:'andale mono'},\n    //    { label:'',name:'arial',val:'arial, helvetica,sans-serif'},\n    //    { label:'',name:'arialBlack',val:'arial black,avant garde'},\n    //    { label:'',name:'comicSansMs',val:'comic sans ms'},\n    //    { label:'',name:'impact',val:'impact,chicago'},\n    //    { label:'',name:'timesNewRoman',val:'times new roman'}\n    //]\n\n    //fontsize\n    //字号\n    //,'fontsize':[10, 11, 12, 14, 16, 18, 20, 24, 36]\n\n    //paragraph\n    //段落格式 值留空时支持多语言自动识别，若配置，则以配置值为准\n    //,'paragraph':{'p':'', 'h1':'', 'h2':'', 'h3':'', 'h4':'', 'h5':'', 'h6':''}\n\n    //rowspacingtop\n    //段间距 值和显示的名字相同\n    //,'rowspacingtop':['5', '10', '15', '20', '25']\n\n    //rowspacingBottom\n    //段间距 值和显示的名字相同\n    //,'rowspacingbottom':['5', '10', '15', '20', '25']\n\n    //lineheight\n    //行内间距 值和显示的名字相同\n    //,'lineheight':['1', '1.5','1.75','2', '3', '4', '5']\n\n    //customstyle\n    //自定义样式，不支持国际化，此处配置值即可最后显示值\n    //block的元素是依据设置段落的逻辑设置的，inline的元素依据BIU的逻辑设置\n    //尽量使用一些常用的标签\n    //参数说明\n    //tag 使用的标签名字\n    //label 显示的名字也是用来标识不同类型的标识符，注意这个值每个要不同，\n    //style 添加的样式\n    //每一个对象就是一个自定义的样式\n    //,'customstyle':[\n    //    {tag:'h1', name:'tc', label:'', style:'border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:center;margin:0 0 20px 0;'},\n    //    {tag:'h1', name:'tl',label:'', style:'border-bottom:#ccc 2px solid;padding:0 4px 0 0;margin:0 0 10px 0;'},\n    //    {tag:'span',name:'im', label:'', style:'font-style:italic;font-weight:bold'},\n    //    {tag:'span',name:'hi', label:'', style:'font-style:italic;font-weight:bold;color:rgb(51, 153, 204)'}\n    //]\n\n    //打开右键菜单功能\n    //,enableContextMenu: true\n    //右键菜单的内容，可以参考plugins/contextmenu.js里边的默认菜单的例子，label留空支持国际化，否则以此配置为准\n    //,contextMenu:[\n    //    {\n    //        label:'',       //显示的名称\n    //        cmdName:'selectall',//执行的command命令，当点击这个右键菜单时\n    //        //exec可选，有了exec就会在点击时执行这个function，优先级高于cmdName\n    //        exec:function () {\n    //            //this是当前编辑器的实例\n    //            //this.ui._dialogs['inserttableDialog'].open();\n    //        }\n    //    }\n    //]\n\n    //快捷菜单\n    //,shortcutMenu:[\"fontfamily\", \"fontsize\", \"bold\", \"italic\", \"underline\", \"forecolor\", \"backcolor\", \"insertorderedlist\", \"insertunorderedlist\"]\n\n    //elementPathEnabled\n    //是否启用元素路径，默认是显示\n    //,elementPathEnabled : true\n    elementPathEnabled: false,\n    //wordCount\n    //,wordCount:true          //是否开启字数统计\n    //,maximumWords:10000       //允许的最大字符数\n    maximumWords: 8000,\n    //字数统计提示，{#count}代表当前字数，{#leave}代表还可以输入多少字符数,留空支持多语言自动切换，否则按此配置显示\n    //,wordCountMsg:''   //当前已输入 {#count} 个字符，您还可以输入{#leave} 个字符\n    //超出字数限制提示  留空支持多语言自动切换，否则按此配置显示\n    //,wordOverFlowMsg:''    //<span style=\"color:red;\">你输入的字符个数已经超出最大允许值，服务器可能会拒绝保存！</span>\n\n    //tab\n    //点击tab键时移动的距离,tabSize倍数，tabNode什么字符做为单位\n    //,tabSize:4\n    //,tabNode:'&nbsp;'\n\n    //removeFormat\n    //清除格式时可以删除的标签和属性\n    //removeForamtTags标签\n    //,removeFormatTags:'b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var'\n    //removeFormatAttributes属性\n    //,removeFormatAttributes:'class,style,lang,width,height,align,hspace,valign'\n\n    //undo\n    //可以最多回退的次数,默认20\n    //,maxUndoCount:20\n    //当输入的字符数超过该值时，保存一次现场\n    //,maxInputCount:1\n\n    //autoHeightEnabled\n    // 是否自动长高,默认true\n    //,autoHeightEnabled:true\n\n    //scaleEnabled\n    //是否可以拉伸长高,默认true(当开启时，自动长高失效)\n    //,scaleEnabled:false\n    //,minFrameWidth:800    //编辑器拖动时最小宽度,默认800\n    //,minFrameHeight:220  //编辑器拖动时最小高度,默认220\n\n    //autoFloatEnabled\n    //是否保持toolbar的位置不动,默认true\n    //,autoFloatEnabled:true\n    //浮动时工具栏距离浏览器顶部的高度，用于某些具有固定头部的页面\n    //,topOffset:30\n    //编辑器底部距离工具栏高度(如果参数大于等于编辑器高度，则设置无效)\n    //,toolbarTopOffset:400\n\n    //设置远程图片是否抓取到本地保存\n    //,catchRemoteImageEnable: true //设置是否抓取远程图片\n\n    //pageBreakTag\n    //分页标识符,默认是_ueditor_page_break_tag_\n    //,pageBreakTag:'_ueditor_page_break_tag_'\n\n    //autotypeset\n    //自动排版参数\n    //,autotypeset: {\n    //    mergeEmptyline: true,           //合并空行\n    //    removeClass: true,              //去掉冗余的class\n    //    removeEmptyline: false,         //去掉空行\n    //    textAlign:\"left\",               //段落的排版方式，可以是 left,right,center,justify 去掉这个属性表示不执行排版\n    //    imageBlockLine: 'center',       //图片的浮动方式，独占一行剧中,左右浮动，默认: center,left,right,none 去掉这个属性表示不执行排版\n    //    pasteFilter: false,             //根据规则过滤没事粘贴进来的内容\n    //    clearFontSize: false,           //去掉所有的内嵌字号，使用编辑器默认的字号\n    //    clearFontFamily: false,         //去掉所有的内嵌字体，使用编辑器默认的字体\n    //    removeEmptyNode: false,         // 去掉空节点\n    //    //可以去掉的标签\n    //    removeTagNames: {标签名字:1},\n    //    indent: false,                  // 行首缩进\n    //    indentValue : '2em',            //行首缩进的大小\n    //    bdc2sb: false,\n    //    tobdc: false\n    //}\n\n    //tableDragable\n    //表格是否可以拖拽\n    //,tableDragable: true\n\n    //sourceEditor\n    //源码的查看方式,codemirror 是代码高亮，textarea是文本框,默认是codemirror\n    //注意默认codemirror只能在ie8+和非ie中使用\n    //,sourceEditor:\"codemirror\"\n    //如果sourceEditor是codemirror，还用配置一下两个参数\n    //codeMirrorJsUrl js加载的路径，默认是 URL + \"third-party/codemirror/codemirror.js\"\n    //,codeMirrorJsUrl:URL + \"third-party/codemirror/codemirror.js\"\n    //codeMirrorCssUrl css加载的路径，默认是 URL + \"third-party/codemirror/codemirror.css\"\n    //,codeMirrorCssUrl:URL + \"third-party/codemirror/codemirror.css\"\n    //编辑器初始化完成后是否进入源码模式，默认为否。\n    //,sourceEditorFirst:false\n\n    //iframeUrlMap\n    //dialog内容的路径 ～会被替换成URL,垓属性一旦打开，将覆盖所有的dialog的默认路径\n    //,iframeUrlMap:{\n    //    'anchor':'~/dialogs/anchor/anchor.html',\n    //}\n\n    //allowLinkProtocol 允许的链接地址，有这些前缀的链接地址不会自动添加http\n    //, allowLinkProtocols: ['http:', 'https:', '#', '/', 'ftp:', 'mailto:', 'tel:', 'git:', 'svn:']\n\n    //webAppKey 百度应用的APIkey，每个站长必须首先去百度官网注册一个key后方能正常使用app功能，注册介绍，http://app.baidu.com/static/cms/getapikey.html\n    //, webAppKey: \"\"\n\n    //默认过滤规则相关配置项目\n    //,disabledTableInTable:true  //禁止表格嵌套\n    //,allowDivTransToP:true      //允许进入编辑器的div标签自动变成p标签\n    //,rgb2Hex:true               //默认产出的数据中的color自动从rgb格式变成16进制格式\n\n    // xss 过滤是否开启,inserthtml等操作\n    xssFilterRules: true,\n    //input xss过滤\n    inputXssFilter: true,\n    //output xss过滤\n    outputXssFilter: true,\n    // xss过滤白名单 名单来源: https://raw.githubusercontent.com/leizongmin/js-xss/master/lib/default.js\n    whitList: {\n      a: ['target', 'href', 'title', 'class', 'style'],\n      abbr: ['title', 'class', 'style'],\n      address: ['class', 'style'],\n      area: ['shape', 'coords', 'href', 'alt'],\n      article: [],\n      aside: [],\n      audio: [\n        'autoplay',\n        'controls',\n        'loop',\n        'preload',\n        'src',\n        'class',\n        'style',\n      ],\n      b: ['class', 'style'],\n      bdi: ['dir'],\n      bdo: ['dir'],\n      big: [],\n      blockquote: ['cite', 'class', 'style'],\n      br: [],\n      caption: ['class', 'style'],\n      center: [],\n      cite: [],\n      code: ['class', 'style'],\n      col: ['align', 'valign', 'span', 'width', 'class', 'style'],\n      colgroup: ['align', 'valign', 'span', 'width', 'class', 'style'],\n      dd: ['class', 'style'],\n      del: ['datetime'],\n      details: ['open'],\n      div: ['class', 'style'],\n      dl: ['class', 'style'],\n      dt: ['class', 'style'],\n      em: ['class', 'style'],\n      font: ['color', 'size', 'face'],\n      footer: [],\n      h1: ['class', 'style'],\n      h2: ['class', 'style'],\n      h3: ['class', 'style'],\n      h4: ['class', 'style'],\n      h5: ['class', 'style'],\n      h6: ['class', 'style'],\n      header: [],\n      hr: [],\n      i: ['class', 'style'],\n      img: [\n        'src',\n        'alt',\n        'title',\n        'width',\n        'height',\n        'id',\n        '_src',\n        'loadingclass',\n        'class',\n        'data-latex',\n      ],\n      ins: ['datetime'],\n      li: ['class', 'style'],\n      mark: [],\n      nav: [],\n      ol: ['class', 'style'],\n      p: ['class', 'style'],\n      pre: ['class', 'style'],\n      s: [],\n      section: [],\n      small: [],\n      span: ['class', 'style'],\n      sub: ['class', 'style'],\n      sup: ['class', 'style'],\n      strong: ['class', 'style'],\n      table: ['width', 'border', 'align', 'valign', 'class', 'style'],\n      tbody: ['align', 'valign', 'class', 'style'],\n      td: ['width', 'rowspan', 'colspan', 'align', 'valign', 'class', 'style'],\n      tfoot: ['align', 'valign', 'class', 'style'],\n      th: ['width', 'rowspan', 'colspan', 'align', 'valign', 'class', 'style'],\n      thead: ['align', 'valign', 'class', 'style'],\n      tr: ['rowspan', 'align', 'valign', 'class', 'style'],\n      tt: [],\n      u: [],\n      ul: ['class', 'style'],\n      video: [\n        'autoplay',\n        'controls',\n        'loop',\n        'preload',\n        'src',\n        'height',\n        'width',\n        'class',\n        'style',\n      ],\n    },\n  };\n\n  function getUEBasePath(docUrl, confUrl) {\n    return getBasePath(\n      docUrl || self.document.URL || self.location.href,\n      confUrl || getConfigFilePath()\n    );\n  }\n\n  function getConfigFilePath() {\n    var configPath = document.getElementsByTagName('script');\n\n    return configPath[configPath.length - 1].src;\n  }\n\n  function getBasePath(docUrl, confUrl) {\n    var basePath = confUrl;\n\n    if (/^(\\/|\\\\\\\\)/.test(confUrl)) {\n      basePath =\n        /^.+?\\w(\\/|\\\\\\\\)/.exec(docUrl)[0] + confUrl.replace(/^(\\/|\\\\\\\\)/, '');\n    } else if (!/^[a-z]+:/i.test(confUrl)) {\n      docUrl = docUrl\n        .split('#')[0]\n        .split('?')[0]\n        .replace(/[^\\\\\\/]+$/, '');\n\n      basePath = docUrl + '' + confUrl;\n    }\n\n    return optimizationPath(basePath);\n  }\n\n  function optimizationPath(path) {\n    var protocol = /^[a-z]+:\\/\\//.exec(path)[0],\n      tmp = null,\n      res = [];\n\n    path = path\n      .replace(protocol, '')\n      .split('?')[0]\n      .split('#')[0];\n\n    path = path.replace(/\\\\/g, '/').split(/\\//);\n\n    path[path.length - 1] = '';\n\n    while (path.length) {\n      if ((tmp = path.shift()) === '..') {\n        res.pop();\n      } else if (tmp !== '.') {\n        res.push(tmp);\n      }\n    }\n\n    return protocol + res.join('/');\n  }\n\n  window.UE = {\n    getUEBasePath: getUEBasePath,\n  };\n\n\n\n// WEBPACK FOOTER //\n// ./../ehuodiManagement/scms/trunk/src/libs/ueditor/ueditor.config.js","/*!\r\n * UEditor\r\n * version: ueditor\r\n * build: Wed Aug 10 2016 11:06:16 GMT+0800 (CST)\r\n */\r\nimport './themes/default/css/ueditor.css';\r\nimport './third-party/zeroclipboard/ZeroClipboard';\r\nimport iframeStyleSrc from './themes/iframe.css?asFile'\r\n\r\n    // editor.js\r\n    UEDITOR_CONFIG = window.UEDITOR_CONFIG || {};\r\n\r\n    var baidu = window.baidu || {};\r\n\r\n    window.baidu = baidu;\r\n\r\n    window.UE = baidu.editor = window.UE || {};\r\n\r\n    UE.plugins = {};\r\n\r\n    UE.commands = {};\r\n\r\n    UE.instants = {};\r\n\r\n    UE.I18N = {};\r\n\r\n    UE._customizeUI = {};\r\n\r\n    UE.version = \"1.4.3\";\r\n\r\n    var dom = UE.dom = {};\r\n\r\n    // core/browser.js\r\n    /**\r\n     * 浏览器判断模块\r\n     * @file\r\n     * @module UE.browser\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * 提供浏览器检测的模块\r\n     * @unfile\r\n     * @module UE.browser\r\n     */\r\n    var browser = UE.browser = function () {\r\n        // console.log(9999999999999,UE,9999999);\r\n        var agent = navigator.userAgent.toLowerCase(),\r\n            opera = window.opera,\r\n            browser = {\r\n                /**\r\n                 * @property {boolean} ie 检测当前浏览器是否为IE\r\n                 * @example\r\n                 * ```javascript\r\n                 * if ( UE.browser.ie ) {\r\n                 *     console.log( '当前浏览器是IE' );\r\n                 * }\r\n                 * ```\r\n                 */\r\n                ie: /(msie\\s|trident.*rv:)([\\w.]+)/.test(agent),\r\n\r\n                /**\r\n                 * @property {boolean} opera 检测当前浏览器是否为Opera\r\n                 * @example\r\n                 * ```javascript\r\n                 * if ( UE.browser.opera ) {\r\n                 *     console.log( '当前浏览器是Opera' );\r\n                 * }\r\n                 * ```\r\n                 */\r\n                opera: (!!opera && opera.version),\r\n\r\n                /**\r\n                 * @property {boolean} webkit 检测当前浏览器是否是webkit内核的浏览器\r\n                 * @example\r\n                 * ```javascript\r\n                 * if ( UE.browser.webkit ) {\r\n                 *     console.log( '当前浏览器是webkit内核浏览器' );\r\n                 * }\r\n                 * ```\r\n                 */\r\n                webkit: (agent.indexOf(' applewebkit/') > -1),\r\n\r\n                /**\r\n                 * @property {boolean} mac 检测当前浏览器是否是运行在mac平台下\r\n                 * @example\r\n                 * ```javascript\r\n                 * if ( UE.browser.mac ) {\r\n                 *     console.log( '当前浏览器运行在mac平台下' );\r\n                 * }\r\n                 * ```\r\n                 */\r\n                mac: (agent.indexOf('macintosh') > -1),\r\n\r\n                /**\r\n                 * @property {boolean} quirks 检测当前浏览器是否处于“怪异模式”下\r\n                 * @example\r\n                 * ```javascript\r\n                 * if ( UE.browser.quirks ) {\r\n                 *     console.log( '当前浏览器运行处于“怪异模式”' );\r\n                 * }\r\n                 * ```\r\n                 */\r\n                quirks: (document.compatMode == 'BackCompat')\r\n            };\r\n\r\n        /**\r\n        * @property {boolean} gecko 检测当前浏览器内核是否是gecko内核\r\n        * @example\r\n        * ```javascript\r\n        * if ( UE.browser.gecko ) {\r\n        *     console.log( '当前浏览器内核是gecko内核' );\r\n        * }\r\n        * ```\r\n        */\r\n        browser.gecko = (navigator.product == 'Gecko' && !browser.webkit && !browser.opera && !browser.ie);\r\n\r\n        var version = 0;\r\n\r\n        // Internet Explorer 6.0+\r\n        if (browser.ie) {\r\n\r\n            var v1 = agent.match(/(?:msie\\s([\\w.]+))/);\r\n            var v2 = agent.match(/(?:trident.*rv:([\\w.]+))/);\r\n            if (v1 && v2 && v1[1] && v2[1]) {\r\n                version = Math.max(v1[1] * 1, v2[1] * 1);\r\n            } else if (v1 && v1[1]) {\r\n                version = v1[1] * 1;\r\n            } else if (v2 && v2[1]) {\r\n                version = v2[1] * 1;\r\n            } else {\r\n                version = 0;\r\n            }\r\n\r\n            browser.ie11Compat = document.documentMode == 11;\r\n            /**\r\n             * @property { boolean } ie9Compat 检测浏览器模式是否为 IE9 兼容模式\r\n             * @warning 如果浏览器不是IE， 则该值为undefined\r\n             * @example\r\n             * ```javascript\r\n             * if ( UE.browser.ie9Compat ) {\r\n             *     console.log( '当前浏览器运行在IE9兼容模式下' );\r\n             * }\r\n             * ```\r\n             */\r\n            browser.ie9Compat = document.documentMode == 9;\r\n\r\n            /**\r\n             * @property { boolean } ie8 检测浏览器是否是IE8浏览器\r\n             * @warning 如果浏览器不是IE， 则该值为undefined\r\n             * @example\r\n             * ```javascript\r\n             * if ( UE.browser.ie8 ) {\r\n             *     console.log( '当前浏览器是IE8浏览器' );\r\n             * }\r\n             * ```\r\n             */\r\n            browser.ie8 = !!document.documentMode;\r\n\r\n            /**\r\n             * @property { boolean } ie8Compat 检测浏览器模式是否为 IE8 兼容模式\r\n             * @warning 如果浏览器不是IE， 则该值为undefined\r\n             * @example\r\n             * ```javascript\r\n             * if ( UE.browser.ie8Compat ) {\r\n             *     console.log( '当前浏览器运行在IE8兼容模式下' );\r\n             * }\r\n             * ```\r\n             */\r\n            browser.ie8Compat = document.documentMode == 8;\r\n\r\n            /**\r\n             * @property { boolean } ie7Compat 检测浏览器模式是否为 IE7 兼容模式\r\n             * @warning 如果浏览器不是IE， 则该值为undefined\r\n             * @example\r\n             * ```javascript\r\n             * if ( UE.browser.ie7Compat ) {\r\n             *     console.log( '当前浏览器运行在IE7兼容模式下' );\r\n             * }\r\n             * ```\r\n             */\r\n            browser.ie7Compat = ((version == 7 && !document.documentMode)\r\n                || document.documentMode == 7);\r\n\r\n            /**\r\n             * @property { boolean } ie6Compat 检测浏览器模式是否为 IE6 模式 或者怪异模式\r\n             * @warning 如果浏览器不是IE， 则该值为undefined\r\n             * @example\r\n             * ```javascript\r\n             * if ( UE.browser.ie6Compat ) {\r\n             *     console.log( '当前浏览器运行在IE6模式或者怪异模式下' );\r\n             * }\r\n             * ```\r\n             */\r\n            browser.ie6Compat = (version < 7 || browser.quirks);\r\n\r\n            browser.ie9above = version > 8;\r\n\r\n            browser.ie9below = version < 9;\r\n\r\n            browser.ie11above = version > 10;\r\n\r\n            browser.ie11below = version < 11;\r\n\r\n        }\r\n\r\n        // Gecko.\r\n        if (browser.gecko) {\r\n            var geckoRelease = agent.match(/rv:([\\d\\.]+)/);\r\n            if (geckoRelease) {\r\n                geckoRelease = geckoRelease[1].split('.');\r\n                version = geckoRelease[0] * 10000 + (geckoRelease[1] || 0) * 100 + (geckoRelease[2] || 0) * 1;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * @property { Number } chrome 检测当前浏览器是否为Chrome, 如果是，则返回Chrome的大版本号\r\n         * @warning 如果浏览器不是chrome， 则该值为undefined\r\n         * @example\r\n         * ```javascript\r\n         * if ( UE.browser.chrome ) {\r\n         *     console.log( '当前浏览器是Chrome' );\r\n         * }\r\n         * ```\r\n         */\r\n        if (/chrome\\/(\\d+\\.\\d)/i.test(agent)) {\r\n            browser.chrome = + RegExp['\\x241'];\r\n        }\r\n\r\n        /**\r\n         * @property { Number } safari 检测当前浏览器是否为Safari, 如果是，则返回Safari的大版本号\r\n         * @warning 如果浏览器不是safari， 则该值为undefined\r\n         * @example\r\n         * ```javascript\r\n         * if ( UE.browser.safari ) {\r\n         *     console.log( '当前浏览器是Safari' );\r\n         * }\r\n         * ```\r\n         */\r\n        if (/(\\d+\\.\\d)?(?:\\.\\d)?\\s+safari\\/?(\\d+\\.\\d+)?/i.test(agent) && !/chrome/i.test(agent)) {\r\n            browser.safari = + (RegExp['\\x241'] || RegExp['\\x242']);\r\n        }\r\n\r\n\r\n        // Opera 9.50+\r\n        if (browser.opera)\r\n            version = parseFloat(opera.version());\r\n\r\n        // WebKit 522+ (Safari 3+)\r\n        if (browser.webkit)\r\n            version = parseFloat(agent.match(/ applewebkit\\/(\\d+)/)[1]);\r\n\r\n        /**\r\n         * @property { Number } version 检测当前浏览器版本号\r\n         * @remind\r\n         * <ul>\r\n         *     <li>IE系列返回值为5,6,7,8,9,10等</li>\r\n         *     <li>gecko系列会返回10900，158900等</li>\r\n         *     <li>webkit系列会返回其build号 (如 522等)</li>\r\n         * </ul>\r\n         * @example\r\n         * ```javascript\r\n         * console.log( '当前浏览器版本号是： ' + UE.browser.version );\r\n         * ```\r\n         */\r\n        browser.version = version;\r\n\r\n        /**\r\n         * @property { boolean } isCompatible 检测当前浏览器是否能够与UEditor良好兼容\r\n         * @example\r\n         * ```javascript\r\n         * if ( UE.browser.isCompatible ) {\r\n         *     console.log( '浏览器与UEditor能够良好兼容' );\r\n         * }\r\n         * ```\r\n         */\r\n        browser.isCompatible =\r\n            !browser.mobile && (\r\n                (browser.ie && version >= 6) ||\r\n                (browser.gecko && version >= 10801) ||\r\n                (browser.opera && version >= 9.5) ||\r\n                (browser.air && version >= 1) ||\r\n                (browser.webkit && version >= 522) ||\r\n                false);\r\n        return browser;\r\n    }();\r\n    //快捷方式\r\n    var ie = browser.ie,\r\n        webkit = browser.webkit,\r\n        gecko = browser.gecko,\r\n        opera = browser.opera;\r\n\r\n    // core/utils.js\r\n    /**\r\n     * 工具函数包\r\n     * @file\r\n     * @module UE.utils\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * UEditor封装使用的静态工具函数\r\n     * @module UE.utils\r\n     * @unfile\r\n     */\r\n\r\n    var utils = UE.utils = {\r\n\r\n        /**\r\n         * 用给定的迭代器遍历对象\r\n         * @method each\r\n         * @param { Object } obj 需要遍历的对象\r\n         * @param { Function } iterator 迭代器， 该方法接受两个参数， 第一个参数是当前所处理的value， 第二个参数是当前遍历对象的key\r\n         * @example\r\n         * ```javascript\r\n         * var demoObj = {\r\n         *     key1: 1,\r\n         *     key2: 2\r\n         * };\r\n         *\r\n         * //output: key1: 1, key2: 2\r\n         * UE.utils.each( demoObj, funciton ( value, key ) {\r\n         *\r\n         *     console.log( key + \":\" + value );\r\n         *\r\n         * } );\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 用给定的迭代器遍历数组或类数组对象\r\n         * @method each\r\n         * @param { Array } array 需要遍历的数组或者类数组\r\n         * @param { Function } iterator 迭代器， 该方法接受两个参数， 第一个参数是当前所处理的value， 第二个参数是当前遍历对象的key\r\n         * @example\r\n         * ```javascript\r\n         * var divs = document.getElmentByTagNames( \"div\" );\r\n         *\r\n         * //output: 0: DIV, 1: DIV ...\r\n         * UE.utils.each( divs, funciton ( value, key ) {\r\n         *\r\n         *     console.log( key + \":\" + value.tagName );\r\n         *\r\n         * } );\r\n         * ```\r\n         */\r\n        each: function (obj, iterator, context) {\r\n            if (obj == null) return;\r\n            if (obj.length === +obj.length) {\r\n                for (var i = 0, l = obj.length; i < l; i++) {\r\n                    if (iterator.call(context, obj[i], i, obj) === false)\r\n                        return false;\r\n                }\r\n            } else {\r\n                for (var key in obj) {\r\n                    if (obj.hasOwnProperty(key)) {\r\n                        if (iterator.call(context, obj[key], key, obj) === false)\r\n                            return false;\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * 以给定对象作为原型创建一个新对象\r\n         * @method makeInstance\r\n         * @param { Object } protoObject 该对象将作为新创建对象的原型\r\n         * @return { Object } 新的对象， 该对象的原型是给定的protoObject对象\r\n         * @example\r\n         * ```javascript\r\n         *\r\n         * var protoObject = { sayHello: function () { console.log('Hello UEditor!'); } };\r\n         *\r\n         * var newObject = UE.utils.makeInstance( protoObject );\r\n         * //output: Hello UEditor!\r\n         * newObject.sayHello();\r\n         * ```\r\n         */\r\n        makeInstance: function (obj) {\r\n            var noop = new Function();\r\n            noop.prototype = obj;\r\n            obj = new noop;\r\n            noop.prototype = null;\r\n            return obj;\r\n        },\r\n\r\n        /**\r\n         * 将source对象中的属性扩展到target对象上\r\n         * @method extend\r\n         * @remind 该方法将强制把source对象上的属性复制到target对象上\r\n         * @see UE.utils.extend(Object,Object,Boolean)\r\n         * @param { Object } target 目标对象， 新的属性将附加到该对象上\r\n         * @param { Object } source 源对象， 该对象的属性会被附加到target对象上\r\n         * @return { Object } 返回target对象\r\n         * @example\r\n         * ```javascript\r\n         *\r\n         * var target = { name: 'target', sex: 1 },\r\n         *      source = { name: 'source', age: 17 };\r\n         *\r\n         * UE.utils.extend( target, source );\r\n         *\r\n         * //output: { name: 'source', sex: 1, age: 17 }\r\n         * console.log( target );\r\n         *\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 将source对象中的属性扩展到target对象上， 根据指定的isKeepTarget值决定是否保留目标对象中与\r\n         * 源对象属性名相同的属性值。\r\n         * @method extend\r\n         * @param { Object } target 目标对象， 新的属性将附加到该对象上\r\n         * @param { Object } source 源对象， 该对象的属性会被附加到target对象上\r\n         * @param { Boolean } isKeepTarget 是否保留目标对象中与源对象中属性名相同的属性\r\n         * @return { Object } 返回target对象\r\n         * @example\r\n         * ```javascript\r\n         *\r\n         * var target = { name: 'target', sex: 1 },\r\n         *      source = { name: 'source', age: 17 };\r\n         *\r\n         * UE.utils.extend( target, source, true );\r\n         *\r\n         * //output: { name: 'target', sex: 1, age: 17 }\r\n         * console.log( target );\r\n         *\r\n         * ```\r\n         */\r\n        extend: function (t, s, b) {\r\n            if (s) {\r\n                for (var k in s) {\r\n                    if (!b || !t.hasOwnProperty(k)) {\r\n                        t[k] = s[k];\r\n                    }\r\n                }\r\n            }\r\n            return t;\r\n        },\r\n\r\n        /**\r\n         * 将给定的多个对象的属性复制到目标对象target上\r\n         * @method extend2\r\n         * @remind 该方法将强制把源对象上的属性复制到target对象上\r\n         * @remind 该方法支持两个及以上的参数， 从第二个参数开始， 其属性都会被复制到第一个参数上。 如果遇到同名的属性，\r\n         *          将会覆盖掉之前的值。\r\n         * @param { Object } target 目标对象， 新的属性将附加到该对象上\r\n         * @param { Object... } source 源对象， 支持多个对象， 该对象的属性会被附加到target对象上\r\n         * @return { Object } 返回target对象\r\n         * @example\r\n         * ```javascript\r\n         *\r\n         * var target = {},\r\n         *     source1 = { name: 'source', age: 17 },\r\n         *     source2 = { title: 'dev' };\r\n         *\r\n         * UE.utils.extend2( target, source1, source2 );\r\n         *\r\n         * //output: { name: 'source', age: 17, title: 'dev' }\r\n         * console.log( target );\r\n         *\r\n         * ```\r\n         */\r\n        extend2: function (t) {\r\n            var a = arguments;\r\n            for (var i = 1; i < a.length; i++) {\r\n                var x = a[i];\r\n                for (var k in x) {\r\n                    if (!t.hasOwnProperty(k)) {\r\n                        t[k] = x[k];\r\n                    }\r\n                }\r\n            }\r\n            return t;\r\n        },\r\n\r\n        /**\r\n         * 模拟继承机制， 使得subClass继承自superClass\r\n         * @method inherits\r\n         * @param { Object } subClass 子类对象\r\n         * @param { Object } superClass 超类对象\r\n         * @warning 该方法只能让subClass继承超类的原型， subClass对象自身的属性和方法不会被继承\r\n         * @return { Object } 继承superClass后的子类对象\r\n         * @example\r\n         * ```javascript\r\n         * function SuperClass(){\r\n         *     this.name = \"小李\";\r\n         * }\r\n         *\r\n         * SuperClass.prototype = {\r\n         *     hello:function(str){\r\n         *         console.log(this.name + str);\r\n         *     }\r\n         * }\r\n         *\r\n         * function SubClass(){\r\n         *     this.name = \"小张\";\r\n         * }\r\n         *\r\n         * UE.utils.inherits(SubClass,SuperClass);\r\n         *\r\n         * var sub = new SubClass();\r\n         * //output: '小张早上好!\r\n         * sub.hello(\"早上好!\");\r\n         * ```\r\n         */\r\n        inherits: function (subClass, superClass) {\r\n            var oldP = subClass.prototype,\r\n                newP = utils.makeInstance(superClass.prototype);\r\n            utils.extend(newP, oldP, true);\r\n            subClass.prototype = newP;\r\n            return (newP.constructor = subClass);\r\n        },\r\n\r\n        /**\r\n         * 用指定的context对象作为函数fn的上下文\r\n         * @method bind\r\n         * @param { Function } fn 需要绑定上下文的函数对象\r\n         * @param { Object } content 函数fn新的上下文对象\r\n         * @return { Function } 一个新的函数， 该函数作为原始函数fn的代理， 将完成fn的上下文调换工作。\r\n         * @example\r\n         * ```javascript\r\n         *\r\n         * var name = 'window',\r\n         *     newTest = null;\r\n         *\r\n         * function test () {\r\n         *     console.log( this.name );\r\n         * }\r\n         *\r\n         * newTest = UE.utils.bind( test, { name: 'object' } );\r\n         *\r\n         * //output: object\r\n         * newTest();\r\n         *\r\n         * //output: window\r\n         * test();\r\n         *\r\n         * ```\r\n         */\r\n        bind: function (fn, context) {\r\n            return function () {\r\n                return fn.apply(context, arguments);\r\n            };\r\n        },\r\n\r\n        /**\r\n         * 创建延迟指定时间后执行的函数fn\r\n         * @method defer\r\n         * @param { Function } fn 需要延迟执行的函数对象\r\n         * @param { int } delay 延迟的时间， 单位是毫秒\r\n         * @warning 该方法的时间控制是不精确的，仅仅只能保证函数的执行是在给定的时间之后，\r\n         *           而不能保证刚好到达延迟时间时执行。\r\n         * @return { Function } 目标函数fn的代理函数， 只有执行该函数才能起到延时效果\r\n         * @example\r\n         * ```javascript\r\n         * var start = 0;\r\n         *\r\n         * function test(){\r\n         *     console.log( new Date() - start );\r\n         * }\r\n         *\r\n         * var testDefer = UE.utils.defer( test, 1000 );\r\n         * //\r\n         * start = new Date();\r\n         * //output: (大约在1000毫秒之后输出) 1000\r\n         * testDefer();\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 创建延迟指定时间后执行的函数fn, 如果在延迟时间内再次执行该方法， 将会根据指定的exclusion的值，\r\n         * 决定是否取消前一次函数的执行， 如果exclusion的值为true， 则取消执行，反之，将继续执行前一个方法。\r\n         * @method defer\r\n         * @param { Function } fn 需要延迟执行的函数对象\r\n         * @param { int } delay 延迟的时间， 单位是毫秒\r\n         * @param { Boolean } exclusion 如果在延迟时间内再次执行该函数，该值将决定是否取消执行前一次函数的执行，\r\n         *                     值为true表示取消执行， 反之则将在执行前一次函数之后才执行本次函数调用。\r\n         * @warning 该方法的时间控制是不精确的，仅仅只能保证函数的执行是在给定的时间之后，\r\n         *           而不能保证刚好到达延迟时间时执行。\r\n         * @return { Function } 目标函数fn的代理函数， 只有执行该函数才能起到延时效果\r\n         * @example\r\n         * ```javascript\r\n         *\r\n         * function test(){\r\n         *     console.log(1);\r\n         * }\r\n         *\r\n         * var testDefer = UE.utils.defer( test, 1000, true );\r\n         *\r\n         * //output: (两次调用仅有一次输出) 1\r\n         * testDefer();\r\n         * testDefer();\r\n         * ```\r\n         */\r\n        defer: function (fn, delay, exclusion) {\r\n            var timerID;\r\n            return function () {\r\n                if (exclusion) {\r\n                    clearTimeout(timerID);\r\n                }\r\n                timerID = setTimeout(fn, delay);\r\n            };\r\n        },\r\n\r\n        /**\r\n         * 获取元素item在数组array中首次出现的位置, 如果未找到item， 则返回-1\r\n         * @method indexOf\r\n         * @remind 该方法的匹配过程使用的是恒等“===”\r\n         * @param { Array } array 需要查找的数组对象\r\n         * @param { * } item 需要在目标数组中查找的值\r\n         * @return { int } 返回item在目标数组array中首次出现的位置， 如果在数组中未找到item， 则返回-1\r\n         * @example\r\n         * ```javascript\r\n         * var item = 1,\r\n         *     arr = [ 3, 4, 6, 8, 1, 1, 2 ];\r\n         *\r\n         * //output: 4\r\n         * console.log( UE.utils.indexOf( arr, item ) );\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 获取元素item数组array中首次出现的位置, 如果未找到item， 则返回-1。通过start的值可以指定搜索的起始位置。\r\n         * @method indexOf\r\n         * @remind 该方法的匹配过程使用的是恒等“===”\r\n         * @param { Array } array 需要查找的数组对象\r\n         * @param { * } item 需要在目标数组中查找的值\r\n         * @param { int } start 搜索的起始位置\r\n         * @return { int } 返回item在目标数组array中的start位置之后首次出现的位置， 如果在数组中未找到item， 则返回-1\r\n         * @example\r\n         * ```javascript\r\n         * var item = 1,\r\n         *     arr = [ 3, 4, 6, 8, 1, 2, 8, 3, 2, 1, 1, 4 ];\r\n         *\r\n         * //output: 9\r\n         * console.log( UE.utils.indexOf( arr, item, 5 ) );\r\n         * ```\r\n         */\r\n        indexOf: function (array, item, start) {\r\n            var index = -1;\r\n            start = this.isNumber(start) ? start : 0;\r\n            this.each(array, function (v, i) {\r\n                if (i >= start && v === item) {\r\n                    index = i;\r\n                    return false;\r\n                }\r\n            });\r\n            return index;\r\n        },\r\n\r\n        /**\r\n         * 移除数组array中所有的元素item\r\n         * @method removeItem\r\n         * @param { Array } array 要移除元素的目标数组\r\n         * @param { * } item 将要被移除的元素\r\n         * @remind 该方法的匹配过程使用的是恒等“===”\r\n         * @example\r\n         * ```javascript\r\n         * var arr = [ 4, 5, 7, 1, 3, 4, 6 ];\r\n         *\r\n         * UE.utils.removeItem( arr, 4 );\r\n         * //output: [ 5, 7, 1, 3, 6 ]\r\n         * console.log( arr );\r\n         *\r\n         * ```\r\n         */\r\n        removeItem: function (array, item) {\r\n            for (var i = 0, l = array.length; i < l; i++) {\r\n                if (array[i] === item) {\r\n                    array.splice(i, 1);\r\n                    i--;\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * 删除字符串str的首尾空格\r\n         * @method trim\r\n         * @param { String } str 需要删除首尾空格的字符串\r\n         * @return { String } 删除了首尾的空格后的字符串\r\n         * @example\r\n         * ```javascript\r\n         *\r\n         * var str = \" UEdtior \";\r\n         *\r\n         * //output: 9\r\n         * console.log( str.length );\r\n         *\r\n         * //output: 7\r\n         * console.log( UE.utils.trim( \" UEdtior \" ).length );\r\n         *\r\n         * //output: 9\r\n         * console.log( str.length );\r\n         *\r\n         *  ```\r\n         */\r\n        trim: function (str) {\r\n            return str.replace(/(^[ \\t\\n\\r]+)|([ \\t\\n\\r]+$)/g, '');\r\n        },\r\n\r\n        /**\r\n         * 将字符串str以','分隔成数组后，将该数组转换成哈希对象， 其生成的hash对象的key为数组中的元素， value为1\r\n         * @method listToMap\r\n         * @warning 该方法在生成的hash对象中，会为每一个key同时生成一个另一个全大写的key。\r\n         * @param { String } str 该字符串将被以','分割为数组， 然后进行转化\r\n         * @return { Object } 转化之后的hash对象\r\n         * @example\r\n         * ```javascript\r\n         *\r\n         * //output: Object {UEdtior: 1, UEDTIOR: 1, Hello: 1, HELLO: 1}\r\n         * console.log( UE.utils.listToMap( 'UEdtior,Hello' ) );\r\n         *\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 将字符串数组转换成哈希对象， 其生成的hash对象的key为数组中的元素， value为1\r\n         * @method listToMap\r\n         * @warning 该方法在生成的hash对象中，会为每一个key同时生成一个另一个全大写的key。\r\n         * @param { Array } arr 字符串数组\r\n         * @return { Object } 转化之后的hash对象\r\n         * @example\r\n         * ```javascript\r\n         *\r\n         * //output: Object {UEdtior: 1, UEDTIOR: 1, Hello: 1, HELLO: 1}\r\n         * console.log( UE.utils.listToMap( [ 'UEdtior', 'Hello' ] ) );\r\n         *\r\n         * ```\r\n         */\r\n        listToMap: function (list) {\r\n            if (!list) return {};\r\n            list = utils.isArray(list) ? list : list.split(',');\r\n            for (var i = 0, ci, obj = {}; ci = list[i++];) {\r\n                obj[ci.toUpperCase()] = obj[ci] = 1;\r\n            }\r\n            return obj;\r\n        },\r\n\r\n        /**\r\n         * 将str中的html符号转义,将转义“'，&，<，\"，>”五个字符\r\n         * @method unhtml\r\n         * @param { String } str 需要转义的字符串\r\n         * @return { String } 转义后的字符串\r\n         * @example\r\n         * ```javascript\r\n         * var html = '<body>&</body>';\r\n         *\r\n         * //output: &lt;body&gt;&amp;&lt;/body&gt;\r\n         * console.log( UE.utils.unhtml( html ) );\r\n         *\r\n         * ```\r\n         */\r\n        unhtml: function (str, reg) {\r\n            return str ? str.replace(reg || /[&<\">'](?:(amp|lt|quot|gt|#39|nbsp|#\\d+);)?/g, function (a, b) {\r\n                if (b) {\r\n                    return a;\r\n                } else {\r\n                    return {\r\n                        '<': '&lt;',\r\n                        '&': '&amp;',\r\n                        '\"': '&quot;',\r\n                        '>': '&gt;',\r\n                        \"'\": '&#39;'\r\n                    }[a]\r\n                }\r\n\r\n            }) : '';\r\n        },\r\n        /**\r\n         * 将url中的html字符转义， 仅转义  ', \", <, > 四个字符\r\n         * @param  { String } str 需要转义的字符串\r\n         * @param  { RegExp } reg 自定义的正则\r\n         * @return { String }     转义后的字符串\r\n         */\r\n        unhtmlForUrl: function (str, reg) {\r\n            return str ? str.replace(reg || /[<\">']/g, function (a) {\r\n                return {\r\n                    '<': '&lt;',\r\n                    '&': '&amp;',\r\n                    '\"': '&quot;',\r\n                    '>': '&gt;',\r\n                    \"'\": '&#39;'\r\n                }[a]\r\n\r\n            }) : '';\r\n        },\r\n\r\n        /**\r\n         * 将str中的转义字符还原成html字符\r\n         * @see UE.utils.unhtml(String);\r\n         * @method html\r\n         * @param { String } str 需要逆转义的字符串\r\n         * @return { String } 逆转义后的字符串\r\n         * @example\r\n         * ```javascript\r\n         *\r\n         * var str = '&lt;body&gt;&amp;&lt;/body&gt;';\r\n         *\r\n         * //output: <body>&</body>\r\n         * console.log( UE.utils.html( str ) );\r\n         *\r\n         * ```\r\n         */\r\n        html: function (str) {\r\n            return str ? str.replace(/&((g|l|quo)t|amp|#39|nbsp);/g, function (m) {\r\n                return {\r\n                    '&lt;': '<',\r\n                    '&amp;': '&',\r\n                    '&quot;': '\"',\r\n                    '&gt;': '>',\r\n                    '&#39;': \"'\",\r\n                    '&nbsp;': ' '\r\n                }[m]\r\n            }) : '';\r\n        },\r\n\r\n        /**\r\n         * 将css样式转换为驼峰的形式\r\n         * @method cssStyleToDomStyle\r\n         * @param { String } cssName 需要转换的css样式名\r\n         * @return { String } 转换成驼峰形式后的css样式名\r\n         * @example\r\n         * ```javascript\r\n         *\r\n         * var str = 'border-top';\r\n         *\r\n         * //output: borderTop\r\n         * console.log( UE.utils.cssStyleToDomStyle( str ) );\r\n         *\r\n         * ```\r\n         */\r\n        cssStyleToDomStyle: function () {\r\n            var test = document.createElement('div').style,\r\n                cache = {\r\n                    'float': test.cssFloat != undefined ? 'cssFloat' : test.styleFloat != undefined ? 'styleFloat' : 'float'\r\n                };\r\n\r\n            return function (cssName) {\r\n                return cache[cssName] || (cache[cssName] = cssName.toLowerCase().replace(/-./g, function (match) {\r\n                    return match.charAt(1).toUpperCase();\r\n                }));\r\n            };\r\n        }(),\r\n\r\n        /**\r\n         * 动态加载文件到doc中\r\n         * @method loadFile\r\n         * @param { DomDocument } document 需要加载资源文件的文档对象\r\n         * @param { Object } options 加载资源文件的属性集合， 取值请参考代码示例\r\n         * @example\r\n         * ```javascript\r\n         *\r\n         * UE.utils.loadFile( document, {\r\n         *     src:\"test.js\",\r\n         *     tag:\"script\",\r\n         *     type:\"text/javascript\",\r\n         *     defer:\"defer\"\r\n         * } );\r\n         *\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 动态加载文件到doc中，加载成功后执行的回调函数fn\r\n         * @method loadFile\r\n         * @param { DomDocument } document 需要加载资源文件的文档对象\r\n         * @param { Object } options 加载资源文件的属性集合， 该集合支持的值是script标签和style标签支持的所有属性。\r\n         * @param { Function } fn 资源文件加载成功之后执行的回调\r\n         * @warning 对于在同一个文档中多次加载同一URL的文件， 该方法会在第一次加载之后缓存该请求，\r\n         *           在此之后的所有同一URL的请求， 将会直接触发回调。\r\n         * @example\r\n         * ```javascript\r\n         *\r\n         * UE.utils.loadFile( document, {\r\n         *     src:\"test.js\",\r\n         *     tag:\"script\",\r\n         *     type:\"text/javascript\",\r\n         *     defer:\"defer\"\r\n         * }, function () {\r\n         *     console.log('加载成功');\r\n         * } );\r\n         *\r\n         * ```\r\n         */\r\n        loadFile: function () {\r\n            var tmpList = [];\r\n\r\n            function getItem(doc, obj) {\r\n                try {\r\n                    for (var i = 0, ci; ci = tmpList[i++];) {\r\n                        if (ci.doc === doc && ci.url == (obj.src || obj.href)) {\r\n                            return ci;\r\n                        }\r\n                    }\r\n                } catch (e) {\r\n                    return null;\r\n                }\r\n            }\r\n\r\n            return function (doc, obj, fn) {\r\n                var item = getItem(doc, obj);\r\n                if (item) {\r\n                    if (item.ready) {\r\n                        fn && fn();\r\n                    } else {\r\n                        item.funs.push(fn)\r\n                    }\r\n                    return;\r\n                }\r\n                tmpList.push({\r\n                    doc: doc,\r\n                    url: obj.src || obj.href,\r\n                    funs: [fn]\r\n                });\r\n                if (!doc.body) {\r\n                    var html = [];\r\n                    for (var p in obj) {\r\n                        if (p == 'tag') continue;\r\n                        html.push(p + '=\"' + obj[p] + '\"')\r\n                    }\r\n                    doc.write('<' + obj.tag + ' ' + html.join(' ') + ' ></' + obj.tag + '>');\r\n                    return;\r\n                }\r\n                if (obj.id && doc.getElementById(obj.id)) {\r\n                    return;\r\n                }\r\n                var element = doc.createElement(obj.tag);\r\n                delete obj.tag;\r\n                for (var p in obj) {\r\n                    element.setAttribute(p, obj[p]);\r\n                }\r\n                element.onload = element.onreadystatechange = function () {\r\n                    if (!this.readyState || /loaded|complete/.test(this.readyState)) {\r\n                        item = getItem(doc, obj);\r\n                        if (item.funs.length > 0) {\r\n                            item.ready = 1;\r\n                            for (var fi; fi = item.funs.pop();) {\r\n                                fi();\r\n                            }\r\n                        }\r\n                        element.onload = element.onreadystatechange = null;\r\n                    }\r\n                };\r\n                element.onerror = function () {\r\n                    throw Error('The load ' + (obj.href || obj.src) + ' fails,check the url settings of file ueditor.config.js ')\r\n                };\r\n                // console.log(element,doc.getElementsByTagName(\"head\")[0],11111111);\r\n                doc.getElementsByTagName(\"head\")[0].appendChild(element);\r\n            }\r\n        }(),\r\n\r\n        /**\r\n         * 判断obj对象是否为空\r\n         * @method isEmptyObject\r\n         * @param { * } obj 需要判断的对象\r\n         * @remind 如果判断的对象是NULL， 将直接返回true， 如果是数组且为空， 返回true， 如果是字符串， 且字符串为空，\r\n         *          返回true， 如果是普通对象， 且该对象没有任何实例属性， 返回true\r\n         * @return { Boolean } 对象是否为空\r\n         * @example\r\n         * ```javascript\r\n         *\r\n         * //output: true\r\n         * console.log( UE.utils.isEmptyObject( {} ) );\r\n         *\r\n         * //output: true\r\n         * console.log( UE.utils.isEmptyObject( [] ) );\r\n         *\r\n         * //output: true\r\n         * console.log( UE.utils.isEmptyObject( \"\" ) );\r\n         *\r\n         * //output: false\r\n         * console.log( UE.utils.isEmptyObject( { key: 1 } ) );\r\n         *\r\n         * //output: false\r\n         * console.log( UE.utils.isEmptyObject( [1] ) );\r\n         *\r\n         * //output: false\r\n         * console.log( UE.utils.isEmptyObject( \"1\" ) );\r\n         *\r\n         * ```\r\n         */\r\n        isEmptyObject: function (obj) {\r\n            if (obj == null) return true;\r\n            if (this.isArray(obj) || this.isString(obj)) return obj.length === 0;\r\n            for (var key in obj) if (obj.hasOwnProperty(key)) return false;\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * 把rgb格式的颜色值转换成16进制格式\r\n         * @method fixColor\r\n         * @param { String } rgb格式的颜色值\r\n         * @param { String }\r\n         * @example\r\n         * rgb(255,255,255)  => \"#ffffff\"\r\n         */\r\n        fixColor: function (name, value) {\r\n            if (/color/i.test(name) && /rgba?/.test(value)) {\r\n                var array = value.split(\",\");\r\n                if (array.length > 3)\r\n                    return \"\";\r\n                value = \"#\";\r\n                for (var i = 0, color; color = array[i++];) {\r\n                    color = parseInt(color.replace(/[^\\d]/gi, ''), 10).toString(16);\r\n                    value += color.length == 1 ? \"0\" + color : color;\r\n                }\r\n                value = value.toUpperCase();\r\n            }\r\n            return value;\r\n        },\r\n        /**\r\n         * 只针对border,padding,margin做了处理，因为性能问题\r\n         * @public\r\n         * @function\r\n         * @param {String}    val style字符串\r\n         */\r\n        optCss: function (val) {\r\n            var padding, margin, border;\r\n            val = val.replace(/(padding|margin|border)\\-([^:]+):([^;]+);?/gi, function (str, key, name, val) {\r\n                if (val.split(' ').length == 1) {\r\n                    switch (key) {\r\n                        case 'padding':\r\n                            !padding && (padding = {});\r\n                            padding[name] = val;\r\n                            return '';\r\n                        case 'margin':\r\n                            !margin && (margin = {});\r\n                            margin[name] = val;\r\n                            return '';\r\n                        case 'border':\r\n                            return val == 'initial' ? '' : str;\r\n                    }\r\n                }\r\n                return str;\r\n            });\r\n\r\n            function opt(obj, name) {\r\n                if (!obj) {\r\n                    return '';\r\n                }\r\n                var t = obj.top, b = obj.bottom, l = obj.left, r = obj.right, val = '';\r\n                if (!t || !l || !b || !r) {\r\n                    for (var p in obj) {\r\n                        val += ';' + name + '-' + p + ':' + obj[p] + ';';\r\n                    }\r\n                } else {\r\n                    val += ';' + name + ':' +\r\n                        (t == b && b == l && l == r ? t :\r\n                            t == b && l == r ? (t + ' ' + l) :\r\n                                l == r ? (t + ' ' + l + ' ' + b) : (t + ' ' + r + ' ' + b + ' ' + l)) + ';'\r\n                }\r\n                return val;\r\n            }\r\n\r\n            val += opt(padding, 'padding') + opt(margin, 'margin');\r\n            return val.replace(/^[ \\n\\r\\t;]*|[ \\n\\r\\t]*$/, '').replace(/;([ \\n\\r\\t]+)|\\1;/g, ';')\r\n                .replace(/(&((l|g)t|quot|#39))?;{2,}/g, function (a, b) {\r\n                    return b ? b + \";;\" : ';'\r\n                });\r\n        },\r\n\r\n        /**\r\n         * 克隆对象\r\n         * @method clone\r\n         * @param { Object } source 源对象\r\n         * @return { Object } source的一个副本\r\n         */\r\n\r\n        /**\r\n         * 深度克隆对象，将source的属性克隆到target对象， 会覆盖target重名的属性。\r\n         * @method clone\r\n         * @param { Object } source 源对象\r\n         * @param { Object } target 目标对象\r\n         * @return { Object } 附加了source对象所有属性的target对象\r\n         */\r\n        clone: function (source, target) {\r\n            var tmp;\r\n            target = target || {};\r\n            for (var i in source) {\r\n                if (source.hasOwnProperty(i)) {\r\n                    tmp = source[i];\r\n                    if (typeof tmp == 'object') {\r\n                        target[i] = utils.isArray(tmp) ? [] : {};\r\n                        utils.clone(source[i], target[i])\r\n                    } else {\r\n                        target[i] = tmp;\r\n                    }\r\n                }\r\n            }\r\n            return target;\r\n        },\r\n\r\n        /**\r\n         * 把cm／pt为单位的值转换为px为单位的值\r\n         * @method transUnitToPx\r\n         * @param { String } 待转换的带单位的字符串\r\n         * @return { String } 转换为px为计量单位的值的字符串\r\n         * @example\r\n         * ```javascript\r\n         *\r\n         * //output: 500px\r\n         * console.log( UE.utils.transUnitToPx( '20cm' ) );\r\n         *\r\n         * //output: 27px\r\n         * console.log( UE.utils.transUnitToPx( '20pt' ) );\r\n         *\r\n         * ```\r\n         */\r\n        transUnitToPx: function (val) {\r\n            if (!/(pt|cm)/.test(val)) {\r\n                return val\r\n            }\r\n            var unit;\r\n            val.replace(/([\\d.]+)(\\w+)/, function (str, v, u) {\r\n                val = v;\r\n                unit = u;\r\n            });\r\n            switch (unit) {\r\n                case 'cm':\r\n                    val = parseFloat(val) * 25;\r\n                    break;\r\n                case 'pt':\r\n                    val = Math.round(parseFloat(val) * 96 / 72);\r\n            }\r\n            return val + (val ? 'px' : '');\r\n        },\r\n\r\n        /**\r\n         * 在dom树ready之后执行给定的回调函数\r\n         * @method domReady\r\n         * @remind 如果在执行该方法的时候， dom树已经ready， 那么回调函数将立刻执行\r\n         * @param { Function } fn dom树ready之后的回调函数\r\n         * @example\r\n         * ```javascript\r\n         *\r\n         * UE.utils.domReady( function () {\r\n         *\r\n         *     console.log('123');\r\n         *\r\n         * } );\r\n         *\r\n         * ```\r\n         */\r\n        domReady: function () {\r\n\r\n            var fnArr = [];\r\n\r\n            function doReady(doc) {\r\n                //确保onready只执行一次\r\n                doc.isReady = true;\r\n                for (var ci; ci = fnArr.pop(); ci()) {\r\n                }\r\n            }\r\n\r\n            return function (onready, win) {\r\n                win = win || window;\r\n                var doc = win.document;\r\n                onready && fnArr.push(onready);\r\n                if (doc.readyState === \"complete\") {\r\n                    doReady(doc);\r\n                } else {\r\n                    doc.isReady && doReady(doc);\r\n                    if (browser.ie && browser.version != 11) {\r\n                        (function () {\r\n                            if (doc.isReady) return;\r\n                            try {\r\n                                doc.documentElement.doScroll(\"left\");\r\n                            } catch (error) {\r\n                                setTimeout(arguments.callee, 0);\r\n                                return;\r\n                            }\r\n                            doReady(doc);\r\n                        })();\r\n                        win.attachEvent('onload', function () {\r\n                            doReady(doc)\r\n                        });\r\n                    } else {\r\n                        doc.addEventListener(\"DOMContentLoaded\", function () {\r\n                            doc.removeEventListener(\"DOMContentLoaded\", arguments.callee, false);\r\n                            doReady(doc);\r\n                        }, false);\r\n                        win.addEventListener('load', function () {\r\n                            doReady(doc)\r\n                        }, false);\r\n                    }\r\n                }\r\n\r\n            }\r\n        }(),\r\n\r\n        /**\r\n         * 动态添加css样式\r\n         * @method cssRule\r\n         * @param { String } 节点名称\r\n         * @grammar UE.utils.cssRule('添加的样式的节点名称',['样式'，'放到哪个document上'])\r\n         * @grammar UE.utils.cssRule('body','body{background:#ccc}') => null  //给body添加背景颜色\r\n         * @grammar UE.utils.cssRule('body') =>样式的字符串  //取得key值为body的样式的内容,如果没有找到key值先关的样式将返回空，例如刚才那个背景颜色，将返回 body{background:#ccc}\r\n         * @grammar UE.utils.cssRule('body',document) => 返回指定key的样式，并且指定是哪个document\r\n         * @grammar UE.utils.cssRule('body','') =>null //清空给定的key值的背景颜色\r\n         */\r\n        cssRule: browser.ie && browser.version != 11 ? function (key, style, doc) {\r\n            var indexList, index;\r\n            if (style === undefined || style && style.nodeType && style.nodeType == 9) {\r\n                //获取样式\r\n                doc = style && style.nodeType && style.nodeType == 9 ? style : (doc || document);\r\n                indexList = doc.indexList || (doc.indexList = {});\r\n                index = indexList[key];\r\n                if (index !== undefined) {\r\n                    return doc.styleSheets[index].cssText\r\n                }\r\n                return undefined;\r\n            }\r\n            doc = doc || document;\r\n            indexList = doc.indexList || (doc.indexList = {});\r\n            index = indexList[key];\r\n            //清除样式\r\n            if (style === '') {\r\n                if (index !== undefined) {\r\n                    doc.styleSheets[index].cssText = '';\r\n                    delete indexList[key];\r\n                    return true\r\n                }\r\n                return false;\r\n            }\r\n\r\n            //添加样式\r\n            if (index !== undefined) {\r\n                sheetStyle = doc.styleSheets[index];\r\n            } else {\r\n                sheetStyle = doc.createStyleSheet('', index = doc.styleSheets.length);\r\n                indexList[key] = index;\r\n            }\r\n            sheetStyle.cssText = style;\r\n        } : function (key, style, doc) {\r\n            var head, node;\r\n            if (style === undefined || style && style.nodeType && style.nodeType == 9) {\r\n                //获取样式\r\n                doc = style && style.nodeType && style.nodeType == 9 ? style : (doc || document);\r\n                node = doc.getElementById(key);\r\n                return node ? node.innerHTML : undefined;\r\n            }\r\n            doc = doc || document;\r\n            node = doc.getElementById(key);\r\n\r\n            //清除样式\r\n            if (style === '') {\r\n                if (node) {\r\n                    node.parentNode.removeChild(node);\r\n                    return true\r\n                }\r\n                return false;\r\n            }\r\n\r\n            //添加样式\r\n            if (node) {\r\n                node.innerHTML = style;\r\n            } else {\r\n                node = doc.createElement('style');\r\n                node.id = key;\r\n                node.innerHTML = style;\r\n                doc.getElementsByTagName('head')[0].appendChild(node);\r\n            }\r\n        },\r\n        sort: function (array, compareFn) {\r\n            compareFn = compareFn || function (item1, item2) { return item1.localeCompare(item2); };\r\n            for (var i = 0, len = array.length; i < len; i++) {\r\n                for (var j = i, length = array.length; j < length; j++) {\r\n                    if (compareFn(array[i], array[j]) > 0) {\r\n                        var t = array[i];\r\n                        array[i] = array[j];\r\n                        array[j] = t;\r\n                    }\r\n                }\r\n            }\r\n            return array;\r\n        },\r\n        serializeParam: function (json) {\r\n            var strArr = [];\r\n            for (var i in json) {\r\n                //忽略默认的几个参数\r\n                if (i == \"method\" || i == \"timeout\" || i == \"async\") continue;\r\n                //传递过来的对象和函数不在提交之列\r\n                if (!((typeof json[i]).toLowerCase() == \"function\" || (typeof json[i]).toLowerCase() == \"object\")) {\r\n                    strArr.push(encodeURIComponent(i) + \"=\" + encodeURIComponent(json[i]));\r\n                } else if (utils.isArray(json[i])) {\r\n                    //支持传数组内容\r\n                    for (var j = 0; j < json[i].length; j++) {\r\n                        strArr.push(encodeURIComponent(i) + \"[]=\" + encodeURIComponent(json[i][j]));\r\n                    }\r\n                }\r\n            }\r\n            return strArr.join(\"&\");\r\n        },\r\n        formatUrl: function (url) {\r\n            var u = url.replace(/&&/g, '&');\r\n            u = u.replace(/\\?&/g, '?');\r\n            u = u.replace(/&$/g, '');\r\n            u = u.replace(/&#/g, '#');\r\n            u = u.replace(/&+/g, '&');\r\n            return u;\r\n        },\r\n        isCrossDomainUrl: function (url) {\r\n            var a = document.createElement('a');\r\n            a.href = url;\r\n            if (browser.ie) {\r\n                a.href = a.href;\r\n            }\r\n            return !(a.protocol == location.protocol && a.hostname == location.hostname &&\r\n                (a.port == location.port || (a.port == '80' && location.port == '') || (a.port == '' && location.port == '80')));\r\n        },\r\n        clearEmptyAttrs: function (obj) {\r\n            for (var p in obj) {\r\n                if (obj[p] === '') {\r\n                    delete obj[p]\r\n                }\r\n            }\r\n            return obj;\r\n        },\r\n        str2json: function (s) {\r\n\r\n            if (!utils.isString(s)) return null;\r\n            if (window.JSON) {\r\n                return JSON.parse(s);\r\n            } else {\r\n                return (new Function(\"return \" + utils.trim(s || '')))();\r\n            }\r\n\r\n        },\r\n        json2str: (function () {\r\n\r\n            if (window.JSON) {\r\n\r\n                return JSON.stringify;\r\n\r\n            } else {\r\n\r\n                var escapeMap = {\r\n                    \"\\b\": '\\\\b',\r\n                    \"\\t\": '\\\\t',\r\n                    \"\\n\": '\\\\n',\r\n                    \"\\f\": '\\\\f',\r\n                    \"\\r\": '\\\\r',\r\n                    '\"': '\\\\\"',\r\n                    \"\\\\\": '\\\\\\\\'\r\n                };\r\n\r\n                function encodeString(source) {\r\n                    if (/[\"\\\\\\x00-\\x1f]/.test(source)) {\r\n                        source = source.replace(\r\n                            /[\"\\\\\\x00-\\x1f]/g,\r\n                            function (match) {\r\n                                var c = escapeMap[match];\r\n                                if (c) {\r\n                                    return c;\r\n                                }\r\n                                c = match.charCodeAt();\r\n                                return \"\\\\u00\"\r\n                                    + Math.floor(c / 16).toString(16)\r\n                                    + (c % 16).toString(16);\r\n                            });\r\n                    }\r\n                    return '\"' + source + '\"';\r\n                }\r\n\r\n                function encodeArray(source) {\r\n                    var result = [\"[\"],\r\n                        l = source.length,\r\n                        preComma, i, item;\r\n\r\n                    for (i = 0; i < l; i++) {\r\n                        item = source[i];\r\n\r\n                        switch (typeof item) {\r\n                            case \"undefined\":\r\n                            case \"function\":\r\n                            case \"unknown\":\r\n                                break;\r\n                            default:\r\n                                if (preComma) {\r\n                                    result.push(',');\r\n                                }\r\n                                result.push(utils.json2str(item));\r\n                                preComma = 1;\r\n                        }\r\n                    }\r\n                    result.push(\"]\");\r\n                    return result.join(\"\");\r\n                }\r\n\r\n                function pad(source) {\r\n                    return source < 10 ? '0' + source : source;\r\n                }\r\n\r\n                function encodeDate(source) {\r\n                    return '\"' + source.getFullYear() + \"-\"\r\n                        + pad(source.getMonth() + 1) + \"-\"\r\n                        + pad(source.getDate()) + \"T\"\r\n                        + pad(source.getHours()) + \":\"\r\n                        + pad(source.getMinutes()) + \":\"\r\n                        + pad(source.getSeconds()) + '\"';\r\n                }\r\n\r\n                return function (value) {\r\n                    switch (typeof value) {\r\n                        case 'undefined':\r\n                            return 'undefined';\r\n\r\n                        case 'number':\r\n                            return isFinite(value) ? String(value) : \"null\";\r\n\r\n                        case 'string':\r\n                            return encodeString(value);\r\n\r\n                        case 'boolean':\r\n                            return String(value);\r\n\r\n                        default:\r\n                            if (value === null) {\r\n                                return 'null';\r\n                            } else if (utils.isArray(value)) {\r\n                                return encodeArray(value);\r\n                            } else if (utils.isDate(value)) {\r\n                                return encodeDate(value);\r\n                            } else {\r\n                                var result = ['{'],\r\n                                    encode = utils.json2str,\r\n                                    preComma,\r\n                                    item;\r\n\r\n                                for (var key in value) {\r\n                                    if (Object.prototype.hasOwnProperty.call(value, key)) {\r\n                                        item = value[key];\r\n                                        switch (typeof item) {\r\n                                            case 'undefined':\r\n                                            case 'unknown':\r\n                                            case 'function':\r\n                                                break;\r\n                                            default:\r\n                                                if (preComma) {\r\n                                                    result.push(',');\r\n                                                }\r\n                                                preComma = 1;\r\n                                                result.push(encode(key) + ':' + encode(item));\r\n                                        }\r\n                                    }\r\n                                }\r\n                                result.push('}');\r\n                                return result.join('');\r\n                            }\r\n                    }\r\n                };\r\n            }\r\n\r\n        })()\r\n\r\n    };\r\n    /**\r\n     * 判断给定的对象是否是字符串\r\n     * @method isString\r\n     * @param { * } object 需要判断的对象\r\n     * @return { Boolean } 给定的对象是否是字符串\r\n     */\r\n\r\n    /**\r\n     * 判断给定的对象是否是数组\r\n     * @method isArray\r\n     * @param { * } object 需要判断的对象\r\n     * @return { Boolean } 给定的对象是否是数组\r\n     */\r\n\r\n    /**\r\n     * 判断给定的对象是否是一个Function\r\n     * @method isFunction\r\n     * @param { * } object 需要判断的对象\r\n     * @return { Boolean } 给定的对象是否是Function\r\n     */\r\n\r\n    /**\r\n     * 判断给定的对象是否是Number\r\n     * @method isNumber\r\n     * @param { * } object 需要判断的对象\r\n     * @return { Boolean } 给定的对象是否是Number\r\n     */\r\n\r\n    /**\r\n     * 判断给定的对象是否是一个正则表达式\r\n     * @method isRegExp\r\n     * @param { * } object 需要判断的对象\r\n     * @return { Boolean } 给定的对象是否是正则表达式\r\n     */\r\n\r\n    /**\r\n     * 判断给定的对象是否是一个普通对象\r\n     * @method isObject\r\n     * @param { * } object 需要判断的对象\r\n     * @return { Boolean } 给定的对象是否是普通对象\r\n     */\r\n    utils.each(['String', 'Function', 'Array', 'Number', 'RegExp', 'Object', 'Date'], function (v) {\r\n        UE.utils['is' + v] = function (obj) {\r\n            return Object.prototype.toString.apply(obj) == '[object ' + v + ']';\r\n        }\r\n    });\r\n\r\n\r\n    // core/EventBase.js\r\n    /**\r\n     * UE采用的事件基类\r\n     * @file\r\n     * @module UE\r\n     * @class EventBase\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * UEditor公用空间，UEditor所有的功能都挂载在该空间下\r\n     * @unfile\r\n     * @module UE\r\n     */\r\n\r\n    /**\r\n     * UE采用的事件基类，继承此类的对应类将获取addListener,removeListener,fireEvent方法。\r\n     * 在UE中，Editor以及所有ui实例都继承了该类，故可以在对应的ui对象以及editor对象上使用上述方法。\r\n     * @unfile\r\n     * @module UE\r\n     * @class EventBase\r\n     */\r\n\r\n    /**\r\n     * 通过此构造器，子类可以继承EventBase获取事件监听的方法\r\n     * @constructor\r\n     * @example\r\n     * ```javascript\r\n     * UE.EventBase.call(editor);\r\n     * ```\r\n     */\r\n    var EventBase = UE.EventBase = function () { };\r\n\r\n    EventBase.prototype = {\r\n\r\n        /**\r\n         * 注册事件监听器\r\n         * @method addListener\r\n         * @param { String } types 监听的事件名称，同时监听多个事件使用空格分隔\r\n         * @param { Function } fn 监听的事件被触发时，会执行该回调函数\r\n         * @waining 事件被触发时，监听的函数假如返回的值恒等于true，回调函数的队列中后面的函数将不执行\r\n         * @example\r\n         * ```javascript\r\n         * editor.addListener('selectionchange',function(){\r\n         *      console.log(\"选区已经变化！\");\r\n         * })\r\n         * editor.addListener('beforegetcontent aftergetcontent',function(type){\r\n         *         if(type == 'beforegetcontent'){\r\n         *             //do something\r\n         *         }else{\r\n         *             //do something\r\n         *         }\r\n         *         console.log(this.getContent) // this是注册的事件的编辑器实例\r\n         * })\r\n         * ```\r\n         * @see UE.EventBase:fireEvent(String)\r\n         */\r\n        addListener: function (types, listener) {\r\n            types = utils.trim(types).split(/\\s+/);\r\n            for (var i = 0, ti; ti = types[i++];) {\r\n                getListener(this, ti, true).push(listener);\r\n            }\r\n        },\r\n\r\n        on: function (types, listener) {\r\n            return this.addListener(types, listener);\r\n        },\r\n        off: function (types, listener) {\r\n            return this.removeListener(types, listener)\r\n        },\r\n        trigger: function () {\r\n            return this.fireEvent.apply(this, arguments);\r\n        },\r\n        /**\r\n         * 移除事件监听器\r\n         * @method removeListener\r\n         * @param { String } types 移除的事件名称，同时移除多个事件使用空格分隔\r\n         * @param { Function } fn 移除监听事件的函数引用\r\n         * @example\r\n         * ```javascript\r\n         * //changeCallback为方法体\r\n         * editor.removeListener(\"selectionchange\",changeCallback);\r\n         * ```\r\n         */\r\n        removeListener: function (types, listener) {\r\n            types = utils.trim(types).split(/\\s+/);\r\n            for (var i = 0, ti; ti = types[i++];) {\r\n                utils.removeItem(getListener(this, ti) || [], listener);\r\n            }\r\n        },\r\n\r\n        /**\r\n         * 触发事件\r\n         * @method fireEvent\r\n         * @param { String } types 触发的事件名称，同时触发多个事件使用空格分隔\r\n         * @remind 该方法会触发addListener\r\n         * @return { * } 返回触发事件的队列中，最后执行的回调函数的返回值\r\n         * @example\r\n         * ```javascript\r\n         * editor.fireEvent(\"selectionchange\");\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 触发事件\r\n         * @method fireEvent\r\n         * @param { String } types 触发的事件名称，同时触发多个事件使用空格分隔\r\n         * @param { *... } options 可选参数，可以传入一个或多个参数，会传给事件触发的回调函数\r\n         * @return { * } 返回触发事件的队列中，最后执行的回调函数的返回值\r\n         * @example\r\n         * ```javascript\r\n         *\r\n         * editor.addListener( \"selectionchange\", function ( type, arg1, arg2 ) {\r\n         *\r\n         *     console.log( arg1 + \" \" + arg2 );\r\n         *\r\n         * } );\r\n         *\r\n         * //触发selectionchange事件， 会执行上面的事件监听器\r\n         * //output: Hello World\r\n         * editor.fireEvent(\"selectionchange\", \"Hello\", \"World\");\r\n         * ```\r\n         */\r\n        fireEvent: function () {\r\n            var types = arguments[0];\r\n            types = utils.trim(types).split(' ');\r\n            for (var i = 0, ti; ti = types[i++];) {\r\n                var listeners = getListener(this, ti),\r\n                    r, t, k;\r\n                if (listeners) {\r\n                    k = listeners.length;\r\n                    while (k--) {\r\n                        if (!listeners[k]) continue;\r\n                        t = listeners[k].apply(this, arguments);\r\n                        if (t === true) {\r\n                            return t;\r\n                        }\r\n                        if (t !== undefined) {\r\n                            r = t;\r\n                        }\r\n                    }\r\n                }\r\n                if (t = this['on' + ti.toLowerCase()]) {\r\n                    r = t.apply(this, arguments);\r\n                }\r\n            }\r\n            return r;\r\n        }\r\n    };\r\n    /**\r\n     * 获得对象所拥有监听类型的所有监听器\r\n     * @unfile\r\n     * @module UE\r\n     * @since 1.2.6.1\r\n     * @method getListener\r\n     * @public\r\n     * @param { Object } obj  查询监听器的对象\r\n     * @param { String } type 事件类型\r\n     * @param { Boolean } force  为true且当前所有type类型的侦听器不存在时，创建一个空监听器数组\r\n     * @return { Array } 监听器数组\r\n     */\r\n    function getListener(obj, type, force) {\r\n        var allListeners;\r\n        type = type.toLowerCase();\r\n        return ((allListeners = (obj.__allListeners || force && (obj.__allListeners = {})))\r\n            && (allListeners[type] || force && (allListeners[type] = [])));\r\n    }\r\n\r\n\r\n\r\n    // core/dtd.js\r\n    ///import editor.js\r\n    ///import core/dom/dom.js\r\n    ///import core/utils.js\r\n    /**\r\n     * dtd html语义化的体现类\r\n     * @constructor\r\n     * @namespace dtd\r\n     */\r\n    var dtd = dom.dtd = (function () {\r\n        function _(s) {\r\n            for (var k in s) {\r\n                s[k.toUpperCase()] = s[k];\r\n            }\r\n            return s;\r\n        }\r\n        var X = utils.extend2;\r\n        var A = _({ isindex: 1, fieldset: 1 }),\r\n            B = _({ input: 1, button: 1, select: 1, textarea: 1, label: 1 }),\r\n            C = X(_({ a: 1 }), B),\r\n            D = X({ iframe: 1 }, C),\r\n            E = _({ hr: 1, ul: 1, menu: 1, div: 1, blockquote: 1, noscript: 1, table: 1, center: 1, address: 1, dir: 1, pre: 1, h5: 1, dl: 1, h4: 1, noframes: 1, h6: 1, ol: 1, h1: 1, h3: 1, h2: 1 }),\r\n            F = _({ ins: 1, del: 1, script: 1, style: 1 }),\r\n            G = X(_({ b: 1, acronym: 1, bdo: 1, 'var': 1, '#': 1, abbr: 1, code: 1, br: 1, i: 1, cite: 1, kbd: 1, u: 1, strike: 1, s: 1, tt: 1, strong: 1, q: 1, samp: 1, em: 1, dfn: 1, span: 1 }), F),\r\n            H = X(_({ sub: 1, img: 1, embed: 1, object: 1, sup: 1, basefont: 1, map: 1, applet: 1, font: 1, big: 1, small: 1 }), G),\r\n            I = X(_({ p: 1 }), H),\r\n            J = X(_({ iframe: 1 }), H, B),\r\n            K = _({ img: 1, embed: 1, noscript: 1, br: 1, kbd: 1, center: 1, button: 1, basefont: 1, h5: 1, h4: 1, samp: 1, h6: 1, ol: 1, h1: 1, h3: 1, h2: 1, form: 1, font: 1, '#': 1, select: 1, menu: 1, ins: 1, abbr: 1, label: 1, code: 1, table: 1, script: 1, cite: 1, input: 1, iframe: 1, strong: 1, textarea: 1, noframes: 1, big: 1, small: 1, span: 1, hr: 1, sub: 1, bdo: 1, 'var': 1, div: 1, object: 1, sup: 1, strike: 1, dir: 1, map: 1, dl: 1, applet: 1, del: 1, isindex: 1, fieldset: 1, ul: 1, b: 1, acronym: 1, a: 1, blockquote: 1, i: 1, u: 1, s: 1, tt: 1, address: 1, q: 1, pre: 1, p: 1, em: 1, dfn: 1 }),\r\n\r\n            L = X(_({ a: 0 }), J),//a不能被切开，所以把他\r\n            M = _({ tr: 1 }),\r\n            N = _({ '#': 1 }),\r\n            O = X(_({ param: 1 }), K),\r\n            P = X(_({ form: 1 }), A, D, E, I),\r\n            Q = _({ li: 1, ol: 1, ul: 1 }),\r\n            R = _({ style: 1, script: 1 }),\r\n            S = _({ base: 1, link: 1, meta: 1, title: 1 }),\r\n            T = X(S, R),\r\n            U = _({ head: 1, body: 1 }),\r\n            V = _({ html: 1 });\r\n\r\n        var block = _({ address: 1, blockquote: 1, center: 1, dir: 1, div: 1, dl: 1, fieldset: 1, form: 1, h1: 1, h2: 1, h3: 1, h4: 1, h5: 1, h6: 1, hr: 1, isindex: 1, menu: 1, noframes: 1, ol: 1, p: 1, pre: 1, table: 1, ul: 1 }),\r\n\r\n            empty = _({ area: 1, base: 1, basefont: 1, br: 1, col: 1, command: 1, dialog: 1, embed: 1, hr: 1, img: 1, input: 1, isindex: 1, keygen: 1, link: 1, meta: 1, param: 1, source: 1, track: 1, wbr: 1 });\r\n\r\n        return _({\r\n\r\n            // $ 表示自定的属性\r\n\r\n            // body外的元素列表.\r\n            $nonBodyContent: X(V, U, S),\r\n\r\n            //块结构元素列表\r\n            $block: block,\r\n\r\n            //内联元素列表\r\n            $inline: L,\r\n\r\n            $inlineWithA: X(_({ a: 1 }), L),\r\n\r\n            $body: X(_({ script: 1, style: 1 }), block),\r\n\r\n            $cdata: _({ script: 1, style: 1 }),\r\n\r\n            //自闭和元素\r\n            $empty: empty,\r\n\r\n            //不是自闭合，但不能让range选中里边\r\n            $nonChild: _({ iframe: 1, textarea: 1 }),\r\n            //列表元素列表\r\n            $listItem: _({ dd: 1, dt: 1, li: 1 }),\r\n\r\n            //列表根元素列表\r\n            $list: _({ ul: 1, ol: 1, dl: 1 }),\r\n\r\n            //不能认为是空的元素\r\n            $isNotEmpty: _({ table: 1, ul: 1, ol: 1, dl: 1, iframe: 1, area: 1, base: 1, col: 1, hr: 1, img: 1, embed: 1, input: 1, link: 1, meta: 1, param: 1, h1: 1, h2: 1, h3: 1, h4: 1, h5: 1, h6: 1 }),\r\n\r\n            //如果没有子节点就可以删除的元素列表，像span,a\r\n            $removeEmpty: _({ a: 1, abbr: 1, acronym: 1, address: 1, b: 1, bdo: 1, big: 1, cite: 1, code: 1, del: 1, dfn: 1, em: 1, font: 1, i: 1, ins: 1, label: 1, kbd: 1, q: 1, s: 1, samp: 1, small: 1, span: 1, strike: 1, strong: 1, sub: 1, sup: 1, tt: 1, u: 1, 'var': 1 }),\r\n\r\n            $removeEmptyBlock: _({ 'p': 1, 'div': 1 }),\r\n\r\n            //在table元素里的元素列表\r\n            $tableContent: _({ caption: 1, col: 1, colgroup: 1, tbody: 1, td: 1, tfoot: 1, th: 1, thead: 1, tr: 1, table: 1 }),\r\n            //不转换的标签\r\n            $notTransContent: _({ pre: 1, script: 1, style: 1, textarea: 1 }),\r\n            html: U,\r\n            head: T,\r\n            style: N,\r\n            script: N,\r\n            body: P,\r\n            base: {},\r\n            link: {},\r\n            meta: {},\r\n            title: N,\r\n            col: {},\r\n            tr: _({ td: 1, th: 1 }),\r\n            img: {},\r\n            embed: {},\r\n            colgroup: _({ thead: 1, col: 1, tbody: 1, tr: 1, tfoot: 1 }),\r\n            noscript: P,\r\n            td: P,\r\n            br: {},\r\n            th: P,\r\n            center: P,\r\n            kbd: L,\r\n            button: X(I, E),\r\n            basefont: {},\r\n            h5: L,\r\n            h4: L,\r\n            samp: L,\r\n            h6: L,\r\n            ol: Q,\r\n            h1: L,\r\n            h3: L,\r\n            option: N,\r\n            h2: L,\r\n            form: X(A, D, E, I),\r\n            select: _({ optgroup: 1, option: 1 }),\r\n            font: L,\r\n            ins: L,\r\n            menu: Q,\r\n            abbr: L,\r\n            label: L,\r\n            table: _({ thead: 1, col: 1, tbody: 1, tr: 1, colgroup: 1, caption: 1, tfoot: 1 }),\r\n            code: L,\r\n            tfoot: M,\r\n            cite: L,\r\n            li: P,\r\n            input: {},\r\n            iframe: P,\r\n            strong: L,\r\n            textarea: N,\r\n            noframes: P,\r\n            big: L,\r\n            small: L,\r\n            //trace:\r\n            span: _({ '#': 1, br: 1, b: 1, strong: 1, u: 1, i: 1, em: 1, sub: 1, sup: 1, strike: 1, span: 1 }),\r\n            hr: L,\r\n            dt: L,\r\n            sub: L,\r\n            optgroup: _({ option: 1 }),\r\n            param: {},\r\n            bdo: L,\r\n            'var': L,\r\n            div: P,\r\n            object: O,\r\n            sup: L,\r\n            dd: P,\r\n            strike: L,\r\n            area: {},\r\n            dir: Q,\r\n            map: X(_({ area: 1, form: 1, p: 1 }), A, F, E),\r\n            applet: O,\r\n            dl: _({ dt: 1, dd: 1 }),\r\n            del: L,\r\n            isindex: {},\r\n            fieldset: X(_({ legend: 1 }), K),\r\n            thead: M,\r\n            ul: Q,\r\n            acronym: L,\r\n            b: L,\r\n            a: X(_({ a: 1 }), J),\r\n            blockquote: X(_({ td: 1, tr: 1, tbody: 1, li: 1 }), P),\r\n            caption: L,\r\n            i: L,\r\n            u: L,\r\n            tbody: M,\r\n            s: L,\r\n            address: X(D, I),\r\n            tt: L,\r\n            legend: L,\r\n            q: L,\r\n            pre: X(G, C),\r\n            p: X(_({ 'a': 1 }), L),\r\n            em: L,\r\n            dfn: L\r\n        });\r\n    })();\r\n\r\n\r\n    // core/domUtils.js\r\n    /**\r\n     * Dom操作工具包\r\n     * @file\r\n     * @module UE.dom.domUtils\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * Dom操作工具包\r\n     * @unfile\r\n     * @module UE.dom.domUtils\r\n     */\r\n    function getDomNode(node, start, ltr, startFromChild, fn, guard) {\r\n        var tmpNode = startFromChild && node[start],\r\n            parent;\r\n        !tmpNode && (tmpNode = node[ltr]);\r\n        while (!tmpNode && (parent = (parent || node).parentNode)) {\r\n            if (parent.tagName == 'BODY' || guard && !guard(parent)) {\r\n                return null;\r\n            }\r\n            tmpNode = parent[ltr];\r\n        }\r\n        if (tmpNode && fn && !fn(tmpNode)) {\r\n            return getDomNode(tmpNode, start, ltr, false, fn);\r\n        }\r\n        return tmpNode;\r\n    }\r\n    var attrFix = ie && browser.version < 9 ? {\r\n        tabindex: \"tabIndex\",\r\n        readonly: \"readOnly\",\r\n        \"for\": \"htmlFor\",\r\n        \"class\": \"className\",\r\n        maxlength: \"maxLength\",\r\n        cellspacing: \"cellSpacing\",\r\n        cellpadding: \"cellPadding\",\r\n        rowspan: \"rowSpan\",\r\n        colspan: \"colSpan\",\r\n        usemap: \"useMap\",\r\n        frameborder: \"frameBorder\"\r\n    } : {\r\n            tabindex: \"tabIndex\",\r\n            readonly: \"readOnly\"\r\n        },\r\n        styleBlock = utils.listToMap([\r\n            '-webkit-box', '-moz-box', 'block',\r\n            'list-item', 'table', 'table-row-group',\r\n            'table-header-group', 'table-footer-group',\r\n            'table-row', 'table-column-group', 'table-column',\r\n            'table-cell', 'table-caption'\r\n        ]);\r\n    var domUtils = dom.domUtils = {\r\n        //节点常量\r\n        NODE_ELEMENT: 1,\r\n        NODE_DOCUMENT: 9,\r\n        NODE_TEXT: 3,\r\n        NODE_COMMENT: 8,\r\n        NODE_DOCUMENT_FRAGMENT: 11,\r\n\r\n        //位置关系\r\n        POSITION_IDENTICAL: 0,\r\n        POSITION_DISCONNECTED: 1,\r\n        POSITION_FOLLOWING: 2,\r\n        POSITION_PRECEDING: 4,\r\n        POSITION_IS_CONTAINED: 8,\r\n        POSITION_CONTAINS: 16,\r\n        //ie6使用其他的会有一段空白出现\r\n        fillChar: ie && browser.version == '6' ? '\\ufeff' : '\\u200B',\r\n        //-------------------------Node部分--------------------------------\r\n        keys: {\r\n        /*Backspace*/ 8: 1, /*Delete*/ 46: 1,\r\n        /*Shift*/ 16: 1, /*Ctrl*/ 17: 1, /*Alt*/ 18: 1,\r\n            37: 1, 38: 1, 39: 1, 40: 1,\r\n            13: 1 /*enter*/\r\n        },\r\n        /**\r\n         * 获取节点A相对于节点B的位置关系\r\n         * @method getPosition\r\n         * @param { Node } nodeA 需要查询位置关系的节点A\r\n         * @param { Node } nodeB 需要查询位置关系的节点B\r\n         * @return { Number } 节点A与节点B的关系\r\n         * @example\r\n         * ```javascript\r\n         * //output: 20\r\n         * var position = UE.dom.domUtils.getPosition( document.documentElement, document.body );\r\n         *\r\n         * switch ( position ) {\r\n         *\r\n         *      //0\r\n         *      case UE.dom.domUtils.POSITION_IDENTICAL:\r\n         *          console.log('元素相同');\r\n         *          break;\r\n         *      //1\r\n         *      case UE.dom.domUtils.POSITION_DISCONNECTED:\r\n         *          console.log('两个节点在不同的文档中');\r\n         *          break;\r\n         *      //2\r\n         *      case UE.dom.domUtils.POSITION_FOLLOWING:\r\n         *          console.log('节点A在节点B之后');\r\n         *          break;\r\n         *      //4\r\n         *      case UE.dom.domUtils.POSITION_PRECEDING;\r\n         *          console.log('节点A在节点B之前');\r\n         *          break;\r\n         *      //8\r\n         *      case UE.dom.domUtils.POSITION_IS_CONTAINED:\r\n         *          console.log('节点A被节点B包含');\r\n         *          break;\r\n         *      case 10:\r\n         *          console.log('节点A被节点B包含且节点A在节点B之后');\r\n         *          break;\r\n         *      //16\r\n         *      case UE.dom.domUtils.POSITION_CONTAINS:\r\n         *          console.log('节点A包含节点B');\r\n         *          break;\r\n         *      case 20:\r\n         *          console.log('节点A包含节点B且节点A在节点B之前');\r\n         *          break;\r\n         *\r\n         * }\r\n         * ```\r\n         */\r\n        getPosition: function (nodeA, nodeB) {\r\n            // 如果两个节点是同一个节点\r\n            if (nodeA === nodeB) {\r\n                // domUtils.POSITION_IDENTICAL\r\n                return 0;\r\n            }\r\n            var node,\r\n                parentsA = [nodeA],\r\n                parentsB = [nodeB];\r\n            node = nodeA;\r\n            while (node = node.parentNode) {\r\n                // 如果nodeB是nodeA的祖先节点\r\n                if (node === nodeB) {\r\n                    // domUtils.POSITION_IS_CONTAINED + domUtils.POSITION_FOLLOWING\r\n                    return 10;\r\n                }\r\n                parentsA.push(node);\r\n            }\r\n            node = nodeB;\r\n            while (node = node.parentNode) {\r\n                // 如果nodeA是nodeB的祖先节点\r\n                if (node === nodeA) {\r\n                    // domUtils.POSITION_CONTAINS + domUtils.POSITION_PRECEDING\r\n                    return 20;\r\n                }\r\n                parentsB.push(node);\r\n            }\r\n            parentsA.reverse();\r\n            parentsB.reverse();\r\n            if (parentsA[0] !== parentsB[0]) {\r\n                // domUtils.POSITION_DISCONNECTED\r\n                return 1;\r\n            }\r\n            var i = -1;\r\n            while (i++ , parentsA[i] === parentsB[i]) {\r\n            }\r\n            nodeA = parentsA[i];\r\n            nodeB = parentsB[i];\r\n            while (nodeA = nodeA.nextSibling) {\r\n                if (nodeA === nodeB) {\r\n                    // domUtils.POSITION_PRECEDING\r\n                    return 4\r\n                }\r\n            }\r\n            // domUtils.POSITION_FOLLOWING\r\n            return 2;\r\n        },\r\n\r\n        /**\r\n         * 检测节点node在父节点中的索引位置\r\n         * @method getNodeIndex\r\n         * @param { Node } node 需要检测的节点对象\r\n         * @return { Number } 该节点在父节点中的位置\r\n         * @see UE.dom.domUtils.getNodeIndex(Node,Boolean)\r\n         */\r\n\r\n        /**\r\n         * 检测节点node在父节点中的索引位置， 根据给定的mergeTextNode参数决定是否要合并多个连续的文本节点为一个节点\r\n         * @method getNodeIndex\r\n         * @param { Node } node 需要检测的节点对象\r\n         * @param { Boolean } mergeTextNode 是否合并多个连续的文本节点为一个节点\r\n         * @return { Number } 该节点在父节点中的位置\r\n         * @example\r\n         * ```javascript\r\n         *\r\n         *      var node = document.createElement(\"div\");\r\n         *\r\n         *      node.appendChild( document.createTextNode( \"hello\" ) );\r\n         *      node.appendChild( document.createTextNode( \"world\" ) );\r\n         *      node.appendChild( node = document.createElement( \"div\" ) );\r\n         *\r\n         *      //output: 2\r\n         *      console.log( UE.dom.domUtils.getNodeIndex( node ) );\r\n         *\r\n         *      //output: 1\r\n         *      console.log( UE.dom.domUtils.getNodeIndex( node, true ) );\r\n         *\r\n         * ```\r\n         */\r\n        getNodeIndex: function (node, ignoreTextNode) {\r\n            var preNode = node,\r\n                i = 0;\r\n            while (preNode = preNode.previousSibling) {\r\n                if (ignoreTextNode && preNode.nodeType == 3) {\r\n                    if (preNode.nodeType != preNode.nextSibling.nodeType) {\r\n                        i++;\r\n                    }\r\n                    continue;\r\n                }\r\n                i++;\r\n            }\r\n            return i;\r\n        },\r\n\r\n        /**\r\n         * 检测节点node是否在给定的document对象上\r\n         * @method inDoc\r\n         * @param { Node } node 需要检测的节点对象\r\n         * @param { DomDocument } doc 需要检测的document对象\r\n         * @return { Boolean } 该节点node是否在给定的document的dom树上\r\n         * @example\r\n         * ```javascript\r\n         *\r\n         * var node = document.createElement(\"div\");\r\n         *\r\n         * //output: false\r\n         * console.log( UE.do.domUtils.inDoc( node, document ) );\r\n         *\r\n         * document.body.appendChild( node );\r\n         *\r\n         * //output: true\r\n         * console.log( UE.do.domUtils.inDoc( node, document ) );\r\n         *\r\n         * ```\r\n         */\r\n        inDoc: function (node, doc) {\r\n            return domUtils.getPosition(node, doc) == 10;\r\n        },\r\n        /**\r\n         * 根据给定的过滤规则filterFn， 查找符合该过滤规则的node节点的第一个祖先节点，\r\n         * 查找的起点是给定node节点的父节点。\r\n         * @method findParent\r\n         * @param { Node } node 需要查找的节点\r\n         * @param { Function } filterFn 自定义的过滤方法。\r\n         * @warning 查找的终点是到body节点为止\r\n         * @remind 自定义的过滤方法filterFn接受一个Node对象作为参数， 该对象代表当前执行检测的祖先节点。 如果该\r\n         *          节点满足过滤条件， 则要求返回true， 这时将直接返回该节点作为findParent()的结果， 否则， 请返回false。\r\n         * @return { Node | Null } 如果找到符合过滤条件的节点， 就返回该节点， 否则返回NULL\r\n         * @example\r\n         * ```javascript\r\n         * var filterNode = UE.dom.domUtils.findParent( document.body.firstChild, function ( node ) {\r\n         *\r\n         *     //由于查找的终点是body节点， 所以永远也不会匹配当前过滤器的条件， 即这里永远会返回false\r\n         *     return node.tagName === \"HTML\";\r\n         *\r\n         * } );\r\n         *\r\n         * //output: true\r\n         * console.log( filterNode === null );\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 根据给定的过滤规则filterFn， 查找符合该过滤规则的node节点的第一个祖先节点，\r\n         * 如果includeSelf的值为true，则查找的起点是给定的节点node， 否则， 起点是node的父节点\r\n         * @method findParent\r\n         * @param { Node } node 需要查找的节点\r\n         * @param { Function } filterFn 自定义的过滤方法。\r\n         * @param { Boolean } includeSelf 查找过程是否包含自身\r\n         * @warning 查找的终点是到body节点为止\r\n         * @remind 自定义的过滤方法filterFn接受一个Node对象作为参数， 该对象代表当前执行检测的祖先节点。 如果该\r\n         *          节点满足过滤条件， 则要求返回true， 这时将直接返回该节点作为findParent()的结果， 否则， 请返回false。\r\n         * @remind 如果includeSelf为true， 则过滤器第一次执行时的参数会是节点本身。\r\n         *          反之， 过滤器第一次执行时的参数将是该节点的父节点。\r\n         * @return { Node | Null } 如果找到符合过滤条件的节点， 就返回该节点， 否则返回NULL\r\n         * @example\r\n         * ```html\r\n         * <body>\r\n         *\r\n         *      <div id=\"test\">\r\n         *      </div>\r\n         *\r\n         *      <script type=\"text/javascript\">\r\n         *\r\n         *          //output: DIV, BODY\r\n         *          var filterNode = UE.dom.domUtils.findParent( document.getElementById( \"test\" ), function ( node ) {\r\n         *\r\n         *              console.log( node.tagName );\r\n         *              return false;\r\n         *\r\n         *          }, true );\r\n         *\r\n         *      </script>\r\n         * </body>\r\n         * ```\r\n         */\r\n        findParent: function (node, filterFn, includeSelf) {\r\n            if (node && !domUtils.isBody(node)) {\r\n                node = includeSelf ? node : node.parentNode;\r\n                while (node) {\r\n                    if (!filterFn || filterFn(node) || domUtils.isBody(node)) {\r\n                        return filterFn && !filterFn(node) && domUtils.isBody(node) ? null : node;\r\n                    }\r\n                    node = node.parentNode;\r\n                }\r\n            }\r\n            return null;\r\n        },\r\n        /**\r\n         * 查找node的节点名为tagName的第一个祖先节点， 查找的起点是node节点的父节点。\r\n         * @method findParentByTagName\r\n         * @param { Node } node 需要查找的节点对象\r\n         * @param { Array } tagNames 需要查找的父节点的名称数组\r\n         * @warning 查找的终点是到body节点为止\r\n         * @return { Node | NULL } 如果找到符合条件的节点， 则返回该节点， 否则返回NULL\r\n         * @example\r\n         * ```javascript\r\n         * var node = UE.dom.domUtils.findParentByTagName( document.getElementsByTagName(\"div\")[0], [ \"BODY\" ] );\r\n         * //output: BODY\r\n         * console.log( node.tagName );\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 查找node的节点名为tagName的祖先节点， 如果includeSelf的值为true，则查找的起点是给定的节点node，\r\n         * 否则， 起点是node的父节点。\r\n         * @method findParentByTagName\r\n         * @param { Node } node 需要查找的节点对象\r\n         * @param { Array } tagNames 需要查找的父节点的名称数组\r\n         * @param { Boolean } includeSelf 查找过程是否包含node节点自身\r\n         * @warning 查找的终点是到body节点为止\r\n         * @return { Node | NULL } 如果找到符合条件的节点， 则返回该节点， 否则返回NULL\r\n         * @example\r\n         * ```javascript\r\n         * var queryTarget = document.getElementsByTagName(\"div\")[0];\r\n         * var node = UE.dom.domUtils.findParentByTagName( queryTarget, [ \"DIV\" ], true );\r\n         * //output: true\r\n         * console.log( queryTarget === node );\r\n         * ```\r\n         */\r\n        findParentByTagName: function (node, tagNames, includeSelf, excludeFn) {\r\n            tagNames = utils.listToMap(utils.isArray(tagNames) ? tagNames : [tagNames]);\r\n            return domUtils.findParent(node, function (node) {\r\n                return tagNames[node.tagName] && !(excludeFn && excludeFn(node));\r\n            }, includeSelf);\r\n        },\r\n        /**\r\n         * 查找节点node的祖先节点集合， 查找的起点是给定节点的父节点，结果集中不包含给定的节点。\r\n         * @method findParents\r\n         * @param { Node } node 需要查找的节点对象\r\n         * @return { Array } 给定节点的祖先节点数组\r\n         * @grammar UE.dom.domUtils.findParents(node)  => Array  //返回一个祖先节点数组集合，不包含自身\r\n         * @grammar UE.dom.domUtils.findParents(node,includeSelf)  => Array  //返回一个祖先节点数组集合，includeSelf指定是否包含自身\r\n         * @grammar UE.dom.domUtils.findParents(node,includeSelf,filterFn)  => Array  //返回一个祖先节点数组集合，filterFn指定过滤条件，返回true的node将被选取\r\n         * @grammar UE.dom.domUtils.findParents(node,includeSelf,filterFn,closerFirst)  => Array  //返回一个祖先节点数组集合，closerFirst为true的话，node的直接父亲节点是数组的第0个\r\n         */\r\n\r\n        /**\r\n         * 查找节点node的祖先节点集合， 如果includeSelf的值为true，\r\n         * 则返回的结果集中允许出现当前给定的节点， 否则， 该节点不会出现在其结果集中。\r\n         * @method findParents\r\n         * @param { Node } node 需要查找的节点对象\r\n         * @param { Boolean } includeSelf 查找的结果中是否允许包含当前查找的节点对象\r\n         * @return { Array } 给定节点的祖先节点数组\r\n         */\r\n        findParents: function (node, includeSelf, filterFn, closerFirst) {\r\n            var parents = includeSelf && (filterFn && filterFn(node) || !filterFn) ? [node] : [];\r\n            while (node = domUtils.findParent(node, filterFn)) {\r\n                parents.push(node);\r\n            }\r\n            return closerFirst ? parents : parents.reverse();\r\n        },\r\n\r\n        /**\r\n         * 在节点node后面插入新节点newNode\r\n         * @method insertAfter\r\n         * @param { Node } node 目标节点\r\n         * @param { Node } newNode 新插入的节点， 该节点将置于目标节点之后\r\n         * @return { Node } 新插入的节点\r\n         */\r\n        insertAfter: function (node, newNode) {\r\n            return node.nextSibling ? node.parentNode.insertBefore(newNode, node.nextSibling) :\r\n                node.parentNode.appendChild(newNode);\r\n        },\r\n\r\n        /**\r\n         * 删除节点node及其下属的所有节点\r\n         * @method remove\r\n         * @param { Node } node 需要删除的节点对象\r\n         * @return { Node } 返回刚删除的节点对象\r\n         * @example\r\n         * ```html\r\n         * <div id=\"test\">\r\n         *     <div id=\"child\">你好</div>\r\n         * </div>\r\n         * <script>\r\n         *     UE.dom.domUtils.remove( document.body, false );\r\n         *     //output: false\r\n         *     console.log( document.getElementById( \"child\" ) !== null );\r\n         * </script>\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 删除节点node，并根据keepChildren的值决定是否保留子节点\r\n         * @method remove\r\n         * @param { Node } node 需要删除的节点对象\r\n         * @param { Boolean } keepChildren 是否需要保留子节点\r\n         * @return { Node } 返回刚删除的节点对象\r\n         * @example\r\n         * ```html\r\n         * <div id=\"test\">\r\n         *     <div id=\"child\">你好</div>\r\n         * </div>\r\n         * <script>\r\n         *     UE.dom.domUtils.remove( document.body, true );\r\n         *     //output: true\r\n         *     console.log( document.getElementById( \"child\" ) !== null );\r\n         * </script>\r\n         * ```\r\n         */\r\n        remove: function (node, keepChildren) {\r\n            var parent = node.parentNode,\r\n                child;\r\n            if (parent) {\r\n                if (keepChildren && node.hasChildNodes()) {\r\n                    while (child = node.firstChild) {\r\n                        parent.insertBefore(child, node);\r\n                    }\r\n                }\r\n                parent.removeChild(node);\r\n            }\r\n            return node;\r\n        },\r\n\r\n        /**\r\n         * 取得node节点的下一个兄弟节点， 如果该节点其后没有兄弟节点， 则递归查找其父节点之后的第一个兄弟节点，\r\n         * 直到找到满足条件的节点或者递归到BODY节点之后才会结束。\r\n         * @method getNextDomNode\r\n         * @param { Node } node 需要获取其后的兄弟节点的节点对象\r\n         * @return { Node | NULL } 如果找满足条件的节点， 则返回该节点， 否则返回NULL\r\n         * @example\r\n         * ```html\r\n         *     <body>\r\n         *      <div id=\"test\">\r\n         *          <span></span>\r\n         *      </div>\r\n         *      <i>xxx</i>\r\n         * </body>\r\n         * <script>\r\n         *\r\n         *     //output: i节点\r\n         *     console.log( UE.dom.domUtils.getNextDomNode( document.getElementById( \"test\" ) ) );\r\n         *\r\n         * </script>\r\n         * ```\r\n         * @example\r\n         * ```html\r\n         * <body>\r\n         *      <div>\r\n         *          <span></span>\r\n         *          <i id=\"test\">xxx</i>\r\n         *      </div>\r\n         *      <b>xxx</b>\r\n         * </body>\r\n         * <script>\r\n         *\r\n         *     //由于id为test的i节点之后没有兄弟节点， 则查找其父节点（div）后面的兄弟节点\r\n         *     //output: b节点\r\n         *     console.log( UE.dom.domUtils.getNextDomNode( document.getElementById( \"test\" ) ) );\r\n         *\r\n         * </script>\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 取得node节点的下一个兄弟节点， 如果startFromChild的值为ture，则先获取其子节点，\r\n         * 如果有子节点则直接返回第一个子节点；如果没有子节点或者startFromChild的值为false，\r\n         * 则执行<a href=\"#UE.dom.domUtils.getNextDomNode(Node)\">getNextDomNode(Node node)</a>的查找过程。\r\n         * @method getNextDomNode\r\n         * @param { Node } node 需要获取其后的兄弟节点的节点对象\r\n         * @param { Boolean } startFromChild 查找过程是否从其子节点开始\r\n         * @return { Node | NULL } 如果找满足条件的节点， 则返回该节点， 否则返回NULL\r\n         * @see UE.dom.domUtils.getNextDomNode(Node)\r\n         */\r\n        getNextDomNode: function (node, startFromChild, filterFn, guard) {\r\n            return getDomNode(node, 'firstChild', 'nextSibling', startFromChild, filterFn, guard);\r\n        },\r\n        getPreDomNode: function (node, startFromChild, filterFn, guard) {\r\n            return getDomNode(node, 'lastChild', 'previousSibling', startFromChild, filterFn, guard);\r\n        },\r\n        /**\r\n         * 检测节点node是否属是UEditor定义的bookmark节点\r\n         * @method isBookmarkNode\r\n         * @private\r\n         * @param { Node } node 需要检测的节点对象\r\n         * @return { Boolean } 是否是bookmark节点\r\n         * @example\r\n         * ```html\r\n         * <span id=\"_baidu_bookmark_1\"></span>\r\n         * <script>\r\n         *      var bookmarkNode = document.getElementById(\"_baidu_bookmark_1\");\r\n         *      //output: true\r\n         *      console.log( UE.dom.domUtils.isBookmarkNode( bookmarkNode ) );\r\n         * </script>\r\n         * ```\r\n         */\r\n        isBookmarkNode: function (node) {\r\n            return node.nodeType == 1 && node.id && /^_baidu_bookmark_/i.test(node.id);\r\n        },\r\n        /**\r\n         * 获取节点node所属的window对象\r\n         * @method  getWindow\r\n         * @param { Node } node 节点对象\r\n         * @return { Window } 当前节点所属的window对象\r\n         * @example\r\n         * ```javascript\r\n         * //output: true\r\n         * console.log( UE.dom.domUtils.getWindow( document.body ) === window );\r\n         * ```\r\n         */\r\n        getWindow: function (node) {\r\n            var doc = node.ownerDocument || node;\r\n            return doc.defaultView || doc.parentWindow;\r\n        },\r\n        /**\r\n         * 获取离nodeA与nodeB最近的公共的祖先节点\r\n         * @method  getCommonAncestor\r\n         * @param { Node } nodeA 第一个节点\r\n         * @param { Node } nodeB 第二个节点\r\n         * @remind 如果给定的两个节点是同一个节点， 将直接返回该节点。\r\n         * @return { Node | NULL } 如果未找到公共节点， 返回NULL， 否则返回最近的公共祖先节点。\r\n         * @example\r\n         * ```javascript\r\n         * var commonAncestor = UE.dom.domUtils.getCommonAncestor( document.body, document.body.firstChild );\r\n         * //output: true\r\n         * console.log( commonAncestor.tagName.toLowerCase() === 'body' );\r\n         * ```\r\n         */\r\n        getCommonAncestor: function (nodeA, nodeB) {\r\n            if (nodeA === nodeB)\r\n                return nodeA;\r\n            var parentsA = [nodeA], parentsB = [nodeB], parent = nodeA, i = -1;\r\n            while (parent = parent.parentNode) {\r\n                if (parent === nodeB) {\r\n                    return parent;\r\n                }\r\n                parentsA.push(parent);\r\n            }\r\n            parent = nodeB;\r\n            while (parent = parent.parentNode) {\r\n                if (parent === nodeA)\r\n                    return parent;\r\n                parentsB.push(parent);\r\n            }\r\n            parentsA.reverse();\r\n            parentsB.reverse();\r\n            while (i++ , parentsA[i] === parentsB[i]) {\r\n            }\r\n            return i == 0 ? null : parentsA[i - 1];\r\n\r\n        },\r\n        /**\r\n         * 清除node节点左右连续为空的兄弟inline节点\r\n         * @method clearEmptySibling\r\n         * @param { Node } node 执行的节点对象， 如果该节点的左右连续的兄弟节点是空的inline节点，\r\n         * 则这些兄弟节点将被删除\r\n         * @grammar UE.dom.domUtils.clearEmptySibling(node,ignoreNext)  //ignoreNext指定是否忽略右边空节点\r\n         * @grammar UE.dom.domUtils.clearEmptySibling(node,ignoreNext,ignorePre)  //ignorePre指定是否忽略左边空节点\r\n         * @example\r\n         * ```html\r\n         * <body>\r\n         *     <div></div>\r\n         *     <span id=\"test\"></span>\r\n         *     <i></i>\r\n         *     <b></b>\r\n         *     <em>xxx</em>\r\n         *     <span></span>\r\n         * </body>\r\n         * <script>\r\n         *\r\n         *      UE.dom.domUtils.clearEmptySibling( document.getElementById( \"test\" ) );\r\n         *\r\n         *      //output: <div></div><span id=\"test\"></span><em>xxx</em><span></span>\r\n         *      console.log( document.body.innerHTML );\r\n         *\r\n         * </script>\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 清除node节点左右连续为空的兄弟inline节点， 如果ignoreNext的值为true，\r\n         * 则忽略对右边兄弟节点的操作。\r\n         * @method clearEmptySibling\r\n         * @param { Node } node 执行的节点对象， 如果该节点的左右连续的兄弟节点是空的inline节点，\r\n         * @param { Boolean } ignoreNext 是否忽略忽略对右边的兄弟节点的操作\r\n         * 则这些兄弟节点将被删除\r\n         * @see UE.dom.domUtils.clearEmptySibling(Node)\r\n         */\r\n\r\n        /**\r\n         * 清除node节点左右连续为空的兄弟inline节点， 如果ignoreNext的值为true，\r\n         * 则忽略对右边兄弟节点的操作， 如果ignorePre的值为true，则忽略对左边兄弟节点的操作。\r\n         * @method clearEmptySibling\r\n         * @param { Node } node 执行的节点对象， 如果该节点的左右连续的兄弟节点是空的inline节点，\r\n         * @param { Boolean } ignoreNext 是否忽略忽略对右边的兄弟节点的操作\r\n         * @param { Boolean } ignorePre 是否忽略忽略对左边的兄弟节点的操作\r\n         * 则这些兄弟节点将被删除\r\n         * @see UE.dom.domUtils.clearEmptySibling(Node)\r\n         */\r\n        clearEmptySibling: function (node, ignoreNext, ignorePre) {\r\n            function clear(next, dir) {\r\n                var tmpNode;\r\n                while (next && !domUtils.isBookmarkNode(next) && (domUtils.isEmptyInlineElement(next)\r\n                    //这里不能把空格算进来会吧空格干掉，出现文字间的空格丢掉了\r\n                    || !new RegExp('[^\\t\\n\\r' + domUtils.fillChar + ']').test(next.nodeValue))) {\r\n                    tmpNode = next[dir];\r\n                    domUtils.remove(next);\r\n                    next = tmpNode;\r\n                }\r\n            }\r\n            !ignoreNext && clear(node.nextSibling, 'nextSibling');\r\n            !ignorePre && clear(node.previousSibling, 'previousSibling');\r\n        },\r\n        /**\r\n         * 将一个文本节点textNode拆分成两个文本节点，offset指定拆分位置\r\n         * @method split\r\n         * @param { Node } textNode 需要拆分的文本节点对象\r\n         * @param { int } offset 需要拆分的位置， 位置计算从0开始\r\n         * @return { Node } 拆分后形成的新节点\r\n         * @example\r\n         * ```html\r\n         * <div id=\"test\">abcdef</div>\r\n         * <script>\r\n         *      var newNode = UE.dom.domUtils.split( document.getElementById( \"test\" ).firstChild, 3 );\r\n         *      //output: def\r\n         *      console.log( newNode.nodeValue );\r\n         * </script>\r\n         * ```\r\n         */\r\n        split: function (node, offset) {\r\n            var doc = node.ownerDocument;\r\n            if (browser.ie && offset == node.nodeValue.length) {\r\n                var next = doc.createTextNode('');\r\n                return domUtils.insertAfter(node, next);\r\n            }\r\n            var retval = node.splitText(offset);\r\n            //ie8下splitText不会跟新childNodes,我们手动触发他的更新\r\n            if (browser.ie8) {\r\n                var tmpNode = doc.createTextNode('');\r\n                domUtils.insertAfter(retval, tmpNode);\r\n                domUtils.remove(tmpNode);\r\n            }\r\n            return retval;\r\n        },\r\n\r\n        /**\r\n         * 检测文本节点textNode是否为空节点（包括空格、换行、占位符等字符）\r\n         * @method  isWhitespace\r\n         * @param { Node } node 需要检测的节点对象\r\n         * @return { Boolean } 检测的节点是否为空\r\n         * @example\r\n         * ```html\r\n         * <div id=\"test\">\r\n         *\r\n         * </div>\r\n         * <script>\r\n         *      //output: true\r\n         *      console.log( UE.dom.domUtils.isWhitespace( document.getElementById(\"test\").firstChild ) );\r\n         * </script>\r\n         * ```\r\n         */\r\n        isWhitespace: function (node) {\r\n            return !new RegExp('[^ \\t\\n\\r' + domUtils.fillChar + ']').test(node.nodeValue);\r\n        },\r\n        /**\r\n         * 获取元素element相对于viewport的位置坐标\r\n         * @method getXY\r\n         * @param { Node } element 需要计算位置的节点对象\r\n         * @return { Object } 返回形如{x:left,y:top}的一个key-value映射对象， 其中键x代表水平偏移距离，\r\n         *                          y代表垂直偏移距离。\r\n         *\r\n         * @example\r\n         * ```javascript\r\n         * var location = UE.dom.domUtils.getXY( document.getElementById(\"test\") );\r\n         * //output: test的坐标为: 12, 24\r\n         * console.log( 'test的坐标为： ', location.x, ',', location.y );\r\n         * ```\r\n         */\r\n        getXY: function (element) {\r\n            var x = 0, y = 0;\r\n            while (element.offsetParent) {\r\n                y += element.offsetTop;\r\n                x += element.offsetLeft;\r\n                element = element.offsetParent;\r\n            }\r\n            return { 'x': x, 'y': y };\r\n        },\r\n        /**\r\n         * 为元素element绑定原生DOM事件，type为事件类型，handler为处理函数\r\n         * @method on\r\n         * @param { Node } element 需要绑定事件的节点对象\r\n         * @param { String } type 绑定的事件类型\r\n         * @param { Function } handler 事件处理器\r\n         * @example\r\n         * ```javascript\r\n         * UE.dom.domUtils.on(document.body,\"click\",function(e){\r\n         *     //e为事件对象，this为被点击元素对戏那个\r\n         * });\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 为元素element绑定原生DOM事件，type为事件类型，handler为处理函数\r\n         * @method on\r\n         * @param { Node } element 需要绑定事件的节点对象\r\n         * @param { Array } type 绑定的事件类型数组\r\n         * @param { Function } handler 事件处理器\r\n         * @example\r\n         * ```javascript\r\n         * UE.dom.domUtils.on(document.body,[\"click\",\"mousedown\"],function(evt){\r\n         *     //evt为事件对象，this为被点击元素对象\r\n         * });\r\n         * ```\r\n         */\r\n        on: function (element, type, handler) {\r\n\r\n            var types = utils.isArray(type) ? type : utils.trim(type).split(/\\s+/),\r\n                k = types.length;\r\n            if (k) while (k--) {\r\n                type = types[k];\r\n                if (element.addEventListener) {\r\n                    element.addEventListener(type, handler, false);\r\n                } else {\r\n                    if (!handler._d) {\r\n                        handler._d = {\r\n                            els: []\r\n                        };\r\n                    }\r\n                    var key = type + handler.toString(), index = utils.indexOf(handler._d.els, element);\r\n                    if (!handler._d[key] || index == -1) {\r\n                        if (index == -1) {\r\n                            handler._d.els.push(element);\r\n                        }\r\n                        if (!handler._d[key]) {\r\n                            handler._d[key] = function (evt) {\r\n                                return handler.call(evt.srcElement, evt || window.event);\r\n                            };\r\n                        }\r\n\r\n\r\n                        element.attachEvent('on' + type, handler._d[key]);\r\n                    }\r\n                }\r\n            }\r\n            element = null;\r\n        },\r\n        /**\r\n         * 解除DOM事件绑定\r\n         * @method un\r\n         * @param { Node } element 需要解除事件绑定的节点对象\r\n         * @param { String } type 需要接触绑定的事件类型\r\n         * @param { Function } handler 对应的事件处理器\r\n         * @example\r\n         * ```javascript\r\n         * UE.dom.domUtils.un(document.body,\"click\",function(evt){\r\n         *     //evt为事件对象，this为被点击元素对象\r\n         * });\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 解除DOM事件绑定\r\n         * @method un\r\n         * @param { Node } element 需要解除事件绑定的节点对象\r\n         * @param { Array } type 需要接触绑定的事件类型数组\r\n         * @param { Function } handler 对应的事件处理器\r\n         * @example\r\n         * ```javascript\r\n         * UE.dom.domUtils.un(document.body, [\"click\",\"mousedown\"],function(evt){\r\n         *     //evt为事件对象，this为被点击元素对象\r\n         * });\r\n         * ```\r\n         */\r\n        un: function (element, type, handler) {\r\n            var types = utils.isArray(type) ? type : utils.trim(type).split(/\\s+/),\r\n                k = types.length;\r\n            if (k) while (k--) {\r\n                type = types[k];\r\n                if (element.removeEventListener) {\r\n                    element.removeEventListener(type, handler, false);\r\n                } else {\r\n                    var key = type + handler.toString();\r\n                    try {\r\n                        element.detachEvent('on' + type, handler._d ? handler._d[key] : handler);\r\n                    } catch (e) { }\r\n                    if (handler._d && handler._d[key]) {\r\n                        var index = utils.indexOf(handler._d.els, element);\r\n                        if (index != -1) {\r\n                            handler._d.els.splice(index, 1);\r\n                        }\r\n                        handler._d.els.length == 0 && delete handler._d[key];\r\n                    }\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * 比较节点nodeA与节点nodeB是否具有相同的标签名、属性名以及属性值\r\n         * @method  isSameElement\r\n         * @param { Node } nodeA 需要比较的节点\r\n         * @param { Node } nodeB 需要比较的节点\r\n         * @return { Boolean } 两个节点是否具有相同的标签名、属性名以及属性值\r\n         * @example\r\n         * ```html\r\n         * <span style=\"font-size:12px\">ssss</span>\r\n         * <span style=\"font-size:12px\">bbbbb</span>\r\n         * <span style=\"font-size:13px\">ssss</span>\r\n         * <span style=\"font-size:14px\">bbbbb</span>\r\n         *\r\n         * <script>\r\n         *\r\n         *     var nodes = document.getElementsByTagName( \"span\" );\r\n         *\r\n         *     //output: true\r\n         *     console.log( UE.dom.domUtils.isSameElement( nodes[0], nodes[1] ) );\r\n         *\r\n         *     //output: false\r\n         *     console.log( UE.dom.domUtils.isSameElement( nodes[2], nodes[3] ) );\r\n         *\r\n         * </script>\r\n         * ```\r\n         */\r\n        isSameElement: function (nodeA, nodeB) {\r\n            if (nodeA.tagName != nodeB.tagName) {\r\n                return false;\r\n            }\r\n            var thisAttrs = nodeA.attributes,\r\n                otherAttrs = nodeB.attributes;\r\n            if (!ie && thisAttrs.length != otherAttrs.length) {\r\n                return false;\r\n            }\r\n            var attrA, attrB, al = 0, bl = 0;\r\n            for (var i = 0; attrA = thisAttrs[i++];) {\r\n                if (attrA.nodeName == 'style') {\r\n                    if (attrA.specified) {\r\n                        al++;\r\n                    }\r\n                    if (domUtils.isSameStyle(nodeA, nodeB)) {\r\n                        continue;\r\n                    } else {\r\n                        return false;\r\n                    }\r\n                }\r\n                if (ie) {\r\n                    if (attrA.specified) {\r\n                        al++;\r\n                        attrB = otherAttrs.getNamedItem(attrA.nodeName);\r\n                    } else {\r\n                        continue;\r\n                    }\r\n                } else {\r\n                    attrB = nodeB.attributes[attrA.nodeName];\r\n                }\r\n                if (!attrB.specified || attrA.nodeValue != attrB.nodeValue) {\r\n                    return false;\r\n                }\r\n            }\r\n            // 有可能attrB的属性包含了attrA的属性之外还有自己的属性\r\n            if (ie) {\r\n                for (i = 0; attrB = otherAttrs[i++];) {\r\n                    if (attrB.specified) {\r\n                        bl++;\r\n                    }\r\n                }\r\n                if (al != bl) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        },\r\n\r\n        /**\r\n         * 判断节点nodeA与节点nodeB的元素的style属性是否一致\r\n         * @method isSameStyle\r\n         * @param { Node } nodeA 需要比较的节点\r\n         * @param { Node } nodeB 需要比较的节点\r\n         * @return { Boolean } 两个节点是否具有相同的style属性值\r\n         * @example\r\n         * ```html\r\n         * <span style=\"font-size:12px\">ssss</span>\r\n         * <span style=\"font-size:12px\">bbbbb</span>\r\n         * <span style=\"font-size:13px\">ssss</span>\r\n         * <span style=\"font-size:14px\">bbbbb</span>\r\n         *\r\n         * <script>\r\n         *\r\n         *     var nodes = document.getElementsByTagName( \"span\" );\r\n         *\r\n         *     //output: true\r\n         *     console.log( UE.dom.domUtils.isSameStyle( nodes[0], nodes[1] ) );\r\n         *\r\n         *     //output: false\r\n         *     console.log( UE.dom.domUtils.isSameStyle( nodes[2], nodes[3] ) );\r\n         *\r\n         * </script>\r\n         * ```\r\n         */\r\n        isSameStyle: function (nodeA, nodeB) {\r\n            var styleA = nodeA.style.cssText.replace(/( ?; ?)/g, ';').replace(/( ?: ?)/g, ':'),\r\n                styleB = nodeB.style.cssText.replace(/( ?; ?)/g, ';').replace(/( ?: ?)/g, ':');\r\n            if (browser.opera) {\r\n                styleA = nodeA.style;\r\n                styleB = nodeB.style;\r\n                if (styleA.length != styleB.length)\r\n                    return false;\r\n                for (var p in styleA) {\r\n                    if (/^(\\d+|csstext)$/i.test(p)) {\r\n                        continue;\r\n                    }\r\n                    if (styleA[p] != styleB[p]) {\r\n                        return false;\r\n                    }\r\n                }\r\n                return true;\r\n            }\r\n            if (!styleA || !styleB) {\r\n                return styleA == styleB;\r\n            }\r\n            styleA = styleA.split(';');\r\n            styleB = styleB.split(';');\r\n            if (styleA.length != styleB.length) {\r\n                return false;\r\n            }\r\n            for (var i = 0, ci; ci = styleA[i++];) {\r\n                if (utils.indexOf(styleB, ci) == -1) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        },\r\n        /**\r\n         * 检查节点node是否为block元素\r\n         * @method isBlockElm\r\n         * @param { Node } node 需要检测的节点对象\r\n         * @return { Boolean } 是否是block元素节点\r\n         * @warning 该方法的判断规则如下： 如果该元素原本是block元素， 则不论该元素当前的css样式是什么都会返回true；\r\n         *          否则，检测该元素的css样式， 如果该元素当前是block元素， 则返回true。 其余情况下都返回false。\r\n         * @example\r\n         * ```html\r\n         * <span id=\"test1\" style=\"display: block\"></span>\r\n         * <span id=\"test2\"></span>\r\n         * <div id=\"test3\" style=\"display: inline\"></div>\r\n         *\r\n         * <script>\r\n         *\r\n         *     //output: true\r\n         *     console.log( UE.dom.domUtils.isBlockElm( document.getElementById(\"test1\") ) );\r\n         *\r\n         *     //output: false\r\n         *     console.log( UE.dom.domUtils.isBlockElm( document.getElementById(\"test2\") ) );\r\n         *\r\n         *     //output: true\r\n         *     console.log( UE.dom.domUtils.isBlockElm( document.getElementById(\"test3\") ) );\r\n         *\r\n         * </script>\r\n         * ```\r\n         */\r\n        isBlockElm: function (node) {\r\n            return node.nodeType == 1 && (dtd.$block[node.tagName] || styleBlock[domUtils.getComputedStyle(node, 'display')]) && !dtd.$nonChild[node.tagName];\r\n        },\r\n        /**\r\n         * 检测node节点是否为body节点\r\n         * @method isBody\r\n         * @param { Element } node 需要检测的dom元素\r\n         * @return { Boolean } 给定的元素是否是body元素\r\n         * @example\r\n         * ```javascript\r\n         * //output: true\r\n         * console.log( UE.dom.domUtils.isBody( document.body ) );\r\n         * ```\r\n         */\r\n        isBody: function (node) {\r\n            return node && node.nodeType == 1 && node.tagName.toLowerCase() == 'body';\r\n        },\r\n        /**\r\n         * 以node节点为分界，将该节点的指定祖先节点parent拆分成两个独立的节点，\r\n         * 拆分形成的两个节点之间是node节点\r\n         * @method breakParent\r\n         * @param { Node } node 作为分界的节点对象\r\n         * @param { Node } parent 该节点必须是node节点的祖先节点， 且是block节点。\r\n         * @return { Node } 给定的node分界节点\r\n         * @example\r\n         * ```javascript\r\n         *\r\n         *      var node = document.createElement(\"span\"),\r\n         *          wrapNode = document.createElement( \"div\" ),\r\n         *          parent = document.createElement(\"p\");\r\n         *\r\n         *      parent.appendChild( node );\r\n         *      wrapNode.appendChild( parent );\r\n         *\r\n         *      //拆分前\r\n         *      //output: <p><span></span></p>\r\n         *      console.log( wrapNode.innerHTML );\r\n         *\r\n         *\r\n         *      UE.dom.domUtils.breakParent( node, parent );\r\n         *      //拆分后\r\n         *      //output: <p></p><span></span><p></p>\r\n         *      console.log( wrapNode.innerHTML );\r\n         *\r\n         * ```\r\n         */\r\n        breakParent: function (node, parent) {\r\n            var tmpNode,\r\n                parentClone = node,\r\n                clone = node,\r\n                leftNodes,\r\n                rightNodes;\r\n            do {\r\n                parentClone = parentClone.parentNode;\r\n                if (leftNodes) {\r\n                    tmpNode = parentClone.cloneNode(false);\r\n                    tmpNode.appendChild(leftNodes);\r\n                    leftNodes = tmpNode;\r\n                    tmpNode = parentClone.cloneNode(false);\r\n                    tmpNode.appendChild(rightNodes);\r\n                    rightNodes = tmpNode;\r\n                } else {\r\n                    leftNodes = parentClone.cloneNode(false);\r\n                    rightNodes = leftNodes.cloneNode(false);\r\n                }\r\n                while (tmpNode = clone.previousSibling) {\r\n                    leftNodes.insertBefore(tmpNode, leftNodes.firstChild);\r\n                }\r\n                while (tmpNode = clone.nextSibling) {\r\n                    rightNodes.appendChild(tmpNode);\r\n                }\r\n                clone = parentClone;\r\n            } while (parent !== parentClone);\r\n            tmpNode = parent.parentNode;\r\n            tmpNode.insertBefore(leftNodes, parent);\r\n            tmpNode.insertBefore(rightNodes, parent);\r\n            tmpNode.insertBefore(node, rightNodes);\r\n            domUtils.remove(parent);\r\n            return node;\r\n        },\r\n        /**\r\n         * 检查节点node是否是空inline节点\r\n         * @method  isEmptyInlineElement\r\n         * @param { Node } node 需要检测的节点对象\r\n         * @return { Number }  如果给定的节点是空的inline节点， 则返回1, 否则返回0。\r\n         * @example\r\n         * ```html\r\n         * <b><i></i></b> => 1\r\n         * <b><i></i><u></u></b> => 1\r\n         * <b></b> => 1\r\n         * <b>xx<i></i></b> => 0\r\n         * ```\r\n         */\r\n        isEmptyInlineElement: function (node) {\r\n            if (node.nodeType != 1 || !dtd.$removeEmpty[node.tagName]) {\r\n                return 0;\r\n            }\r\n            node = node.firstChild;\r\n            while (node) {\r\n                //如果是创建的bookmark就跳过\r\n                if (domUtils.isBookmarkNode(node)) {\r\n                    return 0;\r\n                }\r\n                if (node.nodeType == 1 && !domUtils.isEmptyInlineElement(node) ||\r\n                    node.nodeType == 3 && !domUtils.isWhitespace(node)\r\n                ) {\r\n                    return 0;\r\n                }\r\n                node = node.nextSibling;\r\n            }\r\n            return 1;\r\n\r\n        },\r\n\r\n        /**\r\n         * 删除node节点下首尾两端的空白文本子节点\r\n         * @method trimWhiteTextNode\r\n         * @param { Element } node 需要执行删除操作的元素对象\r\n         * @example\r\n         * ```javascript\r\n         *      var node = document.createElement(\"div\");\r\n         *\r\n         *      node.appendChild( document.createTextNode( \"\" ) );\r\n         *\r\n         *      node.appendChild( document.createElement(\"div\") );\r\n         *\r\n         *      node.appendChild( document.createTextNode( \"\" ) );\r\n         *\r\n         *      //3\r\n         *      console.log( node.childNodes.length );\r\n         *\r\n         *      UE.dom.domUtils.trimWhiteTextNode( node );\r\n         *\r\n         *      //1\r\n         *      console.log( node.childNodes.length );\r\n         * ```\r\n         */\r\n        trimWhiteTextNode: function (node) {\r\n            function remove(dir) {\r\n                var child;\r\n                while ((child = node[dir]) && child.nodeType == 3 && domUtils.isWhitespace(child)) {\r\n                    node.removeChild(child);\r\n                }\r\n            }\r\n            remove('firstChild');\r\n            remove('lastChild');\r\n        },\r\n\r\n        /**\r\n         * 合并node节点下相同的子节点\r\n         * @name mergeChild\r\n         * @desc\r\n         * UE.dom.domUtils.mergeChild(node,tagName) //tagName要合并的子节点的标签\r\n         * @example\r\n         * <p><span style=\"font-size:12px;\">xx<span style=\"font-size:12px;\">aa</span>xx</span></p>\r\n         * ==> UE.dom.domUtils.mergeChild(node,'span')\r\n         * <p><span style=\"font-size:12px;\">xxaaxx</span></p>\r\n         */\r\n        mergeChild: function (node, tagName, attrs) {\r\n            var list = domUtils.getElementsByTagName(node, node.tagName.toLowerCase());\r\n            for (var i = 0, ci; ci = list[i++];) {\r\n                if (!ci.parentNode || domUtils.isBookmarkNode(ci)) {\r\n                    continue;\r\n                }\r\n                //span单独处理\r\n                if (ci.tagName.toLowerCase() == 'span') {\r\n                    if (node === ci.parentNode) {\r\n                        domUtils.trimWhiteTextNode(node);\r\n                        if (node.childNodes.length == 1) {\r\n                            node.style.cssText = ci.style.cssText + \";\" + node.style.cssText;\r\n                            domUtils.remove(ci, true);\r\n                            continue;\r\n                        }\r\n                    }\r\n                    ci.style.cssText = node.style.cssText + ';' + ci.style.cssText;\r\n                    if (attrs) {\r\n                        var style = attrs.style;\r\n                        if (style) {\r\n                            style = style.split(';');\r\n                            for (var j = 0, s; s = style[j++];) {\r\n                                ci.style[utils.cssStyleToDomStyle(s.split(':')[0])] = s.split(':')[1];\r\n                            }\r\n                        }\r\n                    }\r\n                    if (domUtils.isSameStyle(ci, node)) {\r\n                        domUtils.remove(ci, true);\r\n                    }\r\n                    continue;\r\n                }\r\n                if (domUtils.isSameElement(node, ci)) {\r\n                    domUtils.remove(ci, true);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * 原生方法getElementsByTagName的封装\r\n         * @method getElementsByTagName\r\n         * @param { Node } node 目标节点对象\r\n         * @param { String } tagName 需要查找的节点的tagName， 多个tagName以空格分割\r\n         * @return { Array } 符合条件的节点集合\r\n         */\r\n        getElementsByTagName: function (node, name, filter) {\r\n            if (filter && utils.isString(filter)) {\r\n                var className = filter;\r\n                filter = function (node) { return domUtils.hasClass(node, className) }\r\n            }\r\n            name = utils.trim(name).replace(/[ ]{2,}/g, ' ').split(' ');\r\n            var arr = [];\r\n            for (var n = 0, ni; ni = name[n++];) {\r\n                var list = node.getElementsByTagName(ni);\r\n                for (var i = 0, ci; ci = list[i++];) {\r\n                    if (!filter || filter(ci))\r\n                        arr.push(ci);\r\n                }\r\n            }\r\n\r\n            return arr;\r\n        },\r\n        /**\r\n         * 将节点node提取到父节点上\r\n         * @method mergeToParent\r\n         * @param { Element } node 需要提取的元素对象\r\n         * @example\r\n         * ```html\r\n         * <div id=\"parent\">\r\n         *     <div id=\"sub\">\r\n         *         <span id=\"child\"></span>\r\n         *     </div>\r\n         * </div>\r\n         *\r\n         * <script>\r\n         *\r\n         *     var child = document.getElementById( \"child\" );\r\n         *\r\n         *     //output: sub\r\n         *     console.log( child.parentNode.id );\r\n         *\r\n         *     UE.dom.domUtils.mergeToParent( child );\r\n         *\r\n         *     //output: parent\r\n         *     console.log( child.parentNode.id );\r\n         *\r\n         * </script>\r\n         * ```\r\n         */\r\n        mergeToParent: function (node) {\r\n            var parent = node.parentNode;\r\n            while (parent && dtd.$removeEmpty[parent.tagName]) {\r\n                if (parent.tagName == node.tagName || parent.tagName == 'A') {//针对a标签单独处理\r\n                    domUtils.trimWhiteTextNode(parent);\r\n                    //span需要特殊处理  不处理这样的情况 <span stlye=\"color:#fff\">xxx<span style=\"color:#ccc\">xxx</span>xxx</span>\r\n                    if (parent.tagName == 'SPAN' && !domUtils.isSameStyle(parent, node)\r\n                        || (parent.tagName == 'A' && node.tagName == 'SPAN')) {\r\n                        if (parent.childNodes.length > 1 || parent !== node.parentNode) {\r\n                            node.style.cssText = parent.style.cssText + \";\" + node.style.cssText;\r\n                            parent = parent.parentNode;\r\n                            continue;\r\n                        } else {\r\n                            parent.style.cssText += \";\" + node.style.cssText;\r\n                            //trace:952 a标签要保持下划线\r\n                            if (parent.tagName == 'A') {\r\n                                parent.style.textDecoration = 'underline';\r\n                            }\r\n                        }\r\n                    }\r\n                    if (parent.tagName != 'A') {\r\n                        parent === node.parentNode && domUtils.remove(node, true);\r\n                        break;\r\n                    }\r\n                }\r\n                parent = parent.parentNode;\r\n            }\r\n        },\r\n        /**\r\n         * 合并节点node的左右兄弟节点\r\n         * @method mergeSibling\r\n         * @param { Element } node 需要合并的目标节点\r\n         * @example\r\n         * ```html\r\n         * <b>xxxx</b><b id=\"test\">ooo</b><b>xxxx</b>\r\n         *\r\n         * <script>\r\n         *     var demoNode = document.getElementById(\"test\");\r\n         *     UE.dom.domUtils.mergeSibling( demoNode );\r\n         *     //output: xxxxoooxxxx\r\n         *     console.log( demoNode.innerHTML );\r\n         * </script>\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 合并节点node的左右兄弟节点， 可以根据给定的条件选择是否忽略合并左节点。\r\n         * @method mergeSibling\r\n         * @param { Element } node 需要合并的目标节点\r\n         * @param { Boolean } ignorePre 是否忽略合并左节点\r\n         * @example\r\n         * ```html\r\n         * <b>xxxx</b><b id=\"test\">ooo</b><b>xxxx</b>\r\n         *\r\n         * <script>\r\n         *     var demoNode = document.getElementById(\"test\");\r\n         *     UE.dom.domUtils.mergeSibling( demoNode, true );\r\n         *     //output: oooxxxx\r\n         *     console.log( demoNode.innerHTML );\r\n         * </script>\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 合并节点node的左右兄弟节点，可以根据给定的条件选择是否忽略合并左右节点。\r\n         * @method mergeSibling\r\n         * @param { Element } node 需要合并的目标节点\r\n         * @param { Boolean } ignorePre 是否忽略合并左节点\r\n         * @param { Boolean } ignoreNext 是否忽略合并右节点\r\n         * @remind 如果同时忽略左右节点， 则该操作什么也不会做\r\n         * @example\r\n         * ```html\r\n         * <b>xxxx</b><b id=\"test\">ooo</b><b>xxxx</b>\r\n         *\r\n         * <script>\r\n         *     var demoNode = document.getElementById(\"test\");\r\n         *     UE.dom.domUtils.mergeSibling( demoNode, false, true );\r\n         *     //output: xxxxooo\r\n         *     console.log( demoNode.innerHTML );\r\n         * </script>\r\n         * ```\r\n         */\r\n        mergeSibling: function (node, ignorePre, ignoreNext) {\r\n            function merge(rtl, start, node) {\r\n                var next;\r\n                if ((next = node[rtl]) && !domUtils.isBookmarkNode(next) && next.nodeType == 1 && domUtils.isSameElement(node, next)) {\r\n                    while (next.firstChild) {\r\n                        if (start == 'firstChild') {\r\n                            node.insertBefore(next.lastChild, node.firstChild);\r\n                        } else {\r\n                            node.appendChild(next.firstChild);\r\n                        }\r\n                    }\r\n                    domUtils.remove(next);\r\n                }\r\n            }\r\n            !ignorePre && merge('previousSibling', 'firstChild', node);\r\n            !ignoreNext && merge('nextSibling', 'lastChild', node);\r\n        },\r\n\r\n        /**\r\n         * 设置节点node及其子节点不会被选中\r\n         * @method unSelectable\r\n         * @param { Element } node 需要执行操作的dom元素\r\n         * @remind 执行该操作后的节点， 将不能被鼠标选中\r\n         * @example\r\n         * ```javascript\r\n         * UE.dom.domUtils.unSelectable( document.body );\r\n         * ```\r\n         */\r\n        unSelectable: ie && browser.ie9below || browser.opera ? function (node) {\r\n            //for ie9\r\n            node.onselectstart = function () {\r\n                return false;\r\n            };\r\n            node.onclick = node.onkeyup = node.onkeydown = function () {\r\n                return false;\r\n            };\r\n            node.unselectable = 'on';\r\n            node.setAttribute(\"unselectable\", \"on\");\r\n            for (var i = 0, ci; ci = node.all[i++];) {\r\n                switch (ci.tagName.toLowerCase()) {\r\n                    case 'iframe':\r\n                    case 'textarea':\r\n                    case 'input':\r\n                    case 'select':\r\n                        break;\r\n                    default:\r\n                        ci.unselectable = 'on';\r\n                        node.setAttribute(\"unselectable\", \"on\");\r\n                }\r\n            }\r\n        } : function (node) {\r\n            node.style.MozUserSelect =\r\n                node.style.webkitUserSelect =\r\n                node.style.msUserSelect =\r\n                node.style.KhtmlUserSelect = 'none';\r\n        },\r\n        /**\r\n         * 删除节点node上的指定属性名称的属性\r\n         * @method  removeAttributes\r\n         * @param { Node } node 需要删除属性的节点对象\r\n         * @param { String } attrNames 可以是空格隔开的多个属性名称，该操作将会依次删除相应的属性\r\n         * @example\r\n         * ```html\r\n         * <div id=\"wrap\">\r\n         *      <span style=\"font-size:14px;\" id=\"test\" name=\"followMe\">xxxxx</span>\r\n         * </div>\r\n         *\r\n         * <script>\r\n         *\r\n         *     UE.dom.domUtils.removeAttributes( document.getElementById( \"test\" ), \"id name\" );\r\n         *\r\n         *     //output: <span style=\"font-size:14px;\">xxxxx</span>\r\n         *     console.log( document.getElementById(\"wrap\").innerHTML );\r\n         *\r\n         * </script>\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 删除节点node上的指定属性名称的属性\r\n         * @method  removeAttributes\r\n         * @param { Node } node 需要删除属性的节点对象\r\n         * @param { Array } attrNames 需要删除的属性名数组\r\n         * @example\r\n         * ```html\r\n         * <div id=\"wrap\">\r\n         *      <span style=\"font-size:14px;\" id=\"test\" name=\"followMe\">xxxxx</span>\r\n         * </div>\r\n         *\r\n         * <script>\r\n         *\r\n         *     UE.dom.domUtils.removeAttributes( document.getElementById( \"test\" ), [\"id\", \"name\"] );\r\n         *\r\n         *     //output: <span style=\"font-size:14px;\">xxxxx</span>\r\n         *     console.log( document.getElementById(\"wrap\").innerHTML );\r\n         *\r\n         * </script>\r\n         * ```\r\n         */\r\n        removeAttributes: function (node, attrNames) {\r\n            attrNames = utils.isArray(attrNames) ? attrNames : utils.trim(attrNames).replace(/[ ]{2,}/g, ' ').split(' ');\r\n            for (var i = 0, ci; ci = attrNames[i++];) {\r\n                ci = attrFix[ci] || ci;\r\n                switch (ci) {\r\n                    case 'className':\r\n                        node[ci] = '';\r\n                        break;\r\n                    case 'style':\r\n                        node.style.cssText = '';\r\n                        var val = node.getAttributeNode('style');\r\n                        !browser.ie && val && node.removeAttributeNode(val);\r\n                }\r\n                node.removeAttribute(ci);\r\n            }\r\n        },\r\n        /**\r\n         * 在doc下创建一个标签名为tag，属性为attrs的元素\r\n         * @method createElement\r\n         * @param { DomDocument } doc 新创建的元素属于该document节点创建\r\n         * @param { String } tagName 需要创建的元素的标签名\r\n         * @param { Object } attrs 新创建的元素的属性key-value集合\r\n         * @return { Element } 新创建的元素对象\r\n         * @example\r\n         * ```javascript\r\n         * var ele = UE.dom.domUtils.createElement( document, 'div', {\r\n         *     id: 'test'\r\n         * } );\r\n         *\r\n         * //output: DIV\r\n         * console.log( ele.tagName );\r\n         *\r\n         * //output: test\r\n         * console.log( ele.id );\r\n         *\r\n         * ```\r\n         */\r\n        createElement: function (doc, tag, attrs) {\r\n            return domUtils.setAttributes(doc.createElement(tag), attrs)\r\n        },\r\n        /**\r\n         * 为节点node添加属性attrs，attrs为属性键值对\r\n         * @method setAttributes\r\n         * @param { Element } node 需要设置属性的元素对象\r\n         * @param { Object } attrs 需要设置的属性名-值对\r\n         * @return { Element } 设置属性的元素对象\r\n         * @example\r\n         * ```html\r\n         * <span id=\"test\"></span>\r\n         *\r\n         * <script>\r\n         *\r\n         *     var testNode = UE.dom.domUtils.setAttributes( document.getElementById( \"test\" ), {\r\n         *         id: 'demo'\r\n         *     } );\r\n         *\r\n         *     //output: demo\r\n         *     console.log( testNode.id );\r\n         *\r\n         * </script>\r\n         *\r\n         */\r\n        setAttributes: function (node, attrs) {\r\n            for (var attr in attrs) {\r\n                if (attrs.hasOwnProperty(attr)) {\r\n                    var value = attrs[attr];\r\n                    switch (attr) {\r\n                        case 'class':\r\n                            //ie下要这样赋值，setAttribute不起作用\r\n                            node.className = value;\r\n                            break;\r\n                        case 'style':\r\n                            node.style.cssText = node.style.cssText + \";\" + value;\r\n                            break;\r\n                        case 'innerHTML':\r\n                            node[attr] = value;\r\n                            break;\r\n                        case 'value':\r\n                            node.value = value;\r\n                            break;\r\n                        default:\r\n                            node.setAttribute(attrFix[attr] || attr, value);\r\n                    }\r\n                }\r\n            }\r\n            return node;\r\n        },\r\n\r\n        /**\r\n         * 获取元素element经过计算后的样式值\r\n         * @method getComputedStyle\r\n         * @param { Element } element 需要获取样式的元素对象\r\n         * @param { String } styleName 需要获取的样式名\r\n         * @return { String } 获取到的样式值\r\n         * @example\r\n         * ```html\r\n         * <style type=\"text/css\">\r\n         *      #test {\r\n         *          font-size: 15px;\r\n         *      }\r\n         * </style>\r\n         *\r\n         * <span id=\"test\"></span>\r\n         *\r\n         * <script>\r\n         *     //output: 15px\r\n         *     console.log( UE.dom.domUtils.getComputedStyle( document.getElementById( \"test\" ), 'font-size' ) );\r\n         * </script>\r\n         * ```\r\n         */\r\n        getComputedStyle: function (element, styleName) {\r\n            //一下的属性单独处理\r\n            var pros = 'width height top left';\r\n\r\n            if (pros.indexOf(styleName) > -1) {\r\n                return element['offset' + styleName.replace(/^\\w/, function (s) { return s.toUpperCase() })] + 'px';\r\n            }\r\n            //忽略文本节点\r\n            if (element.nodeType == 3) {\r\n                element = element.parentNode;\r\n            }\r\n            //ie下font-size若body下定义了font-size，则从currentStyle里会取到这个font-size. 取不到实际值，故此修改.\r\n            if (browser.ie && browser.version < 9 && styleName == 'font-size' && !element.style.fontSize &&\r\n                !dtd.$empty[element.tagName] && !dtd.$nonChild[element.tagName]) {\r\n                var span = element.ownerDocument.createElement('span');\r\n                span.style.cssText = 'padding:0;border:0;font-family:simsun;';\r\n                span.innerHTML = '.';\r\n                element.appendChild(span);\r\n                var result = span.offsetHeight;\r\n                element.removeChild(span);\r\n                span = null;\r\n                return result + 'px';\r\n            }\r\n            try {\r\n                var value = domUtils.getStyle(element, styleName) ||\r\n                    (window.getComputedStyle ? domUtils.getWindow(element).getComputedStyle(element, '').getPropertyValue(styleName) :\r\n                        (element.currentStyle || element.style)[utils.cssStyleToDomStyle(styleName)]);\r\n\r\n            } catch (e) {\r\n                return \"\";\r\n            }\r\n            return utils.transUnitToPx(utils.fixColor(styleName, value));\r\n        },\r\n        /**\r\n         * 删除元素element指定的className\r\n         * @method removeClasses\r\n         * @param { Element } ele 需要删除class的元素节点\r\n         * @param { String } classNames 需要删除的className， 多个className之间以空格分开\r\n         * @example\r\n         * ```html\r\n         * <span id=\"test\" class=\"test1 test2 test3\">xxx</span>\r\n         *\r\n         * <script>\r\n         *\r\n         *     var testNode = document.getElementById( \"test\" );\r\n         *     UE.dom.domUtils.removeClasses( testNode, \"test1 test2\" );\r\n         *\r\n         *     //output: test3\r\n         *     console.log( testNode.className );\r\n         *\r\n         * </script>\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 删除元素element指定的className\r\n         * @method removeClasses\r\n         * @param { Element } ele 需要删除class的元素节点\r\n         * @param { Array } classNames 需要删除的className数组\r\n         * @example\r\n         * ```html\r\n         * <span id=\"test\" class=\"test1 test2 test3\">xxx</span>\r\n         *\r\n         * <script>\r\n         *\r\n         *     var testNode = document.getElementById( \"test\" );\r\n         *     UE.dom.domUtils.removeClasses( testNode, [\"test1\", \"test2\"] );\r\n         *\r\n         *     //output: test3\r\n         *     console.log( testNode.className );\r\n         *\r\n         * </script>\r\n         * ```\r\n         */\r\n        removeClasses: function (elm, classNames) {\r\n            classNames = utils.isArray(classNames) ? classNames :\r\n                utils.trim(classNames).replace(/[ ]{2,}/g, ' ').split(' ');\r\n            for (var i = 0, ci, cls = elm.className; ci = classNames[i++];) {\r\n                cls = cls.replace(new RegExp('\\\\b' + ci + '\\\\b'), '')\r\n            }\r\n            cls = utils.trim(cls).replace(/[ ]{2,}/g, ' ');\r\n            if (cls) {\r\n                elm.className = cls;\r\n            } else {\r\n                domUtils.removeAttributes(elm, ['class']);\r\n            }\r\n        },\r\n        /**\r\n         * 给元素element添加className\r\n         * @method addClass\r\n         * @param { Node } ele 需要增加className的元素\r\n         * @param { String } classNames 需要添加的className， 多个className之间以空格分割\r\n         * @remind 相同的类名不会被重复添加\r\n         * @example\r\n         * ```html\r\n         * <span id=\"test\" class=\"cls1 cls2\"></span>\r\n         *\r\n         * <script>\r\n         *     var testNode = document.getElementById(\"test\");\r\n         *\r\n         *     UE.dom.domUtils.addClass( testNode, \"cls2 cls3 cls4\" );\r\n         *\r\n         *     //output: cl1 cls2 cls3 cls4\r\n         *     console.log( testNode.className );\r\n         *\r\n         * <script>\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 给元素element添加className\r\n         * @method addClass\r\n         * @param { Node } ele 需要增加className的元素\r\n         * @param { Array } classNames 需要添加的className的数组\r\n         * @remind 相同的类名不会被重复添加\r\n         * @example\r\n         * ```html\r\n         * <span id=\"test\" class=\"cls1 cls2\"></span>\r\n         *\r\n         * <script>\r\n         *     var testNode = document.getElementById(\"test\");\r\n         *\r\n         *     UE.dom.domUtils.addClass( testNode, [\"cls2\", \"cls3\", \"cls4\"] );\r\n         *\r\n         *     //output: cl1 cls2 cls3 cls4\r\n         *     console.log( testNode.className );\r\n         *\r\n         * <script>\r\n         * ```\r\n         */\r\n        addClass: function (elm, classNames) {\r\n            if (!elm) return;\r\n            classNames = utils.trim(classNames).replace(/[ ]{2,}/g, ' ').split(' ');\r\n            for (var i = 0, ci, cls = elm.className; ci = classNames[i++];) {\r\n                if (!new RegExp('\\\\b' + ci + '\\\\b').test(cls)) {\r\n                    cls += ' ' + ci;\r\n                }\r\n            }\r\n            elm.className = utils.trim(cls);\r\n        },\r\n        /**\r\n         * 判断元素element是否包含给定的样式类名className\r\n         * @method hasClass\r\n         * @param { Node } ele 需要检测的元素\r\n         * @param { String } classNames 需要检测的className， 多个className之间用空格分割\r\n         * @return { Boolean } 元素是否包含所有给定的className\r\n         * @example\r\n         * ```html\r\n         * <span id=\"test1\" class=\"cls1 cls2\"></span>\r\n         *\r\n         * <script>\r\n         *     var test1 = document.getElementById(\"test1\");\r\n         *\r\n         *     //output: false\r\n         *     console.log( UE.dom.domUtils.hasClass( test1, \"cls2 cls1 cls3\" ) );\r\n         *\r\n         *     //output: true\r\n         *     console.log( UE.dom.domUtils.hasClass( test1, \"cls2 cls1\" ) );\r\n         * </script>\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 判断元素element是否包含给定的样式类名className\r\n         * @method hasClass\r\n         * @param { Node } ele 需要检测的元素\r\n         * @param { Array } classNames 需要检测的className数组\r\n         * @return { Boolean } 元素是否包含所有给定的className\r\n         * @example\r\n         * ```html\r\n         * <span id=\"test1\" class=\"cls1 cls2\"></span>\r\n         *\r\n         * <script>\r\n         *     var test1 = document.getElementById(\"test1\");\r\n         *\r\n         *     //output: false\r\n         *     console.log( UE.dom.domUtils.hasClass( test1, [ \"cls2\", \"cls1\", \"cls3\" ] ) );\r\n         *\r\n         *     //output: true\r\n         *     console.log( UE.dom.domUtils.hasClass( test1, [ \"cls2\", \"cls1\" ]) );\r\n         * </script>\r\n         * ```\r\n         */\r\n        hasClass: function (element, className) {\r\n            if (utils.isRegExp(className)) {\r\n                return className.test(element.className)\r\n            }\r\n            className = utils.trim(className).replace(/[ ]{2,}/g, ' ').split(' ');\r\n            for (var i = 0, ci, cls = element.className; ci = className[i++];) {\r\n                if (!new RegExp('\\\\b' + ci + '\\\\b', 'i').test(cls)) {\r\n                    return false;\r\n                }\r\n            }\r\n            return i - 1 == className.length;\r\n        },\r\n\r\n        /**\r\n         * 阻止事件默认行为\r\n         * @method preventDefault\r\n         * @param { Event } evt 需要阻止默认行为的事件对象\r\n         * @example\r\n         * ```javascript\r\n         * UE.dom.domUtils.preventDefault( evt );\r\n         * ```\r\n         */\r\n        preventDefault: function (evt) {\r\n            evt.preventDefault ? evt.preventDefault() : (evt.returnValue = false);\r\n        },\r\n        /**\r\n         * 删除元素element指定的样式\r\n         * @method removeStyle\r\n         * @param { Element } element 需要删除样式的元素\r\n         * @param { String } styleName 需要删除的样式名\r\n         * @example\r\n         * ```html\r\n         * <span id=\"test\" style=\"color: red; background: blue;\"></span>\r\n         *\r\n         * <script>\r\n         *\r\n         *     var testNode = document.getElementById(\"test\");\r\n         *\r\n         *     UE.dom.domUtils.removeStyle( testNode, 'color' );\r\n         *\r\n         *     //output: background: blue;\r\n         *     console.log( testNode.style.cssText );\r\n         *\r\n         * </script>\r\n         * ```\r\n         */\r\n        removeStyle: function (element, name) {\r\n            if (browser.ie) {\r\n                //针对color先单独处理一下\r\n                if (name == 'color') {\r\n                    name = '(^|;)' + name;\r\n                }\r\n                element.style.cssText = element.style.cssText.replace(new RegExp(name + '[^:]*:[^;]+;?', 'ig'), '')\r\n            } else {\r\n                if (element.style.removeProperty) {\r\n                    element.style.removeProperty(name);\r\n                } else {\r\n                    element.style.removeAttribute(utils.cssStyleToDomStyle(name));\r\n                }\r\n            }\r\n\r\n\r\n            if (!element.style.cssText) {\r\n                domUtils.removeAttributes(element, ['style']);\r\n            }\r\n        },\r\n        /**\r\n         * 获取元素element的style属性的指定值\r\n         * @method getStyle\r\n         * @param { Element } element 需要获取属性值的元素\r\n         * @param { String } styleName 需要获取的style的名称\r\n         * @warning 该方法仅获取元素style属性中所标明的值\r\n         * @return { String } 该元素包含指定的style属性值\r\n         * @example\r\n         * ```html\r\n         * <div id=\"test\" style=\"color: red;\"></div>\r\n         *\r\n         * <script>\r\n         *\r\n         *      var testNode = document.getElementById( \"test\" );\r\n         *\r\n         *      //output: red\r\n         *      console.log( UE.dom.domUtils.getStyle( testNode, \"color\" ) );\r\n         *\r\n         *      //output: \"\"\r\n         *      console.log( UE.dom.domUtils.getStyle( testNode, \"background\" ) );\r\n         *\r\n         * </script>\r\n         * ```\r\n         */\r\n        getStyle: function (element, name) {\r\n            var value = element.style[utils.cssStyleToDomStyle(name)];\r\n            return utils.fixColor(name, value);\r\n        },\r\n        /**\r\n         * 为元素element设置样式属性值\r\n         * @method setStyle\r\n         * @param { Element } element 需要设置样式的元素\r\n         * @param { String } styleName 样式名\r\n         * @param { String } styleValue 样式值\r\n         * @example\r\n         * ```html\r\n         * <div id=\"test\"></div>\r\n         *\r\n         * <script>\r\n         *\r\n         *      var testNode = document.getElementById( \"test\" );\r\n         *\r\n         *      //output: \"\"\r\n         *      console.log( testNode.style.color );\r\n         *\r\n         *      UE.dom.domUtils.setStyle( testNode, 'color', 'red' );\r\n         *      //output: \"red\"\r\n         *      console.log( testNode.style.color );\r\n         *\r\n         * </script>\r\n         * ```\r\n         */\r\n        setStyle: function (element, name, value) {\r\n            element.style[utils.cssStyleToDomStyle(name)] = value;\r\n            if (!utils.trim(element.style.cssText)) {\r\n                this.removeAttributes(element, 'style')\r\n            }\r\n        },\r\n        /**\r\n         * 为元素element设置多个样式属性值\r\n         * @method setStyles\r\n         * @param { Element } element 需要设置样式的元素\r\n         * @param { Object } styles 样式名值对\r\n         * @example\r\n         * ```html\r\n         * <div id=\"test\"></div>\r\n         *\r\n         * <script>\r\n         *\r\n         *      var testNode = document.getElementById( \"test\" );\r\n         *\r\n         *      //output: \"\"\r\n         *      console.log( testNode.style.color );\r\n         *\r\n         *      UE.dom.domUtils.setStyles( testNode, {\r\n         *          'color': 'red'\r\n         *      } );\r\n         *      //output: \"red\"\r\n         *      console.log( testNode.style.color );\r\n         *\r\n         * </script>\r\n         * ```\r\n         */\r\n        setStyles: function (element, styles) {\r\n            for (var name in styles) {\r\n                if (styles.hasOwnProperty(name)) {\r\n                    domUtils.setStyle(element, name, styles[name]);\r\n                }\r\n            }\r\n        },\r\n        /**\r\n         * 删除_moz_dirty属性\r\n         * @private\r\n         * @method removeDirtyAttr\r\n         */\r\n        removeDirtyAttr: function (node) {\r\n            for (var i = 0, ci, nodes = node.getElementsByTagName('*'); ci = nodes[i++];) {\r\n                ci.removeAttribute('_moz_dirty');\r\n            }\r\n            node.removeAttribute('_moz_dirty');\r\n        },\r\n        /**\r\n         * 获取子节点的数量\r\n         * @method getChildCount\r\n         * @param { Element } node 需要检测的元素\r\n         * @return { Number } 给定的node元素的子节点数量\r\n         * @example\r\n         * ```html\r\n         * <div id=\"test\">\r\n         *      <span></span>\r\n         * </div>\r\n         *\r\n         * <script>\r\n         *\r\n         *     //output: 3\r\n         *     console.log( UE.dom.domUtils.getChildCount( document.getElementById(\"test\") ) );\r\n         *\r\n         * </script>\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 根据给定的过滤规则， 获取符合条件的子节点的数量\r\n         * @method getChildCount\r\n         * @param { Element } node 需要检测的元素\r\n         * @param { Function } fn 过滤器， 要求对符合条件的子节点返回true， 反之则要求返回false\r\n         * @return { Number } 符合过滤条件的node元素的子节点数量\r\n         * @example\r\n         * ```html\r\n         * <div id=\"test\">\r\n         *      <span></span>\r\n         * </div>\r\n         *\r\n         * <script>\r\n         *\r\n         *     //output: 1\r\n         *     console.log( UE.dom.domUtils.getChildCount( document.getElementById(\"test\"), function ( node ) {\r\n         *\r\n         *         return node.nodeType === 1;\r\n         *\r\n         *     } ) );\r\n         *\r\n         * </script>\r\n         * ```\r\n         */\r\n        getChildCount: function (node, fn) {\r\n            var count = 0, first = node.firstChild;\r\n            fn = fn || function () {\r\n                return 1;\r\n            };\r\n            while (first) {\r\n                if (fn(first)) {\r\n                    count++;\r\n                }\r\n                first = first.nextSibling;\r\n            }\r\n            return count;\r\n        },\r\n\r\n        /**\r\n         * 判断给定节点是否为空节点\r\n         * @method isEmptyNode\r\n         * @param { Node } node 需要检测的节点对象\r\n         * @return { Boolean } 节点是否为空\r\n         * @example\r\n         * ```javascript\r\n         * UE.dom.domUtils.isEmptyNode( document.body );\r\n         * ```\r\n         */\r\n        isEmptyNode: function (node) {\r\n            return !node.firstChild || domUtils.getChildCount(node, function (node) {\r\n                return !domUtils.isBr(node) && !domUtils.isBookmarkNode(node) && !domUtils.isWhitespace(node)\r\n            }) == 0\r\n        },\r\n        clearSelectedArr: function (nodes) {\r\n            var node;\r\n            while (node = nodes.pop()) {\r\n                domUtils.removeAttributes(node, ['class']);\r\n            }\r\n        },\r\n        /**\r\n         * 将显示区域滚动到指定节点的位置\r\n         * @method scrollToView\r\n         * @param    {Node}   node    节点\r\n         * @param    {window}   win      window对象\r\n         * @param    {Number}    offsetTop    距离上方的偏移量\r\n         */\r\n        scrollToView: function (node, win, offsetTop) {\r\n            var getViewPaneSize = function () {\r\n                var doc = win.document,\r\n                    mode = doc.compatMode == 'CSS1Compat';\r\n                return {\r\n                    width: (mode ? doc.documentElement.clientWidth : doc.body.clientWidth) || 0,\r\n                    height: (mode ? doc.documentElement.clientHeight : doc.body.clientHeight) || 0\r\n                };\r\n            },\r\n                getScrollPosition = function (win) {\r\n                    if ('pageXOffset' in win) {\r\n                        return {\r\n                            x: win.pageXOffset || 0,\r\n                            y: win.pageYOffset || 0\r\n                        };\r\n                    }\r\n                    else {\r\n                        var doc = win.document;\r\n                        return {\r\n                            x: doc.documentElement.scrollLeft || doc.body.scrollLeft || 0,\r\n                            y: doc.documentElement.scrollTop || doc.body.scrollTop || 0\r\n                        };\r\n                    }\r\n                };\r\n            var winHeight = getViewPaneSize().height, offset = winHeight * -1 + offsetTop;\r\n            offset += (node.offsetHeight || 0);\r\n            var elementPosition = domUtils.getXY(node);\r\n            offset += elementPosition.y;\r\n            var currentScroll = getScrollPosition(win).y;\r\n            // offset += 50;\r\n            if (offset > currentScroll || offset < currentScroll - winHeight) {\r\n                win.scrollTo(0, offset + (offset < 0 ? -20 : 20));\r\n            }\r\n        },\r\n        /**\r\n         * 判断给定节点是否为br\r\n         * @method isBr\r\n         * @param { Node } node 需要判断的节点对象\r\n         * @return { Boolean } 给定的节点是否是br节点\r\n         */\r\n        isBr: function (node) {\r\n            return node.nodeType == 1 && node.tagName == 'BR';\r\n        },\r\n        /**\r\n         * 判断给定的节点是否是一个“填充”节点\r\n         * @private\r\n         * @method isFillChar\r\n         * @param { Node } node 需要判断的节点\r\n         * @param { Boolean } isInStart 是否从节点内容的开始位置匹配\r\n         * @returns { Boolean } 节点是否是填充节点\r\n         */\r\n        isFillChar: function (node, isInStart) {\r\n            if (node.nodeType != 3)\r\n                return false;\r\n            var text = node.nodeValue;\r\n            if (isInStart) {\r\n                return new RegExp('^' + domUtils.fillChar).test(text)\r\n            }\r\n            return !text.replace(new RegExp(domUtils.fillChar, 'g'), '').length\r\n        },\r\n        isStartInblock: function (range) {\r\n            var tmpRange = range.cloneRange(),\r\n                flag = 0,\r\n                start = tmpRange.startContainer,\r\n                tmp;\r\n            if (start.nodeType == 1 && start.childNodes[tmpRange.startOffset]) {\r\n                start = start.childNodes[tmpRange.startOffset];\r\n                var pre = start.previousSibling;\r\n                while (pre && domUtils.isFillChar(pre)) {\r\n                    start = pre;\r\n                    pre = pre.previousSibling;\r\n                }\r\n            }\r\n            if (this.isFillChar(start, true) && tmpRange.startOffset == 1) {\r\n                tmpRange.setStartBefore(start);\r\n                start = tmpRange.startContainer;\r\n            }\r\n\r\n            while (start && domUtils.isFillChar(start)) {\r\n                tmp = start;\r\n                start = start.previousSibling\r\n            }\r\n            if (tmp) {\r\n                tmpRange.setStartBefore(tmp);\r\n                start = tmpRange.startContainer;\r\n            }\r\n            if (start.nodeType == 1 && domUtils.isEmptyNode(start) && tmpRange.startOffset == 1) {\r\n                tmpRange.setStart(start, 0).collapse(true);\r\n            }\r\n            while (!tmpRange.startOffset) {\r\n                start = tmpRange.startContainer;\r\n                if (domUtils.isBlockElm(start) || domUtils.isBody(start)) {\r\n                    flag = 1;\r\n                    break;\r\n                }\r\n                var pre = tmpRange.startContainer.previousSibling,\r\n                    tmpNode;\r\n                if (!pre) {\r\n                    tmpRange.setStartBefore(tmpRange.startContainer);\r\n                } else {\r\n                    while (pre && domUtils.isFillChar(pre)) {\r\n                        tmpNode = pre;\r\n                        pre = pre.previousSibling;\r\n                    }\r\n                    if (tmpNode) {\r\n                        tmpRange.setStartBefore(tmpNode);\r\n                    } else {\r\n                        tmpRange.setStartBefore(tmpRange.startContainer);\r\n                    }\r\n                }\r\n            }\r\n            return flag && !domUtils.isBody(tmpRange.startContainer) ? 1 : 0;\r\n        },\r\n\r\n        /**\r\n         * 判断给定的元素是否是一个空元素\r\n         * @method isEmptyBlock\r\n         * @param { Element } node 需要判断的元素\r\n         * @return { Boolean } 是否是空元素\r\n         * @example\r\n         * ```html\r\n         * <div id=\"test\"></div>\r\n         *\r\n         * <script>\r\n         *     //output: true\r\n         *     console.log( UE.dom.domUtils.isEmptyBlock( document.getElementById(\"test\") ) );\r\n         * </script>\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 根据指定的判断规则判断给定的元素是否是一个空元素\r\n         * @method isEmptyBlock\r\n         * @param { Element } node 需要判断的元素\r\n         * @param { RegExp } reg 对内容执行判断的正则表达式对象\r\n         * @return { Boolean } 是否是空元素\r\n         */\r\n        isEmptyBlock: function (node, reg) {\r\n            if (node.nodeType != 1)\r\n                return 0;\r\n            reg = reg || new RegExp('[ \\xa0\\t\\r\\n' + domUtils.fillChar + ']', 'g');\r\n\r\n            if (node[browser.ie ? 'innerText' : 'textContent'].replace(reg, '').length > 0) {\r\n                return 0;\r\n            }\r\n            for (var n in dtd.$isNotEmpty) {\r\n                if (node.getElementsByTagName(n).length) {\r\n                    return 0;\r\n                }\r\n            }\r\n            return 1;\r\n        },\r\n\r\n        /**\r\n         * 移动元素使得该元素的位置移动指定的偏移量的距离\r\n         * @method setViewportOffset\r\n         * @param { Element } element 需要设置偏移量的元素\r\n         * @param { Object } offset 偏移量， 形如{ left: 100, top: 50 }的一个键值对， 表示该元素将在\r\n         *                                  现有的位置上向水平方向偏移offset.left的距离， 在竖直方向上偏移\r\n         *                                  offset.top的距离\r\n         * @example\r\n         * ```html\r\n         * <div id=\"test\" style=\"top: 100px; left: 50px; position: absolute;\"></div>\r\n         *\r\n         * <script>\r\n         *\r\n         *     var testNode = document.getElementById(\"test\");\r\n         *\r\n         *     UE.dom.domUtils.setViewportOffset( testNode, {\r\n         *         left: 200,\r\n         *         top: 50\r\n         *     } );\r\n         *\r\n         *     //output: top: 300px; left: 100px; position: absolute;\r\n         *     console.log( testNode.style.cssText );\r\n         *\r\n         * </script>\r\n         * ```\r\n         */\r\n        setViewportOffset: function (element, offset) {\r\n            var left = parseInt(element.style.left) | 0;\r\n            var top = parseInt(element.style.top) | 0;\r\n            var rect = element.getBoundingClientRect();\r\n            var offsetLeft = offset.left - rect.left;\r\n            var offsetTop = offset.top - rect.top;\r\n            if (offsetLeft) {\r\n                element.style.left = left + offsetLeft + 'px';\r\n            }\r\n            if (offsetTop) {\r\n                element.style.top = top + offsetTop + 'px';\r\n            }\r\n        },\r\n\r\n        /**\r\n         * 用“填充字符”填充节点\r\n         * @method fillNode\r\n         * @private\r\n         * @param { DomDocument } doc 填充的节点所在的docment对象\r\n         * @param { Node } node 需要填充的节点对象\r\n         * @example\r\n         * ```html\r\n         * <div id=\"test\"></div>\r\n         *\r\n         * <script>\r\n         *     var testNode = document.getElementById(\"test\");\r\n         *\r\n         *     //output: 0\r\n         *     console.log( testNode.childNodes.length );\r\n         *\r\n         *     UE.dom.domUtils.fillNode( document, testNode );\r\n         *\r\n         *     //output: 1\r\n         *     console.log( testNode.childNodes.length );\r\n         *\r\n         * </script>\r\n         * ```\r\n         */\r\n        fillNode: function (doc, node) {\r\n            var tmpNode = browser.ie ? doc.createTextNode(domUtils.fillChar) : doc.createElement('br');\r\n            node.innerHTML = '';\r\n            node.appendChild(tmpNode);\r\n        },\r\n\r\n        /**\r\n         * 把节点src的所有子节点追加到另一个节点tag上去\r\n         * @method moveChild\r\n         * @param { Node } src 源节点， 该节点下的所有子节点将被移除\r\n         * @param { Node } tag 目标节点， 从源节点移除的子节点将被追加到该节点下\r\n         * @example\r\n         * ```html\r\n         * <div id=\"test1\">\r\n         *      <span></span>\r\n         * </div>\r\n         * <div id=\"test2\">\r\n         *     <div></div>\r\n         * </div>\r\n         *\r\n         * <script>\r\n         *\r\n         *     var test1 = document.getElementById(\"test1\"),\r\n         *         test2 = document.getElementById(\"test2\");\r\n         *\r\n         *     UE.dom.domUtils.moveChild( test1, test2 );\r\n         *\r\n         *     //output: \"\"（空字符串）\r\n         *     console.log( test1.innerHTML );\r\n         *\r\n         *     //output: \"<div></div><span></span>\"\r\n         *     console.log( test2.innerHTML );\r\n         *\r\n         * </script>\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 把节点src的所有子节点移动到另一个节点tag上去, 可以通过dir参数控制附加的行为是“追加”还是“插入顶部”\r\n         * @method moveChild\r\n         * @param { Node } src 源节点， 该节点下的所有子节点将被移除\r\n         * @param { Node } tag 目标节点， 从源节点移除的子节点将被附加到该节点下\r\n         * @param { Boolean } dir 附加方式， 如果为true， 则附加进去的节点将被放到目标节点的顶部， 反之，则放到末尾\r\n         * @example\r\n         * ```html\r\n         * <div id=\"test1\">\r\n         *      <span></span>\r\n         * </div>\r\n         * <div id=\"test2\">\r\n         *     <div></div>\r\n         * </div>\r\n         *\r\n         * <script>\r\n         *\r\n         *     var test1 = document.getElementById(\"test1\"),\r\n         *         test2 = document.getElementById(\"test2\");\r\n         *\r\n         *     UE.dom.domUtils.moveChild( test1, test2, true );\r\n         *\r\n         *     //output: \"\"（空字符串）\r\n         *     console.log( test1.innerHTML );\r\n         *\r\n         *     //output: \"<span></span><div></div>\"\r\n         *     console.log( test2.innerHTML );\r\n         *\r\n         * </script>\r\n         * ```\r\n         */\r\n        moveChild: function (src, tag, dir) {\r\n            while (src.firstChild) {\r\n                if (dir && tag.firstChild) {\r\n                    tag.insertBefore(src.lastChild, tag.firstChild);\r\n                } else {\r\n                    tag.appendChild(src.firstChild);\r\n                }\r\n            }\r\n        },\r\n\r\n        /**\r\n         * 判断节点的标签上是否不存在任何属性\r\n         * @method hasNoAttributes\r\n         * @private\r\n         * @param { Node } node 需要检测的节点对象\r\n         * @return { Boolean } 节点是否不包含任何属性\r\n         * @example\r\n         * ```html\r\n         * <div id=\"test\"><span>xxxx</span></div>\r\n         *\r\n         * <script>\r\n         *\r\n         *     //output: false\r\n         *     console.log( UE.dom.domUtils.hasNoAttributes( document.getElementById(\"test\") ) );\r\n         *\r\n         *     //output: true\r\n         *     console.log( UE.dom.domUtils.hasNoAttributes( document.getElementById(\"test\").firstChild ) );\r\n         *\r\n         * </script>\r\n         * ```\r\n         */\r\n        hasNoAttributes: function (node) {\r\n            return browser.ie ? /^<\\w+\\s*?>/.test(node.outerHTML) : node.attributes.length == 0;\r\n        },\r\n\r\n        /**\r\n         * 检测节点是否是UEditor所使用的辅助节点\r\n         * @method isCustomeNode\r\n         * @private\r\n         * @param { Node } node 需要检测的节点\r\n         * @remind 辅助节点是指编辑器要完成工作临时添加的节点， 在输出的时候将会从编辑器内移除， 不会影响最终的结果。\r\n         * @return { Boolean } 给定的节点是否是一个辅助节点\r\n         */\r\n        isCustomeNode: function (node) {\r\n            return node.nodeType == 1 && node.getAttribute('_ue_custom_node_');\r\n        },\r\n\r\n        /**\r\n         * 检测节点的标签是否是给定的标签\r\n         * @method isTagNode\r\n         * @param { Node } node 需要检测的节点对象\r\n         * @param { String } tagName 标签\r\n         * @return { Boolean } 节点的标签是否是给定的标签\r\n         * @example\r\n         * ```html\r\n         * <div id=\"test\"></div>\r\n         *\r\n         * <script>\r\n         *\r\n         *     //output: true\r\n         *     console.log( UE.dom.domUtils.isTagNode( document.getElementById(\"test\"), \"div\" ) );\r\n         *\r\n         * </script>\r\n         * ```\r\n         */\r\n        isTagNode: function (node, tagNames) {\r\n            return node.nodeType == 1 && new RegExp('\\\\b' + node.tagName + '\\\\b', 'i').test(tagNames)\r\n        },\r\n\r\n        /**\r\n         * 给定一个节点数组，在通过指定的过滤器过滤后， 获取其中满足过滤条件的第一个节点\r\n         * @method filterNodeList\r\n         * @param { Array } nodeList 需要过滤的节点数组\r\n         * @param { Function } fn 过滤器， 对符合条件的节点， 执行结果返回true， 反之则返回false\r\n         * @return { Node | NULL } 如果找到符合过滤条件的节点， 则返回该节点， 否则返回NULL\r\n         * @example\r\n         * ```javascript\r\n         * var divNodes = document.getElementsByTagName(\"div\");\r\n         * divNodes = [].slice.call( divNodes, 0 );\r\n         *\r\n         * //output: null\r\n         * console.log( UE.dom.domUtils.filterNodeList( divNodes, function ( node ) {\r\n         *     return node.tagName.toLowerCase() !== 'div';\r\n         * } ) );\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 给定一个节点数组nodeList和一组标签名tagNames， 获取其中能够匹配标签名的节点集合中的第一个节点\r\n         * @method filterNodeList\r\n         * @param { Array } nodeList 需要过滤的节点数组\r\n         * @param { String } tagNames 需要匹配的标签名， 多个标签名之间用空格分割\r\n         * @return { Node | NULL } 如果找到标签名匹配的节点， 则返回该节点， 否则返回NULL\r\n         * @example\r\n         * ```javascript\r\n         * var divNodes = document.getElementsByTagName(\"div\");\r\n         * divNodes = [].slice.call( divNodes, 0 );\r\n         *\r\n         * //output: null\r\n         * console.log( UE.dom.domUtils.filterNodeList( divNodes, 'a span' ) );\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 给定一个节点数组，在通过指定的过滤器过滤后， 如果参数forAll为true， 则会返回所有满足过滤\r\n         * 条件的节点集合， 否则， 返回满足条件的节点集合中的第一个节点\r\n         * @method filterNodeList\r\n         * @param { Array } nodeList 需要过滤的节点数组\r\n         * @param { Function } fn 过滤器， 对符合条件的节点， 执行结果返回true， 反之则返回false\r\n         * @param { Boolean } forAll 是否返回整个节点数组, 如果该参数为false， 则返回节点集合中的第一个节点\r\n         * @return { Array | Node | NULL } 如果找到符合过滤条件的节点， 则根据参数forAll的值决定返回满足\r\n         *                                      过滤条件的节点数组或第一个节点， 否则返回NULL\r\n         * @example\r\n         * ```javascript\r\n         * var divNodes = document.getElementsByTagName(\"div\");\r\n         * divNodes = [].slice.call( divNodes, 0 );\r\n         *\r\n         * //output: 3（假定有3个div）\r\n         * console.log( divNodes.length );\r\n         *\r\n         * var nodes = UE.dom.domUtils.filterNodeList( divNodes, function ( node ) {\r\n         *     return node.tagName.toLowerCase() === 'div';\r\n         * }, true );\r\n         *\r\n         * //output: 3\r\n         * console.log( nodes.length );\r\n         *\r\n         * var node = UE.dom.domUtils.filterNodeList( divNodes, function ( node ) {\r\n         *     return node.tagName.toLowerCase() === 'div';\r\n         * }, false );\r\n         *\r\n         * //output: div\r\n         * console.log( node.nodeName );\r\n         * ```\r\n         */\r\n        filterNodeList: function (nodelist, filter, forAll) {\r\n            var results = [];\r\n            if (!utils.isFunction(filter)) {\r\n                var str = filter;\r\n                filter = function (n) {\r\n                    return utils.indexOf(utils.isArray(str) ? str : str.split(' '), n.tagName.toLowerCase()) != -1\r\n                };\r\n            }\r\n            utils.each(nodelist, function (n) {\r\n                filter(n) && results.push(n)\r\n            });\r\n            return results.length == 0 ? null : results.length == 1 || !forAll ? results[0] : results\r\n        },\r\n\r\n        /**\r\n         * 查询给定的range选区是否在给定的node节点内，且在该节点的最末尾\r\n         * @method isInNodeEndBoundary\r\n         * @param { UE.dom.Range } rng 需要判断的range对象， 该对象的startContainer不能为NULL\r\n         * @param node 需要检测的节点对象\r\n         * @return { Number } 如果给定的选取range对象是在node内部的最末端， 则返回1, 否则返回0\r\n         */\r\n        isInNodeEndBoundary: function (rng, node) {\r\n            var start = rng.startContainer;\r\n            if (start.nodeType == 3 && rng.startOffset != start.nodeValue.length) {\r\n                return 0;\r\n            }\r\n            if (start.nodeType == 1 && rng.startOffset != start.childNodes.length) {\r\n                return 0;\r\n            }\r\n            while (start !== node) {\r\n                if (start.nextSibling) {\r\n                    return 0\r\n                };\r\n                start = start.parentNode;\r\n            }\r\n            return 1;\r\n        },\r\n        isBoundaryNode: function (node, dir) {\r\n            var tmp;\r\n            while (!domUtils.isBody(node)) {\r\n                tmp = node;\r\n                node = node.parentNode;\r\n                if (tmp !== node[dir]) {\r\n                    return false;\r\n                }\r\n            }\r\n            return true;\r\n        },\r\n        fillHtml: browser.ie11below ? '&nbsp;' : '<br/>'\r\n    };\r\n    var fillCharReg = new RegExp(domUtils.fillChar, 'g');\r\n\r\n    // core/Range.js\r\n    /**\r\n     * Range封装\r\n     * @file\r\n     * @module UE.dom\r\n     * @class Range\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * dom操作封装\r\n     * @unfile\r\n     * @module UE.dom\r\n     */\r\n\r\n    /**\r\n     * Range实现类，本类是UEditor底层核心类，封装不同浏览器之间的Range操作。\r\n     * @unfile\r\n     * @module UE.dom\r\n     * @class Range\r\n     */\r\n\r\n\r\n    (function () {\r\n        var guid = 0,\r\n            fillChar = domUtils.fillChar,\r\n            fillData;\r\n\r\n        /**\r\n         * 更新range的collapse状态\r\n         * @param  {Range}   range    range对象\r\n         */\r\n        function updateCollapse(range) {\r\n            range.collapsed =\r\n                range.startContainer && range.endContainer &&\r\n                range.startContainer === range.endContainer &&\r\n                range.startOffset == range.endOffset;\r\n        }\r\n\r\n        function selectOneNode(rng) {\r\n            return !rng.collapsed && rng.startContainer.nodeType == 1 && rng.startContainer === rng.endContainer && rng.endOffset - rng.startOffset == 1\r\n        }\r\n        function setEndPoint(toStart, node, offset, range) {\r\n            //如果node是自闭合标签要处理\r\n            if (node.nodeType == 1 && (dtd.$empty[node.tagName] || dtd.$nonChild[node.tagName])) {\r\n                offset = domUtils.getNodeIndex(node) + (toStart ? 0 : 1);\r\n                node = node.parentNode;\r\n            }\r\n            if (toStart) {\r\n                range.startContainer = node;\r\n                range.startOffset = offset;\r\n                if (!range.endContainer) {\r\n                    range.collapse(true);\r\n                }\r\n            } else {\r\n                range.endContainer = node;\r\n                range.endOffset = offset;\r\n                if (!range.startContainer) {\r\n                    range.collapse(false);\r\n                }\r\n            }\r\n            updateCollapse(range);\r\n            return range;\r\n        }\r\n\r\n        function execContentsAction(range, action) {\r\n            //调整边界\r\n            //range.includeBookmark();\r\n            var start = range.startContainer,\r\n                end = range.endContainer,\r\n                startOffset = range.startOffset,\r\n                endOffset = range.endOffset,\r\n                doc = range.document,\r\n                frag = doc.createDocumentFragment(),\r\n                tmpStart, tmpEnd;\r\n            if (start.nodeType == 1) {\r\n                start = start.childNodes[startOffset] || (tmpStart = start.appendChild(doc.createTextNode('')));\r\n            }\r\n            if (end.nodeType == 1) {\r\n                end = end.childNodes[endOffset] || (tmpEnd = end.appendChild(doc.createTextNode('')));\r\n            }\r\n            if (start === end && start.nodeType == 3) {\r\n                frag.appendChild(doc.createTextNode(start.substringData(startOffset, endOffset - startOffset)));\r\n                //is not clone\r\n                if (action) {\r\n                    start.deleteData(startOffset, endOffset - startOffset);\r\n                    range.collapse(true);\r\n                }\r\n                return frag;\r\n            }\r\n            var current, currentLevel, clone = frag,\r\n                startParents = domUtils.findParents(start, true), endParents = domUtils.findParents(end, true);\r\n            for (var i = 0; startParents[i] == endParents[i];) {\r\n                i++;\r\n            }\r\n            for (var j = i, si; si = startParents[j]; j++) {\r\n                current = si.nextSibling;\r\n                if (si == start) {\r\n                    if (!tmpStart) {\r\n                        if (range.startContainer.nodeType == 3) {\r\n                            clone.appendChild(doc.createTextNode(start.nodeValue.slice(startOffset)));\r\n                            //is not clone\r\n                            if (action) {\r\n                                start.deleteData(startOffset, start.nodeValue.length - startOffset);\r\n                            }\r\n                        } else {\r\n                            clone.appendChild(!action ? start.cloneNode(true) : start);\r\n                        }\r\n                    }\r\n                } else {\r\n                    currentLevel = si.cloneNode(false);\r\n                    clone.appendChild(currentLevel);\r\n                }\r\n                while (current) {\r\n                    if (current === end || current === endParents[j]) {\r\n                        break;\r\n                    }\r\n                    si = current.nextSibling;\r\n                    clone.appendChild(!action ? current.cloneNode(true) : current);\r\n                    current = si;\r\n                }\r\n                clone = currentLevel;\r\n            }\r\n            clone = frag;\r\n            if (!startParents[i]) {\r\n                clone.appendChild(startParents[i - 1].cloneNode(false));\r\n                clone = clone.firstChild;\r\n            }\r\n            for (var j = i, ei; ei = endParents[j]; j++) {\r\n                current = ei.previousSibling;\r\n                if (ei == end) {\r\n                    if (!tmpEnd && range.endContainer.nodeType == 3) {\r\n                        clone.appendChild(doc.createTextNode(end.substringData(0, endOffset)));\r\n                        //is not clone\r\n                        if (action) {\r\n                            end.deleteData(0, endOffset);\r\n                        }\r\n                    }\r\n                } else {\r\n                    currentLevel = ei.cloneNode(false);\r\n                    clone.appendChild(currentLevel);\r\n                }\r\n                //如果两端同级，右边第一次已经被开始做了\r\n                if (j != i || !startParents[i]) {\r\n                    while (current) {\r\n                        if (current === start) {\r\n                            break;\r\n                        }\r\n                        ei = current.previousSibling;\r\n                        clone.insertBefore(!action ? current.cloneNode(true) : current, clone.firstChild);\r\n                        current = ei;\r\n                    }\r\n                }\r\n                clone = currentLevel;\r\n            }\r\n            if (action) {\r\n                range.setStartBefore(!endParents[i] ? endParents[i - 1] : !startParents[i] ? startParents[i - 1] : endParents[i]).collapse(true);\r\n            }\r\n            tmpStart && domUtils.remove(tmpStart);\r\n            tmpEnd && domUtils.remove(tmpEnd);\r\n            return frag;\r\n        }\r\n\r\n        /**\r\n         * 创建一个跟document绑定的空的Range实例\r\n         * @constructor\r\n         * @param { Document } document 新建的选区所属的文档对象\r\n         */\r\n\r\n        /**\r\n         * @property { Node } startContainer 当前Range的开始边界的容器节点, 可以是一个元素节点或者是文本节点\r\n         */\r\n\r\n        /**\r\n         * @property { Node } startOffset 当前Range的开始边界容器节点的偏移量, 如果是元素节点，\r\n         *                              该值就是childNodes中的第几个节点， 如果是文本节点就是文本内容的第几个字符\r\n         */\r\n\r\n        /**\r\n         * @property { Node } endContainer 当前Range的结束边界的容器节点, 可以是一个元素节点或者是文本节点\r\n         */\r\n\r\n        /**\r\n         * @property { Node } endOffset 当前Range的结束边界容器节点的偏移量, 如果是元素节点，\r\n         *                              该值就是childNodes中的第几个节点， 如果是文本节点就是文本内容的第几个字符\r\n         */\r\n\r\n        /**\r\n         * @property { Boolean } collapsed 当前Range是否闭合\r\n         * @default true\r\n         * @remind Range是闭合的时候， startContainer === endContainer && startOffset === endOffset\r\n         */\r\n\r\n        /**\r\n         * @property { Document } document 当前Range所属的Document对象\r\n         * @remind 不同range的的document属性可以是不同的\r\n         */\r\n        var Range = dom.Range = function (document) {\r\n            var me = this;\r\n            me.startContainer =\r\n                me.startOffset =\r\n                me.endContainer =\r\n                me.endOffset = null;\r\n            me.document = document;\r\n            me.collapsed = true;\r\n        };\r\n\r\n        /**\r\n         * 删除fillData\r\n         * @param doc\r\n         * @param excludeNode\r\n         */\r\n        function removeFillData(doc, excludeNode) {\r\n            try {\r\n                if (fillData && domUtils.inDoc(fillData, doc)) {\r\n                    if (!fillData.nodeValue.replace(fillCharReg, '').length) {\r\n                        var tmpNode = fillData.parentNode;\r\n                        domUtils.remove(fillData);\r\n                        while (tmpNode && domUtils.isEmptyInlineElement(tmpNode) &&\r\n                            //safari的contains有bug\r\n                            (browser.safari ? !(domUtils.getPosition(tmpNode, excludeNode) & domUtils.POSITION_CONTAINS) : !tmpNode.contains(excludeNode))\r\n                        ) {\r\n                            fillData = tmpNode.parentNode;\r\n                            domUtils.remove(tmpNode);\r\n                            tmpNode = fillData;\r\n                        }\r\n                    } else {\r\n                        fillData.nodeValue = fillData.nodeValue.replace(fillCharReg, '');\r\n                    }\r\n                }\r\n            } catch (e) {\r\n            }\r\n        }\r\n\r\n        /**\r\n         * @param node\r\n         * @param dir\r\n         */\r\n        function mergeSibling(node, dir) {\r\n            var tmpNode;\r\n            node = node[dir];\r\n            while (node && domUtils.isFillChar(node)) {\r\n                tmpNode = node[dir];\r\n                domUtils.remove(node);\r\n                node = tmpNode;\r\n            }\r\n        }\r\n\r\n        Range.prototype = {\r\n\r\n            /**\r\n             * 克隆选区的内容到一个DocumentFragment里\r\n             * @method cloneContents\r\n             * @return { DocumentFragment | NULL } 如果选区是闭合的将返回null， 否则， 返回包含所clone内容的DocumentFragment元素\r\n             * @example\r\n             * ```html\r\n             * <body>\r\n             *      <!-- 中括号表示选区 -->\r\n             *      <b>x<i>x[x</i>xx]x</b>\r\n             *\r\n             *      <script>\r\n             *          //range是已选中的选区\r\n             *          var fragment = range.cloneContents(),\r\n             *              node = document.createElement(\"div\");\r\n             *\r\n             *          node.appendChild( fragment );\r\n             *\r\n             *          //output: <i>x</i>xx\r\n             *          console.log( node.innerHTML );\r\n             *\r\n             *      </script>\r\n             * </body>\r\n             * ```\r\n             */\r\n            cloneContents: function () {\r\n                return this.collapsed ? null : execContentsAction(this, 0);\r\n            },\r\n\r\n            /**\r\n             * 删除当前选区范围中的所有内容\r\n             * @method deleteContents\r\n             * @remind 执行完该操作后， 当前Range对象变成了闭合状态\r\n             * @return { UE.dom.Range } 当前操作的Range对象\r\n             * @example\r\n             * ```html\r\n             * <body>\r\n             *      <!-- 中括号表示选区 -->\r\n             *      <b>x<i>x[x</i>xx]x</b>\r\n             *\r\n             *      <script>\r\n             *          //range是已选中的选区\r\n             *          range.deleteContents();\r\n             *\r\n             *          //竖线表示闭合后的选区位置\r\n             *          //output: <b>x<i>x</i>|x</b>\r\n             *          console.log( document.body.innerHTML );\r\n             *\r\n             *          //此时， range的各项属性为\r\n             *          //output: B\r\n             *          console.log( range.startContainer.tagName );\r\n             *          //output: 2\r\n             *          console.log( range.startOffset );\r\n             *          //output: B\r\n             *          console.log( range.endContainer.tagName );\r\n             *          //output: 2\r\n             *          console.log( range.endOffset );\r\n             *          //output: true\r\n             *          console.log( range.collapsed );\r\n             *\r\n             *      </script>\r\n             * </body>\r\n             * ```\r\n             */\r\n            deleteContents: function () {\r\n                var txt;\r\n                if (!this.collapsed) {\r\n                    execContentsAction(this, 1);\r\n                }\r\n                if (browser.webkit) {\r\n                    txt = this.startContainer;\r\n                    if (txt.nodeType == 3 && !txt.nodeValue.length) {\r\n                        this.setStartBefore(txt).collapse(true);\r\n                        domUtils.remove(txt);\r\n                    }\r\n                }\r\n                return this;\r\n            },\r\n\r\n            /**\r\n             * 将当前选区的内容提取到一个DocumentFragment里\r\n             * @method extractContents\r\n             * @remind 执行该操作后， 选区将变成闭合状态\r\n             * @warning 执行该操作后， 原来选区所选中的内容将从dom树上剥离出来\r\n             * @return { DocumentFragment } 返回包含所提取内容的DocumentFragment对象\r\n             * @example\r\n             * ```html\r\n             * <body>\r\n             *      <!-- 中括号表示选区 -->\r\n             *      <b>x<i>x[x</i>xx]x</b>\r\n             *\r\n             *      <script>\r\n             *          //range是已选中的选区\r\n             *          var fragment = range.extractContents(),\r\n             *              node = document.createElement( \"div\" );\r\n             *\r\n             *          node.appendChild( fragment );\r\n             *\r\n             *          //竖线表示闭合后的选区位置\r\n             *\r\n             *          //output: <b>x<i>x</i>|x</b>\r\n             *          console.log( document.body.innerHTML );\r\n             *          //output: <i>x</i>xx\r\n             *          console.log( node.innerHTML );\r\n             *\r\n             *          //此时， range的各项属性为\r\n             *          //output: B\r\n             *          console.log( range.startContainer.tagName );\r\n             *          //output: 2\r\n             *          console.log( range.startOffset );\r\n             *          //output: B\r\n             *          console.log( range.endContainer.tagName );\r\n             *          //output: 2\r\n             *          console.log( range.endOffset );\r\n             *          //output: true\r\n             *          console.log( range.collapsed );\r\n             *\r\n             *      </script>\r\n             * </body>\r\n             */\r\n            extractContents: function () {\r\n                return this.collapsed ? null : execContentsAction(this, 2);\r\n            },\r\n\r\n            /**\r\n             * 设置Range的开始容器节点和偏移量\r\n             * @method  setStart\r\n             * @remind 如果给定的节点是元素节点，那么offset指的是其子元素中索引为offset的元素，\r\n             *          如果是文本节点，那么offset指的是其文本内容的第offset个字符\r\n             * @remind 如果提供的容器节点是一个不能包含子元素的节点， 则该选区的开始容器将被设置\r\n             *          为该节点的父节点， 此时， 其距离开始容器的偏移量也变成了该节点在其父节点\r\n             *          中的索引\r\n             * @param { Node } node 将被设为当前选区开始边界容器的节点对象\r\n             * @param { int } offset 选区的开始位置偏移量\r\n             * @return { UE.dom.Range } 当前range对象\r\n             * @example\r\n             * ```html\r\n             * <!-- 选区 -->\r\n             * <b>xxx<i>x<span>xx</span>xx<em>xx</em>xxx</i>[xxx]</b>\r\n             *\r\n             * <script>\r\n             *\r\n             *     //执行操作\r\n             *     range.setStart( document.getElementsByTagName(\"i\")[0], 1 );\r\n             *\r\n             *     //此时， 选区变成了\r\n             *     //<b>xxx<i>x[<span>xx</span>xx<em>xx</em>xxx</i>xxx]</b>\r\n             *\r\n             * </script>\r\n             * ```\r\n             * @example\r\n             * ```html\r\n             * <!-- 选区 -->\r\n             * <b>xxx<img>[xx]x</b>\r\n             *\r\n             * <script>\r\n             *\r\n             *     //执行操作\r\n             *     range.setStart( document.getElementsByTagName(\"img\")[0], 3 );\r\n             *\r\n             *     //此时， 选区变成了\r\n             *     //<b>xxx[<img>xx]x</b>\r\n             *\r\n             * </script>\r\n             * ```\r\n             */\r\n            setStart: function (node, offset) {\r\n                return setEndPoint(true, node, offset, this);\r\n            },\r\n\r\n            /**\r\n             * 设置Range的结束容器和偏移量\r\n             * @method  setEnd\r\n             * @param { Node } node 作为当前选区结束边界容器的节点对象\r\n             * @param { int } offset 结束边界的偏移量\r\n             * @see UE.dom.Range:setStart(Node,int)\r\n             * @return { UE.dom.Range } 当前range对象\r\n             */\r\n            setEnd: function (node, offset) {\r\n                return setEndPoint(false, node, offset, this);\r\n            },\r\n\r\n            /**\r\n             * 将Range开始位置设置到node节点之后\r\n             * @method  setStartAfter\r\n             * @remind 该操作将会把给定节点的父节点作为range的开始容器， 且偏移量是该节点在其父节点中的位置索引+1\r\n             * @param { Node } node 选区的开始边界将紧接着该节点之后\r\n             * @return { UE.dom.Range } 当前range对象\r\n             * @example\r\n             * ```html\r\n             * <!-- 选区示例 -->\r\n             * <b>xx<i>xxx</i><span>xx[x</span>xxx]</b>\r\n             *\r\n             * <script>\r\n             *\r\n             *     //执行操作\r\n             *     range.setStartAfter( document.getElementsByTagName(\"i\")[0] );\r\n             *\r\n             *     //结果选区\r\n             *     //<b>xx<i>xxx</i>[<span>xxx</span>xxx]</b>\r\n             *\r\n             * </script>\r\n             * ```\r\n             */\r\n            setStartAfter: function (node) {\r\n                return this.setStart(node.parentNode, domUtils.getNodeIndex(node) + 1);\r\n            },\r\n\r\n            /**\r\n             * 将Range开始位置设置到node节点之前\r\n             * @method  setStartBefore\r\n             * @remind 该操作将会把给定节点的父节点作为range的开始容器， 且偏移量是该节点在其父节点中的位置索引\r\n             * @param { Node } node 新的选区开始位置在该节点之前\r\n             * @see UE.dom.Range:setStartAfter(Node)\r\n             * @return { UE.dom.Range } 当前range对象\r\n             */\r\n            setStartBefore: function (node) {\r\n                return this.setStart(node.parentNode, domUtils.getNodeIndex(node));\r\n            },\r\n\r\n            /**\r\n             * 将Range结束位置设置到node节点之后\r\n             * @method  setEndAfter\r\n             * @remind 该操作将会把给定节点的父节点作为range的结束容器， 且偏移量是该节点在其父节点中的位置索引+1\r\n             * @param { Node } node 目标节点\r\n             * @see UE.dom.Range:setStartAfter(Node)\r\n             * @return { UE.dom.Range } 当前range对象\r\n             * @example\r\n             * ```html\r\n             * <!-- 选区示例 -->\r\n             * <b>[xx<i>xxx</i><span>xx]x</span>xxx</b>\r\n             *\r\n             * <script>\r\n             *\r\n             *     //执行操作\r\n             *     range.setStartAfter( document.getElementsByTagName(\"span\")[0] );\r\n             *\r\n             *     //结果选区\r\n             *     //<b>[xx<i>xxx</i><span>xxx</span>]xxx</b>\r\n             *\r\n             * </script>\r\n             * ```\r\n             */\r\n            setEndAfter: function (node) {\r\n                return this.setEnd(node.parentNode, domUtils.getNodeIndex(node) + 1);\r\n            },\r\n\r\n            /**\r\n             * 将Range结束位置设置到node节点之前\r\n             * @method  setEndBefore\r\n             * @remind 该操作将会把给定节点的父节点作为range的结束容器， 且偏移量是该节点在其父节点中的位置索引\r\n             * @param { Node } node 目标节点\r\n             * @see UE.dom.Range:setEndAfter(Node)\r\n             * @return { UE.dom.Range } 当前range对象\r\n             */\r\n            setEndBefore: function (node) {\r\n                return this.setEnd(node.parentNode, domUtils.getNodeIndex(node));\r\n            },\r\n\r\n            /**\r\n             * 设置Range的开始位置到node节点内的第一个子节点之前\r\n             * @method  setStartAtFirst\r\n             * @remind 选区的开始容器将变成给定的节点， 且偏移量为0\r\n             * @remind 如果给定的节点是元素节点， 则该节点必须是允许包含子节点的元素。\r\n             * @param { Node } node 目标节点\r\n             * @see UE.dom.Range:setStartBefore(Node)\r\n             * @return { UE.dom.Range } 当前range对象\r\n             * @example\r\n             * ```html\r\n             * <!-- 选区示例 -->\r\n             * <b>xx<i>xxx</i><span>[xx]x</span>xxx</b>\r\n             *\r\n             * <script>\r\n             *\r\n             *     //执行操作\r\n             *     range.setStartAtFirst( document.getElementsByTagName(\"i\")[0] );\r\n             *\r\n             *     //结果选区\r\n             *     //<b>xx<i>[xxx</i><span>xx]x</span>xxx</b>\r\n             *\r\n             * </script>\r\n             * ```\r\n             */\r\n            setStartAtFirst: function (node) {\r\n                return this.setStart(node, 0);\r\n            },\r\n\r\n            /**\r\n             * 设置Range的开始位置到node节点内的最后一个节点之后\r\n             * @method setStartAtLast\r\n             * @remind 选区的开始容器将变成给定的节点， 且偏移量为该节点的子节点数\r\n             * @remind 如果给定的节点是元素节点， 则该节点必须是允许包含子节点的元素。\r\n             * @param { Node } node 目标节点\r\n             * @see UE.dom.Range:setStartAtFirst(Node)\r\n             * @return { UE.dom.Range } 当前range对象\r\n             */\r\n            setStartAtLast: function (node) {\r\n                return this.setStart(node, node.nodeType == 3 ? node.nodeValue.length : node.childNodes.length);\r\n            },\r\n\r\n            /**\r\n             * 设置Range的结束位置到node节点内的第一个节点之前\r\n             * @method  setEndAtFirst\r\n             * @param { Node } node 目标节点\r\n             * @remind 选区的结束容器将变成给定的节点， 且偏移量为0\r\n             * @remind node必须是一个元素节点， 且必须是允许包含子节点的元素。\r\n             * @see UE.dom.Range:setStartAtFirst(Node)\r\n             * @return { UE.dom.Range } 当前range对象\r\n             */\r\n            setEndAtFirst: function (node) {\r\n                return this.setEnd(node, 0);\r\n            },\r\n\r\n            /**\r\n             * 设置Range的结束位置到node节点内的最后一个节点之后\r\n             * @method  setEndAtLast\r\n             * @param { Node } node 目标节点\r\n             * @remind 选区的结束容器将变成给定的节点， 且偏移量为该节点的子节点数量\r\n             * @remind node必须是一个元素节点， 且必须是允许包含子节点的元素。\r\n             * @see UE.dom.Range:setStartAtFirst(Node)\r\n             * @return { UE.dom.Range } 当前range对象\r\n             */\r\n            setEndAtLast: function (node) {\r\n                return this.setEnd(node, node.nodeType == 3 ? node.nodeValue.length : node.childNodes.length);\r\n            },\r\n\r\n            /**\r\n             * 选中给定节点\r\n             * @method  selectNode\r\n             * @remind 此时， 选区的开始容器和结束容器都是该节点的父节点， 其startOffset是该节点在父节点中的位置索引，\r\n             *          而endOffset为startOffset+1\r\n             * @param { Node } node 需要选中的节点\r\n             * @return { UE.dom.Range } 当前range对象，此时的range仅包含当前给定的节点对象\r\n             * @example\r\n             * ```html\r\n             * <!-- 选区示例 -->\r\n             * <b>xx<i>xxx</i><span>[xx]x</span>xxx</b>\r\n             *\r\n             * <script>\r\n             *\r\n             *     //执行操作\r\n             *     range.selectNode( document.getElementsByTagName(\"i\")[0] );\r\n             *\r\n             *     //结果选区\r\n             *     //<b>xx[<i>xxx</i>]<span>xxx</span>xxx</b>\r\n             *\r\n             * </script>\r\n             * ```\r\n             */\r\n            selectNode: function (node) {\r\n                return this.setStartBefore(node).setEndAfter(node);\r\n            },\r\n\r\n            /**\r\n             * 选中给定节点内部的所有节点\r\n             * @method  selectNodeContents\r\n             * @remind 此时， 选区的开始容器和结束容器都是该节点， 其startOffset为0，\r\n             *          而endOffset是该节点的子节点数。\r\n             * @param { Node } node 目标节点， 当前range将包含该节点内的所有节点\r\n             * @return { UE.dom.Range } 当前range对象， 此时range仅包含给定节点的所有子节点\r\n             * @example\r\n             * ```html\r\n             * <!-- 选区示例 -->\r\n             * <b>xx<i>xxx</i><span>[xx]x</span>xxx</b>\r\n             *\r\n             * <script>\r\n             *\r\n             *     //执行操作\r\n             *     range.selectNode( document.getElementsByTagName(\"b\")[0] );\r\n             *\r\n             *     //结果选区\r\n             *     //<b>[xx<i>xxx</i><span>xxx</span>xxx]</b>\r\n             *\r\n             * </script>\r\n             * ```\r\n             */\r\n            selectNodeContents: function (node) {\r\n                return this.setStart(node, 0).setEndAtLast(node);\r\n            },\r\n\r\n            /**\r\n             * clone当前Range对象\r\n             * @method  cloneRange\r\n             * @remind 返回的range是一个全新的range对象， 其内部所有属性与当前被clone的range相同。\r\n             * @return { UE.dom.Range } 当前range对象的一个副本\r\n             */\r\n            cloneRange: function () {\r\n                var me = this;\r\n                return new Range(me.document).setStart(me.startContainer, me.startOffset).setEnd(me.endContainer, me.endOffset);\r\n\r\n            },\r\n\r\n            /**\r\n             * 向当前选区的结束处闭合选区\r\n             * @method  collapse\r\n             * @return { UE.dom.Range } 当前range对象\r\n             * @example\r\n             * ```html\r\n             * <!-- 选区示例 -->\r\n             * <b>xx<i>xxx</i><span>[xx]x</span>xxx</b>\r\n             *\r\n             * <script>\r\n             *\r\n             *     //执行操作\r\n             *     range.collapse();\r\n             *\r\n             *     //结果选区\r\n             *     //“|”表示选区已闭合\r\n             *     //<b>xx<i>xxx</i><span>xx|x</span>xxx</b>\r\n             *\r\n             * </script>\r\n             * ```\r\n             */\r\n\r\n            /**\r\n             * 闭合当前选区，根据给定的toStart参数项决定是向当前选区开始处闭合还是向结束处闭合，\r\n             * 如果toStart的值为true，则向开始位置闭合， 反之，向结束位置闭合。\r\n             * @method  collapse\r\n             * @param { Boolean } toStart 是否向选区开始处闭合\r\n             * @return { UE.dom.Range } 当前range对象，此时range对象处于闭合状态\r\n             * @see UE.dom.Range:collapse()\r\n             * @example\r\n             * ```html\r\n             * <!-- 选区示例 -->\r\n             * <b>xx<i>xxx</i><span>[xx]x</span>xxx</b>\r\n             *\r\n             * <script>\r\n             *\r\n             *     //执行操作\r\n             *     range.collapse( true );\r\n             *\r\n             *     //结果选区\r\n             *     //“|”表示选区已闭合\r\n             *     //<b>xx<i>xxx</i><span>|xxx</span>xxx</b>\r\n             *\r\n             * </script>\r\n             * ```\r\n             */\r\n            collapse: function (toStart) {\r\n                var me = this;\r\n                if (toStart) {\r\n                    me.endContainer = me.startContainer;\r\n                    me.endOffset = me.startOffset;\r\n                } else {\r\n                    me.startContainer = me.endContainer;\r\n                    me.startOffset = me.endOffset;\r\n                }\r\n                me.collapsed = true;\r\n                return me;\r\n            },\r\n\r\n            /**\r\n             * 调整range的开始位置和结束位置，使其\"收缩\"到最小的位置\r\n             * @method  shrinkBoundary\r\n             * @return { UE.dom.Range } 当前range对象\r\n             * @example\r\n             * ```html\r\n             * <span>xx<b>xx[</b>xxxxx]</span> => <span>xx<b>xx</b>[xxxxx]</span>\r\n             * ```\r\n             *\r\n             * @example\r\n             * ```html\r\n             * <!-- 选区示例 -->\r\n             * <b>x[xx</b><i>]xxx</i>\r\n             *\r\n             * <script>\r\n             *\r\n             *     //执行收缩\r\n             *     range.shrinkBoundary();\r\n             *\r\n             *     //结果选区\r\n             *     //<b>x[xx]</b><i>xxx</i>\r\n             * </script>\r\n             * ```\r\n             *\r\n             * @example\r\n             * ```html\r\n             * [<b><i>xxxx</i>xxxxxxx</b>] => <b><i>[xxxx</i>xxxxxxx]</b>\r\n             * ```\r\n             */\r\n\r\n            /**\r\n             * 调整range的开始位置和结束位置，使其\"收缩\"到最小的位置，\r\n             * 如果ignoreEnd的值为true，则忽略对结束位置的调整\r\n             * @method  shrinkBoundary\r\n             * @param { Boolean } ignoreEnd 是否忽略对结束位置的调整\r\n             * @return { UE.dom.Range } 当前range对象\r\n             * @see UE.dom.domUtils.Range:shrinkBoundary()\r\n             */\r\n            shrinkBoundary: function (ignoreEnd) {\r\n                var me = this, child,\r\n                    collapsed = me.collapsed;\r\n                function check(node) {\r\n                    return node.nodeType == 1 && !domUtils.isBookmarkNode(node) && !dtd.$empty[node.tagName] && !dtd.$nonChild[node.tagName]\r\n                }\r\n                while (me.startContainer.nodeType == 1 //是element\r\n                    && (child = me.startContainer.childNodes[me.startOffset]) //子节点也是element\r\n                    && check(child)) {\r\n                    me.setStart(child, 0);\r\n                }\r\n                if (collapsed) {\r\n                    return me.collapse(true);\r\n                }\r\n                if (!ignoreEnd) {\r\n                    while (me.endContainer.nodeType == 1//是element\r\n                        && me.endOffset > 0 //如果是空元素就退出 endOffset=0那么endOffst-1为负值，childNodes[endOffset]报错\r\n                        && (child = me.endContainer.childNodes[me.endOffset - 1]) //子节点也是element\r\n                        && check(child)) {\r\n                        me.setEnd(child, child.childNodes.length);\r\n                    }\r\n                }\r\n                return me;\r\n            },\r\n\r\n            /**\r\n             * 获取离当前选区内包含的所有节点最近的公共祖先节点，\r\n             * @method  getCommonAncestor\r\n             * @remind 返回的公共祖先节点一定不是range自身的容器节点， 但有可能是一个文本节点\r\n             * @return { Node } 当前range对象内所有节点的公共祖先节点\r\n             * @example\r\n             * ```html\r\n             * //选区示例\r\n             * <span>xxx<b>x[x<em>xx]x</em>xxx</b>xx</span>\r\n             * <script>\r\n             *\r\n             *     var node = range.getCommonAncestor();\r\n             *\r\n             *     //公共祖先节点是： b节点\r\n             *     //输出： B\r\n             *     console.log(node.tagName);\r\n             *\r\n             * </script>\r\n             * ```\r\n             */\r\n\r\n            /**\r\n             * 获取当前选区所包含的所有节点的公共祖先节点， 可以根据给定的参数 includeSelf 决定获取到\r\n             * 的公共祖先节点是否可以是当前选区的startContainer或endContainer节点， 如果 includeSelf\r\n             * 的取值为true， 则返回的节点可以是自身的容器节点， 否则， 则不能是容器节点\r\n             * @method  getCommonAncestor\r\n             * @param { Boolean } includeSelf 是否允许获取到的公共祖先节点是当前range对象的容器节点\r\n             * @return { Node } 当前range对象内所有节点的公共祖先节点\r\n             * @see UE.dom.Range:getCommonAncestor()\r\n             * @example\r\n             * ```html\r\n             * <body>\r\n             *\r\n             *     <!-- 选区示例 -->\r\n             *     <b>xxx<i>xxxx<span>xx[x</span>xx]x</i>xxxxxxx</b>\r\n             *\r\n             *     <script>\r\n             *\r\n             *         var node = range.getCommonAncestor( false );\r\n             *\r\n             *         //这里的公共祖先节点是B而不是I， 是因为参数限制了获取到的节点不能是容器节点\r\n             *         //output: B\r\n             *         console.log( node.tagName );\r\n             *\r\n             *     </script>\r\n             *\r\n             * </body>\r\n             * ```\r\n             */\r\n\r\n            /**\r\n             * 获取当前选区所包含的所有节点的公共祖先节点， 可以根据给定的参数 includeSelf 决定获取到\r\n             * 的公共祖先节点是否可以是当前选区的startContainer或endContainer节点， 如果 includeSelf\r\n             * 的取值为true， 则返回的节点可以是自身的容器节点， 否则， 则不能是容器节点； 同时可以根据\r\n             * ignoreTextNode 参数的取值决定是否忽略类型为文本节点的祖先节点。\r\n             * @method  getCommonAncestor\r\n             * @param { Boolean } includeSelf 是否允许获取到的公共祖先节点是当前range对象的容器节点\r\n             * @param { Boolean } ignoreTextNode 获取祖先节点的过程中是否忽略类型为文本节点的祖先节点\r\n             * @return { Node } 当前range对象内所有节点的公共祖先节点\r\n             * @see UE.dom.Range:getCommonAncestor()\r\n             * @see UE.dom.Range:getCommonAncestor(Boolean)\r\n             * @example\r\n             * ```html\r\n             * <body>\r\n             *\r\n             *     <!-- 选区示例 -->\r\n             *     <b>xxx<i>xxxx<span>x[x]x</span>xxx</i>xxxxxxx</b>\r\n             *\r\n             *     <script>\r\n             *\r\n             *         var node = range.getCommonAncestor( true, false );\r\n             *\r\n             *         //output: SPAN\r\n             *         console.log( node.tagName );\r\n             *\r\n             *     </script>\r\n             *\r\n             * </body>\r\n             * ```\r\n             */\r\n            getCommonAncestor: function (includeSelf, ignoreTextNode) {\r\n                var me = this,\r\n                    start = me.startContainer,\r\n                    end = me.endContainer;\r\n                if (start === end) {\r\n                    if (includeSelf && selectOneNode(this)) {\r\n                        start = start.childNodes[me.startOffset];\r\n                        if (start.nodeType == 1)\r\n                            return start;\r\n                    }\r\n                    //只有在上来就相等的情况下才会出现是文本的情况\r\n                    return ignoreTextNode && start.nodeType == 3 ? start.parentNode : start;\r\n                }\r\n                return domUtils.getCommonAncestor(start, end);\r\n            },\r\n\r\n            /**\r\n             * 调整当前Range的开始和结束边界容器，如果是容器节点是文本节点,就调整到包含该文本节点的父节点上\r\n             * @method trimBoundary\r\n             * @remind 该操作有可能会引起文本节点被切开\r\n             * @return { UE.dom.Range } 当前range对象\r\n             * @example\r\n             * ```html\r\n             *\r\n             * //选区示例\r\n             * <b>xxx<i>[xxxxx]</i>xxx</b>\r\n             *\r\n             * <script>\r\n             *     //未调整前， 选区的开始容器和结束都是文本节点\r\n             *     //执行调整\r\n             *     range.trimBoundary();\r\n             *\r\n             *     //调整之后， 容器节点变成了i节点\r\n             *     //<b>xxx[<i>xxxxx</i>]xxx</b>\r\n             * </script>\r\n             * ```\r\n             */\r\n\r\n            /**\r\n             * 调整当前Range的开始和结束边界容器，如果是容器节点是文本节点,就调整到包含该文本节点的父节点上，\r\n             * 可以根据 ignoreEnd 参数的值决定是否调整对结束边界的调整\r\n             * @method trimBoundary\r\n             * @param { Boolean } ignoreEnd 是否忽略对结束边界的调整\r\n             * @return { UE.dom.Range } 当前range对象\r\n             * @example\r\n             * ```html\r\n             *\r\n             * //选区示例\r\n             * <b>xxx<i>[xxxxx]</i>xxx</b>\r\n             *\r\n             * <script>\r\n             *     //未调整前， 选区的开始容器和结束都是文本节点\r\n             *     //执行调整\r\n             *     range.trimBoundary( true );\r\n             *\r\n             *     //调整之后， 开始容器节点变成了i节点\r\n             *     //但是， 结束容器没有发生变化\r\n             *     //<b>xxx[<i>xxxxx]</i>xxx</b>\r\n             * </script>\r\n             * ```\r\n             */\r\n            trimBoundary: function (ignoreEnd) {\r\n                this.txtToElmBoundary();\r\n                var start = this.startContainer,\r\n                    offset = this.startOffset,\r\n                    collapsed = this.collapsed,\r\n                    end = this.endContainer;\r\n                if (start.nodeType == 3) {\r\n                    if (offset == 0) {\r\n                        this.setStartBefore(start);\r\n                    } else {\r\n                        if (offset >= start.nodeValue.length) {\r\n                            this.setStartAfter(start);\r\n                        } else {\r\n                            var textNode = domUtils.split(start, offset);\r\n                            //跟新结束边界\r\n                            if (start === end) {\r\n                                this.setEnd(textNode, this.endOffset - offset);\r\n                            } else if (start.parentNode === end) {\r\n                                this.endOffset += 1;\r\n                            }\r\n                            this.setStartBefore(textNode);\r\n                        }\r\n                    }\r\n                    if (collapsed) {\r\n                        return this.collapse(true);\r\n                    }\r\n                }\r\n                if (!ignoreEnd) {\r\n                    offset = this.endOffset;\r\n                    end = this.endContainer;\r\n                    if (end.nodeType == 3) {\r\n                        if (offset == 0) {\r\n                            this.setEndBefore(end);\r\n                        } else {\r\n                            offset < end.nodeValue.length && domUtils.split(end, offset);\r\n                            this.setEndAfter(end);\r\n                        }\r\n                    }\r\n                }\r\n                return this;\r\n            },\r\n\r\n            /**\r\n             * 如果选区在文本的边界上，就扩展选区到文本的父节点上, 如果当前选区是闭合的， 则什么也不做\r\n             * @method txtToElmBoundary\r\n             * @remind 该操作不会修改dom节点\r\n             * @return { UE.dom.Range } 当前range对象\r\n             */\r\n\r\n            /**\r\n             * 如果选区在文本的边界上，就扩展选区到文本的父节点上, 如果当前选区是闭合的， 则根据参数项\r\n             * ignoreCollapsed 的值决定是否执行该调整\r\n             * @method txtToElmBoundary\r\n             * @param { Boolean } ignoreCollapsed 是否忽略选区的闭合状态， 如果该参数取值为true， 则\r\n             *                      不论选区是否闭合， 都会执行该操作， 反之， 则不会对闭合的选区执行该操作\r\n             * @return { UE.dom.Range } 当前range对象\r\n             */\r\n            txtToElmBoundary: function (ignoreCollapsed) {\r\n                function adjust(r, c) {\r\n                    var container = r[c + 'Container'],\r\n                        offset = r[c + 'Offset'];\r\n                    if (container.nodeType == 3) {\r\n                        if (!offset) {\r\n                            r['set' + c.replace(/(\\w)/, function (a) {\r\n                                return a.toUpperCase();\r\n                            }) + 'Before'](container);\r\n                        } else if (offset >= container.nodeValue.length) {\r\n                            r['set' + c.replace(/(\\w)/, function (a) {\r\n                                return a.toUpperCase();\r\n                            }) + 'After'](container);\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if (ignoreCollapsed || !this.collapsed) {\r\n                    adjust(this, 'start');\r\n                    adjust(this, 'end');\r\n                }\r\n                return this;\r\n            },\r\n\r\n            /**\r\n             * 在当前选区的开始位置前插入节点，新插入的节点会被该range包含\r\n             * @method  insertNode\r\n             * @param { Node } node 需要插入的节点\r\n             * @remind 插入的节点可以是一个DocumentFragment依次插入多个节点\r\n             * @return { UE.dom.Range } 当前range对象\r\n             */\r\n            insertNode: function (node) {\r\n                var first = node, length = 1;\r\n                if (node.nodeType == 11) {\r\n                    first = node.firstChild;\r\n                    length = node.childNodes.length;\r\n                }\r\n                this.trimBoundary(true);\r\n                var start = this.startContainer,\r\n                    offset = this.startOffset;\r\n                var nextNode = start.childNodes[offset];\r\n                if (nextNode) {\r\n                    start.insertBefore(node, nextNode);\r\n                } else {\r\n                    start.appendChild(node);\r\n                }\r\n                if (first.parentNode === this.endContainer) {\r\n                    this.endOffset = this.endOffset + length;\r\n                }\r\n                return this.setStartBefore(first);\r\n            },\r\n\r\n            /**\r\n             * 闭合选区到当前选区的开始位置， 并且定位光标到闭合后的位置\r\n             * @method  setCursor\r\n             * @return { UE.dom.Range } 当前range对象\r\n             * @see UE.dom.Range:collapse()\r\n             */\r\n\r\n            /**\r\n             * 闭合选区，可以根据参数toEnd的值控制选区是向前闭合还是向后闭合， 并且定位光标到闭合后的位置。\r\n             * @method  setCursor\r\n             * @param { Boolean } toEnd 是否向后闭合， 如果为true， 则闭合选区时， 将向结束容器方向闭合，\r\n             *                      反之，则向开始容器方向闭合\r\n             * @return { UE.dom.Range } 当前range对象\r\n             * @see UE.dom.Range:collapse(Boolean)\r\n             */\r\n            setCursor: function (toEnd, noFillData) {\r\n                return this.collapse(!toEnd).select(noFillData);\r\n            },\r\n\r\n            /**\r\n             * 创建当前range的一个书签，记录下当前range的位置，方便当dom树改变时，还能找回原来的选区位置\r\n             * @method createBookmark\r\n             * @param { Boolean } serialize 控制返回的标记位置是对当前位置的引用还是ID，如果该值为true，则\r\n             *                              返回标记位置的ID， 反之则返回标记位置节点的引用\r\n             * @return { Object } 返回一个书签记录键值对， 其包含的key有： start => 开始标记的ID或者引用，\r\n             *                          end => 结束标记的ID或引用， id => 当前标记的类型， 如果为true，则表示\r\n             *                          返回的记录的类型为ID， 反之则为引用\r\n             */\r\n            createBookmark: function (serialize, same) {\r\n                var endNode,\r\n                    startNode = this.document.createElement('span');\r\n                startNode.style.cssText = 'display:none;line-height:0px;';\r\n                startNode.appendChild(this.document.createTextNode('\\u200D'));\r\n                startNode.id = '_baidu_bookmark_start_' + (same ? '' : guid++);\r\n\r\n                if (!this.collapsed) {\r\n                    endNode = startNode.cloneNode(true);\r\n                    endNode.id = '_baidu_bookmark_end_' + (same ? '' : guid++);\r\n                }\r\n                this.insertNode(startNode);\r\n                if (endNode) {\r\n                    this.collapse().insertNode(endNode).setEndBefore(endNode);\r\n                }\r\n                this.setStartAfter(startNode);\r\n                return {\r\n                    start: serialize ? startNode.id : startNode,\r\n                    end: endNode ? serialize ? endNode.id : endNode : null,\r\n                    id: serialize\r\n                }\r\n            },\r\n\r\n            /**\r\n             *  调整当前range的边界到书签位置，并删除该书签对象所标记的位置内的节点\r\n             *  @method  moveToBookmark\r\n             *  @param { BookMark } bookmark createBookmark所创建的标签对象\r\n             *  @return { UE.dom.Range } 当前range对象\r\n             *  @see UE.dom.Range:createBookmark(Boolean)\r\n             */\r\n            moveToBookmark: function (bookmark) {\r\n                var start = bookmark.id ? this.document.getElementById(bookmark.start) : bookmark.start,\r\n                    end = bookmark.end && bookmark.id ? this.document.getElementById(bookmark.end) : bookmark.end;\r\n                this.setStartBefore(start);\r\n                domUtils.remove(start);\r\n                if (end) {\r\n                    this.setEndBefore(end);\r\n                    domUtils.remove(end);\r\n                } else {\r\n                    this.collapse(true);\r\n                }\r\n                return this;\r\n            },\r\n\r\n            /**\r\n             * 调整range的边界，使其\"放大\"到最近的父节点\r\n             * @method  enlarge\r\n             * @remind 会引起选区的变化\r\n             * @return { UE.dom.Range } 当前range对象\r\n             */\r\n\r\n            /**\r\n             * 调整range的边界，使其\"放大\"到最近的父节点，根据参数 toBlock 的取值， 可以\r\n             * 要求扩大之后的父节点是block节点\r\n             * @method  enlarge\r\n             * @param { Boolean } toBlock 是否要求扩大之后的父节点必须是block节点\r\n             * @return { UE.dom.Range } 当前range对象\r\n             */\r\n            enlarge: function (toBlock, stopFn) {\r\n                var isBody = domUtils.isBody,\r\n                    pre, node, tmp = this.document.createTextNode('');\r\n                if (toBlock) {\r\n                    node = this.startContainer;\r\n                    if (node.nodeType == 1) {\r\n                        if (node.childNodes[this.startOffset]) {\r\n                            pre = node = node.childNodes[this.startOffset]\r\n                        } else {\r\n                            node.appendChild(tmp);\r\n                            pre = node = tmp;\r\n                        }\r\n                    } else {\r\n                        pre = node;\r\n                    }\r\n                    while (1) {\r\n                        if (domUtils.isBlockElm(node)) {\r\n                            node = pre;\r\n                            while ((pre = node.previousSibling) && !domUtils.isBlockElm(pre)) {\r\n                                node = pre;\r\n                            }\r\n                            this.setStartBefore(node);\r\n                            break;\r\n                        }\r\n                        pre = node;\r\n                        node = node.parentNode;\r\n                    }\r\n                    node = this.endContainer;\r\n                    if (node.nodeType == 1) {\r\n                        if (pre = node.childNodes[this.endOffset]) {\r\n                            node.insertBefore(tmp, pre);\r\n                        } else {\r\n                            node.appendChild(tmp);\r\n                        }\r\n                        pre = node = tmp;\r\n                    } else {\r\n                        pre = node;\r\n                    }\r\n                    while (1) {\r\n                        if (domUtils.isBlockElm(node)) {\r\n                            node = pre;\r\n                            while ((pre = node.nextSibling) && !domUtils.isBlockElm(pre)) {\r\n                                node = pre;\r\n                            }\r\n                            this.setEndAfter(node);\r\n                            break;\r\n                        }\r\n                        pre = node;\r\n                        node = node.parentNode;\r\n                    }\r\n                    if (tmp.parentNode === this.endContainer) {\r\n                        this.endOffset--;\r\n                    }\r\n                    domUtils.remove(tmp);\r\n                }\r\n\r\n                // 扩展边界到最大\r\n                if (!this.collapsed) {\r\n                    while (this.startOffset == 0) {\r\n                        if (stopFn && stopFn(this.startContainer)) {\r\n                            break;\r\n                        }\r\n                        if (isBody(this.startContainer)) {\r\n                            break;\r\n                        }\r\n                        this.setStartBefore(this.startContainer);\r\n                    }\r\n                    while (this.endOffset == (this.endContainer.nodeType == 1 ? this.endContainer.childNodes.length : this.endContainer.nodeValue.length)) {\r\n                        if (stopFn && stopFn(this.endContainer)) {\r\n                            break;\r\n                        }\r\n                        if (isBody(this.endContainer)) {\r\n                            break;\r\n                        }\r\n                        this.setEndAfter(this.endContainer);\r\n                    }\r\n                }\r\n                return this;\r\n            },\r\n            enlargeToBlockElm: function (ignoreEnd) {\r\n                while (!domUtils.isBlockElm(this.startContainer)) {\r\n                    this.setStartBefore(this.startContainer);\r\n                }\r\n                if (!ignoreEnd) {\r\n                    while (!domUtils.isBlockElm(this.endContainer)) {\r\n                        this.setEndAfter(this.endContainer);\r\n                    }\r\n                }\r\n                return this;\r\n            },\r\n            /**\r\n             * 调整Range的边界，使其\"缩小\"到最合适的位置\r\n             * @method adjustmentBoundary\r\n             * @return { UE.dom.Range } 当前range对象\r\n             * @see UE.dom.Range:shrinkBoundary()\r\n             */\r\n            adjustmentBoundary: function () {\r\n                if (!this.collapsed) {\r\n                    while (!domUtils.isBody(this.startContainer) &&\r\n                        this.startOffset == this.startContainer[this.startContainer.nodeType == 3 ? 'nodeValue' : 'childNodes'].length &&\r\n                        this.startContainer[this.startContainer.nodeType == 3 ? 'nodeValue' : 'childNodes'].length\r\n                    ) {\r\n\r\n                        this.setStartAfter(this.startContainer);\r\n                    }\r\n                    while (!domUtils.isBody(this.endContainer) && !this.endOffset &&\r\n                        this.endContainer[this.endContainer.nodeType == 3 ? 'nodeValue' : 'childNodes'].length\r\n                    ) {\r\n                        this.setEndBefore(this.endContainer);\r\n                    }\r\n                }\r\n                return this;\r\n            },\r\n\r\n            /**\r\n             * 给range选区中的内容添加给定的inline标签\r\n             * @method applyInlineStyle\r\n             * @param { String } tagName 需要添加的标签名\r\n             * @example\r\n             * ```html\r\n             * <p>xxxx[xxxx]x</p>  ==>  range.applyInlineStyle(\"strong\")  ==>  <p>xxxx[<strong>xxxx</strong>]x</p>\r\n             * ```\r\n             */\r\n\r\n            /**\r\n             * 给range选区中的内容添加给定的inline标签， 并且为标签附加上一些初始化属性。\r\n             * @method applyInlineStyle\r\n             * @param { String } tagName 需要添加的标签名\r\n             * @param { Object } attrs 跟随新添加的标签的属性\r\n             * @return { UE.dom.Range } 当前选区\r\n             * @example\r\n             * ```html\r\n             * <p>xxxx[xxxx]x</p>\r\n             *\r\n             * ==>\r\n             *\r\n             * <!-- 执行操作 -->\r\n             * range.applyInlineStyle(\"strong\",{\"style\":\"font-size:12px\"})\r\n             *\r\n             * ==>\r\n             *\r\n             * <p>xxxx[<strong style=\"font-size:12px\">xxxx</strong>]x</p>\r\n             * ```\r\n             */\r\n            applyInlineStyle: function (tagName, attrs, list) {\r\n                if (this.collapsed) return this;\r\n                this.trimBoundary().enlarge(false,\r\n                    function (node) {\r\n                        return node.nodeType == 1 && domUtils.isBlockElm(node)\r\n                    }).adjustmentBoundary();\r\n                var bookmark = this.createBookmark(),\r\n                    end = bookmark.end,\r\n                    filterFn = function (node) {\r\n                        return node.nodeType == 1 ? node.tagName.toLowerCase() != 'br' : !domUtils.isWhitespace(node);\r\n                    },\r\n                    current = domUtils.getNextDomNode(bookmark.start, false, filterFn),\r\n                    node,\r\n                    pre,\r\n                    range = this.cloneRange();\r\n                while (current && (domUtils.getPosition(current, end) & domUtils.POSITION_PRECEDING)) {\r\n                    if (current.nodeType == 3 || dtd[tagName][current.tagName]) {\r\n                        range.setStartBefore(current);\r\n                        node = current;\r\n                        while (node && (node.nodeType == 3 || dtd[tagName][node.tagName]) && node !== end) {\r\n                            pre = node;\r\n                            node = domUtils.getNextDomNode(node, node.nodeType == 1, null, function (parent) {\r\n                                return dtd[tagName][parent.tagName];\r\n                            });\r\n                        }\r\n                        var frag = range.setEndAfter(pre).extractContents(), elm;\r\n                        if (list && list.length > 0) {\r\n                            var level, top;\r\n                            top = level = list[0].cloneNode(false);\r\n                            for (var i = 1, ci; ci = list[i++];) {\r\n                                level.appendChild(ci.cloneNode(false));\r\n                                level = level.firstChild;\r\n                            }\r\n                            elm = level;\r\n                        } else {\r\n                            elm = range.document.createElement(tagName);\r\n                        }\r\n                        if (attrs) {\r\n                            domUtils.setAttributes(elm, attrs);\r\n                        }\r\n                        elm.appendChild(frag);\r\n                        range.insertNode(list ? top : elm);\r\n                        //处理下滑线在a上的情况\r\n                        var aNode;\r\n                        if (tagName == 'span' && attrs.style && /text\\-decoration/.test(attrs.style) && (aNode = domUtils.findParentByTagName(elm, 'a', true))) {\r\n                            domUtils.setAttributes(aNode, attrs);\r\n                            domUtils.remove(elm, true);\r\n                            elm = aNode;\r\n                        } else {\r\n                            domUtils.mergeSibling(elm);\r\n                            domUtils.clearEmptySibling(elm);\r\n                        }\r\n                        //去除子节点相同的\r\n                        domUtils.mergeChild(elm, attrs);\r\n                        current = domUtils.getNextDomNode(elm, false, filterFn);\r\n                        domUtils.mergeToParent(elm);\r\n                        if (node === end) {\r\n                            break;\r\n                        }\r\n                    } else {\r\n                        current = domUtils.getNextDomNode(current, true, filterFn);\r\n                    }\r\n                }\r\n                return this.moveToBookmark(bookmark);\r\n            },\r\n\r\n            /**\r\n             * 移除当前选区内指定的inline标签，但保留其中的内容\r\n             * @method removeInlineStyle\r\n             * @param { String } tagName 需要移除的标签名\r\n             * @return { UE.dom.Range } 当前的range对象\r\n             * @example\r\n             * ```html\r\n             * xx[x<span>xxx<em>yyy</em>zz]z</span>  => range.removeInlineStyle([\"em\"])  => xx[x<span>xxxyyyzz]z</span>\r\n             * ```\r\n             */\r\n\r\n            /**\r\n             * 移除当前选区内指定的一组inline标签，但保留其中的内容\r\n             * @method removeInlineStyle\r\n             * @param { Array } tagNameArr 需要移除的标签名的数组\r\n             * @return { UE.dom.Range } 当前的range对象\r\n             * @see UE.dom.Range:removeInlineStyle(String)\r\n             */\r\n            removeInlineStyle: function (tagNames) {\r\n                if (this.collapsed) return this;\r\n                tagNames = utils.isArray(tagNames) ? tagNames : [tagNames];\r\n                this.shrinkBoundary().adjustmentBoundary();\r\n                var start = this.startContainer, end = this.endContainer;\r\n                while (1) {\r\n                    if (start.nodeType == 1) {\r\n                        if (utils.indexOf(tagNames, start.tagName.toLowerCase()) > -1) {\r\n                            break;\r\n                        }\r\n                        if (start.tagName.toLowerCase() == 'body') {\r\n                            start = null;\r\n                            break;\r\n                        }\r\n                    }\r\n                    start = start.parentNode;\r\n                }\r\n                while (1) {\r\n                    if (end.nodeType == 1) {\r\n                        if (utils.indexOf(tagNames, end.tagName.toLowerCase()) > -1) {\r\n                            break;\r\n                        }\r\n                        if (end.tagName.toLowerCase() == 'body') {\r\n                            end = null;\r\n                            break;\r\n                        }\r\n                    }\r\n                    end = end.parentNode;\r\n                }\r\n                var bookmark = this.createBookmark(),\r\n                    frag,\r\n                    tmpRange;\r\n                if (start) {\r\n                    tmpRange = this.cloneRange().setEndBefore(bookmark.start).setStartBefore(start);\r\n                    frag = tmpRange.extractContents();\r\n                    tmpRange.insertNode(frag);\r\n                    domUtils.clearEmptySibling(start, true);\r\n                    start.parentNode.insertBefore(bookmark.start, start);\r\n                }\r\n                if (end) {\r\n                    tmpRange = this.cloneRange().setStartAfter(bookmark.end).setEndAfter(end);\r\n                    frag = tmpRange.extractContents();\r\n                    tmpRange.insertNode(frag);\r\n                    domUtils.clearEmptySibling(end, false, true);\r\n                    end.parentNode.insertBefore(bookmark.end, end.nextSibling);\r\n                }\r\n                var current = domUtils.getNextDomNode(bookmark.start, false, function (node) {\r\n                    return node.nodeType == 1;\r\n                }), next;\r\n                while (current && current !== bookmark.end) {\r\n                    next = domUtils.getNextDomNode(current, true, function (node) {\r\n                        return node.nodeType == 1;\r\n                    });\r\n                    if (utils.indexOf(tagNames, current.tagName.toLowerCase()) > -1) {\r\n                        domUtils.remove(current, true);\r\n                    }\r\n                    current = next;\r\n                }\r\n                return this.moveToBookmark(bookmark);\r\n            },\r\n\r\n            /**\r\n             * 获取当前选中的自闭合的节点\r\n             * @method  getClosedNode\r\n             * @return { Node | NULL } 如果当前选中的是自闭合节点， 则返回该节点， 否则返回NULL\r\n             */\r\n            getClosedNode: function () {\r\n                var node;\r\n                if (!this.collapsed) {\r\n                    var range = this.cloneRange().adjustmentBoundary().shrinkBoundary();\r\n                    if (selectOneNode(range)) {\r\n                        var child = range.startContainer.childNodes[range.startOffset];\r\n                        if (child && child.nodeType == 1 && (dtd.$empty[child.tagName] || dtd.$nonChild[child.tagName])) {\r\n                            node = child;\r\n                        }\r\n                    }\r\n                }\r\n                return node;\r\n            },\r\n\r\n            /**\r\n             * 在页面上高亮range所表示的选区\r\n             * @method select\r\n             * @return { UE.dom.Range } 返回当前Range对象\r\n             */\r\n            //这里不区分ie9以上，trace:3824\r\n            select: browser.ie ? function (noFillData, textRange) {\r\n                var nativeRange;\r\n                if (!this.collapsed)\r\n                    this.shrinkBoundary();\r\n                var node = this.getClosedNode();\r\n                if (node && !textRange) {\r\n                    try {\r\n                        nativeRange = this.document.body.createControlRange();\r\n                        nativeRange.addElement(node);\r\n                        nativeRange.select();\r\n                    } catch (e) { }\r\n                    return this;\r\n                }\r\n                var bookmark = this.createBookmark(),\r\n                    start = bookmark.start,\r\n                    end;\r\n                nativeRange = this.document.body.createTextRange();\r\n                nativeRange.moveToElementText(start);\r\n                nativeRange.moveStart('character', 1);\r\n                if (!this.collapsed) {\r\n                    var nativeRangeEnd = this.document.body.createTextRange();\r\n                    end = bookmark.end;\r\n                    nativeRangeEnd.moveToElementText(end);\r\n                    nativeRange.setEndPoint('EndToEnd', nativeRangeEnd);\r\n                } else {\r\n                    if (!noFillData && this.startContainer.nodeType != 3) {\r\n                        //使用<span>|x<span>固定住光标\r\n                        var tmpText = this.document.createTextNode(fillChar),\r\n                            tmp = this.document.createElement('span');\r\n                        tmp.appendChild(this.document.createTextNode(fillChar));\r\n                        start.parentNode.insertBefore(tmp, start);\r\n                        start.parentNode.insertBefore(tmpText, start);\r\n                        //当点b,i,u时，不能清除i上边的b\r\n                        removeFillData(this.document, tmpText);\r\n                        fillData = tmpText;\r\n                        mergeSibling(tmp, 'previousSibling');\r\n                        mergeSibling(start, 'nextSibling');\r\n                        nativeRange.moveStart('character', -1);\r\n                        nativeRange.collapse(true);\r\n                    }\r\n                }\r\n                this.moveToBookmark(bookmark);\r\n                tmp && domUtils.remove(tmp);\r\n                //IE在隐藏状态下不支持range操作，catch一下\r\n                try {\r\n                    nativeRange.select();\r\n                } catch (e) {\r\n                }\r\n                return this;\r\n            } : function (notInsertFillData) {\r\n                function checkOffset(rng) {\r\n\r\n                    function check(node, offset, dir) {\r\n                        if (node.nodeType == 3 && node.nodeValue.length < offset) {\r\n                            rng[dir + 'Offset'] = node.nodeValue.length\r\n                        }\r\n                    }\r\n                    check(rng.startContainer, rng.startOffset, 'start');\r\n                    check(rng.endContainer, rng.endOffset, 'end');\r\n                }\r\n                var win = domUtils.getWindow(this.document),\r\n                    sel = win.getSelection(),\r\n                    txtNode;\r\n                //FF下关闭自动长高时滚动条在关闭dialog时会跳\r\n                //ff下如果不body.focus将不能定位闭合光标到编辑器内\r\n                browser.gecko ? this.document.body.focus() : win.focus();\r\n                if (sel) {\r\n                    sel.removeAllRanges();\r\n                    // trace:870 chrome/safari后边是br对于闭合得range不能定位 所以去掉了判断\r\n                    // this.startContainer.nodeType != 3 &&! ((child = this.startContainer.childNodes[this.startOffset]) && child.nodeType == 1 && child.tagName == 'BR'\r\n                    if (this.collapsed && !notInsertFillData) {\r\n                        //                    //opear如果没有节点接着，原生的不能够定位,不能在body的第一级插入空白节点\r\n                        //                    if (notInsertFillData && browser.opera && !domUtils.isBody(this.startContainer) && this.startContainer.nodeType == 1) {\r\n                        //                        var tmp = this.document.createTextNode('');\r\n                        //                        this.insertNode(tmp).setStart(tmp, 0).collapse(true);\r\n                        //                    }\r\n                        //\r\n                        //处理光标落在文本节点的情况\r\n                        //处理以下的情况\r\n                        //<b>|xxxx</b>\r\n                        //<b>xxxx</b>|xxxx\r\n                        //xxxx<b>|</b>\r\n                        var start = this.startContainer, child = start;\r\n                        if (start.nodeType == 1) {\r\n                            child = start.childNodes[this.startOffset];\r\n\r\n                        }\r\n                        if (!(start.nodeType == 3 && this.startOffset) &&\r\n                            (child ?\r\n                                (!child.previousSibling || child.previousSibling.nodeType != 3)\r\n                                :\r\n                                (!start.lastChild || start.lastChild.nodeType != 3)\r\n                            )\r\n                        ) {\r\n                            txtNode = this.document.createTextNode(fillChar);\r\n                            //跟着前边走\r\n                            this.insertNode(txtNode);\r\n                            removeFillData(this.document, txtNode);\r\n                            mergeSibling(txtNode, 'previousSibling');\r\n                            mergeSibling(txtNode, 'nextSibling');\r\n                            fillData = txtNode;\r\n                            this.setStart(txtNode, browser.webkit ? 1 : 0).collapse(true);\r\n                        }\r\n                    }\r\n                    var nativeRange = this.document.createRange();\r\n                    if (this.collapsed && browser.opera && this.startContainer.nodeType == 1) {\r\n                        var child = this.startContainer.childNodes[this.startOffset];\r\n                        if (!child) {\r\n                            //往前靠拢\r\n                            child = this.startContainer.lastChild;\r\n                            if (child && domUtils.isBr(child)) {\r\n                                this.setStartBefore(child).collapse(true);\r\n                            }\r\n                        } else {\r\n                            //向后靠拢\r\n                            while (child && domUtils.isBlockElm(child)) {\r\n                                if (child.nodeType == 1 && child.childNodes[0]) {\r\n                                    child = child.childNodes[0]\r\n                                } else {\r\n                                    break;\r\n                                }\r\n                            }\r\n                            child && this.setStartBefore(child).collapse(true)\r\n                        }\r\n\r\n                    }\r\n                    //是createAddress最后一位算的不准，现在这里进行微调\r\n                    checkOffset(this);\r\n                    nativeRange.setStart(this.startContainer, this.startOffset);\r\n                    nativeRange.setEnd(this.endContainer, this.endOffset);\r\n                    sel.addRange(nativeRange);\r\n                }\r\n                return this;\r\n            },\r\n\r\n            /**\r\n             * 滚动到当前range开始的位置\r\n             * @method scrollToView\r\n             * @param { Window } win 当前range对象所属的window对象\r\n             * @return { UE.dom.Range } 当前Range对象\r\n             */\r\n\r\n            /**\r\n             * 滚动到距离当前range开始位置 offset 的位置处\r\n             * @method scrollToView\r\n             * @param { Window } win 当前range对象所属的window对象\r\n             * @param { Number } offset 距离range开始位置处的偏移量， 如果为正数， 则向下偏移， 反之， 则向上偏移\r\n             * @return { UE.dom.Range } 当前Range对象\r\n             */\r\n            scrollToView: function (win, offset) {\r\n                win = win ? window : domUtils.getWindow(this.document);\r\n                var me = this,\r\n                    span = me.document.createElement('span');\r\n                //trace:717\r\n                span.innerHTML = '&nbsp;';\r\n                me.cloneRange().insertNode(span);\r\n                domUtils.scrollToView(span, win, offset);\r\n                domUtils.remove(span);\r\n                return me;\r\n            },\r\n\r\n            /**\r\n             * 判断当前选区内容是否占位符\r\n             * @private\r\n             * @method inFillChar\r\n             * @return { Boolean } 如果是占位符返回true，否则返回false\r\n             */\r\n            inFillChar: function () {\r\n                var start = this.startContainer;\r\n                if (this.collapsed && start.nodeType == 3\r\n                    && start.nodeValue.replace(new RegExp('^' + domUtils.fillChar), '').length + 1 == start.nodeValue.length\r\n                ) {\r\n                    return true;\r\n                }\r\n                return false;\r\n            },\r\n\r\n            /**\r\n             * 保存\r\n             * @method createAddress\r\n             * @private\r\n             * @return { Boolean } 返回开始和结束的位置\r\n             * @example\r\n             * ```html\r\n             * <body>\r\n             *     <p>\r\n             *         aaaa\r\n             *         <em>\r\n             *             <!-- 选区开始 -->\r\n             *             bbbb\r\n             *             <!-- 选区结束 -->\r\n             *         </em>\r\n             *     </p>\r\n             *\r\n             *     <script>\r\n             *         //output: {startAddress:[0,1,0,0],endAddress:[0,1,0,4]}\r\n             *         console.log( range.createAddress() );\r\n             *     </script>\r\n             * </body>\r\n             * ```\r\n             */\r\n            createAddress: function (ignoreEnd, ignoreTxt) {\r\n                var addr = {}, me = this;\r\n\r\n                function getAddress(isStart) {\r\n                    var node = isStart ? me.startContainer : me.endContainer;\r\n                    var parents = domUtils.findParents(node, true, function (node) { return !domUtils.isBody(node) }),\r\n                        addrs = [];\r\n                    for (var i = 0, ci; ci = parents[i++];) {\r\n                        addrs.push(domUtils.getNodeIndex(ci, ignoreTxt));\r\n                    }\r\n                    var firstIndex = 0;\r\n\r\n                    if (ignoreTxt) {\r\n                        if (node.nodeType == 3) {\r\n                            var tmpNode = node.previousSibling;\r\n                            while (tmpNode && tmpNode.nodeType == 3) {\r\n                                firstIndex += tmpNode.nodeValue.replace(fillCharReg, '').length;\r\n                                tmpNode = tmpNode.previousSibling;\r\n                            }\r\n                            firstIndex += (isStart ? me.startOffset : me.endOffset)// - (fillCharReg.test(node.nodeValue) ? 1 : 0 )\r\n                        } else {\r\n                            node = node.childNodes[isStart ? me.startOffset : me.endOffset];\r\n                            if (node) {\r\n                                firstIndex = domUtils.getNodeIndex(node, ignoreTxt);\r\n                            } else {\r\n                                node = isStart ? me.startContainer : me.endContainer;\r\n                                var first = node.firstChild;\r\n                                while (first) {\r\n                                    if (domUtils.isFillChar(first)) {\r\n                                        first = first.nextSibling;\r\n                                        continue;\r\n                                    }\r\n                                    firstIndex++;\r\n                                    if (first.nodeType == 3) {\r\n                                        while (first && first.nodeType == 3) {\r\n                                            first = first.nextSibling;\r\n                                        }\r\n                                    } else {\r\n                                        first = first.nextSibling;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                    } else {\r\n                        firstIndex = isStart ? domUtils.isFillChar(node) ? 0 : me.startOffset : me.endOffset\r\n                    }\r\n                    if (firstIndex < 0) {\r\n                        firstIndex = 0;\r\n                    }\r\n                    addrs.push(firstIndex);\r\n                    return addrs;\r\n                }\r\n                addr.startAddress = getAddress(true);\r\n                if (!ignoreEnd) {\r\n                    addr.endAddress = me.collapsed ? [].concat(addr.startAddress) : getAddress();\r\n                }\r\n                return addr;\r\n            },\r\n\r\n            /**\r\n             * 保存\r\n             * @method createAddress\r\n             * @private\r\n             * @return { Boolean } 返回开始和结束的位置\r\n             * @example\r\n             * ```html\r\n             * <body>\r\n             *     <p>\r\n             *         aaaa\r\n             *         <em>\r\n             *             <!-- 选区开始 -->\r\n             *             bbbb\r\n             *             <!-- 选区结束 -->\r\n             *         </em>\r\n             *     </p>\r\n             *\r\n             *     <script>\r\n             *         var range = editor.selection.getRange();\r\n             *         range.moveToAddress({startAddress:[0,1,0,0],endAddress:[0,1,0,4]});\r\n             *         range.select();\r\n             *         //output: 'bbbb'\r\n             *         console.log(editor.selection.getText());\r\n             *     </script>\r\n             * </body>\r\n             * ```\r\n             */\r\n            moveToAddress: function (addr, ignoreEnd) {\r\n                var me = this;\r\n                function getNode(address, isStart) {\r\n                    var tmpNode = me.document.body,\r\n                        parentNode, offset;\r\n                    for (var i = 0, ci, l = address.length; i < l; i++) {\r\n                        ci = address[i];\r\n                        parentNode = tmpNode;\r\n                        tmpNode = tmpNode.childNodes[ci];\r\n                        if (!tmpNode) {\r\n                            offset = ci;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (isStart) {\r\n                        if (tmpNode) {\r\n                            me.setStartBefore(tmpNode)\r\n                        } else {\r\n                            me.setStart(parentNode, offset)\r\n                        }\r\n                    } else {\r\n                        if (tmpNode) {\r\n                            me.setEndBefore(tmpNode)\r\n                        } else {\r\n                            me.setEnd(parentNode, offset)\r\n                        }\r\n                    }\r\n                }\r\n                getNode(addr.startAddress, true);\r\n                !ignoreEnd && addr.endAddress && getNode(addr.endAddress);\r\n                return me;\r\n            },\r\n\r\n            /**\r\n             * 判断给定的Range对象是否和当前Range对象表示的是同一个选区\r\n             * @method equals\r\n             * @param { UE.dom.Range } 需要判断的Range对象\r\n             * @return { Boolean } 如果给定的Range对象与当前Range对象表示的是同一个选区， 则返回true， 否则返回false\r\n             */\r\n            equals: function (rng) {\r\n                for (var p in this) {\r\n                    if (this.hasOwnProperty(p)) {\r\n                        if (this[p] !== rng[p])\r\n                            return false\r\n                    }\r\n                }\r\n                return true;\r\n\r\n            },\r\n\r\n            /**\r\n             * 遍历range内的节点。每当遍历一个节点时， 都会执行参数项 doFn 指定的函数， 该函数的接受当前遍历的节点\r\n             * 作为其参数。\r\n             * @method traversal\r\n             * @param { Function }  doFn 对每个遍历的节点要执行的方法， 该方法接受当前遍历的节点作为其参数\r\n             * @return { UE.dom.Range } 当前range对象\r\n             * @example\r\n             * ```html\r\n             *\r\n             * <body>\r\n             *\r\n             *     <!-- 选区开始 -->\r\n             *     <span></span>\r\n             *     <a></a>\r\n             *     <!-- 选区结束 -->\r\n             * </body>\r\n             *\r\n             * <script>\r\n             *\r\n             *     //output: <span></span><a></a>\r\n             *     console.log( range.cloneContents() );\r\n             *\r\n             *     range.traversal( function ( node ) {\r\n             *\r\n             *         if ( node.nodeType === 1 ) {\r\n             *             node.className = \"test\";\r\n             *         }\r\n             *\r\n             *     } );\r\n             *\r\n             *     //output: <span class=\"test\"></span><a class=\"test\"></a>\r\n             *     console.log( range.cloneContents() );\r\n             *\r\n             * </script>\r\n             * ```\r\n             */\r\n\r\n            /**\r\n             * 遍历range内的节点。\r\n             * 每当遍历一个节点时， 都会执行参数项 doFn 指定的函数， 该函数的接受当前遍历的节点\r\n             * 作为其参数。\r\n             * 可以通过参数项 filterFn 来指定一个过滤器， 只有符合该过滤器过滤规则的节点才会触\r\n             * 发doFn函数的执行\r\n             * @method traversal\r\n             * @param { Function } doFn 对每个遍历的节点要执行的方法， 该方法接受当前遍历的节点作为其参数\r\n             * @param { Function } filterFn 过滤器， 该函数接受当前遍历的节点作为参数， 如果该节点满足过滤\r\n             *                      规则， 请返回true， 该节点会触发doFn， 否则， 请返回false， 则该节点不\r\n             *                      会触发doFn。\r\n             * @return { UE.dom.Range } 当前range对象\r\n             * @see UE.dom.Range:traversal(Function)\r\n             * @example\r\n             * ```html\r\n             *\r\n             * <body>\r\n             *\r\n             *     <!-- 选区开始 -->\r\n             *     <span></span>\r\n             *     <a></a>\r\n             *     <!-- 选区结束 -->\r\n             * </body>\r\n             *\r\n             * <script>\r\n             *\r\n             *     //output: <span></span><a></a>\r\n             *     console.log( range.cloneContents() );\r\n             *\r\n             *     range.traversal( function ( node ) {\r\n             *\r\n             *         node.className = \"test\";\r\n             *\r\n             *     }, function ( node ) {\r\n             *          return node.nodeType === 1;\r\n             *     } );\r\n             *\r\n             *     //output: <span class=\"test\"></span><a class=\"test\"></a>\r\n             *     console.log( range.cloneContents() );\r\n             *\r\n             * </script>\r\n             * ```\r\n             */\r\n            traversal: function (doFn, filterFn) {\r\n                if (this.collapsed)\r\n                    return this;\r\n                var bookmark = this.createBookmark(),\r\n                    end = bookmark.end,\r\n                    current = domUtils.getNextDomNode(bookmark.start, false, filterFn);\r\n                while (current && current !== end && (domUtils.getPosition(current, end) & domUtils.POSITION_PRECEDING)) {\r\n                    var tmpNode = domUtils.getNextDomNode(current, false, filterFn);\r\n                    doFn(current);\r\n                    current = tmpNode;\r\n                }\r\n                return this.moveToBookmark(bookmark);\r\n            }\r\n        };\r\n    })();\r\n\r\n    // core/Selection.js\r\n    /**\r\n     * 选集\r\n     * @file\r\n     * @module UE.dom\r\n     * @class Selection\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * 选区集合\r\n     * @unfile\r\n     * @module UE.dom\r\n     * @class Selection\r\n     */\r\n    (function () {\r\n\r\n        function getBoundaryInformation(range, start) {\r\n            var getIndex = domUtils.getNodeIndex;\r\n            range = range.duplicate();\r\n            range.collapse(start);\r\n            var parent = range.parentElement();\r\n            //如果节点里没有子节点，直接退出\r\n            if (!parent.hasChildNodes()) {\r\n                return { container: parent, offset: 0 };\r\n            }\r\n            var siblings = parent.children,\r\n                child,\r\n                testRange = range.duplicate(),\r\n                startIndex = 0, endIndex = siblings.length - 1, index = -1,\r\n                distance;\r\n            while (startIndex <= endIndex) {\r\n                index = Math.floor((startIndex + endIndex) / 2);\r\n                child = siblings[index];\r\n                testRange.moveToElementText(child);\r\n                var position = testRange.compareEndPoints('StartToStart', range);\r\n                if (position > 0) {\r\n                    endIndex = index - 1;\r\n                } else if (position < 0) {\r\n                    startIndex = index + 1;\r\n                } else {\r\n                    //trace:1043\r\n                    return { container: parent, offset: getIndex(child) };\r\n                }\r\n            }\r\n            if (index == -1) {\r\n                testRange.moveToElementText(parent);\r\n                testRange.setEndPoint('StartToStart', range);\r\n                distance = testRange.text.replace(/(\\r\\n|\\r)/g, '\\n').length;\r\n                siblings = parent.childNodes;\r\n                if (!distance) {\r\n                    child = siblings[siblings.length - 1];\r\n                    return { container: child, offset: child.nodeValue.length };\r\n                }\r\n\r\n                var i = siblings.length;\r\n                while (distance > 0) {\r\n                    distance -= siblings[--i].nodeValue.length;\r\n                }\r\n                return { container: siblings[i], offset: -distance };\r\n            }\r\n            testRange.collapse(position > 0);\r\n            testRange.setEndPoint(position > 0 ? 'StartToStart' : 'EndToStart', range);\r\n            distance = testRange.text.replace(/(\\r\\n|\\r)/g, '\\n').length;\r\n            if (!distance) {\r\n                return dtd.$empty[child.tagName] || dtd.$nonChild[child.tagName] ?\r\n                    { container: parent, offset: getIndex(child) + (position > 0 ? 0 : 1) } :\r\n                    { container: child, offset: position > 0 ? 0 : child.childNodes.length }\r\n            }\r\n            while (distance > 0) {\r\n                try {\r\n                    var pre = child;\r\n                    child = child[position > 0 ? 'previousSibling' : 'nextSibling'];\r\n                    distance -= child.nodeValue.length;\r\n                } catch (e) {\r\n                    return { container: parent, offset: getIndex(pre) };\r\n                }\r\n            }\r\n            return { container: child, offset: position > 0 ? -distance : child.nodeValue.length + distance }\r\n        }\r\n\r\n        /**\r\n         * 将ieRange转换为Range对象\r\n         * @param {Range}   ieRange    ieRange对象\r\n         * @param {Range}   range      Range对象\r\n         * @return  {Range}  range       返回转换后的Range对象\r\n         */\r\n        function transformIERangeToRange(ieRange, range) {\r\n            if (ieRange.item) {\r\n                range.selectNode(ieRange.item(0));\r\n            } else {\r\n                var bi = getBoundaryInformation(ieRange, true);\r\n                range.setStart(bi.container, bi.offset);\r\n                if (ieRange.compareEndPoints('StartToEnd', ieRange) != 0) {\r\n                    bi = getBoundaryInformation(ieRange, false);\r\n                    range.setEnd(bi.container, bi.offset);\r\n                }\r\n            }\r\n            return range;\r\n        }\r\n\r\n        /**\r\n         * 获得ieRange\r\n         * @param {Selection} sel    Selection对象\r\n         * @return {ieRange}    得到ieRange\r\n         */\r\n        function _getIERange(sel) {\r\n            var ieRange;\r\n            //ie下有可能报错\r\n            try {\r\n                ieRange = sel.getNative().createRange();\r\n            } catch (e) {\r\n                return null;\r\n            }\r\n            var el = ieRange.item ? ieRange.item(0) : ieRange.parentElement();\r\n            if ((el.ownerDocument || el) === sel.document) {\r\n                return ieRange;\r\n            }\r\n            return null;\r\n        }\r\n\r\n        var Selection = dom.Selection = function (doc) {\r\n            var me = this, iframe;\r\n            me.document = doc;\r\n            if (browser.ie9below) {\r\n                iframe = domUtils.getWindow(doc).frameElement;\r\n                domUtils.on(iframe, 'beforedeactivate', function () {\r\n                    me._bakIERange = me.getIERange();\r\n                });\r\n                domUtils.on(iframe, 'activate', function () {\r\n                    try {\r\n                        if (!_getIERange(me) && me._bakIERange) {\r\n                            me._bakIERange.select();\r\n                        }\r\n                    } catch (ex) {\r\n                    }\r\n                    me._bakIERange = null;\r\n                });\r\n            }\r\n            iframe = doc = null;\r\n        };\r\n\r\n        Selection.prototype = {\r\n\r\n            rangeInBody: function (rng, txtRange) {\r\n                var node = browser.ie9below || txtRange ? rng.item ? rng.item() : rng.parentElement() : rng.startContainer;\r\n\r\n                return node === this.document.body || domUtils.inDoc(node, this.document);\r\n            },\r\n\r\n            /**\r\n             * 获取原生seleciton对象\r\n             * @method getNative\r\n             * @return { Object } 获得selection对象\r\n             * @example\r\n             * ```javascript\r\n             * editor.selection.getNative();\r\n             * ```\r\n             */\r\n            getNative: function () {\r\n                var doc = this.document;\r\n                try {\r\n                    return !doc ? null : browser.ie9below ? doc.selection : domUtils.getWindow(doc).getSelection();\r\n                } catch (e) {\r\n                    return null;\r\n                }\r\n            },\r\n\r\n            /**\r\n             * 获得ieRange\r\n             * @method getIERange\r\n             * @return { Object } 返回ie原生的Range\r\n             * @example\r\n             * ```javascript\r\n             * editor.selection.getIERange();\r\n             * ```\r\n             */\r\n            getIERange: function () {\r\n                var ieRange = _getIERange(this);\r\n                if (!ieRange) {\r\n                    if (this._bakIERange) {\r\n                        return this._bakIERange;\r\n                    }\r\n                }\r\n                return ieRange;\r\n            },\r\n\r\n            /**\r\n             * 缓存当前选区的range和选区的开始节点\r\n             * @method cache\r\n             */\r\n            cache: function () {\r\n                this.clear();\r\n                this._cachedRange = this.getRange();\r\n                this._cachedStartElement = this.getStart();\r\n                this._cachedStartElementPath = this.getStartElementPath();\r\n            },\r\n\r\n            /**\r\n             * 获取选区开始位置的父节点到body\r\n             * @method getStartElementPath\r\n             * @return { Array } 返回父节点集合\r\n             * @example\r\n             * ```javascript\r\n             * editor.selection.getStartElementPath();\r\n             * ```\r\n             */\r\n            getStartElementPath: function () {\r\n                if (this._cachedStartElementPath) {\r\n                    return this._cachedStartElementPath;\r\n                }\r\n                var start = this.getStart();\r\n                if (start) {\r\n                    return domUtils.findParents(start, true, null, true)\r\n                }\r\n                return [];\r\n            },\r\n\r\n            /**\r\n             * 清空缓存\r\n             * @method clear\r\n             */\r\n            clear: function () {\r\n                this._cachedStartElementPath = this._cachedRange = this._cachedStartElement = null;\r\n            },\r\n\r\n            /**\r\n             * 编辑器是否得到了选区\r\n             * @method isFocus\r\n             */\r\n            isFocus: function () {\r\n                try {\r\n                    if (browser.ie9below) {\r\n\r\n                        var nativeRange = _getIERange(this);\r\n                        return !!(nativeRange && this.rangeInBody(nativeRange));\r\n                    } else {\r\n                        return !!this.getNative().rangeCount;\r\n                    }\r\n                } catch (e) {\r\n                    return false;\r\n                }\r\n\r\n            },\r\n\r\n            /**\r\n             * 获取选区对应的Range\r\n             * @method getRange\r\n             * @return { Object } 得到Range对象\r\n             * @example\r\n             * ```javascript\r\n             * editor.selection.getRange();\r\n             * ```\r\n             */\r\n            getRange: function () {\r\n                var me = this;\r\n                function optimze(range) {\r\n                    var child = me.document.body.firstChild,\r\n                        collapsed = range.collapsed;\r\n                    while (child && child.firstChild) {\r\n                        range.setStart(child, 0);\r\n                        child = child.firstChild;\r\n                    }\r\n                    if (!range.startContainer) {\r\n                        range.setStart(me.document.body, 0)\r\n                    }\r\n                    if (collapsed) {\r\n                        range.collapse(true);\r\n                    }\r\n                }\r\n\r\n                if (me._cachedRange != null) {\r\n                    return this._cachedRange;\r\n                }\r\n                var range = new baidu.editor.dom.Range(me.document);\r\n\r\n                if (browser.ie9below) {\r\n                    var nativeRange = me.getIERange();\r\n                    if (nativeRange) {\r\n                        //备份的_bakIERange可能已经实效了，dom树发生了变化比如从源码模式切回来，所以try一下，实效就放到body开始位置\r\n                        try {\r\n                            transformIERangeToRange(nativeRange, range);\r\n                        } catch (e) {\r\n                            optimze(range);\r\n                        }\r\n\r\n                    } else {\r\n                        optimze(range);\r\n                    }\r\n                } else {\r\n                    var sel = me.getNative();\r\n                    if (sel && sel.rangeCount) {\r\n                        var firstRange = sel.getRangeAt(0);\r\n                        var lastRange = sel.getRangeAt(sel.rangeCount - 1);\r\n                        range.setStart(firstRange.startContainer, firstRange.startOffset).setEnd(lastRange.endContainer, lastRange.endOffset);\r\n                        if (range.collapsed && domUtils.isBody(range.startContainer) && !range.startOffset) {\r\n                            optimze(range);\r\n                        }\r\n                    } else {\r\n                        //trace:1734 有可能已经不在dom树上了，标识的节点\r\n                        if (this._bakRange && domUtils.inDoc(this._bakRange.startContainer, this.document)) {\r\n                            return this._bakRange;\r\n                        }\r\n                        optimze(range);\r\n                    }\r\n                }\r\n                return this._bakRange = range;\r\n            },\r\n\r\n            /**\r\n             * 获取开始元素，用于状态反射\r\n             * @method getStart\r\n             * @return { Element } 获得开始元素\r\n             * @example\r\n             * ```javascript\r\n             * editor.selection.getStart();\r\n             * ```\r\n             */\r\n            getStart: function () {\r\n                if (this._cachedStartElement) {\r\n                    return this._cachedStartElement;\r\n                }\r\n                var range = browser.ie9below ? this.getIERange() : this.getRange(),\r\n                    tmpRange,\r\n                    start, tmp, parent;\r\n                if (browser.ie9below) {\r\n                    if (!range) {\r\n                        //todo 给第一个值可能会有问题\r\n                        return this.document.body.firstChild;\r\n                    }\r\n                    //control元素\r\n                    if (range.item) {\r\n                        return range.item(0);\r\n                    }\r\n                    tmpRange = range.duplicate();\r\n                    //修正ie下<b>x</b>[xx] 闭合后 <b>x|</b>xx\r\n                    tmpRange.text.length > 0 && tmpRange.moveStart('character', 1);\r\n                    tmpRange.collapse(1);\r\n                    start = tmpRange.parentElement();\r\n                    parent = tmp = range.parentElement();\r\n                    while (tmp = tmp.parentNode) {\r\n                        if (tmp == start) {\r\n                            start = parent;\r\n                            break;\r\n                        }\r\n                    }\r\n                } else {\r\n                    range.shrinkBoundary();\r\n                    start = range.startContainer;\r\n                    if (start.nodeType == 1 && start.hasChildNodes()) {\r\n                        start = start.childNodes[Math.min(start.childNodes.length - 1, range.startOffset)];\r\n                    }\r\n                    if (start.nodeType == 3) {\r\n                        return start.parentNode;\r\n                    }\r\n                }\r\n                return start;\r\n            },\r\n\r\n            /**\r\n             * 得到选区中的文本\r\n             * @method getText\r\n             * @return { String } 选区中包含的文本\r\n             * @example\r\n             * ```javascript\r\n             * editor.selection.getText();\r\n             * ```\r\n             */\r\n            getText: function () {\r\n                var nativeSel, nativeRange;\r\n                if (this.isFocus() && (nativeSel = this.getNative())) {\r\n                    nativeRange = browser.ie9below ? nativeSel.createRange() : nativeSel.getRangeAt(0);\r\n                    return browser.ie9below ? nativeRange.text : nativeRange.toString();\r\n                }\r\n                return '';\r\n            },\r\n\r\n            /**\r\n             * 清除选区\r\n             * @method clearRange\r\n             * @example\r\n             * ```javascript\r\n             * editor.selection.clearRange();\r\n             * ```\r\n             */\r\n            clearRange: function () {\r\n                this.getNative()[browser.ie9below ? 'empty' : 'removeAllRanges']();\r\n            }\r\n        };\r\n    })();\r\n\r\n    // core/Editor.js\r\n    /**\r\n     * 编辑器主类，包含编辑器提供的大部分公用接口\r\n     * @file\r\n     * @module UE\r\n     * @class Editor\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * UEditor公用空间，UEditor所有的功能都挂载在该空间下\r\n     * @unfile\r\n     * @module UE\r\n     */\r\n\r\n    /**\r\n     * UEditor的核心类，为用户提供与编辑器交互的接口。\r\n     * @unfile\r\n     * @module UE\r\n     * @class Editor\r\n     */\r\n\r\n    (function () {\r\n        var uid = 0, _selectionChangeTimer;\r\n\r\n        /**\r\n         * 获取编辑器的html内容，赋值到编辑器所在表单的textarea文本域里面\r\n         * @private\r\n         * @method setValue\r\n         * @param { UE.Editor } editor 编辑器事例\r\n         */\r\n        function setValue(form, editor) {\r\n            var textarea;\r\n            if (editor.textarea) {\r\n                if (utils.isString(editor.textarea)) {\r\n                    for (var i = 0, ti, tis = domUtils.getElementsByTagName(form, 'textarea'); ti = tis[i++];) {\r\n                        if (ti.id == 'ueditor_textarea_' + editor.options.textarea) {\r\n                            textarea = ti;\r\n                            break;\r\n                        }\r\n                    }\r\n                } else {\r\n                    textarea = editor.textarea;\r\n                }\r\n            }\r\n            if (!textarea) {\r\n                form.appendChild(textarea = domUtils.createElement(document, 'textarea', {\r\n                    'name': editor.options.textarea,\r\n                    'id': 'ueditor_textarea_' + editor.options.textarea,\r\n                    'style': \"display:none\"\r\n                }));\r\n                //不要产生多个textarea\r\n                editor.textarea = textarea;\r\n            }\r\n            !textarea.getAttribute('name') && textarea.setAttribute('name', editor.options.textarea);\r\n            textarea.value = editor.hasContents() ?\r\n                (editor.options.allHtmlEnabled ? editor.getAllHtml() : editor.getContent(null, null, true)) :\r\n                ''\r\n        }\r\n        function loadPlugins(me) {\r\n            //初始化插件\r\n            for (var pi in UE.plugins) {\r\n                UE.plugins[pi].call(me);\r\n            }\r\n\r\n        }\r\n        function checkCurLang(I18N) {\r\n            for (var lang in I18N) {\r\n                return lang\r\n            }\r\n        }\r\n\r\n        function langReadied(me) {\r\n            me.langIsReady = true;\r\n\r\n            me.fireEvent(\"langReady\");\r\n        }\r\n\r\n        /**\r\n         * 编辑器准备就绪后会触发该事件\r\n         * @module UE\r\n         * @class Editor\r\n         * @event ready\r\n         * @remind render方法执行完成之后,会触发该事件\r\n         * @remind\r\n         * @example\r\n         * ```javascript\r\n         * editor.addListener( 'ready', function( editor ) {\r\n         *     editor.execCommand( 'focus' ); //编辑器家在完成后，让编辑器拿到焦点\r\n         * } );\r\n         * ```\r\n         */\r\n        /**\r\n         * 执行destroy方法,会触发该事件\r\n         * @module UE\r\n         * @class Editor\r\n         * @event destroy\r\n         * @see UE.Editor:destroy()\r\n         */\r\n        /**\r\n         * 执行reset方法,会触发该事件\r\n         * @module UE\r\n         * @class Editor\r\n         * @event reset\r\n         * @see UE.Editor:reset()\r\n         */\r\n        /**\r\n         * 执行focus方法,会触发该事件\r\n         * @module UE\r\n         * @class Editor\r\n         * @event focus\r\n         * @see UE.Editor:focus(Boolean)\r\n         */\r\n        /**\r\n         * 语言加载完成会触发该事件\r\n         * @module UE\r\n         * @class Editor\r\n         * @event langReady\r\n         */\r\n        /**\r\n         * 运行命令之后会触发该命令\r\n         * @module UE\r\n         * @class Editor\r\n         * @event beforeExecCommand\r\n         */\r\n        /**\r\n         * 运行命令之后会触发该命令\r\n         * @module UE\r\n         * @class Editor\r\n         * @event afterExecCommand\r\n         */\r\n        /**\r\n         * 运行命令之前会触发该命令\r\n         * @module UE\r\n         * @class Editor\r\n         * @event firstBeforeExecCommand\r\n         */\r\n        /**\r\n         * 在getContent方法执行之前会触发该事件\r\n         * @module UE\r\n         * @class Editor\r\n         * @event beforeGetContent\r\n         * @see UE.Editor:getContent()\r\n         */\r\n        /**\r\n         * 在getContent方法执行之后会触发该事件\r\n         * @module UE\r\n         * @class Editor\r\n         * @event afterGetContent\r\n         * @see UE.Editor:getContent()\r\n         */\r\n        /**\r\n         * 在getAllHtml方法执行时会触发该事件\r\n         * @module UE\r\n         * @class Editor\r\n         * @event getAllHtml\r\n         * @see UE.Editor:getAllHtml()\r\n         */\r\n        /**\r\n         * 在setContent方法执行之前会触发该事件\r\n         * @module UE\r\n         * @class Editor\r\n         * @event beforeSetContent\r\n         * @see UE.Editor:setContent(String)\r\n         */\r\n        /**\r\n         * 在setContent方法执行之后会触发该事件\r\n         * @module UE\r\n         * @class Editor\r\n         * @event afterSetContent\r\n         * @see UE.Editor:setContent(String)\r\n         */\r\n        /**\r\n         * 每当编辑器内部选区发生改变时，将触发该事件\r\n         * @event selectionchange\r\n         * @warning 该事件的触发非常频繁，不建议在该事件的处理过程中做重量级的处理\r\n         * @example\r\n         * ```javascript\r\n         * editor.addListener( 'selectionchange', function( editor ) {\r\n         *     console.log('选区发生改变');\r\n         * }\r\n         */\r\n        /**\r\n         * 在所有selectionchange的监听函数执行之前，会触发该事件\r\n         * @module UE\r\n         * @class Editor\r\n         * @event beforeSelectionChange\r\n         * @see UE.Editor:selectionchange\r\n         */\r\n        /**\r\n         * 在所有selectionchange的监听函数执行完之后，会触发该事件\r\n         * @module UE\r\n         * @class Editor\r\n         * @event afterSelectionChange\r\n         * @see UE.Editor:selectionchange\r\n         */\r\n        /**\r\n         * 编辑器内容发生改变时会触发该事件\r\n         * @module UE\r\n         * @class Editor\r\n         * @event contentChange\r\n         */\r\n\r\n\r\n        /**\r\n         * 以默认参数构建一个编辑器实例\r\n         * @constructor\r\n         * @remind 通过 改构造方法实例化的编辑器,不带ui层.需要render到一个容器,编辑器实例才能正常渲染到页面\r\n         * @example\r\n         * ```javascript\r\n         * var editor = new UE.Editor();\r\n         * editor.execCommand('blod');\r\n         * ```\r\n         * @see UE.Config\r\n         */\r\n\r\n        /**\r\n         * 以给定的参数集合创建一个编辑器实例，对于未指定的参数，将应用默认参数。\r\n         * @constructor\r\n         * @remind 通过 改构造方法实例化的编辑器,不带ui层.需要render到一个容器,编辑器实例才能正常渲染到页面\r\n         * @param { Object } setting 创建编辑器的参数\r\n         * @example\r\n         * ```javascript\r\n         * var editor = new UE.Editor();\r\n         * editor.execCommand('blod');\r\n         * ```\r\n         * @see UE.Config\r\n         */\r\n        var Editor = UE.Editor = function (options) {\r\n            var me = this;\r\n            me.uid = uid++;\r\n            EventBase.call(me);\r\n            me.commands = {};\r\n            me.options = utils.extend(utils.clone(options || {}), UEDITOR_CONFIG, true);\r\n            me.shortcutkeys = {};\r\n            me.inputRules = [];\r\n            me.outputRules = [];\r\n            //设置默认的常用属性\r\n            me.setOpt(Editor.defaultOptions(me));\r\n\r\n            /* 尝试异步加载后台配置 */\r\n            me.loadServerConfig();\r\n\r\n            if (!utils.isEmptyObject(UE.I18N)) {\r\n                //修改默认的语言类型\r\n                me.options.lang = checkCurLang(UE.I18N);\r\n                UE.plugin.load(me);\r\n                langReadied(me);\r\n\r\n            } else {\r\n                utils.loadFile(document, {\r\n                    src: me.options.langPath + me.options.lang + \"/\" + me.options.lang + \".js\",\r\n                    tag: \"script\",\r\n                    type: \"text/javascript\",\r\n                    defer: \"defer\"\r\n                }, function () {\r\n                    UE.plugin.load(me);\r\n                    langReadied(me);\r\n                });\r\n            }\r\n\r\n            UE.instants['ueditorInstant' + me.uid] = me;\r\n        };\r\n        Editor.prototype = {\r\n            registerCommand: function (name, obj) {\r\n                this.commands[name] = obj;\r\n            },\r\n            /**\r\n             * 编辑器对外提供的监听ready事件的接口， 通过调用该方法，达到的效果与监听ready事件是一致的\r\n             * @method ready\r\n             * @param { Function } fn 编辑器ready之后所执行的回调, 如果在注册事件之前编辑器已经ready，将会\r\n             * 立即触发该回调。\r\n             * @remind 需要等待编辑器加载完成后才能执行的代码,可以使用该方法传入\r\n             * @example\r\n             * ```javascript\r\n             * editor.ready( function( editor ) {\r\n             *     editor.setContent('初始化完毕');\r\n             * } );\r\n             * ```\r\n             * @see UE.Editor.event:ready\r\n             */\r\n            ready: function (fn) {\r\n                var me = this;\r\n                if (fn) {\r\n                    me.isReady ? fn.apply(me) : me.addListener('ready', fn);\r\n                }\r\n            },\r\n\r\n            /**\r\n             * 该方法是提供给插件里面使用，设置配置项默认值\r\n             * @method setOpt\r\n             * @warning 三处设置配置项的优先级: 实例化时传入参数 > setOpt()设置 > config文件里设置\r\n             * @warning 该方法仅供编辑器插件内部和编辑器初始化时调用，其他地方不能调用。\r\n             * @param { String } key 编辑器的可接受的选项名称\r\n             * @param { * } val  该选项可接受的值\r\n             * @example\r\n             * ```javascript\r\n             * editor.setOpt( 'initContent', '欢迎使用编辑器' );\r\n             * ```\r\n             */\r\n\r\n            /**\r\n             * 该方法是提供给插件里面使用，以{key:value}集合的方式设置插件内用到的配置项默认值\r\n             * @method setOpt\r\n             * @warning 三处设置配置项的优先级: 实例化时传入参数 > setOpt()设置 > config文件里设置\r\n             * @warning 该方法仅供编辑器插件内部和编辑器初始化时调用，其他地方不能调用。\r\n             * @param { Object } options 将要设置的选项的键值对对象\r\n             * @example\r\n             * ```javascript\r\n             * editor.setOpt( {\r\n             *     'initContent': '欢迎使用编辑器'\r\n             * } );\r\n             * ```\r\n             */\r\n            setOpt: function (key, val) {\r\n                var obj = {};\r\n                if (utils.isString(key)) {\r\n                    obj[key] = val\r\n                } else {\r\n                    obj = key;\r\n                }\r\n                utils.extend(this.options, obj, true);\r\n            },\r\n            getOpt: function (key) {\r\n                return this.options[key]\r\n            },\r\n            /**\r\n             * 销毁编辑器实例，使用textarea代替\r\n             * @method destroy\r\n             * @example\r\n             * ```javascript\r\n             * editor.destroy();\r\n             * ```\r\n             */\r\n            destroy: function () {\r\n\r\n                var me = this;\r\n                me.fireEvent('destroy');\r\n                var container = me.container.parentNode;\r\n                var textarea = me.textarea;\r\n                if (!textarea) {\r\n                    textarea = document.createElement('textarea');\r\n                    container.parentNode.insertBefore(textarea, container);\r\n                } else {\r\n                    textarea.style.display = ''\r\n                }\r\n\r\n                textarea.style.width = me.iframe.offsetWidth + 'px';\r\n                textarea.style.height = me.iframe.offsetHeight + 'px';\r\n                textarea.value = me.getContent();\r\n                textarea.id = me.key;\r\n                container.innerHTML = '';\r\n                domUtils.remove(container);\r\n                var key = me.key;\r\n                //trace:2004\r\n                for (var p in me) {\r\n                    if (me.hasOwnProperty(p)) {\r\n                        delete this[p];\r\n                    }\r\n                }\r\n                UE.delEditor(key);\r\n            },\r\n\r\n            /**\r\n             * 渲染编辑器的DOM到指定容器\r\n             * @method render\r\n             * @param { String } containerId 指定一个容器ID\r\n             * @remind 执行该方法,会触发ready事件\r\n             * @warning 必须且只能调用一次\r\n             */\r\n\r\n            /**\r\n             * 渲染编辑器的DOM到指定容器\r\n             * @method render\r\n             * @param { Element } containerDom 直接指定容器对象\r\n             * @remind 执行该方法,会触发ready事件\r\n             * @warning 必须且只能调用一次\r\n             */\r\n            render: function (container) {\r\n                var me = this,\r\n                    options = me.options,\r\n                    getStyleValue = function (attr) {\r\n                        return parseInt(domUtils.getComputedStyle(container, attr));\r\n                    };\r\n                if (utils.isString(container)) {\r\n                    container = document.getElementById(container);\r\n                }\r\n                if (container) {\r\n                    if (options.initialFrameWidth) {\r\n                        options.minFrameWidth = options.initialFrameWidth\r\n                    } else {\r\n                        options.minFrameWidth = options.initialFrameWidth = container.offsetWidth;\r\n                    }\r\n                    if (options.initialFrameHeight) {\r\n                        options.minFrameHeight = options.initialFrameHeight\r\n                    } else {\r\n                        options.initialFrameHeight = options.minFrameHeight = container.offsetHeight;\r\n                    }\r\n\r\n                    container.style.width = /%$/.test(options.initialFrameWidth) ? '100%' : options.initialFrameWidth -\r\n                        getStyleValue(\"padding-left\") - getStyleValue(\"padding-right\") + 'px';\r\n                    container.style.height = /%$/.test(options.initialFrameHeight) ? '100%' : options.initialFrameHeight -\r\n                        getStyleValue(\"padding-top\") - getStyleValue(\"padding-bottom\") + 'px';\r\n\r\n                    container.style.zIndex = options.zIndex;\r\n\r\n                    var html = (ie && browser.version < 9 ? '' : '<!DOCTYPE html>') +\r\n                        '<html xmlns=\\'http://www.w3.org/1999/xhtml\\' class=\\'view\\' ><head>' +\r\n                        '<style type=\\'text/css\\'>' +\r\n                        //设置四周的留边\r\n                        '.view{padding:0;word-wrap:break-word;cursor:text;height:90%;}\\n' +\r\n                        //设置默认字体和字号\r\n                        //font-family不能呢随便改，在safari下fillchar会有解析问题\r\n                        'body{margin:8px;font-family:sans-serif;font-size:16px;}' +\r\n                        //设置段落间距\r\n                        'p{margin:5px 0;}</style>' +\r\n                        (options.iframeCssUrl ? '<link rel=\\'stylesheet\\' type=\\'text/css\\' href=\\'' + utils.unhtml(options.iframeCssUrl) + '\\'/>' : '') +\r\n                        (options.initialStyle ? '<style>' + options.initialStyle + '</style>' : '') +\r\n                        '</head><body class=\\'view\\' ></body>' +\r\n                        '<script type=\\'text/javascript\\' ' + (ie ? 'defer=\\'defer\\'' : '') + ' id=\\'_initialScript\\'>' +\r\n                        'setTimeout(function(){editor = window.parent.UE.instants[\\'ueditorInstant' + me.uid + '\\'];editor._setup(document);},0);' +\r\n                        'var _tmpScript = document.getElementById(\\'_initialScript\\');_tmpScript.parentNode.removeChild(_tmpScript);</script></html>';\r\n                    container.appendChild(domUtils.createElement(document, 'iframe', {\r\n                        id: 'ueditor_' + me.uid,\r\n                        width: \"100%\",\r\n                        height: \"100%\",\r\n                        frameborder: \"0\",\r\n                        //先注释掉了，加的原因忘记了，但开启会直接导致全屏模式下内容多时不会出现滚动条\r\n                        //                    scrolling :'no',\r\n                        src: 'javascript:void(function(){document.open();' + (options.customDomain && document.domain != location.hostname ? 'document.domain=\"' + document.domain + '\";' : '') +\r\n                            'document.write(\"' + html + '\");document.close();}())'\r\n                    }));\r\n                    container.style.overflow = 'hidden';\r\n                    //解决如果是给定的百分比，会导致高度算不对的问题\r\n                    setTimeout(function () {\r\n                        if (/%$/.test(options.initialFrameWidth)) {\r\n                            options.minFrameWidth = options.initialFrameWidth = container.offsetWidth;\r\n                            //如果这里给定宽度，会导致ie在拖动窗口大小时，编辑区域不随着变化\r\n                            //                        container.style.width = options.initialFrameWidth + 'px';\r\n                        }\r\n                        if (/%$/.test(options.initialFrameHeight)) {\r\n                            options.minFrameHeight = options.initialFrameHeight = container.offsetHeight;\r\n                            container.style.height = options.initialFrameHeight + 'px';\r\n                        }\r\n                    })\r\n                }\r\n            },\r\n\r\n            /**\r\n             * 编辑器初始化\r\n             * @method _setup\r\n             * @private\r\n             * @param { Element } doc 编辑器Iframe中的文档对象\r\n             */\r\n            _setup: function (doc) {\r\n\r\n                var me = this,\r\n                    options = me.options;\r\n                if (ie) {\r\n                    doc.body.disabled = true;\r\n                    doc.body.contentEditable = true;\r\n                    doc.body.disabled = false;\r\n                } else {\r\n                    doc.body.contentEditable = true;\r\n                }\r\n                doc.body.spellcheck = false;\r\n                me.document = doc;\r\n                me.window = doc.defaultView || doc.parentWindow;\r\n                me.iframe = me.window.frameElement;\r\n                me.body = doc.body;\r\n                me.selection = new dom.Selection(doc);\r\n                //gecko初始化就能得到range,无法判断isFocus了\r\n                var geckoSel;\r\n                if (browser.gecko && (geckoSel = this.selection.getNative())) {\r\n                    geckoSel.removeAllRanges();\r\n                }\r\n                this._initEvents();\r\n                //为form提交提供一个隐藏的textarea\r\n                for (var form = this.iframe.parentNode; !domUtils.isBody(form); form = form.parentNode) {\r\n                    if (form.tagName == 'FORM') {\r\n                        me.form = form;\r\n                        if (me.options.autoSyncData) {\r\n                            domUtils.on(me.window, 'blur', function () {\r\n                                setValue(form, me);\r\n                            });\r\n                        } else {\r\n                            domUtils.on(form, 'submit', function () {\r\n                                setValue(this, me);\r\n                            });\r\n                        }\r\n                        break;\r\n                    }\r\n                }\r\n                if (options.initialContent) {\r\n                    if (options.autoClearinitialContent) {\r\n                        var oldExecCommand = me.execCommand;\r\n                        me.execCommand = function () {\r\n                            me.fireEvent('firstBeforeExecCommand');\r\n                            return oldExecCommand.apply(me, arguments);\r\n                        };\r\n                        this._setDefaultContent(options.initialContent);\r\n                    } else\r\n                        this.setContent(options.initialContent, false, true);\r\n                }\r\n\r\n                //编辑器不能为空内容\r\n\r\n                if (domUtils.isEmptyNode(me.body)) {\r\n                    me.body.innerHTML = '<p>' + (browser.ie ? '' : '<br/>') + '</p>';\r\n                }\r\n                //如果要求focus, 就把光标定位到内容开始\r\n                if (options.focus) {\r\n                    setTimeout(function () {\r\n                        me.focus(me.options.focusInEnd);\r\n                        //如果自动清除开着，就不需要做selectionchange;\r\n                        !me.options.autoClearinitialContent && me._selectionChange();\r\n                    }, 0);\r\n                }\r\n                if (!me.container) {\r\n                    me.container = this.iframe.parentNode;\r\n                }\r\n                if (options.fullscreen && me.ui) {\r\n                    me.ui.setFullScreen(true);\r\n                }\r\n\r\n                try {\r\n                    me.document.execCommand('2D-position', false, false);\r\n                } catch (e) {\r\n                }\r\n                try {\r\n                    me.document.execCommand('enableInlineTableEditing', false, false);\r\n                } catch (e) {\r\n                }\r\n                try {\r\n                    me.document.execCommand('enableObjectResizing', false, false);\r\n                } catch (e) {\r\n                }\r\n\r\n                //挂接快捷键\r\n                me._bindshortcutKeys();\r\n                me.isReady = 1;\r\n                me.fireEvent('ready');\r\n                options.onready && options.onready.call(me);\r\n                if (!browser.ie9below) {\r\n                    domUtils.on(me.window, ['blur', 'focus'], function (e) {\r\n                        //chrome下会出现alt+tab切换时，导致选区位置不对\r\n                        if (e.type == 'blur') {\r\n                            me._bakRange = me.selection.getRange();\r\n                            try {\r\n                                me._bakNativeRange = me.selection.getNative().getRangeAt(0);\r\n                                me.selection.getNative().removeAllRanges();\r\n                            } catch (e) {\r\n                                me._bakNativeRange = null;\r\n                            }\r\n\r\n                        } else {\r\n                            try {\r\n                                me._bakRange && me._bakRange.select();\r\n                            } catch (e) {\r\n                            }\r\n                        }\r\n                    });\r\n                }\r\n                //trace:1518 ff3.6body不够寛，会导致点击空白处无法获得焦点\r\n                if (browser.gecko && browser.version <= 10902) {\r\n                    //修复ff3.6初始化进来，不能点击获得焦点\r\n                    me.body.contentEditable = false;\r\n                    setTimeout(function () {\r\n                        me.body.contentEditable = true;\r\n                    }, 100);\r\n                    setInterval(function () {\r\n                        me.body.style.height = me.iframe.offsetHeight - 20 + 'px'\r\n                    }, 100)\r\n                }\r\n\r\n                !options.isShow && me.setHide();\r\n                options.readonly && me.setDisabled();\r\n            },\r\n\r\n            /**\r\n             * 同步数据到编辑器所在的form\r\n             * 从编辑器的容器节点向上查找form元素，若找到，就同步编辑内容到找到的form里，为提交数据做准备，主要用于是手动提交的情况\r\n             * 后台取得数据的键值，使用你容器上的name属性，如果没有就使用参数里的textarea项\r\n             * @method sync\r\n             * @example\r\n             * ```javascript\r\n             * editor.sync();\r\n             * form.sumbit(); //form变量已经指向了form元素\r\n             * ```\r\n             */\r\n\r\n            /**\r\n             * 根据传入的formId，在页面上查找要同步数据的表单，若找到，就同步编辑内容到找到的form里，为提交数据做准备\r\n             * 后台取得数据的键值，该键值默认使用给定的编辑器容器的name属性，如果没有name属性则使用参数项里给定的“textarea”项\r\n             * @method sync\r\n             * @param { String } formID 指定一个要同步数据的form的id,编辑器的数据会同步到你指定form下\r\n             */\r\n            sync: function (formId) {\r\n                var me = this,\r\n                    form = formId ? document.getElementById(formId) :\r\n                        domUtils.findParent(me.iframe.parentNode, function (node) {\r\n                            return node.tagName == 'FORM'\r\n                        }, true);\r\n                form && setValue(form, me);\r\n            },\r\n\r\n            /**\r\n             * 设置编辑器高度\r\n             * @method setHeight\r\n             * @remind 当配置项autoHeightEnabled为真时,该方法无效\r\n             * @param { Number } number 设置的高度值，纯数值，不带单位\r\n             * @example\r\n             * ```javascript\r\n             * editor.setHeight(number);\r\n             * ```\r\n             */\r\n            setHeight: function (height, notSetHeight) {\r\n                if (height !== parseInt(this.iframe.parentNode.style.height)) {\r\n                    this.iframe.parentNode.style.height = height + 'px';\r\n                }\r\n                !notSetHeight && (this.options.minFrameHeight = this.options.initialFrameHeight = height);\r\n                this.body.style.height = height + 'px';\r\n                !notSetHeight && this.trigger('setHeight')\r\n            },\r\n\r\n            /**\r\n             * 为编辑器的编辑命令提供快捷键\r\n             * 这个接口是为插件扩展提供的接口,主要是为新添加的插件，如果需要添加快捷键，所提供的接口\r\n             * @method addshortcutkey\r\n             * @param { Object } keyset 命令名和快捷键键值对对象，多个按钮的快捷键用“＋”分隔\r\n             * @example\r\n             * ```javascript\r\n             * editor.addshortcutkey({\r\n             *     \"Bold\" : \"ctrl+66\",//^B\r\n             *     \"Italic\" : \"ctrl+73\", //^I\r\n             * });\r\n             * ```\r\n             */\r\n            /**\r\n             * 这个接口是为插件扩展提供的接口,主要是为新添加的插件，如果需要添加快捷键，所提供的接口\r\n             * @method addshortcutkey\r\n             * @param { String } cmd 触发快捷键时，响应的命令\r\n             * @param { String } keys 快捷键的字符串，多个按钮用“＋”分隔\r\n             * @example\r\n             * ```javascript\r\n             * editor.addshortcutkey(\"Underline\", \"ctrl+85\"); //^U\r\n             * ```\r\n             */\r\n            addshortcutkey: function (cmd, keys) {\r\n                var obj = {};\r\n                if (keys) {\r\n                    obj[cmd] = keys\r\n                } else {\r\n                    obj = cmd;\r\n                }\r\n                utils.extend(this.shortcutkeys, obj)\r\n            },\r\n\r\n            /**\r\n             * 对编辑器设置keydown事件监听，绑定快捷键和命令，当快捷键组合触发成功，会响应对应的命令\r\n             * @method _bindshortcutKeys\r\n             * @private\r\n             */\r\n            _bindshortcutKeys: function () {\r\n                var me = this, shortcutkeys = this.shortcutkeys;\r\n                me.addListener('keydown', function (type, e) {\r\n                    var keyCode = e.keyCode || e.which;\r\n                    for (var i in shortcutkeys) {\r\n                        var tmp = shortcutkeys[i].split(',');\r\n                        for (var t = 0, ti; ti = tmp[t++];) {\r\n                            ti = ti.split(':');\r\n                            var key = ti[0], param = ti[1];\r\n                            if (/^(ctrl)(\\+shift)?\\+(\\d+)$/.test(key.toLowerCase()) || /^(\\d+)$/.test(key)) {\r\n                                if (((RegExp.$1 == 'ctrl' ? (e.ctrlKey || e.metaKey) : 0)\r\n                                    && (RegExp.$2 != \"\" ? e[RegExp.$2.slice(1) + \"Key\"] : 1)\r\n                                    && keyCode == RegExp.$3\r\n                                ) ||\r\n                                    keyCode == RegExp.$1\r\n                                ) {\r\n                                    if (me.queryCommandState(i, param) != -1)\r\n                                        me.execCommand(i, param);\r\n                                    domUtils.preventDefault(e);\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                });\r\n            },\r\n\r\n            /**\r\n             * 获取编辑器的内容\r\n             * @method getContent\r\n             * @warning 该方法获取到的是经过编辑器内置的过滤规则进行过滤后得到的内容\r\n             * @return { String } 编辑器的内容字符串, 如果编辑器的内容为空，或者是空的标签内容（如:”&lt;p&gt;&lt;br/&gt;&lt;/p&gt;“）， 则返回空字符串\r\n             * @example\r\n             * ```javascript\r\n             * //编辑器html内容:<p>1<strong>2<em>34</em>5</strong>6</p>\r\n             * var content = editor.getContent(); //返回值:<p>1<strong>2<em>34</em>5</strong>6</p>\r\n             * ```\r\n             */\r\n\r\n            /**\r\n             * 获取编辑器的内容。 可以通过参数定义编辑器内置的判空规则\r\n             * @method getContent\r\n             * @param { Function } fn 自定的判空规则， 要求该方法返回一个boolean类型的值，\r\n             *                      代表当前编辑器的内容是否空，\r\n             *                      如果返回true， 则该方法将直接返回空字符串；如果返回false，则编辑器将返回\r\n             *                      经过内置过滤规则处理后的内容。\r\n             * @remind 该方法在处理包含有初始化内容的时候能起到很好的作用。\r\n             * @warning 该方法获取到的是经过编辑器内置的过滤规则进行过滤后得到的内容\r\n             * @return { String } 编辑器的内容字符串\r\n             * @example\r\n             * ```javascript\r\n             * // editor 是一个编辑器的实例\r\n             * var content = editor.getContent( function ( editor ) {\r\n             *      return editor.body.innerHTML === '欢迎使用UEditor'; //返回空字符串\r\n             * } );\r\n             * ```\r\n             */\r\n            getContent: function (cmd, fn, notSetCursor, ignoreBlank, formatter) {\r\n                var me = this;\r\n                if (cmd && utils.isFunction(cmd)) {\r\n                    fn = cmd;\r\n                    cmd = '';\r\n                }\r\n                if (fn ? !fn() : !this.hasContents()) {\r\n                    return '';\r\n                }\r\n                me.fireEvent('beforegetcontent');\r\n                var root = UE.htmlparser(me.body.innerHTML, ignoreBlank);\r\n                me.filterOutputRule(root);\r\n                me.fireEvent('aftergetcontent', cmd, root);\r\n                return root.toHtml(formatter);\r\n            },\r\n\r\n            /**\r\n             * 取得完整的html代码，可以直接显示成完整的html文档\r\n             * @method getAllHtml\r\n             * @return { String } 编辑器的内容html文档字符串\r\n             * @eaxmple\r\n             * ```javascript\r\n             * editor.getAllHtml(); //返回格式大致是: <html><head>...</head><body>...</body></html>\r\n             * ```\r\n             */\r\n            getAllHtml: function () {\r\n                var me = this,\r\n                    headHtml = [],\r\n                    html = '';\r\n                me.fireEvent('getAllHtml', headHtml);\r\n                if (browser.ie && browser.version > 8) {\r\n                    var headHtmlForIE9 = '';\r\n                    utils.each(me.document.styleSheets, function (si) {\r\n                        headHtmlForIE9 += (si.href ? '<link rel=\"stylesheet\" type=\"text/css\" href=\"' + si.href + '\" />' : '<style>' + si.cssText + '</style>');\r\n                    });\r\n                    utils.each(me.document.getElementsByTagName('script'), function (si) {\r\n                        headHtmlForIE9 += si.outerHTML;\r\n                    });\r\n\r\n                }\r\n                return '<html><head>' + (me.options.charset ? '<meta http-equiv=\"Content-Type\" content=\"text/html; charset=' + me.options.charset + '\"/>' : '')\r\n                    + (headHtmlForIE9 || me.document.getElementsByTagName('head')[0].innerHTML) + headHtml.join('\\n') + '</head>'\r\n                    + '<body ' + (ie && browser.version < 9 ? 'class=\"view\"' : '') + '>' + me.getContent(null, null, true) + '</body></html>';\r\n            },\r\n\r\n            /**\r\n             * 得到编辑器的纯文本内容，但会保留段落格式\r\n             * @method getPlainTxt\r\n             * @return { String } 编辑器带段落格式的纯文本内容字符串\r\n             * @example\r\n             * ```javascript\r\n             * //编辑器html内容:<p><strong>1</strong></p><p><strong>2</strong></p>\r\n             * console.log(editor.getPlainTxt()); //输出:\"1\\n2\\n\r\n             * ```\r\n             */\r\n            getPlainTxt: function () {\r\n                var reg = new RegExp(domUtils.fillChar, 'g'),\r\n                    html = this.body.innerHTML.replace(/[\\n\\r]/g, '');//ie要先去了\\n在处理\r\n                html = html.replace(/<(p|div)[^>]*>(<br\\/?>|&nbsp;)<\\/\\1>/gi, '\\n')\r\n                    .replace(/<br\\/?>/gi, '\\n')\r\n                    .replace(/<[^>/]+>/g, '')\r\n                    .replace(/(\\n)?<\\/([^>]+)>/g, function (a, b, c) {\r\n                        return dtd.$block[c] ? '\\n' : b ? b : '';\r\n                    });\r\n                //取出来的空格会有c2a0会变成乱码，处理这种情况\\u00a0\r\n                return html.replace(reg, '').replace(/\\u00a0/g, ' ').replace(/&nbsp;/g, ' ');\r\n            },\r\n\r\n            /**\r\n             * 获取编辑器中的纯文本内容,没有段落格式\r\n             * @method getContentTxt\r\n             * @return { String } 编辑器不带段落格式的纯文本内容字符串\r\n             * @example\r\n             * ```javascript\r\n             * //编辑器html内容:<p><strong>1</strong></p><p><strong>2</strong></p>\r\n             * console.log(editor.getPlainTxt()); //输出:\"12\r\n             * ```\r\n             */\r\n            getContentTxt: function () {\r\n                var reg = new RegExp(domUtils.fillChar, 'g');\r\n                //取出来的空格会有c2a0会变成乱码，处理这种情况\\u00a0\r\n                return this.body[browser.ie ? 'innerText' : 'textContent'].replace(reg, '').replace(/\\u00a0/g, ' ');\r\n            },\r\n\r\n            /**\r\n             * 设置编辑器的内容，可修改编辑器当前的html内容\r\n             * @method setContent\r\n             * @warning 通过该方法插入的内容，是经过编辑器内置的过滤规则进行过滤后得到的内容\r\n             * @warning 该方法会触发selectionchange事件\r\n             * @param { String } html 要插入的html内容\r\n             * @example\r\n             * ```javascript\r\n             * editor.getContent('<p>test</p>');\r\n             * ```\r\n             */\r\n\r\n            /**\r\n             * 设置编辑器的内容，可修改编辑器当前的html内容\r\n             * @method setContent\r\n             * @warning 通过该方法插入的内容，是经过编辑器内置的过滤规则进行过滤后得到的内容\r\n             * @warning 该方法会触发selectionchange事件\r\n             * @param { String } html 要插入的html内容\r\n             * @param { Boolean } isAppendTo 若传入true，不清空原来的内容，在最后插入内容，否则，清空内容再插入\r\n             * @example\r\n             * ```javascript\r\n             * //假设设置前的编辑器内容是 <p>old text</p>\r\n             * editor.setContent('<p>new text</p>', true); //插入的结果是<p>old text</p><p>new text</p>\r\n             * ```\r\n             */\r\n            setContent: function (html, isAppendTo, notFireSelectionchange) {\r\n                var me = this;\r\n                // console.log(this,this.body,html,isAppendTo,'SSSSSSSS');\r\n                me.fireEvent('beforesetcontent', html);\r\n                var root = UE.htmlparser(html);\r\n                me.filterInputRule(root);\r\n                html = root.toHtml();\r\n                // console.log(me,me.body,UE.Editor);\r\n\r\n                me.body.innerHTML = (isAppendTo ? me.body.innerHTML : '') + html;\r\n\r\n\r\n                function isCdataDiv(node) {\r\n                    return node.tagName == 'DIV' && node.getAttribute('cdata_tag');\r\n                }\r\n                //给文本或者inline节点套p标签\r\n                if (me.options.enterTag == 'p') {\r\n\r\n                    var child = this.body.firstChild, tmpNode;\r\n                    if (!child || child.nodeType == 1 &&\r\n                        (dtd.$cdata[child.tagName] || isCdataDiv(child) ||\r\n                            domUtils.isCustomeNode(child)\r\n                        )\r\n                        && child === this.body.lastChild) {\r\n                        this.body.innerHTML = '<p>' + (browser.ie ? '&nbsp;' : '<br/>') + '</p>' + this.body.innerHTML;\r\n\r\n                    } else {\r\n                        var p = me.document.createElement('p');\r\n                        while (child) {\r\n                            while (child && (child.nodeType == 3 || child.nodeType == 1 && dtd.p[child.tagName] && !dtd.$cdata[child.tagName])) {\r\n                                tmpNode = child.nextSibling;\r\n                                p.appendChild(child);\r\n                                child = tmpNode;\r\n                            }\r\n                            if (p.firstChild) {\r\n                                if (!child) {\r\n                                    me.body.appendChild(p);\r\n                                    break;\r\n                                } else {\r\n                                    child.parentNode.insertBefore(p, child);\r\n                                    p = me.document.createElement('p');\r\n                                }\r\n                            }\r\n                            child = child.nextSibling;\r\n                        }\r\n                    }\r\n                }\r\n                me.fireEvent('aftersetcontent');\r\n                me.fireEvent('contentchange');\r\n\r\n                !notFireSelectionchange && me._selectionChange();\r\n                //清除保存的选区\r\n                me._bakRange = me._bakIERange = me._bakNativeRange = null;\r\n                //trace:1742 setContent后gecko能得到焦点问题\r\n                var geckoSel;\r\n                if (browser.gecko && (geckoSel = this.selection.getNative())) {\r\n                    geckoSel.removeAllRanges();\r\n                }\r\n                if (me.options.autoSyncData) {\r\n                    me.form && setValue(me.form, me);\r\n                }\r\n            },\r\n\r\n            /**\r\n             * 让编辑器获得焦点，默认focus到编辑器头部\r\n             * @method focus\r\n             * @example\r\n             * ```javascript\r\n             * editor.focus()\r\n             * ```\r\n             */\r\n\r\n            /**\r\n             * 让编辑器获得焦点，toEnd确定focus位置\r\n             * @method focus\r\n             * @param { Boolean } toEnd 默认focus到编辑器头部，toEnd为true时focus到内容尾部\r\n             * @example\r\n             * ```javascript\r\n             * editor.focus(true)\r\n             * ```\r\n             */\r\n            focus: function (toEnd) {\r\n                try {\r\n                    var me = this,\r\n                        rng = me.selection.getRange();\r\n                    if (toEnd) {\r\n                        var node = me.body.lastChild;\r\n                        if (node && node.nodeType == 1 && !dtd.$empty[node.tagName]) {\r\n                            if (domUtils.isEmptyBlock(node)) {\r\n                                rng.setStartAtFirst(node)\r\n                            } else {\r\n                                rng.setStartAtLast(node)\r\n                            }\r\n                            rng.collapse(true);\r\n                        }\r\n                        rng.setCursor(true);\r\n                    } else {\r\n                        if (!rng.collapsed && domUtils.isBody(rng.startContainer) && rng.startOffset == 0) {\r\n\r\n                            var node = me.body.firstChild;\r\n                            if (node && node.nodeType == 1 && !dtd.$empty[node.tagName]) {\r\n                                rng.setStartAtFirst(node).collapse(true);\r\n                            }\r\n                        }\r\n\r\n                        rng.select(true);\r\n\r\n                    }\r\n                    this.fireEvent('focus selectionchange');\r\n                } catch (e) {\r\n                }\r\n\r\n            },\r\n            isFocus: function () {\r\n                return this.selection.isFocus();\r\n            },\r\n            blur: function () {\r\n                var sel = this.selection.getNative();\r\n                if (sel.empty && browser.ie) {\r\n                    var nativeRng = document.body.createTextRange();\r\n                    nativeRng.moveToElementText(document.body);\r\n                    nativeRng.collapse(true);\r\n                    nativeRng.select();\r\n                    sel.empty()\r\n                } else {\r\n                    sel.removeAllRanges()\r\n                }\r\n\r\n                //this.fireEvent('blur selectionchange');\r\n            },\r\n            /**\r\n             * 初始化UE事件及部分事件代理\r\n             * @method _initEvents\r\n             * @private\r\n             */\r\n            _initEvents: function () {\r\n                var me = this,\r\n                    doc = me.document,\r\n                    win = me.window;\r\n                me._proxyDomEvent = utils.bind(me._proxyDomEvent, me);\r\n                domUtils.on(doc, ['click', 'contextmenu', 'mousedown', 'keydown', 'keyup', 'keypress', 'mouseup', 'mouseover', 'mouseout', 'selectstart'], me._proxyDomEvent);\r\n                domUtils.on(win, ['focus', 'blur'], me._proxyDomEvent);\r\n                domUtils.on(me.body, 'drop', function (e) {\r\n                    //阻止ff下默认的弹出新页面打开图片\r\n                    if (browser.gecko && e.stopPropagation) { e.stopPropagation(); }\r\n                    me.fireEvent('contentchange')\r\n                });\r\n                domUtils.on(doc, ['mouseup', 'keydown'], function (evt) {\r\n                    //特殊键不触发selectionchange\r\n                    if (evt.type == 'keydown' && (evt.ctrlKey || evt.metaKey || evt.shiftKey || evt.altKey)) {\r\n                        return;\r\n                    }\r\n                    if (evt.button == 2) return;\r\n                    me._selectionChange(250, evt);\r\n                });\r\n            },\r\n            /**\r\n             * 触发事件代理\r\n             * @method _proxyDomEvent\r\n             * @private\r\n             * @return { * } fireEvent的返回值\r\n             * @see UE.EventBase:fireEvent(String)\r\n             */\r\n            _proxyDomEvent: function (evt) {\r\n                if (this.fireEvent('before' + evt.type.replace(/^on/, '').toLowerCase()) === false) {\r\n                    return false;\r\n                }\r\n                if (this.fireEvent(evt.type.replace(/^on/, ''), evt) === false) {\r\n                    return false;\r\n                }\r\n                return this.fireEvent('after' + evt.type.replace(/^on/, '').toLowerCase())\r\n            },\r\n            /**\r\n             * 变化选区\r\n             * @method _selectionChange\r\n             * @private\r\n             */\r\n            _selectionChange: function (delay, evt) {\r\n                var me = this;\r\n                //有光标才做selectionchange 为了解决未focus时点击source不能触发更改工具栏状态的问题（source命令notNeedUndo=1）\r\n                //            if ( !me.selection.isFocus() ){\r\n                //                return;\r\n                //            }\r\n\r\n\r\n                var hackForMouseUp = false;\r\n                var mouseX, mouseY;\r\n                if (browser.ie && browser.version < 9 && evt && evt.type == 'mouseup') {\r\n                    var range = this.selection.getRange();\r\n                    if (!range.collapsed) {\r\n                        hackForMouseUp = true;\r\n                        mouseX = evt.clientX;\r\n                        mouseY = evt.clientY;\r\n                    }\r\n                }\r\n                clearTimeout(_selectionChangeTimer);\r\n                _selectionChangeTimer = setTimeout(function () {\r\n                    if (!me.selection || !me.selection.getNative()) {\r\n                        return;\r\n                    }\r\n                    //修复一个IE下的bug: 鼠标点击一段已选择的文本中间时，可能在mouseup后的一段时间内取到的range是在selection的type为None下的错误值.\r\n                    //IE下如果用户是拖拽一段已选择文本，则不会触发mouseup事件，所以这里的特殊处理不会对其有影响\r\n                    var ieRange;\r\n                    if (hackForMouseUp && me.selection.getNative().type == 'None') {\r\n                        ieRange = me.document.body.createTextRange();\r\n                        try {\r\n                            ieRange.moveToPoint(mouseX, mouseY);\r\n                        } catch (ex) {\r\n                            ieRange = null;\r\n                        }\r\n                    }\r\n                    var bakGetIERange;\r\n                    if (ieRange) {\r\n                        bakGetIERange = me.selection.getIERange;\r\n                        me.selection.getIERange = function () {\r\n                            return ieRange;\r\n                        };\r\n                    }\r\n                    me.selection.cache();\r\n                    if (bakGetIERange) {\r\n                        me.selection.getIERange = bakGetIERange;\r\n                    }\r\n                    if (me.selection._cachedRange && me.selection._cachedStartElement) {\r\n                        me.fireEvent('beforeselectionchange');\r\n                        // 第二个参数causeByUi为true代表由用户交互造成的selectionchange.\r\n                        me.fireEvent('selectionchange', !!evt);\r\n                        me.fireEvent('afterselectionchange');\r\n                        me.selection.clear();\r\n                    }\r\n                }, delay || 50);\r\n            },\r\n\r\n            /**\r\n             * 执行编辑命令\r\n             * @method _callCmdFn\r\n             * @private\r\n             * @param { String } fnName 函数名称\r\n             * @param { * } args 传给命令函数的参数\r\n             * @return { * } 返回命令函数运行的返回值\r\n             */\r\n            _callCmdFn: function (fnName, args) {\r\n                var cmdName = args[0].toLowerCase(),\r\n                    cmd, cmdFn;\r\n                cmd = this.commands[cmdName] || UE.commands[cmdName];\r\n                cmdFn = cmd && cmd[fnName];\r\n                //没有querycommandstate或者没有command的都默认返回0\r\n                if ((!cmd || !cmdFn) && fnName == 'queryCommandState') {\r\n                    return 0;\r\n                } else if (cmdFn) {\r\n                    return cmdFn.apply(this, args);\r\n                }\r\n            },\r\n\r\n            /**\r\n             * 执行编辑命令cmdName，完成富文本编辑效果\r\n             * @method execCommand\r\n             * @param { String } cmdName 需要执行的命令\r\n             * @remind 具体命令的使用请参考<a href=\"#COMMAND.LIST\">命令列表</a>\r\n             * @return { * } 返回命令函数运行的返回值\r\n             * @example\r\n             * ```javascript\r\n             * editor.execCommand(cmdName);\r\n             * ```\r\n             */\r\n            execCommand: function (cmdName) {\r\n                cmdName = cmdName.toLowerCase();\r\n                var me = this,\r\n                    result,\r\n                    cmd = me.commands[cmdName] || UE.commands[cmdName];\r\n                if (!cmd || !cmd.execCommand) {\r\n                    return null;\r\n                }\r\n                if (!cmd.notNeedUndo && !me.__hasEnterExecCommand) {\r\n                    me.__hasEnterExecCommand = true;\r\n                    if (me.queryCommandState.apply(me, arguments) != -1) {\r\n                        me.fireEvent('saveScene');\r\n                        me.fireEvent.apply(me, ['beforeexeccommand', cmdName].concat(arguments));\r\n                        result = this._callCmdFn('execCommand', arguments);\r\n                        //保存场景时，做了内容对比，再看是否进行contentchange触发，这里多触发了一次，去掉\r\n                        //                    (!cmd.ignoreContentChange && !me._ignoreContentChange) && me.fireEvent('contentchange');\r\n                        me.fireEvent.apply(me, ['afterexeccommand', cmdName].concat(arguments));\r\n                        me.fireEvent('saveScene');\r\n                    }\r\n                    me.__hasEnterExecCommand = false;\r\n                } else {\r\n                    result = this._callCmdFn('execCommand', arguments);\r\n                    (!me.__hasEnterExecCommand && !cmd.ignoreContentChange && !me._ignoreContentChange) && me.fireEvent('contentchange')\r\n                }\r\n                (!me.__hasEnterExecCommand && !cmd.ignoreContentChange && !me._ignoreContentChange) && me._selectionChange();\r\n                return result;\r\n            },\r\n\r\n            /**\r\n             * 根据传入的command命令，查选编辑器当前的选区，返回命令的状态\r\n             * @method  queryCommandState\r\n             * @param { String } cmdName 需要查询的命令名称\r\n             * @remind 具体命令的使用请参考<a href=\"#COMMAND.LIST\">命令列表</a>\r\n             * @return { Number } number 返回放前命令的状态，返回值三种情况：(-1|0|1)\r\n             * @example\r\n             * ```javascript\r\n             * editor.queryCommandState(cmdName)  => (-1|0|1)\r\n             * ```\r\n             * @see COMMAND.LIST\r\n             */\r\n            queryCommandState: function (cmdName) {\r\n                return this._callCmdFn('queryCommandState', arguments);\r\n            },\r\n\r\n            /**\r\n             * 根据传入的command命令，查选编辑器当前的选区，根据命令返回相关的值\r\n             * @method queryCommandValue\r\n             * @param { String } cmdName 需要查询的命令名称\r\n             * @remind 具体命令的使用请参考<a href=\"#COMMAND.LIST\">命令列表</a>\r\n             * @remind 只有部分插件有此方法\r\n             * @return { * } 返回每个命令特定的当前状态值\r\n             * @grammar editor.queryCommandValue(cmdName)  =>  {*}\r\n             * @see COMMAND.LIST\r\n             */\r\n            queryCommandValue: function (cmdName) {\r\n                return this._callCmdFn('queryCommandValue', arguments);\r\n            },\r\n\r\n            /**\r\n             * 检查编辑区域中是否有内容\r\n             * @method  hasContents\r\n             * @remind 默认有文本内容，或者有以下节点都不认为是空\r\n             * table,ul,ol,dl,iframe,area,base,col,hr,img,embed,input,link,meta,param\r\n             * @return { Boolean } 检查有内容返回true，否则返回false\r\n             * @example\r\n             * ```javascript\r\n             * editor.hasContents()\r\n             * ```\r\n             */\r\n\r\n            /**\r\n             * 检查编辑区域中是否有内容，若包含参数tags中的节点类型，直接返回true\r\n             * @method  hasContents\r\n             * @param { Array } tags 传入数组判断时用到的节点类型\r\n             * @return { Boolean } 若文档中包含tags数组里对应的tag，返回true，否则返回false\r\n             * @example\r\n             * ```javascript\r\n             * editor.hasContents(['span']);\r\n             * ```\r\n             */\r\n            hasContents: function (tags) {\r\n                if (tags) {\r\n                    for (var i = 0, ci; ci = tags[i++];) {\r\n                        if (this.document.getElementsByTagName(ci).length > 0) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                }\r\n                if (!domUtils.isEmptyBlock(this.body)) {\r\n                    return true\r\n                }\r\n                //随时添加,定义的特殊标签如果存在，不能认为是空\r\n                tags = ['div'];\r\n                for (i = 0; ci = tags[i++];) {\r\n                    var nodes = domUtils.getElementsByTagName(this.document, ci);\r\n                    for (var n = 0, cn; cn = nodes[n++];) {\r\n                        if (domUtils.isCustomeNode(cn)) {\r\n                            return true;\r\n                        }\r\n                    }\r\n                }\r\n                return false;\r\n            },\r\n\r\n            /**\r\n             * 重置编辑器，可用来做多个tab使用同一个编辑器实例\r\n             * @method  reset\r\n             * @remind 此方法会清空编辑器内容，清空回退列表，会触发reset事件\r\n             * @example\r\n             * ```javascript\r\n             * editor.reset()\r\n             * ```\r\n             */\r\n            reset: function () {\r\n                this.fireEvent('reset');\r\n            },\r\n\r\n            /**\r\n             * 设置当前编辑区域可以编辑\r\n             * @method setEnabled\r\n             * @example\r\n             * ```javascript\r\n             * editor.setEnabled()\r\n             * ```\r\n             */\r\n            setEnabled: function () {\r\n                var me = this, range;\r\n                if (me.body.contentEditable == 'false') {\r\n                    me.body.contentEditable = true;\r\n                    range = me.selection.getRange();\r\n                    //有可能内容丢失了\r\n                    try {\r\n                        range.moveToBookmark(me.lastBk);\r\n                        delete me.lastBk\r\n                    } catch (e) {\r\n                        range.setStartAtFirst(me.body).collapse(true)\r\n                    }\r\n                    range.select(true);\r\n                    if (me.bkqueryCommandState) {\r\n                        me.queryCommandState = me.bkqueryCommandState;\r\n                        delete me.bkqueryCommandState;\r\n                    }\r\n                    if (me.bkqueryCommandValue) {\r\n                        me.queryCommandValue = me.bkqueryCommandValue;\r\n                        delete me.bkqueryCommandValue;\r\n                    }\r\n                    me.fireEvent('selectionchange');\r\n                }\r\n            },\r\n            enable: function () {\r\n                return this.setEnabled();\r\n            },\r\n\r\n            /** 设置当前编辑区域不可编辑\r\n             * @method setDisabled\r\n             */\r\n\r\n            /** 设置当前编辑区域不可编辑,except中的命令除外\r\n             * @method setDisabled\r\n             * @param { String } except 例外命令的字符串\r\n             * @remind 即使设置了disable，此处配置的例外命令仍然可以执行\r\n             * @example\r\n             * ```javascript\r\n             * editor.setDisabled('bold'); //禁用工具栏中除加粗之外的所有功能\r\n             * ```\r\n             */\r\n\r\n            /** 设置当前编辑区域不可编辑,except中的命令除外\r\n             * @method setDisabled\r\n             * @param { Array } except 例外命令的字符串数组，数组中的命令仍然可以执行\r\n             * @remind 即使设置了disable，此处配置的例外命令仍然可以执行\r\n             * @example\r\n             * ```javascript\r\n             * editor.setDisabled(['bold','insertimage']); //禁用工具栏中除加粗和插入图片之外的所有功能\r\n             * ```\r\n             */\r\n            setDisabled: function (except) {\r\n                var me = this;\r\n                except = except ? utils.isArray(except) ? except : [except] : [];\r\n                if (me.body.contentEditable == 'true') {\r\n                    if (!me.lastBk) {\r\n                        me.lastBk = me.selection.getRange().createBookmark(true);\r\n                    }\r\n                    me.body.contentEditable = false;\r\n                    me.bkqueryCommandState = me.queryCommandState;\r\n                    me.bkqueryCommandValue = me.queryCommandValue;\r\n                    me.queryCommandState = function (type) {\r\n                        if (utils.indexOf(except, type) != -1) {\r\n                            return me.bkqueryCommandState.apply(me, arguments);\r\n                        }\r\n                        return -1;\r\n                    };\r\n                    me.queryCommandValue = function (type) {\r\n                        if (utils.indexOf(except, type) != -1) {\r\n                            return me.bkqueryCommandValue.apply(me, arguments);\r\n                        }\r\n                        return null;\r\n                    };\r\n                    me.fireEvent('selectionchange');\r\n                }\r\n            },\r\n            disable: function (except) {\r\n                return this.setDisabled(except);\r\n            },\r\n\r\n            /**\r\n             * 设置默认内容\r\n             * @method _setDefaultContent\r\n             * @private\r\n             * @param  { String } cont 要存入的内容\r\n             */\r\n            _setDefaultContent: function () {\r\n                function clear() {\r\n                    var me = this;\r\n                    if (me.document.getElementById('initContent')) {\r\n                        me.body.innerHTML = '<p>' + (ie ? '' : '<br/>') + '</p>';\r\n                        me.removeListener('firstBeforeExecCommand focus', clear);\r\n                        setTimeout(function () {\r\n                            me.focus();\r\n                            me._selectionChange();\r\n                        }, 0)\r\n                    }\r\n                }\r\n\r\n                return function (cont) {\r\n                    var me = this;\r\n                    me.body.innerHTML = '<p id=\"initContent\">' + cont + '</p>';\r\n\r\n                    me.addListener('firstBeforeExecCommand focus', clear);\r\n                }\r\n            }(),\r\n\r\n            /**\r\n             * 显示编辑器\r\n             * @method setShow\r\n             * @example\r\n             * ```javascript\r\n             * editor.setShow()\r\n             * ```\r\n             */\r\n            setShow: function () {\r\n                var me = this, range = me.selection.getRange();\r\n                if (me.container.style.display == 'none') {\r\n                    //有可能内容丢失了\r\n                    try {\r\n                        range.moveToBookmark(me.lastBk);\r\n                        delete me.lastBk\r\n                    } catch (e) {\r\n                        range.setStartAtFirst(me.body).collapse(true)\r\n                    }\r\n                    //ie下focus实效，所以做了个延迟\r\n                    setTimeout(function () {\r\n                        range.select(true);\r\n                    }, 100);\r\n                    me.container.style.display = '';\r\n                }\r\n\r\n            },\r\n            show: function () {\r\n                return this.setShow();\r\n            },\r\n            /**\r\n             * 隐藏编辑器\r\n             * @method setHide\r\n             * @example\r\n             * ```javascript\r\n             * editor.setHide()\r\n             * ```\r\n             */\r\n            setHide: function () {\r\n                var me = this;\r\n                if (!me.lastBk) {\r\n                    me.lastBk = me.selection.getRange().createBookmark(true);\r\n                }\r\n                me.container.style.display = 'none'\r\n            },\r\n            hide: function () {\r\n                return this.setHide();\r\n            },\r\n\r\n            /**\r\n             * 根据指定的路径，获取对应的语言资源\r\n             * @method getLang\r\n             * @param { String } path 路径根据的是lang目录下的语言文件的路径结构\r\n             * @return { Object | String } 根据路径返回语言资源的Json格式对象或者语言字符串\r\n             * @example\r\n             * ```javascript\r\n             * editor.getLang('contextMenu.delete'); //如果当前是中文，那返回是的是'删除'\r\n             * ```\r\n             */\r\n            getLang: function (path) {\r\n                // console.log(path,this.options.lang,UE.I18N,11111111);\r\n                var lang = UE.I18N[this.options.lang];\r\n                if (!lang) {\r\n                    throw Error(\"not import language file\");\r\n                }\r\n                path = (path || \"\").split(\".\");\r\n                for (var i = 0, ci; ci = path[i++];) {\r\n                    lang = lang[ci];\r\n                    if (!lang) break;\r\n                }\r\n                //console.log(path,lang,444444444444);\r\n                return lang;\r\n            },\r\n\r\n            /**\r\n             * 计算编辑器html内容字符串的长度\r\n             * @method  getContentLength\r\n             * @return { Number } 返回计算的长度\r\n             * @example\r\n             * ```javascript\r\n             * //编辑器html内容<p><strong>132</strong></p>\r\n             * editor.getContentLength() //返回27\r\n             * ```\r\n             */\r\n            /**\r\n             * 计算编辑器当前纯文本内容的长度\r\n             * @method  getContentLength\r\n             * @param { Boolean } ingoneHtml 传入true时，只按照纯文本来计算\r\n             * @return { Number } 返回计算的长度，内容中有hr/img/iframe标签，长度加1\r\n             * @example\r\n             * ```javascript\r\n             * //编辑器html内容<p><strong>132</strong></p>\r\n             * editor.getContentLength() //返回3\r\n             * ```\r\n             */\r\n            getContentLength: function (ingoneHtml, tagNames) {\r\n                var count = this.getContent(false, false, true).length;\r\n                if (ingoneHtml) {\r\n                    tagNames = (tagNames || []).concat(['hr', 'img', 'iframe']);\r\n                    count = this.getContentTxt().replace(/[\\t\\r\\n]+/g, '').length;\r\n                    for (var i = 0, ci; ci = tagNames[i++];) {\r\n                        count += this.document.getElementsByTagName(ci).length;\r\n                    }\r\n                }\r\n                return count;\r\n            },\r\n\r\n            /**\r\n             * 注册输入过滤规则\r\n             * @method  addInputRule\r\n             * @param { Function } rule 要添加的过滤规则\r\n             * @example\r\n             * ```javascript\r\n             * editor.addInputRule(function(root){\r\n             *   $.each(root.getNodesByTagName('div'),function(i,node){\r\n             *       node.tagName=\"p\";\r\n             *   });\r\n             * });\r\n             * ```\r\n             */\r\n            addInputRule: function (rule) {\r\n                this.inputRules.push(rule);\r\n            },\r\n\r\n            /**\r\n             * 执行注册的过滤规则\r\n             * @method  filterInputRule\r\n             * @param { UE.uNode } root 要过滤的uNode节点\r\n             * @remind 执行editor.setContent方法和执行'inserthtml'命令后，会运行该过滤函数\r\n             * @example\r\n             * ```javascript\r\n             * editor.filterInputRule(editor.body);\r\n             * ```\r\n             * @see UE.Editor:addInputRule\r\n             */\r\n            filterInputRule: function (root) {\r\n                for (var i = 0, ci; ci = this.inputRules[i++];) {\r\n                    ci.call(this, root)\r\n                }\r\n            },\r\n\r\n            /**\r\n             * 注册输出过滤规则\r\n             * @method  addOutputRule\r\n             * @param { Function } rule 要添加的过滤规则\r\n             * @example\r\n             * ```javascript\r\n             * editor.addOutputRule(function(root){\r\n             *   $.each(root.getNodesByTagName('p'),function(i,node){\r\n             *       node.tagName=\"div\";\r\n             *   });\r\n             * });\r\n             * ```\r\n             */\r\n            addOutputRule: function (rule) {\r\n                this.outputRules.push(rule)\r\n            },\r\n\r\n            /**\r\n             * 根据输出过滤规则，过滤编辑器内容\r\n             * @method  filterOutputRule\r\n             * @remind 执行editor.getContent方法的时候，会先运行该过滤函数\r\n             * @param { UE.uNode } root 要过滤的uNode节点\r\n             * @example\r\n             * ```javascript\r\n             * editor.filterOutputRule(editor.body);\r\n             * ```\r\n             * @see UE.Editor:addOutputRule\r\n             */\r\n            filterOutputRule: function (root) {\r\n                for (var i = 0, ci; ci = this.outputRules[i++];) {\r\n                    ci.call(this, root)\r\n                }\r\n            },\r\n\r\n            /**\r\n             * 根据action名称获取请求的路径\r\n             * @method  getActionUrl\r\n             * @remind 假如没有设置serverUrl,会根据imageUrl设置默认的controller路径\r\n             * @param { String } action action名称\r\n             * @example\r\n             * ```javascript\r\n             * editor.getActionUrl('config'); //返回 \"/ueditor/php/controller.php?action=config\"\r\n             * editor.getActionUrl('image'); //返回 \"/ueditor/php/controller.php?action=uplaodimage\"\r\n             * editor.getActionUrl('scrawl'); //返回 \"/ueditor/php/controller.php?action=uplaodscrawl\"\r\n             * editor.getActionUrl('imageManager'); //返回 \"/ueditor/php/controller.php?action=listimage\"\r\n             * ```\r\n             */\r\n            getActionUrl: function (action) {\r\n                var actionName = this.getOpt(action) || action,\r\n                    imageUrl = this.getOpt('imageUrl'),\r\n                    serverUrl = this.getOpt('serverUrl');\r\n\r\n                if (!serverUrl && imageUrl) {\r\n                    serverUrl = imageUrl.replace(/^(.*[\\/]).+([\\.].+)$/, '$1controller$2');\r\n                }\r\n                if (action == 'uploadimage' || action == 'uploadscrawl' || action == 'uploadimage') {\r\n                    return '/goodstaxiAdmin/imagecs/uploadImage';\r\n                }/* else if (action == 'uploadvideo') {\r\n                return '/goodstaxiAdmin/imagecs/uploadImage';\r\n            } else {\r\n                return this._bkGetActionUrl.call(this, action);\r\n            }*/\r\n                if (serverUrl) {\r\n                    serverUrl = serverUrl + (serverUrl.indexOf('?') == -1 ? '?' : '&') + 'action=' + (actionName || '');\r\n                    return utils.formatUrl(serverUrl);\r\n                } else {\r\n                    return '';\r\n                }\r\n            }\r\n        };\r\n        utils.inherits(Editor, EventBase);\r\n    })();\r\n\r\n\r\n    // core/Editor.defaultoptions.js\r\n    //维护编辑器一下默认的不在插件中的配置项\r\n    UE.Editor.defaultOptions = function (editor) {\r\n\r\n        var _url = editor.options.UEDITOR_HOME_URL;\r\n        return {\r\n            isShow: true,\r\n            initialContent: '',\r\n            initialStyle: '',\r\n            autoClearinitialContent: false,\r\n            iframeCssUrl: iframeStyleSrc,\r\n            textarea: 'editorValue',\r\n            focus: false,\r\n            focusInEnd: true,\r\n            autoClearEmptyNode: true,\r\n            fullscreen: false,\r\n            readonly: false,\r\n            zIndex: 999,\r\n            imagePopup: true,\r\n            enterTag: 'p',\r\n            customDomain: false,\r\n            lang: 'zh-cn',\r\n            langPath: _url + 'lang/',\r\n            theme: 'default',\r\n            themePath: _url + 'themes/',\r\n            allHtmlEnabled: false,\r\n            scaleEnabled: false,\r\n            tableNativeEditInFF: false,\r\n            autoSyncData: true,\r\n            fileNameFormat: '{time}{rand:6}'\r\n        }\r\n    };\r\n\r\n    // core/loadconfig.js\r\n    (function () {\r\n\r\n        UE.Editor.prototype.loadServerConfig = function () {\r\n            var me = this;\r\n            setTimeout(function () {\r\n                try {\r\n                    me.options.imageUrl && me.setOpt('serverUrl', me.options.imageUrl.replace(/^(.*[\\/]).+([\\.].+)$/, '$1controller$2'));\r\n\r\n                    var configUrl = me.getActionUrl('config'),\r\n                        isJsonp = utils.isCrossDomainUrl(configUrl);\r\n\r\n                    /* 发出ajax请求 */\r\n                    me._serverConfigLoaded = false;\r\n                    // console.log(configUrl,999999999999999999);\r\n                    configUrl && UE.ajax.request(configUrl, {\r\n                        'method': 'GET',\r\n                        'dataType': isJsonp ? 'jsonp' : '',\r\n                        'onsuccess': function (r) {\r\n                            try {\r\n                                var config = isJsonp ? r : eval(\"(\" + r.responseText + \")\");\r\n                                utils.extend(me.options, config);\r\n                                me.fireEvent('serverConfigLoaded');\r\n                                me._serverConfigLoaded = true;\r\n                            } catch (e) {\r\n                                // console.log(r,1111111111111);\r\n                                showErrorMsg(me.getLang('loadconfigFormatError'));\r\n                            }\r\n                        },\r\n                        'onerror': function () {\r\n                            // console.log(2222222222222);\r\n                            showErrorMsg(me.getLang('loadconfigHttpError'));\r\n                        }\r\n                    });\r\n                } catch (e) {\r\n                    // console.log(3333333333333333333);\r\n                    showErrorMsg(me.getLang('loadconfigError'));\r\n                }\r\n            });\r\n\r\n            function showErrorMsg(msg) {\r\n                console && console.error(msg);\r\n                //me.fireEvent('showMessage', {\r\n                //    'title': msg,\r\n                //    'type': 'error'\r\n                //});\r\n            }\r\n        };\r\n\r\n        UE.Editor.prototype.isServerConfigLoaded = function () {\r\n            var me = this;\r\n            return me._serverConfigLoaded || false;\r\n        };\r\n\r\n        UE.Editor.prototype.afterConfigReady = function (handler) {\r\n            if (!handler || !utils.isFunction(handler)) return;\r\n            var me = this;\r\n            var readyHandler = function () {\r\n                handler.apply(me, arguments);\r\n                me.removeListener('serverConfigLoaded', readyHandler);\r\n            };\r\n\r\n            if (me.isServerConfigLoaded()) {\r\n                handler.call(me, 'serverConfigLoaded');\r\n            } else {\r\n                me.addListener('serverConfigLoaded', readyHandler);\r\n            }\r\n        };\r\n\r\n    })();\r\n\r\n\r\n    // core/ajax.js\r\n    /**\r\n     * @file\r\n     * @module UE.ajax\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * 提供对ajax请求的支持\r\n     * @module UE.ajax\r\n     */\r\n    UE.ajax = function () {\r\n\r\n        //创建一个ajaxRequest对象\r\n        var fnStr = 'XMLHttpRequest()';\r\n        try {\r\n            new ActiveXObject(\"Msxml2.XMLHTTP\");\r\n            fnStr = 'ActiveXObject(\\'Msxml2.XMLHTTP\\')';\r\n        } catch (e) {\r\n            try {\r\n                new ActiveXObject(\"Microsoft.XMLHTTP\");\r\n                fnStr = 'ActiveXObject(\\'Microsoft.XMLHTTP\\')'\r\n            } catch (e) {\r\n            }\r\n        }\r\n        var creatAjaxRequest = new Function('return new ' + fnStr);\r\n\r\n\r\n        /**\r\n         * 将json参数转化成适合ajax提交的参数列表\r\n         * @param json\r\n         */\r\n        function json2str(json) {\r\n            var strArr = [];\r\n            for (var i in json) {\r\n                //忽略默认的几个参数\r\n                if (i == \"method\" || i == \"timeout\" || i == \"async\" || i == \"dataType\" || i == \"callback\") continue;\r\n                //忽略控制\r\n                if (json[i] == undefined || json[i] == null) continue;\r\n                //传递过来的对象和函数不在提交之列\r\n                if (!((typeof json[i]).toLowerCase() == \"function\" || (typeof json[i]).toLowerCase() == \"object\")) {\r\n                    strArr.push(encodeURIComponent(i) + \"=\" + encodeURIComponent(json[i]));\r\n                } else if (utils.isArray(json[i])) {\r\n                    //支持传数组内容\r\n                    for (var j = 0; j < json[i].length; j++) {\r\n                        strArr.push(encodeURIComponent(i) + \"[]=\" + encodeURIComponent(json[i][j]));\r\n                    }\r\n                }\r\n            }\r\n            return strArr.join(\"&\");\r\n        }\r\n\r\n        function doAjax(url, ajaxOptions) {\r\n            var xhr = creatAjaxRequest(),\r\n                //是否超时\r\n                timeIsOut = false,\r\n                //默认参数\r\n                defaultAjaxOptions = {\r\n                    method: \"POST\",\r\n                    timeout: 5000,\r\n                    async: true,\r\n                    data: {},//需要传递对象的话只能覆盖\r\n                    onsuccess: function () {\r\n                    },\r\n                    onerror: function () {\r\n                    }\r\n                };\r\n\r\n            if (typeof url === \"object\") {\r\n                ajaxOptions = url;\r\n                url = ajaxOptions.url;\r\n            }\r\n            if (!xhr || !url) return;\r\n            var ajaxOpts = ajaxOptions ? utils.extend(defaultAjaxOptions, ajaxOptions) : defaultAjaxOptions;\r\n\r\n            var submitStr = json2str(ajaxOpts);  // { name:\"Jim\",city:\"Beijing\" } --> \"name=Jim&city=Beijing\"\r\n            //如果用户直接通过data参数传递json对象过来，则也要将此json对象转化为字符串\r\n            if (!utils.isEmptyObject(ajaxOpts.data)) {\r\n                submitStr += (submitStr ? \"&\" : \"\") + json2str(ajaxOpts.data);\r\n            }\r\n            //超时检测\r\n            var timerID = setTimeout(function () {\r\n                if (xhr.readyState != 4) {\r\n                    timeIsOut = true;\r\n                    xhr.abort();\r\n                    clearTimeout(timerID);\r\n                }\r\n            }, ajaxOpts.timeout);\r\n\r\n            var method = ajaxOpts.method.toUpperCase();\r\n            var str = url + (url.indexOf(\"?\") == -1 ? \"?\" : \"&\") + (method == \"POST\" ? \"\" : submitStr + \"&noCache=\" + +new Date);\r\n            // console.log(str,223333333333333);\r\n            xhr.open(method, str, ajaxOpts.async);\r\n            xhr.onreadystatechange = function () {\r\n                if (xhr.readyState == 4) {\r\n                    if (!timeIsOut && xhr.status == 200) {\r\n                        ajaxOpts.onsuccess(xhr);\r\n                    } else {\r\n                        ajaxOpts.onerror(xhr);\r\n                    }\r\n                }\r\n            };\r\n            if (method == \"POST\") {\r\n                xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');\r\n                xhr.send(submitStr);\r\n            } else {\r\n                xhr.send(null);\r\n            }\r\n        }\r\n\r\n        function doJsonp(url, opts) {\r\n\r\n            var successhandler = opts.onsuccess || function () { },\r\n                scr = document.createElement('SCRIPT'),\r\n                options = opts || {},\r\n                charset = options['charset'],\r\n                callbackField = options['jsonp'] || 'callback',\r\n                callbackFnName,\r\n                timeOut = options['timeOut'] || 0,\r\n                timer,\r\n                reg = new RegExp('(\\\\?|&)' + callbackField + '=([^&]*)'),\r\n                matches;\r\n\r\n            if (utils.isFunction(successhandler)) {\r\n                callbackFnName = 'bd__editor__' + Math.floor(Math.random() * 2147483648).toString(36);\r\n                window[callbackFnName] = getCallBack(0);\r\n            } else if (utils.isString(successhandler)) {\r\n                callbackFnName = successhandler;\r\n            } else {\r\n                if (matches = reg.exec(url)) {\r\n                    callbackFnName = matches[2];\r\n                }\r\n            }\r\n\r\n            url = url.replace(reg, '\\x241' + callbackField + '=' + callbackFnName);\r\n\r\n            if (url.search(reg) < 0) {\r\n                url += (url.indexOf('?') < 0 ? '?' : '&') + callbackField + '=' + callbackFnName;\r\n            }\r\n\r\n            var queryStr = json2str(opts);  // { name:\"Jim\",city:\"Beijing\" } --> \"name=Jim&city=Beijing\"\r\n            //如果用户直接通过data参数传递json对象过来，则也要将此json对象转化为字符串\r\n            if (!utils.isEmptyObject(opts.data)) {\r\n                queryStr += (queryStr ? \"&\" : \"\") + json2str(opts.data);\r\n            }\r\n            if (queryStr) {\r\n                url = url.replace(/\\?/, '?' + queryStr + '&');\r\n            }\r\n\r\n            scr.onerror = getCallBack(1);\r\n            if (timeOut) {\r\n                timer = setTimeout(getCallBack(1), timeOut);\r\n            }\r\n            createScriptTag(scr, url, charset);\r\n\r\n            function createScriptTag(scr, url, charset) {\r\n                scr.setAttribute('type', 'text/javascript');\r\n                scr.setAttribute('defer', 'defer');\r\n                charset && scr.setAttribute('charset', charset);\r\n                scr.setAttribute('src', url);\r\n                document.getElementsByTagName('head')[0].appendChild(scr);\r\n            }\r\n\r\n            function getCallBack(onTimeOut) {\r\n                return function () {\r\n                    try {\r\n                        if (onTimeOut) {\r\n                            options.onerror && options.onerror();\r\n                        } else {\r\n                            try {\r\n                                clearTimeout(timer);\r\n                                successhandler.apply(window, arguments);\r\n                            } catch (e) { }\r\n                        }\r\n                    } catch (exception) {\r\n                        options.onerror && options.onerror.call(window, exception);\r\n                    } finally {\r\n                        options.oncomplete && options.oncomplete.apply(window, arguments);\r\n                        scr.parentNode && scr.parentNode.removeChild(scr);\r\n                        window[callbackFnName] = null;\r\n                        try {\r\n                            delete window[callbackFnName];\r\n                        } catch (e) { }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        return {\r\n            /**\r\n             * 根据给定的参数项，向指定的url发起一个ajax请求。 ajax请求完成后，会根据请求结果调用相应回调： 如果请求\r\n             * 成功， 则调用onsuccess回调， 失败则调用 onerror 回调\r\n             * @method request\r\n             * @param { URLString } url ajax请求的url地址\r\n             * @param { Object } ajaxOptions ajax请求选项的键值对，支持的选项如下：\r\n             * @example\r\n             * ```javascript\r\n             * //向sayhello.php发起一个异步的Ajax GET请求, 请求超时时间为10s， 请求完成后执行相应的回调。\r\n             * UE.ajax.requeset( 'sayhello.php', {\r\n             *\r\n             *     //请求方法。可选值： 'GET', 'POST'，默认值是'POST'\r\n             *     method: 'GET',\r\n             *\r\n             *     //超时时间。 默认为5000， 单位是ms\r\n             *     timeout: 10000,\r\n             *\r\n             *     //是否是异步请求。 true为异步请求， false为同步请求\r\n             *     async: true,\r\n             *\r\n             *     //请求携带的数据。如果请求为GET请求， data会经过stringify后附加到请求url之后。\r\n             *     data: {\r\n             *         name: 'ueditor'\r\n             *     },\r\n             *\r\n             *     //请求成功后的回调， 该回调接受当前的XMLHttpRequest对象作为参数。\r\n             *     onsuccess: function ( xhr ) {\r\n             *         console.log( xhr.responseText );\r\n             *     },\r\n             *\r\n             *     //请求失败或者超时后的回调。\r\n             *     onerror: function ( xhr ) {\r\n             *          alert( 'Ajax请求失败' );\r\n             *     }\r\n             *\r\n             * } );\r\n             * ```\r\n             */\r\n\r\n            /**\r\n             * 根据给定的参数项发起一个ajax请求， 参数项里必须包含一个url地址。 ajax请求完成后，会根据请求结果调用相应回调： 如果请求\r\n             * 成功， 则调用onsuccess回调， 失败则调用 onerror 回调。\r\n             * @method request\r\n             * @warning 如果在参数项里未提供一个key为“url”的地址值，则该请求将直接退出。\r\n             * @param { Object } ajaxOptions ajax请求选项的键值对，支持的选项如下：\r\n             * @example\r\n             * ```javascript\r\n             *\r\n             * //向sayhello.php发起一个异步的Ajax POST请求, 请求超时时间为5s， 请求完成后不执行任何回调。\r\n             * UE.ajax.requeset( 'sayhello.php', {\r\n             *\r\n             *     //请求的地址， 该项是必须的。\r\n             *     url: 'sayhello.php'\r\n             *\r\n             * } );\r\n             * ```\r\n             */\r\n            request: function (url, opts) {\r\n                if (opts && opts.dataType == 'jsonp') {\r\n                    doJsonp(url, opts);\r\n                } else {\r\n                    doAjax(url, opts);\r\n                }\r\n            },\r\n            getJSONP: function (url, data, fn) {\r\n                var opts = {\r\n                    'data': data,\r\n                    'oncomplete': fn\r\n                };\r\n                doJsonp(url, opts);\r\n            }\r\n        };\r\n\r\n\r\n    }();\r\n\r\n\r\n    // core/filterword.js\r\n    /**\r\n     * UE过滤word的静态方法\r\n     * @file\r\n     */\r\n\r\n    /**\r\n     * UEditor公用空间，UEditor所有的功能都挂载在该空间下\r\n     * @module UE\r\n     */\r\n\r\n\r\n    /**\r\n     * 根据传入html字符串过滤word\r\n     * @module UE\r\n     * @since 1.2.6.1\r\n     * @method filterWord\r\n     * @param { String } html html字符串\r\n     * @return { String } 已过滤后的结果字符串\r\n     * @example\r\n     * ```javascript\r\n     * UE.filterWord(html);\r\n     * ```\r\n     */\r\n    var filterWord = UE.filterWord = function () {\r\n\r\n        //是否是word过来的内容\r\n        function isWordDocument(str) {\r\n            return /(class=\"?Mso|style=\"[^\"]*\\bmso\\-|w:WordDocument|<(v|o):|lang=)/ig.test(str);\r\n        }\r\n        //去掉小数\r\n        function transUnit(v) {\r\n            v = v.replace(/[\\d.]+\\w+/g, function (m) {\r\n                return utils.transUnitToPx(m);\r\n            });\r\n            return v;\r\n        }\r\n\r\n        function filterPasteWord(str) {\r\n            return str.replace(/[\\t\\r\\n]+/g, ' ')\r\n                .replace(/<!--[\\s\\S]*?-->/ig, \"\")\r\n                //转换图片\r\n                .replace(/<v:shape [^>]*>[\\s\\S]*?.<\\/v:shape>/gi, function (str) {\r\n                    //opera能自己解析出image所这里直接返回空\r\n                    if (browser.opera) {\r\n                        return '';\r\n                    }\r\n                    try {\r\n                        //有可能是bitmap占为图，无用，直接过滤掉，主要体现在粘贴excel表格中\r\n                        if (/Bitmap/i.test(str)) {\r\n                            return '';\r\n                        }\r\n                        var width = str.match(/width:([ \\d.]*p[tx])/i)[1],\r\n                            height = str.match(/height:([ \\d.]*p[tx])/i)[1],\r\n                            src = str.match(/src=\\s*\"([^\"]*)\"/i)[1];\r\n                        return '<img width=\"' + transUnit(width) + '\" height=\"' + transUnit(height) + '\" src=\"' + src + '\" />';\r\n                    } catch (e) {\r\n                        return '';\r\n                    }\r\n                })\r\n                //针对wps添加的多余标签处理\r\n                .replace(/<\\/?div[^>]*>/g, '')\r\n                //去掉多余的属性\r\n                .replace(/v:\\w+=([\"']?)[^'\"]+\\1/g, '')\r\n                .replace(/<(!|script[^>]*>.*?<\\/script(?=[>\\s])|\\/?(\\?xml(:\\w+)?|xml|meta|link|style|\\w+:\\w+)(?=[\\s\\/>]))[^>]*>/gi, \"\")\r\n                .replace(/<p [^>]*class=\"?MsoHeading\"?[^>]*>(.*?)<\\/p>/gi, \"<p><strong>$1</strong></p>\")\r\n                //去掉多余的属性\r\n                .replace(/\\s+(class|lang|align)\\s*=\\s*(['\"]?)([\\w-]+)\\2/ig, function (str, name, marks, val) {\r\n                    //保留list的标示\r\n                    return name == 'class' && val == 'MsoListParagraph' ? str : ''\r\n                })\r\n                //清除多余的font/span不能匹配&nbsp;有可能是空格\r\n                .replace(/<(font|span)[^>]*>(\\s*)<\\/\\1>/gi, function (a, b, c) {\r\n                    return c.replace(/[\\t\\r\\n ]+/g, ' ')\r\n                })\r\n                //处理style的问题\r\n                .replace(/(<[a-z][^>]*)\\sstyle=([\"'])([^\\2]*?)\\2/gi, function (str, tag, tmp, style) {\r\n                    var n = [],\r\n                        s = style.replace(/^\\s+|\\s+$/, '')\r\n                            .replace(/&#39;/g, '\\'')\r\n                            .replace(/&quot;/gi, \"'\")\r\n                            .replace(/[\\d.]+(cm|pt)/g, function (str) {\r\n                                return utils.transUnitToPx(str)\r\n                            })\r\n                            .split(/;\\s*/g);\r\n\r\n                    for (var i = 0, v; v = s[i]; i++) {\r\n\r\n                        var name, value,\r\n                            parts = v.split(\":\");\r\n\r\n                        if (parts.length == 2) {\r\n                            name = parts[0].toLowerCase();\r\n                            value = parts[1].toLowerCase();\r\n                            if (/^(background)\\w*/.test(name) && value.replace(/(initial|\\s)/g, '').length == 0\r\n                                ||\r\n                                /^(margin)\\w*/.test(name) && /^0\\w+$/.test(value)\r\n                            ) {\r\n                                continue;\r\n                            }\r\n\r\n                            switch (name) {\r\n                                case \"mso-padding-alt\":\r\n                                case \"mso-padding-top-alt\":\r\n                                case \"mso-padding-right-alt\":\r\n                                case \"mso-padding-bottom-alt\":\r\n                                case \"mso-padding-left-alt\":\r\n                                case \"mso-margin-alt\":\r\n                                case \"mso-margin-top-alt\":\r\n                                case \"mso-margin-right-alt\":\r\n                                case \"mso-margin-bottom-alt\":\r\n                                case \"mso-margin-left-alt\":\r\n                                //ie下会出现挤到一起的情况\r\n                                //case \"mso-table-layout-alt\":\r\n                                case \"mso-height\":\r\n                                case \"mso-width\":\r\n                                case \"mso-vertical-align-alt\":\r\n                                    //trace:1819 ff下会解析出padding在table上\r\n                                    if (!/<table/.test(tag))\r\n                                        n[i] = name.replace(/^mso-|-alt$/g, \"\") + \":\" + transUnit(value);\r\n                                    continue;\r\n                                case \"horiz-align\":\r\n                                    n[i] = \"text-align:\" + value;\r\n                                    continue;\r\n\r\n                                case \"vert-align\":\r\n                                    n[i] = \"vertical-align:\" + value;\r\n                                    continue;\r\n\r\n                                case \"font-color\":\r\n                                case \"mso-foreground\":\r\n                                    n[i] = \"color:\" + value;\r\n                                    continue;\r\n\r\n                                case \"mso-background\":\r\n                                case \"mso-highlight\":\r\n                                    n[i] = \"background:\" + value;\r\n                                    continue;\r\n\r\n                                case \"mso-default-height\":\r\n                                    n[i] = \"min-height:\" + transUnit(value);\r\n                                    continue;\r\n\r\n                                case \"mso-default-width\":\r\n                                    n[i] = \"min-width:\" + transUnit(value);\r\n                                    continue;\r\n\r\n                                case \"mso-padding-between-alt\":\r\n                                    n[i] = \"border-collapse:separate;border-spacing:\" + transUnit(value);\r\n                                    continue;\r\n\r\n                                case \"text-line-through\":\r\n                                    if ((value == \"single\") || (value == \"double\")) {\r\n                                        n[i] = \"text-decoration:line-through\";\r\n                                    }\r\n                                    continue;\r\n                                case \"mso-zero-height\":\r\n                                    if (value == \"yes\") {\r\n                                        n[i] = \"display:none\";\r\n                                    }\r\n                                    continue;\r\n                                //                                case 'background':\r\n                                //                                    break;\r\n                                case 'margin':\r\n                                    if (!/[1-9]/.test(value)) {\r\n                                        continue;\r\n                                    }\r\n\r\n                            }\r\n\r\n                            if (/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(name)\r\n                                ||\r\n                                /text\\-indent|padding|margin/.test(name) && /\\-[\\d.]+/.test(value)\r\n                            ) {\r\n                                continue;\r\n                            }\r\n\r\n                            n[i] = name + \":\" + parts[1];\r\n                        }\r\n                    }\r\n                    return tag + (n.length ? ' style=\"' + n.join(';').replace(/;{2,}/g, ';') + '\"' : '');\r\n                })\r\n\r\n\r\n        }\r\n\r\n        return function (html) {\r\n            return (isWordDocument(html) ? filterPasteWord(html) : html);\r\n        };\r\n    }();\r\n\r\n    // core/node.js\r\n    /**\r\n     * 编辑器模拟的节点类\r\n     * @file\r\n     * @module UE\r\n     * @class uNode\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * UEditor公用空间，UEditor所有的功能都挂载在该空间下\r\n     * @unfile\r\n     * @module UE\r\n     */\r\n\r\n    (function () {\r\n\r\n        /**\r\n         * 编辑器模拟的节点类\r\n         * @unfile\r\n         * @module UE\r\n         * @class uNode\r\n         */\r\n\r\n        /**\r\n         * 通过一个键值对，创建一个uNode对象\r\n         * @constructor\r\n         * @param { Object } attr 传入要创建的uNode的初始属性\r\n         * @example\r\n         * ```javascript\r\n         * var node = new uNode({\r\n         *     type:'element',\r\n         *     tagName:'span',\r\n         *     attrs:{style:'font-size:14px;'}\r\n         * }\r\n         * ```\r\n         */\r\n        var uNode = UE.uNode = function (obj) {\r\n            this.type = obj.type;\r\n            this.data = obj.data;\r\n            this.tagName = obj.tagName;\r\n            this.parentNode = obj.parentNode;\r\n            this.attrs = obj.attrs || {};\r\n            this.children = obj.children;\r\n        };\r\n\r\n        var notTransAttrs = {\r\n            'href': 1,\r\n            'src': 1,\r\n            '_src': 1,\r\n            '_href': 1,\r\n            'cdata_data': 1\r\n        };\r\n\r\n        var notTransTagName = {\r\n            style: 1,\r\n            script: 1\r\n        };\r\n\r\n        var indentChar = '    ',\r\n            breakChar = '\\n';\r\n\r\n        function insertLine(arr, current, begin) {\r\n            arr.push(breakChar);\r\n            return current + (begin ? 1 : -1);\r\n        }\r\n\r\n        function insertIndent(arr, current) {\r\n            //插入缩进\r\n            for (var i = 0; i < current; i++) {\r\n                arr.push(indentChar);\r\n            }\r\n        }\r\n\r\n        //创建uNode的静态方法\r\n        //支持标签和html\r\n        uNode.createElement = function (html) {\r\n            if (/[<>]/.test(html)) {\r\n                return UE.htmlparser(html).children[0]\r\n            } else {\r\n                return new uNode({\r\n                    type: 'element',\r\n                    children: [],\r\n                    tagName: html\r\n                })\r\n            }\r\n        };\r\n        uNode.createText = function (data, noTrans) {\r\n            return new UE.uNode({\r\n                type: 'text',\r\n                'data': noTrans ? data : utils.unhtml(data || '')\r\n            })\r\n        };\r\n        function nodeToHtml(node, arr, formatter, current) {\r\n            switch (node.type) {\r\n                case 'root':\r\n                    for (var i = 0, ci; ci = node.children[i++];) {\r\n                        //插入新行\r\n                        if (formatter && ci.type == 'element' && !dtd.$inlineWithA[ci.tagName] && i > 1) {\r\n                            insertLine(arr, current, true);\r\n                            insertIndent(arr, current)\r\n                        }\r\n                        nodeToHtml(ci, arr, formatter, current)\r\n                    }\r\n                    break;\r\n                case 'text':\r\n                    isText(node, arr);\r\n                    break;\r\n                case 'element':\r\n                    isElement(node, arr, formatter, current);\r\n                    break;\r\n                case 'comment':\r\n                    isComment(node, arr, formatter);\r\n            }\r\n            return arr;\r\n        }\r\n\r\n        function isText(node, arr) {\r\n            if (node.parentNode.tagName == 'pre') {\r\n                //源码模式下输入html标签，不能做转换处理，直接输出\r\n                arr.push(node.data)\r\n            } else {\r\n                arr.push(notTransTagName[node.parentNode.tagName] ? utils.html(node.data) : node.data.replace(/[ ]{2}/g, ' &nbsp;'))\r\n            }\r\n\r\n        }\r\n\r\n        function isElement(node, arr, formatter, current) {\r\n            var attrhtml = '';\r\n            if (node.attrs) {\r\n                attrhtml = [];\r\n                var attrs = node.attrs;\r\n                for (var a in attrs) {\r\n                    //这里就针对\r\n                    //<p>'<img src='http://nsclick.baidu.com/u.gif?&asdf=\\\"sdf&asdfasdfs;asdf'></p>\r\n                    //这里边的\\\"做转换，要不用innerHTML直接被截断了，属性src\r\n                    //有可能做的不够\r\n                    attrhtml.push(a + (attrs[a] !== undefined ? '=\"' + (notTransAttrs[a] ? utils.html(attrs[a]).replace(/[\"]/g, function (a) {\r\n                        return '&quot;'\r\n                    }) : utils.unhtml(attrs[a])) + '\"' : ''))\r\n                }\r\n                attrhtml = attrhtml.join(' ');\r\n            }\r\n            arr.push('<' + node.tagName +\r\n                (attrhtml ? ' ' + attrhtml : '') +\r\n                (dtd.$empty[node.tagName] ? '\\/' : '') + '>'\r\n            );\r\n            //插入新行\r\n            if (formatter && !dtd.$inlineWithA[node.tagName] && node.tagName != 'pre') {\r\n                if (node.children && node.children.length) {\r\n                    current = insertLine(arr, current, true);\r\n                    insertIndent(arr, current)\r\n                }\r\n\r\n            }\r\n            if (node.children && node.children.length) {\r\n                for (var i = 0, ci; ci = node.children[i++];) {\r\n                    if (formatter && ci.type == 'element' && !dtd.$inlineWithA[ci.tagName] && i > 1) {\r\n                        insertLine(arr, current);\r\n                        insertIndent(arr, current)\r\n                    }\r\n                    nodeToHtml(ci, arr, formatter, current)\r\n                }\r\n            }\r\n            if (!dtd.$empty[node.tagName]) {\r\n                if (formatter && !dtd.$inlineWithA[node.tagName] && node.tagName != 'pre') {\r\n\r\n                    if (node.children && node.children.length) {\r\n                        current = insertLine(arr, current);\r\n                        insertIndent(arr, current)\r\n                    }\r\n                }\r\n                arr.push('<\\/' + node.tagName + '>');\r\n            }\r\n\r\n        }\r\n\r\n        function isComment(node, arr) {\r\n            arr.push('<!--' + node.data + '-->');\r\n        }\r\n\r\n        function getNodeById(root, id) {\r\n            var node;\r\n            if (root.type == 'element' && root.getAttr('id') == id) {\r\n                return root;\r\n            }\r\n            if (root.children && root.children.length) {\r\n                for (var i = 0, ci; ci = root.children[i++];) {\r\n                    if (node = getNodeById(ci, id)) {\r\n                        return node;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        function getNodesByTagName(node, tagName, arr) {\r\n            if (node.type == 'element' && node.tagName == tagName) {\r\n                arr.push(node);\r\n            }\r\n            if (node.children && node.children.length) {\r\n                for (var i = 0, ci; ci = node.children[i++];) {\r\n                    getNodesByTagName(ci, tagName, arr)\r\n                }\r\n            }\r\n        }\r\n        function nodeTraversal(root, fn) {\r\n            if (root.children && root.children.length) {\r\n                for (var i = 0, ci; ci = root.children[i];) {\r\n                    nodeTraversal(ci, fn);\r\n                    //ci被替换的情况，这里就不再走 fn了\r\n                    if (ci.parentNode) {\r\n                        if (ci.children && ci.children.length) {\r\n                            fn(ci)\r\n                        }\r\n                        if (ci.parentNode) i++\r\n                    }\r\n                }\r\n            } else {\r\n                fn(root)\r\n            }\r\n\r\n        }\r\n        uNode.prototype = {\r\n\r\n            /**\r\n             * 当前节点对象，转换成html文本\r\n             * @method toHtml\r\n             * @return { String } 返回转换后的html字符串\r\n             * @example\r\n             * ```javascript\r\n             * node.toHtml();\r\n             * ```\r\n             */\r\n\r\n            /**\r\n             * 当前节点对象，转换成html文本\r\n             * @method toHtml\r\n             * @param { Boolean } formatter 是否格式化返回值\r\n             * @return { String } 返回转换后的html字符串\r\n             * @example\r\n             * ```javascript\r\n             * node.toHtml( true );\r\n             * ```\r\n             */\r\n            toHtml: function (formatter) {\r\n                var arr = [];\r\n                nodeToHtml(this, arr, formatter, 0);\r\n                return arr.join('')\r\n            },\r\n\r\n            /**\r\n             * 获取节点的html内容\r\n             * @method innerHTML\r\n             * @warning 假如节点的type不是'element'，或节点的标签名称不在dtd列表里，直接返回当前节点\r\n             * @return { String } 返回节点的html内容\r\n             * @example\r\n             * ```javascript\r\n             * var htmlstr = node.innerHTML();\r\n             * ```\r\n             */\r\n\r\n            /**\r\n             * 设置节点的html内容\r\n             * @method innerHTML\r\n             * @warning 假如节点的type不是'element'，或节点的标签名称不在dtd列表里，直接返回当前节点\r\n             * @param { String } htmlstr 传入要设置的html内容\r\n             * @return { UE.uNode } 返回节点本身\r\n             * @example\r\n             * ```javascript\r\n             * node.innerHTML('<span>text</span>');\r\n             * ```\r\n             */\r\n            innerHTML: function (htmlstr) {\r\n                if (this.type != 'element' || dtd.$empty[this.tagName]) {\r\n                    return this;\r\n                }\r\n                if (utils.isString(htmlstr)) {\r\n                    if (this.children) {\r\n                        for (var i = 0, ci; ci = this.children[i++];) {\r\n                            ci.parentNode = null;\r\n                        }\r\n                    }\r\n                    this.children = [];\r\n                    var tmpRoot = UE.htmlparser(htmlstr);\r\n                    for (var i = 0, ci; ci = tmpRoot.children[i++];) {\r\n                        this.children.push(ci);\r\n                        ci.parentNode = this;\r\n                    }\r\n                    return this;\r\n                } else {\r\n                    var tmpRoot = new UE.uNode({\r\n                        type: 'root',\r\n                        children: this.children\r\n                    });\r\n                    return tmpRoot.toHtml();\r\n                }\r\n            },\r\n\r\n            /**\r\n             * 获取节点的纯文本内容\r\n             * @method innerText\r\n             * @warning 假如节点的type不是'element'，或节点的标签名称不在dtd列表里，直接返回当前节点\r\n             * @return { String } 返回节点的存文本内容\r\n             * @example\r\n             * ```javascript\r\n             * var textStr = node.innerText();\r\n             * ```\r\n             */\r\n\r\n            /**\r\n             * 设置节点的纯文本内容\r\n             * @method innerText\r\n             * @warning 假如节点的type不是'element'，或节点的标签名称不在dtd列表里，直接返回当前节点\r\n             * @param { String } textStr 传入要设置的文本内容\r\n             * @return { UE.uNode } 返回节点本身\r\n             * @example\r\n             * ```javascript\r\n             * node.innerText('<span>text</span>');\r\n             * ```\r\n             */\r\n            innerText: function (textStr, noTrans) {\r\n                if (this.type != 'element' || dtd.$empty[this.tagName]) {\r\n                    return this;\r\n                }\r\n                if (textStr) {\r\n                    if (this.children) {\r\n                        for (var i = 0, ci; ci = this.children[i++];) {\r\n                            ci.parentNode = null;\r\n                        }\r\n                    }\r\n                    this.children = [];\r\n                    this.appendChild(uNode.createText(textStr, noTrans));\r\n                    return this;\r\n                } else {\r\n                    return this.toHtml().replace(/<[^>]+>/g, '');\r\n                }\r\n            },\r\n\r\n            /**\r\n             * 获取当前对象的data属性\r\n             * @method getData\r\n             * @return { Object } 若节点的type值是elemenet，返回空字符串，否则返回节点的data属性\r\n             * @example\r\n             * ```javascript\r\n             * node.getData();\r\n             * ```\r\n             */\r\n            getData: function () {\r\n                if (this.type == 'element')\r\n                    return '';\r\n                return this.data\r\n            },\r\n\r\n            /**\r\n             * 获取当前节点下的第一个子节点\r\n             * @method firstChild\r\n             * @return { UE.uNode } 返回第一个子节点\r\n             * @example\r\n             * ```javascript\r\n             * node.firstChild(); //返回第一个子节点\r\n             * ```\r\n             */\r\n            firstChild: function () {\r\n                //            if (this.type != 'element' || dtd.$empty[this.tagName]) {\r\n                //                return this;\r\n                //            }\r\n                return this.children ? this.children[0] : null;\r\n            },\r\n\r\n            /**\r\n             * 获取当前节点下的最后一个子节点\r\n             * @method lastChild\r\n             * @return { UE.uNode } 返回最后一个子节点\r\n             * @example\r\n             * ```javascript\r\n             * node.lastChild(); //返回最后一个子节点\r\n             * ```\r\n             */\r\n            lastChild: function () {\r\n                //            if (this.type != 'element' || dtd.$empty[this.tagName] ) {\r\n                //                return this;\r\n                //            }\r\n                return this.children ? this.children[this.children.length - 1] : null;\r\n            },\r\n\r\n            /**\r\n             * 获取和当前节点有相同父亲节点的前一个节点\r\n             * @method previousSibling\r\n             * @return { UE.uNode } 返回前一个节点\r\n             * @example\r\n             * ```javascript\r\n             * node.children[2].previousSibling(); //返回子节点node.children[1]\r\n             * ```\r\n             */\r\n            previousSibling: function () {\r\n                var parent = this.parentNode;\r\n                for (var i = 0, ci; ci = parent.children[i]; i++) {\r\n                    if (ci === this) {\r\n                        return i == 0 ? null : parent.children[i - 1];\r\n                    }\r\n                }\r\n\r\n            },\r\n\r\n            /**\r\n             * 获取和当前节点有相同父亲节点的后一个节点\r\n             * @method nextSibling\r\n             * @return { UE.uNode } 返回后一个节点,找不到返回null\r\n             * @example\r\n             * ```javascript\r\n             * node.children[2].nextSibling(); //如果有，返回子节点node.children[3]\r\n             * ```\r\n             */\r\n            nextSibling: function () {\r\n                var parent = this.parentNode;\r\n                for (var i = 0, ci; ci = parent.children[i++];) {\r\n                    if (ci === this) {\r\n                        return parent.children[i];\r\n                    }\r\n                }\r\n            },\r\n\r\n            /**\r\n             * 用新的节点替换当前节点\r\n             * @method replaceChild\r\n             * @param { UE.uNode } target 要替换成该节点参数\r\n             * @param { UE.uNode } source 要被替换掉的节点\r\n             * @return { UE.uNode } 返回替换之后的节点对象\r\n             * @example\r\n             * ```javascript\r\n             * node.replaceChild(newNode, childNode); //用newNode替换childNode,childNode是node的子节点\r\n             * ```\r\n             */\r\n            replaceChild: function (target, source) {\r\n                if (this.children) {\r\n                    if (target.parentNode) {\r\n                        target.parentNode.removeChild(target);\r\n                    }\r\n                    for (var i = 0, ci; ci = this.children[i]; i++) {\r\n                        if (ci === source) {\r\n                            this.children.splice(i, 1, target);\r\n                            source.parentNode = null;\r\n                            target.parentNode = this;\r\n                            return target;\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n\r\n            /**\r\n             * 在节点的子节点列表最后位置插入一个节点\r\n             * @method appendChild\r\n             * @param { UE.uNode } node 要插入的节点\r\n             * @return { UE.uNode } 返回刚插入的子节点\r\n             * @example\r\n             * ```javascript\r\n             * node.appendChild( newNode ); //在node内插入子节点newNode\r\n             * ```\r\n             */\r\n            appendChild: function (node) {\r\n                if (this.type == 'root' || (this.type == 'element' && !dtd.$empty[this.tagName])) {\r\n                    if (!this.children) {\r\n                        this.children = []\r\n                    }\r\n                    if (node.parentNode) {\r\n                        node.parentNode.removeChild(node);\r\n                    }\r\n                    for (var i = 0, ci; ci = this.children[i]; i++) {\r\n                        if (ci === node) {\r\n                            this.children.splice(i, 1);\r\n                            break;\r\n                        }\r\n                    }\r\n                    this.children.push(node);\r\n                    node.parentNode = this;\r\n                    return node;\r\n                }\r\n\r\n\r\n            },\r\n\r\n            /**\r\n             * 在传入节点的前面插入一个节点\r\n             * @method insertBefore\r\n             * @param { UE.uNode } target 要插入的节点\r\n             * @param { UE.uNode } source 在该参数节点前面插入\r\n             * @return { UE.uNode } 返回刚插入的子节点\r\n             * @example\r\n             * ```javascript\r\n             * node.parentNode.insertBefore(newNode, node); //在node节点后面插入newNode\r\n             * ```\r\n             */\r\n            insertBefore: function (target, source) {\r\n                if (this.children) {\r\n                    if (target.parentNode) {\r\n                        target.parentNode.removeChild(target);\r\n                    }\r\n                    for (var i = 0, ci; ci = this.children[i]; i++) {\r\n                        if (ci === source) {\r\n                            this.children.splice(i, 0, target);\r\n                            target.parentNode = this;\r\n                            return target;\r\n                        }\r\n                    }\r\n\r\n                }\r\n            },\r\n\r\n            /**\r\n             * 在传入节点的后面插入一个节点\r\n             * @method insertAfter\r\n             * @param { UE.uNode } target 要插入的节点\r\n             * @param { UE.uNode } source 在该参数节点后面插入\r\n             * @return { UE.uNode } 返回刚插入的子节点\r\n             * @example\r\n             * ```javascript\r\n             * node.parentNode.insertAfter(newNode, node); //在node节点后面插入newNode\r\n             * ```\r\n             */\r\n            insertAfter: function (target, source) {\r\n                if (this.children) {\r\n                    if (target.parentNode) {\r\n                        target.parentNode.removeChild(target);\r\n                    }\r\n                    for (var i = 0, ci; ci = this.children[i]; i++) {\r\n                        if (ci === source) {\r\n                            this.children.splice(i + 1, 0, target);\r\n                            target.parentNode = this;\r\n                            return target;\r\n                        }\r\n\r\n                    }\r\n                }\r\n            },\r\n\r\n            /**\r\n             * 从当前节点的子节点列表中，移除节点\r\n             * @method removeChild\r\n             * @param { UE.uNode } node 要移除的节点引用\r\n             * @param { Boolean } keepChildren 是否保留移除节点的子节点，若传入true，自动把移除节点的子节点插入到移除的位置\r\n             * @return { * } 返回刚移除的子节点\r\n             * @example\r\n             * ```javascript\r\n             * node.removeChild(childNode,true); //在node的子节点列表中移除child节点，并且吧child的子节点插入到移除的位置\r\n             * ```\r\n             */\r\n            removeChild: function (node, keepChildren) {\r\n                if (this.children) {\r\n                    for (var i = 0, ci; ci = this.children[i]; i++) {\r\n                        if (ci === node) {\r\n                            this.children.splice(i, 1);\r\n                            ci.parentNode = null;\r\n                            if (keepChildren && ci.children && ci.children.length) {\r\n                                for (var j = 0, cj; cj = ci.children[j]; j++) {\r\n                                    this.children.splice(i + j, 0, cj);\r\n                                    cj.parentNode = this;\r\n\r\n                                }\r\n                            }\r\n                            return ci;\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n\r\n            /**\r\n             * 获取当前节点所代表的元素属性，即获取attrs对象下的属性值\r\n             * @method getAttr\r\n             * @param { String } attrName 要获取的属性名称\r\n             * @return { * } 返回attrs对象下的属性值\r\n             * @example\r\n             * ```javascript\r\n             * node.getAttr('title');\r\n             * ```\r\n             */\r\n            getAttr: function (attrName) {\r\n                return this.attrs && this.attrs[attrName.toLowerCase()]\r\n            },\r\n\r\n            /**\r\n             * 设置当前节点所代表的元素属性，即设置attrs对象下的属性值\r\n             * @method setAttr\r\n             * @param { String } attrName 要设置的属性名称\r\n             * @param { * } attrVal 要设置的属性值，类型视设置的属性而定\r\n             * @return { * } 返回attrs对象下的属性值\r\n             * @example\r\n             * ```javascript\r\n             * node.setAttr('title','标题');\r\n             * ```\r\n             */\r\n            setAttr: function (attrName, attrVal) {\r\n                if (!attrName) {\r\n                    delete this.attrs;\r\n                    return;\r\n                }\r\n                if (!this.attrs) {\r\n                    this.attrs = {};\r\n                }\r\n                if (utils.isObject(attrName)) {\r\n                    for (var a in attrName) {\r\n                        if (!attrName[a]) {\r\n                            delete this.attrs[a]\r\n                        } else {\r\n                            this.attrs[a.toLowerCase()] = attrName[a];\r\n                        }\r\n                    }\r\n                } else {\r\n                    if (!attrVal) {\r\n                        delete this.attrs[attrName]\r\n                    } else {\r\n                        this.attrs[attrName.toLowerCase()] = attrVal;\r\n                    }\r\n\r\n                }\r\n            },\r\n\r\n            /**\r\n             * 获取当前节点在父节点下的位置索引\r\n             * @method getIndex\r\n             * @return { Number } 返回索引数值，如果没有父节点，返回-1\r\n             * @example\r\n             * ```javascript\r\n             * node.getIndex();\r\n             * ```\r\n             */\r\n            getIndex: function () {\r\n                var parent = this.parentNode;\r\n                for (var i = 0, ci; ci = parent.children[i]; i++) {\r\n                    if (ci === this) {\r\n                        return i;\r\n                    }\r\n                }\r\n                return -1;\r\n            },\r\n\r\n            /**\r\n             * 在当前节点下，根据id查找节点\r\n             * @method getNodeById\r\n             * @param { String } id 要查找的id\r\n             * @return { UE.uNode } 返回找到的节点\r\n             * @example\r\n             * ```javascript\r\n             * node.getNodeById('textId');\r\n             * ```\r\n             */\r\n            getNodeById: function (id) {\r\n                var node;\r\n                if (this.children && this.children.length) {\r\n                    for (var i = 0, ci; ci = this.children[i++];) {\r\n                        if (node = getNodeById(ci, id)) {\r\n                            return node;\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n\r\n            /**\r\n             * 在当前节点下，根据元素名称查找节点列表\r\n             * @method getNodesByTagName\r\n             * @param { String } tagNames 要查找的元素名称\r\n             * @return { Array } 返回找到的节点列表\r\n             * @example\r\n             * ```javascript\r\n             * node.getNodesByTagName('span');\r\n             * ```\r\n             */\r\n            getNodesByTagName: function (tagNames) {\r\n                tagNames = utils.trim(tagNames).replace(/[ ]{2,}/g, ' ').split(' ');\r\n                var arr = [], me = this;\r\n                utils.each(tagNames, function (tagName) {\r\n                    if (me.children && me.children.length) {\r\n                        for (var i = 0, ci; ci = me.children[i++];) {\r\n                            getNodesByTagName(ci, tagName, arr)\r\n                        }\r\n                    }\r\n                });\r\n                return arr;\r\n            },\r\n\r\n            /**\r\n             * 根据样式名称，获取节点的样式值\r\n             * @method getStyle\r\n             * @param { String } name 要获取的样式名称\r\n             * @return { String } 返回样式值\r\n             * @example\r\n             * ```javascript\r\n             * node.getStyle('font-size');\r\n             * ```\r\n             */\r\n            getStyle: function (name) {\r\n                var cssStyle = this.getAttr('style');\r\n                if (!cssStyle) {\r\n                    return ''\r\n                }\r\n                var reg = new RegExp('(^|;)\\\\s*' + name + ':([^;]+)', 'i');\r\n                var match = cssStyle.match(reg);\r\n                if (match && match[0]) {\r\n                    return match[2]\r\n                }\r\n                return '';\r\n            },\r\n\r\n            /**\r\n             * 给节点设置样式\r\n             * @method setStyle\r\n             * @param { String } name 要设置的的样式名称\r\n             * @param { String } val 要设置的的样值\r\n             * @example\r\n             * ```javascript\r\n             * node.setStyle('font-size', '12px');\r\n             * ```\r\n             */\r\n            setStyle: function (name, val) {\r\n                function exec(name, val) {\r\n                    var reg = new RegExp('(^|;)\\\\s*' + name + ':([^;]+;?)', 'gi');\r\n                    cssStyle = cssStyle.replace(reg, '$1');\r\n                    if (val) {\r\n                        cssStyle = name + ':' + utils.unhtml(val) + ';' + cssStyle\r\n                    }\r\n\r\n                }\r\n\r\n                var cssStyle = this.getAttr('style');\r\n                if (!cssStyle) {\r\n                    cssStyle = '';\r\n                }\r\n                if (utils.isObject(name)) {\r\n                    for (var a in name) {\r\n                        exec(a, name[a])\r\n                    }\r\n                } else {\r\n                    exec(name, val)\r\n                }\r\n                this.setAttr('style', utils.trim(cssStyle))\r\n            },\r\n\r\n            /**\r\n             * 传入一个函数，递归遍历当前节点下的所有节点\r\n             * @method traversal\r\n             * @param { Function } fn 遍历到节点的时，传入节点作为参数，运行此函数\r\n             * @example\r\n             * ```javascript\r\n             * traversal(node, function(){\r\n             *     console.log(node.type);\r\n             * });\r\n             * ```\r\n             */\r\n            traversal: function (fn) {\r\n                if (this.children && this.children.length) {\r\n                    nodeTraversal(this, fn);\r\n                }\r\n                return this;\r\n            }\r\n        }\r\n    })();\r\n\r\n\r\n    // core/htmlparser.js\r\n    /**\r\n     * html字符串转换成uNode节点\r\n     * @file\r\n     * @module UE\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * UEditor公用空间，UEditor所有的功能都挂载在该空间下\r\n     * @unfile\r\n     * @module UE\r\n     */\r\n\r\n    /**\r\n     * html字符串转换成uNode节点的静态方法\r\n     * @method htmlparser\r\n     * @param { String } htmlstr 要转换的html代码\r\n     * @param { Boolean } ignoreBlank 若设置为true，转换的时候忽略\\n\\r\\t等空白字符\r\n     * @return { uNode } 给定的html片段转换形成的uNode对象\r\n     * @example\r\n     * ```javascript\r\n     * var root = UE.htmlparser('<p><b>htmlparser</b></p>', true);\r\n     * ```\r\n     */\r\n\r\n    var htmlparser = UE.htmlparser = function (htmlstr, ignoreBlank) {\r\n        //todo 原来的方式  [^\"'<>\\/] 有\\/就不能配对上 <TD vAlign=top background=../AAA.JPG> 这样的标签了\r\n        //先去掉了，加上的原因忘了，这里先记录\r\n        var re_tag = /<(?:(?:\\/([^>]+)>)|(?:!--([\\S|\\s]*?)-->)|(?:([^\\s\\/<>]+)\\s*((?:(?:\"[^\"]*\")|(?:'[^']*')|[^\"'<>])*)\\/?>))/g,\r\n            re_attr = /([\\w\\-:.]+)(?:(?:\\s*=\\s*(?:(?:\"([^\"]*)\")|(?:'([^']*)')|([^\\s>]+)))|(?=\\s|$))/g;\r\n\r\n        //ie下取得的html可能会有\\n存在，要去掉，在处理replace(/[\\t\\r\\n]*/g,'');代码高量的\\n不能去除\r\n        var allowEmptyTags = {\r\n            b: 1, code: 1, i: 1, u: 1, strike: 1, s: 1, tt: 1, strong: 1, q: 1, samp: 1, em: 1, span: 1,\r\n            sub: 1, img: 1, sup: 1, font: 1, big: 1, small: 1, iframe: 1, a: 1, br: 1, pre: 1\r\n        };\r\n        htmlstr = htmlstr.replace(new RegExp(domUtils.fillChar, 'g'), '');\r\n        if (!ignoreBlank) {\r\n            htmlstr = htmlstr.replace(new RegExp('[\\\\r\\\\t\\\\n' + (ignoreBlank ? '' : ' ') + ']*<\\/?(\\\\w+)\\\\s*(?:[^>]*)>[\\\\r\\\\t\\\\n' + (ignoreBlank ? '' : ' ') + ']*', 'g'), function (a, b) {\r\n                //br暂时单独处理\r\n                if (b && allowEmptyTags[b.toLowerCase()]) {\r\n                    return a.replace(/(^[\\n\\r]+)|([\\n\\r]+$)/g, '');\r\n                }\r\n                return a.replace(new RegExp('^[\\\\r\\\\n' + (ignoreBlank ? '' : ' ') + ']+'), '').replace(new RegExp('[\\\\r\\\\n' + (ignoreBlank ? '' : ' ') + ']+$'), '');\r\n            });\r\n        }\r\n\r\n        var notTransAttrs = {\r\n            'href': 1,\r\n            'src': 1\r\n        };\r\n\r\n        var uNode = UE.uNode,\r\n            needParentNode = {\r\n                'td': 'tr',\r\n                'tr': ['tbody', 'thead', 'tfoot'],\r\n                'tbody': 'table',\r\n                'th': 'tr',\r\n                'thead': 'table',\r\n                'tfoot': 'table',\r\n                'caption': 'table',\r\n                'li': ['ul', 'ol'],\r\n                'dt': 'dl',\r\n                'dd': 'dl',\r\n                'option': 'select'\r\n            },\r\n            needChild = {\r\n                'ol': 'li',\r\n                'ul': 'li'\r\n            };\r\n\r\n        function text(parent, data) {\r\n\r\n            if (needChild[parent.tagName]) {\r\n                var tmpNode = uNode.createElement(needChild[parent.tagName]);\r\n                parent.appendChild(tmpNode);\r\n                tmpNode.appendChild(uNode.createText(data));\r\n                parent = tmpNode;\r\n            } else {\r\n\r\n                parent.appendChild(uNode.createText(data));\r\n            }\r\n        }\r\n\r\n        function element(parent, tagName, htmlattr) {\r\n            var needParentTag;\r\n            if (needParentTag = needParentNode[tagName]) {\r\n                var tmpParent = parent, hasParent;\r\n                while (tmpParent.type != 'root') {\r\n                    if (utils.isArray(needParentTag) ? utils.indexOf(needParentTag, tmpParent.tagName) != -1 : needParentTag == tmpParent.tagName) {\r\n                        parent = tmpParent;\r\n                        hasParent = true;\r\n                        break;\r\n                    }\r\n                    tmpParent = tmpParent.parentNode;\r\n                }\r\n                if (!hasParent) {\r\n                    parent = element(parent, utils.isArray(needParentTag) ? needParentTag[0] : needParentTag)\r\n                }\r\n            }\r\n            //按dtd处理嵌套\r\n            //        if(parent.type != 'root' && !dtd[parent.tagName][tagName])\r\n            //            parent = parent.parentNode;\r\n            var elm = new uNode({\r\n                parentNode: parent,\r\n                type: 'element',\r\n                tagName: tagName.toLowerCase(),\r\n                //是自闭合的处理一下\r\n                children: dtd.$empty[tagName] ? null : []\r\n            });\r\n            //如果属性存在，处理属性\r\n            if (htmlattr) {\r\n                var attrs = {}, match;\r\n                while (match = re_attr.exec(htmlattr)) {\r\n                    attrs[match[1].toLowerCase()] = notTransAttrs[match[1].toLowerCase()] ? (match[2] || match[3] || match[4]) : utils.unhtml(match[2] || match[3] || match[4])\r\n                }\r\n                elm.attrs = attrs;\r\n            }\r\n            //trace:3970\r\n            //        //如果parent下不能放elm\r\n            //        if(dtd.$inline[parent.tagName] && dtd.$block[elm.tagName] && !dtd[parent.tagName][elm.tagName]){\r\n            //            parent = parent.parentNode;\r\n            //            elm.parentNode = parent;\r\n            //        }\r\n            parent.children.push(elm);\r\n            //如果是自闭合节点返回父亲节点\r\n            return dtd.$empty[tagName] ? parent : elm\r\n        }\r\n\r\n        function comment(parent, data) {\r\n            parent.children.push(new uNode({\r\n                type: 'comment',\r\n                data: data,\r\n                parentNode: parent\r\n            }));\r\n        }\r\n\r\n        var match, currentIndex = 0, nextIndex = 0;\r\n        //设置根节点\r\n        var root = new uNode({\r\n            type: 'root',\r\n            children: []\r\n        });\r\n        var currentParent = root;\r\n\r\n        while (match = re_tag.exec(htmlstr)) {\r\n            currentIndex = match.index;\r\n            try {\r\n                if (currentIndex > nextIndex) {\r\n                    //text node\r\n                    text(currentParent, htmlstr.slice(nextIndex, currentIndex));\r\n                }\r\n                if (match[3]) {\r\n\r\n                    if (dtd.$cdata[currentParent.tagName]) {\r\n                        text(currentParent, match[0]);\r\n                    } else {\r\n                        //start tag\r\n                        currentParent = element(currentParent, match[3].toLowerCase(), match[4]);\r\n                    }\r\n\r\n\r\n                } else if (match[1]) {\r\n                    if (currentParent.type != 'root') {\r\n                        if (dtd.$cdata[currentParent.tagName] && !dtd.$cdata[match[1]]) {\r\n                            text(currentParent, match[0]);\r\n                        } else {\r\n                            var tmpParent = currentParent;\r\n                            while (currentParent.type == 'element' && currentParent.tagName != match[1].toLowerCase()) {\r\n                                currentParent = currentParent.parentNode;\r\n                                if (currentParent.type == 'root') {\r\n                                    currentParent = tmpParent;\r\n                                    throw 'break'\r\n                                }\r\n                            }\r\n                            //end tag\r\n                            currentParent = currentParent.parentNode;\r\n                        }\r\n\r\n                    }\r\n\r\n                } else if (match[2]) {\r\n                    //comment\r\n                    comment(currentParent, match[2])\r\n                }\r\n            } catch (e) { }\r\n\r\n            nextIndex = re_tag.lastIndex;\r\n\r\n        }\r\n        //如果结束是文本，就有可能丢掉，所以这里手动判断一下\r\n        //例如 <li>sdfsdfsdf<li>sdfsdfsdfsdf\r\n        if (nextIndex < htmlstr.length) {\r\n            text(currentParent, htmlstr.slice(nextIndex));\r\n        }\r\n        return root;\r\n    };\r\n\r\n\r\n    // core/filternode.js\r\n    /**\r\n     * UE过滤节点的静态方法\r\n     * @file\r\n     */\r\n\r\n    /**\r\n     * UEditor公用空间，UEditor所有的功能都挂载在该空间下\r\n     * @module UE\r\n     */\r\n\r\n\r\n    /**\r\n     * 根据传入节点和过滤规则过滤相应节点\r\n     * @module UE\r\n     * @since 1.2.6.1\r\n     * @method filterNode\r\n     * @param { Object } root 指定root节点\r\n     * @param { Object } rules 过滤规则json对象\r\n     * @example\r\n     * ```javascript\r\n     * UE.filterNode(root,editor.options.filterRules);\r\n     * ```\r\n     */\r\n    var filterNode = UE.filterNode = function () {\r\n        function filterNode(node, rules) {\r\n            switch (node.type) {\r\n                case 'text':\r\n                    break;\r\n                case 'element':\r\n                    var val;\r\n                    if (val = rules[node.tagName]) {\r\n                        if (val === '-') {\r\n                            node.parentNode.removeChild(node)\r\n                        } else if (utils.isFunction(val)) {\r\n                            var parentNode = node.parentNode,\r\n                                index = node.getIndex();\r\n                            val(node);\r\n                            if (node.parentNode) {\r\n                                if (node.children) {\r\n                                    for (var i = 0, ci; ci = node.children[i];) {\r\n                                        filterNode(ci, rules);\r\n                                        if (ci.parentNode) {\r\n                                            i++;\r\n                                        }\r\n                                    }\r\n                                }\r\n                            } else {\r\n                                for (var i = index, ci; ci = parentNode.children[i];) {\r\n                                    filterNode(ci, rules);\r\n                                    if (ci.parentNode) {\r\n                                        i++;\r\n                                    }\r\n                                }\r\n                            }\r\n\r\n\r\n                        } else {\r\n                            var attrs = val['$'];\r\n                            if (attrs && node.attrs) {\r\n                                var tmpAttrs = {}, tmpVal;\r\n                                for (var a in attrs) {\r\n                                    tmpVal = node.getAttr(a);\r\n                                    //todo 只先对style单独处理\r\n                                    if (a == 'style' && utils.isArray(attrs[a])) {\r\n                                        var tmpCssStyle = [];\r\n                                        utils.each(attrs[a], function (v) {\r\n                                            var tmp;\r\n                                            if (tmp = node.getStyle(v)) {\r\n                                                tmpCssStyle.push(v + ':' + tmp);\r\n                                            }\r\n                                        });\r\n                                        tmpVal = tmpCssStyle.join(';')\r\n                                    }\r\n                                    if (tmpVal) {\r\n                                        tmpAttrs[a] = tmpVal;\r\n                                    }\r\n\r\n                                }\r\n                                node.attrs = tmpAttrs;\r\n                            }\r\n                            if (node.children) {\r\n                                for (var i = 0, ci; ci = node.children[i];) {\r\n                                    filterNode(ci, rules);\r\n                                    if (ci.parentNode) {\r\n                                        i++;\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    } else {\r\n                        //如果不在名单里扣出子节点并删除该节点,cdata除外\r\n                        if (dtd.$cdata[node.tagName]) {\r\n                            node.parentNode.removeChild(node)\r\n                        } else {\r\n                            var parentNode = node.parentNode,\r\n                                index = node.getIndex();\r\n                            node.parentNode.removeChild(node, true);\r\n                            for (var i = index, ci; ci = parentNode.children[i];) {\r\n                                filterNode(ci, rules);\r\n                                if (ci.parentNode) {\r\n                                    i++;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    break;\r\n                case 'comment':\r\n                    node.parentNode.removeChild(node)\r\n            }\r\n\r\n        }\r\n        return function (root, rules) {\r\n            if (utils.isEmptyObject(rules)) {\r\n                return root;\r\n            }\r\n            var val;\r\n            if (val = rules['-']) {\r\n                utils.each(val.split(' '), function (k) {\r\n                    rules[k] = '-'\r\n                })\r\n            }\r\n            for (var i = 0, ci; ci = root.children[i];) {\r\n                filterNode(ci, rules);\r\n                if (ci.parentNode) {\r\n                    i++;\r\n                }\r\n            }\r\n            return root;\r\n        }\r\n    }();\r\n\r\n    // core/plugin.js\r\n    /**\r\n     * Created with JetBrains PhpStorm.\r\n     * User: campaign\r\n     * Date: 10/8/13\r\n     * Time: 6:15 PM\r\n     * To change this template use File | Settings | File Templates.\r\n     */\r\n    UE.plugin = function () {\r\n        var _plugins = {};\r\n        return {\r\n            register: function (pluginName, fn, oldOptionName, afterDisabled) {\r\n                if (oldOptionName && utils.isFunction(oldOptionName)) {\r\n                    afterDisabled = oldOptionName;\r\n                    oldOptionName = null\r\n                }\r\n                _plugins[pluginName] = {\r\n                    optionName: oldOptionName || pluginName,\r\n                    execFn: fn,\r\n                    //当插件被禁用时执行\r\n                    afterDisabled: afterDisabled\r\n                }\r\n            },\r\n            load: function (editor) {\r\n                utils.each(_plugins, function (plugin) {\r\n                    var _export = plugin.execFn.call(editor);\r\n                    if (editor.options[plugin.optionName] !== false) {\r\n                        if (_export) {\r\n                            //后边需要再做扩展\r\n                            utils.each(_export, function (v, k) {\r\n                                switch (k.toLowerCase()) {\r\n                                    case 'shortcutkey':\r\n                                        editor.addshortcutkey(v);\r\n                                        break;\r\n                                    case 'bindevents':\r\n                                        utils.each(v, function (fn, eventName) {\r\n                                            editor.addListener(eventName, fn);\r\n                                        });\r\n                                        break;\r\n                                    case 'bindmultievents':\r\n                                        utils.each(utils.isArray(v) ? v : [v], function (event) {\r\n                                            var types = utils.trim(event.type).split(/\\s+/);\r\n                                            utils.each(types, function (eventName) {\r\n                                                editor.addListener(eventName, event.handler);\r\n                                            });\r\n                                        });\r\n                                        break;\r\n                                    case 'commands':\r\n                                        utils.each(v, function (execFn, execName) {\r\n                                            editor.commands[execName] = execFn\r\n                                        });\r\n                                        break;\r\n                                    case 'outputrule':\r\n                                        editor.addOutputRule(v);\r\n                                        break;\r\n                                    case 'inputrule':\r\n                                        editor.addInputRule(v);\r\n                                        break;\r\n                                    case 'defaultoptions':\r\n                                        editor.setOpt(v)\r\n                                }\r\n                            })\r\n                        }\r\n\r\n                    } else if (plugin.afterDisabled) {\r\n                        plugin.afterDisabled.call(editor)\r\n                    }\r\n\r\n                });\r\n                //向下兼容\r\n                utils.each(UE.plugins, function (plugin) {\r\n                    plugin.call(editor);\r\n                });\r\n            },\r\n            run: function (pluginName, editor) {\r\n                var plugin = _plugins[pluginName];\r\n                if (plugin) {\r\n                    plugin.exeFn.call(editor)\r\n                }\r\n            }\r\n        }\r\n    }();\r\n\r\n    // core/keymap.js\r\n    var keymap = UE.keymap = {\r\n        'Backspace': 8,\r\n        'Tab': 9,\r\n        'Enter': 13,\r\n\r\n        'Shift': 16,\r\n        'Control': 17,\r\n        'Alt': 18,\r\n        'CapsLock': 20,\r\n\r\n        'Esc': 27,\r\n\r\n        'Spacebar': 32,\r\n\r\n        'PageUp': 33,\r\n        'PageDown': 34,\r\n        'End': 35,\r\n        'Home': 36,\r\n\r\n        'Left': 37,\r\n        'Up': 38,\r\n        'Right': 39,\r\n        'Down': 40,\r\n\r\n        'Insert': 45,\r\n\r\n        'Del': 46,\r\n\r\n        'NumLock': 144,\r\n\r\n        'Cmd': 91,\r\n\r\n        '=': 187,\r\n        '-': 189,\r\n\r\n        \"b\": 66,\r\n        'i': 73,\r\n        //回退\r\n        'z': 90,\r\n        'y': 89,\r\n        //粘贴\r\n        'v': 86,\r\n        'x': 88,\r\n\r\n        's': 83,\r\n\r\n        'n': 78\r\n    };\r\n\r\n    // core/localstorage.js\r\n    //存储媒介封装\r\n    var LocalStorage = UE.LocalStorage = (function () {\r\n\r\n        var storage = window.localStorage || getUserData() || null,\r\n            LOCAL_FILE = 'localStorage';\r\n\r\n        return {\r\n\r\n            saveLocalData: function (key, data) {\r\n\r\n                if (storage && data) {\r\n                    storage.setItem(key, data);\r\n                    return true;\r\n                }\r\n\r\n                return false;\r\n\r\n            },\r\n\r\n            getLocalData: function (key) {\r\n\r\n                if (storage) {\r\n                    return storage.getItem(key);\r\n                }\r\n\r\n                return null;\r\n\r\n            },\r\n\r\n            removeItem: function (key) {\r\n\r\n                storage && storage.removeItem(key);\r\n\r\n            }\r\n\r\n        };\r\n\r\n        function getUserData() {\r\n\r\n            var container = document.createElement(\"div\");\r\n            container.style.display = \"none\";\r\n\r\n            if (!container.addBehavior) {\r\n                return null;\r\n            }\r\n\r\n            container.addBehavior(\"#default#userdata\");\r\n\r\n            return {\r\n\r\n                getItem: function (key) {\r\n\r\n                    var result = null;\r\n\r\n                    try {\r\n                        document.body.appendChild(container);\r\n                        container.load(LOCAL_FILE);\r\n                        result = container.getAttribute(key);\r\n                        document.body.removeChild(container);\r\n                    } catch (e) {\r\n                    }\r\n\r\n                    return result;\r\n\r\n                },\r\n\r\n                setItem: function (key, value) {\r\n\r\n                    document.body.appendChild(container);\r\n                    container.setAttribute(key, value);\r\n                    container.save(LOCAL_FILE);\r\n                    document.body.removeChild(container);\r\n\r\n                },\r\n\r\n                //// 暂时没有用到\r\n                //clear: function () {\r\n                //\r\n                //    var expiresTime = new Date();\r\n                //    expiresTime.setFullYear(expiresTime.getFullYear() - 1);\r\n                //    document.body.appendChild(container);\r\n                //    container.expires = expiresTime.toUTCString();\r\n                //    container.save(LOCAL_FILE);\r\n                //    document.body.removeChild(container);\r\n                //\r\n                //},\r\n\r\n                removeItem: function (key) {\r\n\r\n                    document.body.appendChild(container);\r\n                    container.removeAttribute(key);\r\n                    container.save(LOCAL_FILE);\r\n                    document.body.removeChild(container);\r\n\r\n                }\r\n\r\n            };\r\n\r\n        }\r\n\r\n    })();\r\n\r\n    (function () {\r\n\r\n        var ROOTKEY = 'ueditor_preference';\r\n\r\n        UE.Editor.prototype.setPreferences = function (key, value) {\r\n            var obj = {};\r\n            if (utils.isString(key)) {\r\n                obj[key] = value;\r\n            } else {\r\n                obj = key;\r\n            }\r\n            var data = LocalStorage.getLocalData(ROOTKEY);\r\n            if (data && (data = utils.str2json(data))) {\r\n                utils.extend(data, obj);\r\n            } else {\r\n                data = obj;\r\n            }\r\n            data && LocalStorage.saveLocalData(ROOTKEY, utils.json2str(data));\r\n        };\r\n\r\n        UE.Editor.prototype.getPreferences = function (key) {\r\n            var data = LocalStorage.getLocalData(ROOTKEY);\r\n            if (data && (data = utils.str2json(data))) {\r\n                return key ? data[key] : data\r\n            }\r\n            return null;\r\n        };\r\n\r\n        UE.Editor.prototype.removePreferences = function (key) {\r\n            var data = LocalStorage.getLocalData(ROOTKEY);\r\n            if (data && (data = utils.str2json(data))) {\r\n                data[key] = undefined;\r\n                delete data[key]\r\n            }\r\n            data && LocalStorage.saveLocalData(ROOTKEY, utils.json2str(data));\r\n        };\r\n\r\n    })();\r\n\r\n\r\n    // plugins/defaultfilter.js\r\n    ///import core\r\n    ///plugin 编辑器默认的过滤转换机制\r\n\r\n    UE.plugins['defaultfilter'] = function () {\r\n        var me = this;\r\n        me.setOpt({\r\n            'allowDivTransToP': true,\r\n            'disabledTableInTable': true\r\n        });\r\n        //默认的过滤处理\r\n        //进入编辑器的内容处理\r\n        me.addInputRule(function (root) {\r\n            var allowDivTransToP = this.options.allowDivTransToP;\r\n            var val;\r\n            function tdParent(node) {\r\n                while (node && node.type == 'element') {\r\n                    if (node.tagName == 'td') {\r\n                        return true;\r\n                    }\r\n                    node = node.parentNode;\r\n                }\r\n                return false;\r\n            }\r\n            //进行默认的处理\r\n            root.traversal(function (node) {\r\n                if (node.type == 'element') {\r\n                    if (!dtd.$cdata[node.tagName] && me.options.autoClearEmptyNode && dtd.$inline[node.tagName] && !dtd.$empty[node.tagName] && (!node.attrs || utils.isEmptyObject(node.attrs))) {\r\n                        if (!node.firstChild()) node.parentNode.removeChild(node);\r\n                        else if (node.tagName == 'span' && (!node.attrs || utils.isEmptyObject(node.attrs))) {\r\n                            node.parentNode.removeChild(node, true)\r\n                        }\r\n                        return;\r\n                    }\r\n                    switch (node.tagName) {\r\n                        case 'style':\r\n                        case 'script':\r\n                            node.setAttr({\r\n                                cdata_tag: node.tagName,\r\n                                cdata_data: (node.innerHTML() || ''),\r\n                                '_ue_custom_node_': 'true'\r\n                            });\r\n                            node.tagName = 'div';\r\n                            node.innerHTML('');\r\n                            break;\r\n                        case 'a':\r\n                            if (val = node.getAttr('href')) {\r\n                                node.setAttr('_href', val)\r\n                            }\r\n                            break;\r\n                        case 'img':\r\n                            //todo base64暂时去掉，后边做远程图片上传后，干掉这个\r\n                            if (val = node.getAttr('src')) {\r\n                                if (/^data:/.test(val)) {\r\n                                    node.parentNode.removeChild(node);\r\n                                    break;\r\n                                }\r\n                            }\r\n                            node.setAttr('_src', node.getAttr('src'));\r\n                            break;\r\n                        case 'span':\r\n                            if (browser.webkit && (val = node.getStyle('white-space'))) {\r\n                                if (/nowrap|normal/.test(val)) {\r\n                                    node.setStyle('white-space', '');\r\n                                    if (me.options.autoClearEmptyNode && utils.isEmptyObject(node.attrs)) {\r\n                                        node.parentNode.removeChild(node, true)\r\n                                    }\r\n                                }\r\n                            }\r\n                            val = node.getAttr('id');\r\n                            if (val && /^_baidu_bookmark_/i.test(val)) {\r\n                                node.parentNode.removeChild(node)\r\n                            }\r\n                            break;\r\n                        case 'p':\r\n                            if (val = node.getAttr('align')) {\r\n                                node.setAttr('align');\r\n                                node.setStyle('text-align', val)\r\n                            }\r\n                            //trace:3431\r\n                            //                        var cssStyle = node.getAttr('style');\r\n                            //                        if (cssStyle) {\r\n                            //                            cssStyle = cssStyle.replace(/(margin|padding)[^;]+/g, '');\r\n                            //                            node.setAttr('style', cssStyle)\r\n                            //\r\n                            //                        }\r\n                            //p标签不允许嵌套\r\n                            utils.each(node.children, function (n) {\r\n                                if (n.type == 'element' && n.tagName == 'p') {\r\n                                    var next = n.nextSibling();\r\n                                    node.parentNode.insertAfter(n, node);\r\n                                    var last = n;\r\n                                    while (next) {\r\n                                        var tmp = next.nextSibling();\r\n                                        node.parentNode.insertAfter(next, last);\r\n                                        last = next;\r\n                                        next = tmp;\r\n                                    }\r\n                                    return false;\r\n                                }\r\n                            });\r\n                            if (!node.firstChild()) {\r\n                                node.innerHTML(browser.ie ? '&nbsp;' : '<br/>')\r\n                            }\r\n                            break;\r\n                        case 'div':\r\n                            if (node.getAttr('cdata_tag')) {\r\n                                break;\r\n                            }\r\n                            //针对代码这里不处理插入代码的div\r\n                            val = node.getAttr('class');\r\n                            if (val && /^line number\\d+/.test(val)) {\r\n                                break;\r\n                            }\r\n                            if (!allowDivTransToP) {\r\n                                break;\r\n                            }\r\n                            var tmpNode, p = UE.uNode.createElement('p');\r\n                            while (tmpNode = node.firstChild()) {\r\n                                if (tmpNode.type == 'text' || !UE.dom.dtd.$block[tmpNode.tagName]) {\r\n                                    p.appendChild(tmpNode);\r\n                                } else {\r\n                                    if (p.firstChild()) {\r\n                                        node.parentNode.insertBefore(p, node);\r\n                                        p = UE.uNode.createElement('p');\r\n                                    } else {\r\n                                        node.parentNode.insertBefore(tmpNode, node);\r\n                                    }\r\n                                }\r\n                            }\r\n                            if (p.firstChild()) {\r\n                                node.parentNode.insertBefore(p, node);\r\n                            }\r\n                            node.parentNode.removeChild(node);\r\n                            break;\r\n                        case 'dl':\r\n                            node.tagName = 'ul';\r\n                            break;\r\n                        case 'dt':\r\n                        case 'dd':\r\n                            node.tagName = 'li';\r\n                            break;\r\n                        case 'li':\r\n                            var className = node.getAttr('class');\r\n                            if (!className || !/list\\-/.test(className)) {\r\n                                node.setAttr()\r\n                            }\r\n                            var tmpNodes = node.getNodesByTagName('ol ul');\r\n                            UE.utils.each(tmpNodes, function (n) {\r\n                                node.parentNode.insertAfter(n, node);\r\n                            });\r\n                            break;\r\n                        case 'td':\r\n                        case 'th':\r\n                        case 'caption':\r\n                            if (!node.children || !node.children.length) {\r\n                                node.appendChild(browser.ie11below ? UE.uNode.createText(' ') : UE.uNode.createElement('br'))\r\n                            }\r\n                            break;\r\n                        case 'table':\r\n                            if (me.options.disabledTableInTable && tdParent(node)) {\r\n                                node.parentNode.insertBefore(UE.uNode.createText(node.innerText()), node);\r\n                                node.parentNode.removeChild(node)\r\n                            }\r\n                    }\r\n\r\n                }\r\n                //            if(node.type == 'comment'){\r\n                //                node.parentNode.removeChild(node);\r\n                //            }\r\n            })\r\n\r\n        });\r\n\r\n        //从编辑器出去的内容处理\r\n        me.addOutputRule(function (root) {\r\n\r\n            var val;\r\n            root.traversal(function (node) {\r\n                if (node.type == 'element') {\r\n\r\n                    if (me.options.autoClearEmptyNode && dtd.$inline[node.tagName] && !dtd.$empty[node.tagName] && (!node.attrs || utils.isEmptyObject(node.attrs))) {\r\n\r\n                        if (!node.firstChild()) node.parentNode.removeChild(node);\r\n                        else if (node.tagName == 'span' && (!node.attrs || utils.isEmptyObject(node.attrs))) {\r\n                            node.parentNode.removeChild(node, true)\r\n                        }\r\n                        return;\r\n                    }\r\n                    switch (node.tagName) {\r\n                        case 'div':\r\n                            if (val = node.getAttr('cdata_tag')) {\r\n                                node.tagName = val;\r\n                                node.appendChild(UE.uNode.createText(node.getAttr('cdata_data')));\r\n                                node.setAttr({ cdata_tag: '', cdata_data: '', '_ue_custom_node_': '' });\r\n                            }\r\n                            break;\r\n                        case 'a':\r\n                            if (val = node.getAttr('_href')) {\r\n                                node.setAttr({\r\n                                    'href': utils.html(val),\r\n                                    '_href': ''\r\n                                })\r\n                            }\r\n                            break;\r\n                            break;\r\n                        case 'span':\r\n                            val = node.getAttr('id');\r\n                            if (val && /^_baidu_bookmark_/i.test(val)) {\r\n                                node.parentNode.removeChild(node)\r\n                            }\r\n                            break;\r\n                        case 'img':\r\n                            if (val = node.getAttr('_src')) {\r\n                                node.setAttr({\r\n                                    'src': node.getAttr('_src'),\r\n                                    '_src': ''\r\n                                })\r\n                            }\r\n\r\n\r\n                    }\r\n                }\r\n\r\n            })\r\n\r\n\r\n        });\r\n    };\r\n\r\n\r\n    // plugins/inserthtml.js\r\n    /**\r\n     * 插入html字符串插件\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * 插入html代码\r\n     * @command inserthtml\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @param { String } html 插入的html字符串\r\n     * @remaind 插入的标签内容是在当前的选区位置上插入，如果当前是闭合状态，那直接插入内容， 如果当前是选中状态，将先清除当前选中内容后，再做插入\r\n     * @warning 注意:该命令会对当前选区的位置，对插入的内容进行过滤转换处理。 过滤的规则遵循html语意化的原则。\r\n     * @example\r\n     * ```javascript\r\n     * //xxx[BB]xxx 当前选区为非闭合选区，选中BB这两个文本\r\n     * //执行命令，插入<b>CC</b>\r\n     * //插入后的效果 xxx<b>CC</b>xxx\r\n     * //<p>xx|xxx</p> 当前选区为闭合状态\r\n     * //插入<p>CC</p>\r\n     * //结果 <p>xx</p><p>CC</p><p>xxx</p>\r\n     * //<p>xxxx</p>|</p>xxx</p> 当前选区在两个p标签之间\r\n     * //插入 xxxx\r\n     * //结果 <p>xxxx</p><p>xxxx</p></p>xxx</p>\r\n     * ```\r\n     */\r\n\r\n    UE.commands['inserthtml'] = {\r\n        execCommand: function (command, html, notNeedFilter) {\r\n            var me = this,\r\n                range,\r\n                div;\r\n            if (!html) {\r\n                return;\r\n            }\r\n            if (me.fireEvent('beforeinserthtml', html) === true) {\r\n                return;\r\n            }\r\n            range = me.selection.getRange();\r\n            div = range.document.createElement('div');\r\n            div.style.display = 'inline';\r\n\r\n            if (!notNeedFilter) {\r\n                var root = UE.htmlparser(html);\r\n                //如果给了过滤规则就先进行过滤\r\n                if (me.options.filterRules) {\r\n                    UE.filterNode(root, me.options.filterRules);\r\n                }\r\n                //执行默认的处理\r\n                me.filterInputRule(root);\r\n                html = root.toHtml()\r\n            }\r\n            div.innerHTML = utils.trim(html);\r\n\r\n            if (!range.collapsed) {\r\n                var tmpNode = range.startContainer;\r\n                if (domUtils.isFillChar(tmpNode)) {\r\n                    range.setStartBefore(tmpNode)\r\n                }\r\n                tmpNode = range.endContainer;\r\n                if (domUtils.isFillChar(tmpNode)) {\r\n                    range.setEndAfter(tmpNode)\r\n                }\r\n                range.txtToElmBoundary();\r\n                //结束边界可能放到了br的前边，要把br包含进来\r\n                // x[xxx]<br/>\r\n                if (range.endContainer && range.endContainer.nodeType == 1) {\r\n                    tmpNode = range.endContainer.childNodes[range.endOffset];\r\n                    if (tmpNode && domUtils.isBr(tmpNode)) {\r\n                        range.setEndAfter(tmpNode);\r\n                    }\r\n                }\r\n                if (range.startOffset == 0) {\r\n                    tmpNode = range.startContainer;\r\n                    if (domUtils.isBoundaryNode(tmpNode, 'firstChild')) {\r\n                        tmpNode = range.endContainer;\r\n                        if (range.endOffset == (tmpNode.nodeType == 3 ? tmpNode.nodeValue.length : tmpNode.childNodes.length) && domUtils.isBoundaryNode(tmpNode, 'lastChild')) {\r\n                            me.body.innerHTML = '<p>' + (browser.ie ? '' : '<br/>') + '</p>';\r\n                            range.setStart(me.body.firstChild, 0).collapse(true)\r\n\r\n                        }\r\n                    }\r\n                }\r\n                !range.collapsed && range.deleteContents();\r\n                if (range.startContainer.nodeType == 1) {\r\n                    var child = range.startContainer.childNodes[range.startOffset], pre;\r\n                    if (child && domUtils.isBlockElm(child) && (pre = child.previousSibling) && domUtils.isBlockElm(pre)) {\r\n                        range.setEnd(pre, pre.childNodes.length).collapse();\r\n                        while (child.firstChild) {\r\n                            pre.appendChild(child.firstChild);\r\n                        }\r\n                        domUtils.remove(child);\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n\r\n            var child, parent, pre, tmp, hadBreak = 0, nextNode;\r\n            //如果当前位置选中了fillchar要干掉，要不会产生空行\r\n            if (range.inFillChar()) {\r\n                child = range.startContainer;\r\n                if (domUtils.isFillChar(child)) {\r\n                    range.setStartBefore(child).collapse(true);\r\n                    domUtils.remove(child);\r\n                } else if (domUtils.isFillChar(child, true)) {\r\n                    child.nodeValue = child.nodeValue.replace(fillCharReg, '');\r\n                    range.startOffset--;\r\n                    range.collapsed && range.collapse(true)\r\n                }\r\n            }\r\n            //列表单独处理\r\n            var li = domUtils.findParentByTagName(range.startContainer, 'li', true);\r\n            if (li) {\r\n                var next, last;\r\n                while (child = div.firstChild) {\r\n                    //针对hr单独处理一下先\r\n                    while (child && (child.nodeType == 3 || !domUtils.isBlockElm(child) || child.tagName == 'HR')) {\r\n                        next = child.nextSibling;\r\n                        range.insertNode(child).collapse();\r\n                        last = child;\r\n                        child = next;\r\n\r\n                    }\r\n                    if (child) {\r\n                        if (/^(ol|ul)$/i.test(child.tagName)) {\r\n                            while (child.firstChild) {\r\n                                last = child.firstChild;\r\n                                domUtils.insertAfter(li, child.firstChild);\r\n                                li = li.nextSibling;\r\n                            }\r\n                            domUtils.remove(child)\r\n                        } else {\r\n                            var tmpLi;\r\n                            next = child.nextSibling;\r\n                            tmpLi = me.document.createElement('li');\r\n                            domUtils.insertAfter(li, tmpLi);\r\n                            tmpLi.appendChild(child);\r\n                            last = child;\r\n                            child = next;\r\n                            li = tmpLi;\r\n                        }\r\n                    }\r\n                }\r\n                li = domUtils.findParentByTagName(range.startContainer, 'li', true);\r\n                if (domUtils.isEmptyBlock(li)) {\r\n                    domUtils.remove(li)\r\n                }\r\n                if (last) {\r\n\r\n                    range.setStartAfter(last).collapse(true).select(true)\r\n                }\r\n            } else {\r\n                while (child = div.firstChild) {\r\n                    if (hadBreak) {\r\n                        var p = me.document.createElement('p');\r\n                        while (child && (child.nodeType == 3 || !dtd.$block[child.tagName])) {\r\n                            nextNode = child.nextSibling;\r\n                            p.appendChild(child);\r\n                            child = nextNode;\r\n                        }\r\n                        if (p.firstChild) {\r\n\r\n                            child = p\r\n                        }\r\n                    }\r\n                    range.insertNode(child);\r\n                    nextNode = child.nextSibling;\r\n                    if (!hadBreak && child.nodeType == domUtils.NODE_ELEMENT && domUtils.isBlockElm(child)) {\r\n\r\n                        parent = domUtils.findParent(child, function (node) { return domUtils.isBlockElm(node); });\r\n                        if (parent && parent.tagName.toLowerCase() != 'body' && !(dtd[parent.tagName][child.nodeName] && child.parentNode === parent)) {\r\n                            if (!dtd[parent.tagName][child.nodeName]) {\r\n                                pre = parent;\r\n                            } else {\r\n                                tmp = child.parentNode;\r\n                                while (tmp !== parent) {\r\n                                    pre = tmp;\r\n                                    tmp = tmp.parentNode;\r\n\r\n                                }\r\n                            }\r\n\r\n\r\n                            domUtils.breakParent(child, pre || tmp);\r\n                            //去掉break后前一个多余的节点  <p>|<[p> ==> <p></p><div></div><p>|</p>\r\n                            var pre = child.previousSibling;\r\n                            domUtils.trimWhiteTextNode(pre);\r\n                            if (!pre.childNodes.length) {\r\n                                domUtils.remove(pre);\r\n                            }\r\n                            //trace:2012,在非ie的情况，切开后剩下的节点有可能不能点入光标添加br占位\r\n\r\n                            if (!browser.ie &&\r\n                                (next = child.nextSibling) &&\r\n                                domUtils.isBlockElm(next) &&\r\n                                next.lastChild &&\r\n                                !domUtils.isBr(next.lastChild)) {\r\n                                next.appendChild(me.document.createElement('br'));\r\n                            }\r\n                            hadBreak = 1;\r\n                        }\r\n                    }\r\n                    var next = child.nextSibling;\r\n                    if (!div.firstChild && next && domUtils.isBlockElm(next)) {\r\n\r\n                        range.setStart(next, 0).collapse(true);\r\n                        break;\r\n                    }\r\n                    range.setEndAfter(child).collapse();\r\n\r\n                }\r\n\r\n                child = range.startContainer;\r\n\r\n                if (nextNode && domUtils.isBr(nextNode)) {\r\n                    domUtils.remove(nextNode)\r\n                }\r\n                //用chrome可能有空白展位符\r\n                if (domUtils.isBlockElm(child) && domUtils.isEmptyNode(child)) {\r\n                    if (nextNode = child.nextSibling) {\r\n                        domUtils.remove(child);\r\n                        if (nextNode.nodeType == 1 && dtd.$block[nextNode.tagName]) {\r\n\r\n                            range.setStart(nextNode, 0).collapse(true).shrinkBoundary()\r\n                        }\r\n                    } else {\r\n\r\n                        try {\r\n                            child.innerHTML = browser.ie ? domUtils.fillChar : '<br/>';\r\n                        } catch (e) {\r\n                            range.setStartBefore(child);\r\n                            domUtils.remove(child)\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n                //加上true因为在删除表情等时会删两次，第一次是删的fillData\r\n                try {\r\n                    range.select(true);\r\n                } catch (e) { }\r\n\r\n            }\r\n\r\n\r\n\r\n            setTimeout(function () {\r\n                range = me.selection.getRange();\r\n                range.scrollToView(me.autoHeightEnabled, me.autoHeightEnabled ? domUtils.getXY(me.iframe).y : 0);\r\n                me.fireEvent('afterinserthtml', html);\r\n            }, 200);\r\n        }\r\n    };\r\n\r\n\r\n    // plugins/autotypeset.js\r\n    /**\r\n     * 自动排版\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * 对当前编辑器的内容执行自动排版， 排版的行为根据config配置文件里的“autotypeset”选项进行控制。\r\n     * @command autotypeset\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'autotypeset' );\r\n     * ```\r\n     */\r\n\r\n    UE.plugins['autotypeset'] = function () {\r\n\r\n        this.setOpt({\r\n            'autotypeset': {\r\n                mergeEmptyline: true,           //合并空行\r\n                removeClass: true,              //去掉冗余的class\r\n                removeEmptyline: false,         //去掉空行\r\n                textAlign: \"left\",               //段落的排版方式，可以是 left,right,center,justify 去掉这个属性表示不执行排版\r\n                imageBlockLine: 'center',       //图片的浮动方式，独占一行剧中,左右浮动，默认: center,left,right,none 去掉这个属性表示不执行排版\r\n                pasteFilter: false,             //根据规则过滤没事粘贴进来的内容\r\n                clearFontSize: false,           //去掉所有的内嵌字号，使用编辑器默认的字号\r\n                clearFontFamily: false,         //去掉所有的内嵌字体，使用编辑器默认的字体\r\n                removeEmptyNode: false,         // 去掉空节点\r\n                //可以去掉的标签\r\n                removeTagNames: utils.extend({ div: 1 }, dtd.$removeEmpty),\r\n                indent: false,                  // 行首缩进\r\n                indentValue: '2em',            //行首缩进的大小\r\n                bdc2sb: false,\r\n                tobdc: false\r\n            }\r\n        });\r\n\r\n        var me = this,\r\n            opt = me.options.autotypeset,\r\n            remainClass = {\r\n                'selectTdClass': 1,\r\n                'pagebreak': 1,\r\n                'anchorclass': 1\r\n            },\r\n            remainTag = {\r\n                'li': 1\r\n            },\r\n            tags = {\r\n                div: 1,\r\n                p: 1,\r\n                //trace:2183 这些也认为是行\r\n                blockquote: 1, center: 1, h1: 1, h2: 1, h3: 1, h4: 1, h5: 1, h6: 1,\r\n                span: 1\r\n            },\r\n            highlightCont;\r\n        //升级了版本，但配置项目里没有autotypeset\r\n        if (!opt) {\r\n            return;\r\n        }\r\n\r\n        readLocalOpts();\r\n\r\n        function isLine(node, notEmpty) {\r\n            if (!node || node.nodeType == 3)\r\n                return 0;\r\n            if (domUtils.isBr(node))\r\n                return 1;\r\n            if (node && node.parentNode && tags[node.tagName.toLowerCase()]) {\r\n                if (highlightCont && highlightCont.contains(node)\r\n                    ||\r\n                    node.getAttribute('pagebreak')\r\n                ) {\r\n                    return 0;\r\n                }\r\n\r\n                return notEmpty ? !domUtils.isEmptyBlock(node) : domUtils.isEmptyBlock(node, new RegExp('[\\\\s' + domUtils.fillChar\r\n                    + ']', 'g'));\r\n            }\r\n        }\r\n\r\n        function removeNotAttributeSpan(node) {\r\n            if (!node.style.cssText) {\r\n                domUtils.removeAttributes(node, ['style']);\r\n                if (node.tagName.toLowerCase() == 'span' && domUtils.hasNoAttributes(node)) {\r\n                    domUtils.remove(node, true);\r\n                }\r\n            }\r\n        }\r\n        function autotype(type, html) {\r\n\r\n            var me = this, cont;\r\n            if (html) {\r\n                if (!opt.pasteFilter) {\r\n                    return;\r\n                }\r\n                cont = me.document.createElement('div');\r\n                cont.innerHTML = html.html;\r\n            } else {\r\n                cont = me.document.body;\r\n            }\r\n            var nodes = domUtils.getElementsByTagName(cont, '*');\r\n\r\n            // 行首缩进，段落方向，段间距，段内间距\r\n            for (var i = 0, ci; ci = nodes[i++];) {\r\n\r\n                if (me.fireEvent('excludeNodeinautotype', ci) === true) {\r\n                    continue;\r\n                }\r\n                //font-size\r\n                if (opt.clearFontSize && ci.style.fontSize) {\r\n                    domUtils.removeStyle(ci, 'font-size');\r\n\r\n                    removeNotAttributeSpan(ci);\r\n\r\n                }\r\n                //font-family\r\n                if (opt.clearFontFamily && ci.style.fontFamily) {\r\n                    domUtils.removeStyle(ci, 'font-family');\r\n                    removeNotAttributeSpan(ci);\r\n                }\r\n\r\n                if (isLine(ci)) {\r\n                    //合并空行\r\n                    if (opt.mergeEmptyline) {\r\n                        var next = ci.nextSibling, tmpNode, isBr = domUtils.isBr(ci);\r\n                        while (isLine(next)) {\r\n                            tmpNode = next;\r\n                            next = tmpNode.nextSibling;\r\n                            if (isBr && (!next || next && !domUtils.isBr(next))) {\r\n                                break;\r\n                            }\r\n                            domUtils.remove(tmpNode);\r\n                        }\r\n\r\n                    }\r\n                    //去掉空行，保留占位的空行\r\n                    if (opt.removeEmptyline && domUtils.inDoc(ci, cont) && !remainTag[ci.parentNode.tagName.toLowerCase()]) {\r\n                        if (domUtils.isBr(ci)) {\r\n                            next = ci.nextSibling;\r\n                            if (next && !domUtils.isBr(next)) {\r\n                                continue;\r\n                            }\r\n                        }\r\n                        domUtils.remove(ci);\r\n                        continue;\r\n\r\n                    }\r\n\r\n                }\r\n                if (isLine(ci, true) && ci.tagName != 'SPAN') {\r\n                    if (opt.indent) {\r\n                        ci.style.textIndent = opt.indentValue;\r\n                    }\r\n                    if (opt.textAlign) {\r\n                        ci.style.textAlign = opt.textAlign;\r\n                    }\r\n                    // if(opt.lineHeight)\r\n                    //     ci.style.lineHeight = opt.lineHeight + 'cm';\r\n\r\n                }\r\n\r\n                //去掉class,保留的class不去掉\r\n                if (opt.removeClass && ci.className && !remainClass[ci.className.toLowerCase()]) {\r\n\r\n                    if (highlightCont && highlightCont.contains(ci)) {\r\n                        continue;\r\n                    }\r\n                    domUtils.removeAttributes(ci, ['class']);\r\n                }\r\n\r\n                //表情不处理\r\n                if (opt.imageBlockLine && ci.tagName.toLowerCase() == 'img' && !ci.getAttribute('emotion')) {\r\n                    if (html) {\r\n                        var img = ci;\r\n                        switch (opt.imageBlockLine) {\r\n                            case 'left':\r\n                            case 'right':\r\n                            case 'none':\r\n                                var pN = img.parentNode, tmpNode, pre, next;\r\n                                while (dtd.$inline[pN.tagName] || pN.tagName == 'A') {\r\n                                    pN = pN.parentNode;\r\n                                }\r\n                                tmpNode = pN;\r\n                                if (tmpNode.tagName == 'P' && domUtils.getStyle(tmpNode, 'text-align') == 'center') {\r\n                                    if (!domUtils.isBody(tmpNode) && domUtils.getChildCount(tmpNode, function (node) { return !domUtils.isBr(node) && !domUtils.isWhitespace(node) }) == 1) {\r\n                                        pre = tmpNode.previousSibling;\r\n                                        next = tmpNode.nextSibling;\r\n                                        if (pre && next && pre.nodeType == 1 && next.nodeType == 1 && pre.tagName == next.tagName && domUtils.isBlockElm(pre)) {\r\n                                            pre.appendChild(tmpNode.firstChild);\r\n                                            while (next.firstChild) {\r\n                                                pre.appendChild(next.firstChild);\r\n                                            }\r\n                                            domUtils.remove(tmpNode);\r\n                                            domUtils.remove(next);\r\n                                        } else {\r\n                                            domUtils.setStyle(tmpNode, 'text-align', '');\r\n                                        }\r\n\r\n\r\n                                    }\r\n\r\n\r\n                                }\r\n                                domUtils.setStyle(img, 'float', opt.imageBlockLine);\r\n                                break;\r\n                            case 'center':\r\n                                if (me.queryCommandValue('imagefloat') != 'center') {\r\n                                    pN = img.parentNode;\r\n                                    domUtils.setStyle(img, 'float', 'none');\r\n                                    tmpNode = img;\r\n                                    while (pN && domUtils.getChildCount(pN, function (node) { return !domUtils.isBr(node) && !domUtils.isWhitespace(node) }) == 1\r\n                                        && (dtd.$inline[pN.tagName] || pN.tagName == 'A')) {\r\n                                        tmpNode = pN;\r\n                                        pN = pN.parentNode;\r\n                                    }\r\n                                    var pNode = me.document.createElement('p');\r\n                                    domUtils.setAttributes(pNode, {\r\n\r\n                                        style: 'text-align:center'\r\n                                    });\r\n                                    tmpNode.parentNode.insertBefore(pNode, tmpNode);\r\n                                    pNode.appendChild(tmpNode);\r\n                                    domUtils.setStyle(tmpNode, 'float', '');\r\n\r\n                                }\r\n\r\n\r\n                        }\r\n                    } else {\r\n                        var range = me.selection.getRange();\r\n                        range.selectNode(ci).select();\r\n                        me.execCommand('imagefloat', opt.imageBlockLine);\r\n                    }\r\n\r\n                }\r\n\r\n                //去掉冗余的标签\r\n                if (opt.removeEmptyNode) {\r\n                    if (opt.removeTagNames[ci.tagName.toLowerCase()] && domUtils.hasNoAttributes(ci) && domUtils.isEmptyBlock(ci)) {\r\n                        domUtils.remove(ci);\r\n                    }\r\n                }\r\n            }\r\n            if (opt.tobdc) {\r\n                var root = UE.htmlparser(cont.innerHTML);\r\n                root.traversal(function (node) {\r\n                    if (node.type == 'text') {\r\n                        node.data = ToDBC(node.data)\r\n                    }\r\n                });\r\n                cont.innerHTML = root.toHtml()\r\n            }\r\n            if (opt.bdc2sb) {\r\n                var root = UE.htmlparser(cont.innerHTML);\r\n                root.traversal(function (node) {\r\n                    if (node.type == 'text') {\r\n                        node.data = DBC2SB(node.data)\r\n                    }\r\n                });\r\n                cont.innerHTML = root.toHtml()\r\n            }\r\n            if (html) {\r\n                html.html = cont.innerHTML;\r\n            }\r\n        }\r\n        if (opt.pasteFilter) {\r\n            me.addListener('beforepaste', autotype);\r\n        }\r\n\r\n        function DBC2SB(str) {\r\n            var result = '';\r\n            for (var i = 0; i < str.length; i++) {\r\n                var code = str.charCodeAt(i); //获取当前字符的unicode编码\r\n                if (code >= 65281 && code <= 65373)//在这个unicode编码范围中的是所有的英文字母已经各种字符\r\n                {\r\n                    result += String.fromCharCode(str.charCodeAt(i) - 65248); //把全角字符的unicode编码转换为对应半角字符的unicode码\r\n                } else if (code == 12288)//空格\r\n                {\r\n                    result += String.fromCharCode(str.charCodeAt(i) - 12288 + 32);\r\n                } else {\r\n                    result += str.charAt(i);\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        function ToDBC(txtstring) {\r\n            txtstring = utils.html(txtstring);\r\n            var tmp = \"\";\r\n            var mark = \"\";/*用于判断,如果是html尖括里的标记,则不进行全角的转换*/\r\n            for (var i = 0; i < txtstring.length; i++) {\r\n                if (txtstring.charCodeAt(i) == 32) {\r\n                    tmp = tmp + String.fromCharCode(12288);\r\n                }\r\n                else if (txtstring.charCodeAt(i) < 127) {\r\n                    tmp = tmp + String.fromCharCode(txtstring.charCodeAt(i) + 65248);\r\n                }\r\n                else {\r\n                    tmp += txtstring.charAt(i);\r\n                }\r\n            }\r\n            return tmp;\r\n        }\r\n\r\n        function readLocalOpts() {\r\n            var cookieOpt = me.getPreferences('autotypeset');\r\n            utils.extend(me.options.autotypeset, cookieOpt);\r\n        }\r\n\r\n        me.commands['autotypeset'] = {\r\n            execCommand: function () {\r\n                me.removeListener('beforepaste', autotype);\r\n                if (opt.pasteFilter) {\r\n                    me.addListener('beforepaste', autotype);\r\n                }\r\n                autotype.call(me)\r\n            }\r\n\r\n        };\r\n\r\n    };\r\n\r\n\r\n\r\n    // plugins/autosubmit.js\r\n    /**\r\n     * 快捷键提交\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * 提交表单\r\n     * @command autosubmit\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'autosubmit' );\r\n     * ```\r\n     */\r\n\r\n    UE.plugin.register('autosubmit', function () {\r\n        return {\r\n            shortcutkey: {\r\n                \"autosubmit\": \"ctrl+13\" //手动提交\r\n            },\r\n            commands: {\r\n                'autosubmit': {\r\n                    execCommand: function () {\r\n                        var me = this,\r\n                            form = domUtils.findParentByTagName(me.iframe, \"form\", false);\r\n                        if (form) {\r\n                            if (me.fireEvent(\"beforesubmit\") === false) {\r\n                                return;\r\n                            }\r\n                            me.sync();\r\n                            form.submit();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    // plugins/background.js\r\n    /**\r\n     * 背景插件，为UEditor提供设置背景功能\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n    UE.plugin.register('background', function () {\r\n        var me = this,\r\n            cssRuleId = 'editor_background',\r\n            isSetColored,\r\n            reg = new RegExp('body[\\\\s]*\\\\{(.+)\\\\}', 'i');\r\n\r\n        function stringToObj(str) {\r\n            var obj = {}, styles = str.split(';');\r\n            utils.each(styles, function (v) {\r\n                var index = v.indexOf(':'),\r\n                    key = utils.trim(v.substr(0, index)).toLowerCase();\r\n                key && (obj[key] = utils.trim(v.substr(index + 1) || ''));\r\n            });\r\n            return obj;\r\n        }\r\n\r\n        function setBackground(obj) {\r\n            if (obj) {\r\n                var styles = [];\r\n                for (var name in obj) {\r\n                    if (obj.hasOwnProperty(name)) {\r\n                        styles.push(name + \":\" + obj[name] + '; ');\r\n                    }\r\n                }\r\n                utils.cssRule(cssRuleId, styles.length ? ('body{' + styles.join(\"\") + '}') : '', me.document);\r\n            } else {\r\n                utils.cssRule(cssRuleId, '', me.document)\r\n            }\r\n        }\r\n        //重写editor.hasContent方法\r\n\r\n        var orgFn = me.hasContents;\r\n        me.hasContents = function () {\r\n            if (me.queryCommandValue('background')) {\r\n                return true\r\n            }\r\n            return orgFn.apply(me, arguments);\r\n        };\r\n        return {\r\n            bindEvents: {\r\n                'getAllHtml': function (type, headHtml) {\r\n                    var body = this.body,\r\n                        su = domUtils.getComputedStyle(body, \"background-image\"),\r\n                        url = \"\";\r\n                    if (su.indexOf(me.options.imagePath) > 0) {\r\n                        url = su.substring(su.indexOf(me.options.imagePath), su.length - 1).replace(/\"|\\(|\\)/ig, \"\");\r\n                    } else {\r\n                        url = su != \"none\" ? su.replace(/url\\(\"?|\"?\\)/ig, \"\") : \"\";\r\n                    }\r\n                    var html = '<style type=\"text/css\">body{';\r\n                    var bgObj = {\r\n                        \"background-color\": domUtils.getComputedStyle(body, \"background-color\") || \"#ffffff\",\r\n                        'background-image': url ? 'url(' + url + ')' : '',\r\n                        'background-repeat': domUtils.getComputedStyle(body, \"background-repeat\") || \"\",\r\n                        'background-position': browser.ie ? (domUtils.getComputedStyle(body, \"background-position-x\") + \" \" + domUtils.getComputedStyle(body, \"background-position-y\")) : domUtils.getComputedStyle(body, \"background-position\"),\r\n                        'height': domUtils.getComputedStyle(body, \"height\")\r\n                    };\r\n                    for (var name in bgObj) {\r\n                        if (bgObj.hasOwnProperty(name)) {\r\n                            html += name + \":\" + bgObj[name] + \"; \";\r\n                        }\r\n                    }\r\n                    html += '}</style> ';\r\n                    headHtml.push(html);\r\n                },\r\n                'aftersetcontent': function () {\r\n                    if (isSetColored == false) setBackground();\r\n                }\r\n            },\r\n            inputRule: function (root) {\r\n                isSetColored = false;\r\n                utils.each(root.getNodesByTagName('p'), function (p) {\r\n                    var styles = p.getAttr('data-background');\r\n                    if (styles) {\r\n                        isSetColored = true;\r\n                        setBackground(stringToObj(styles));\r\n                        p.parentNode.removeChild(p);\r\n                    }\r\n                })\r\n            },\r\n            outputRule: function (root) {\r\n                var me = this,\r\n                    styles = (utils.cssRule(cssRuleId, me.document) || '').replace(/[\\n\\r]+/g, '').match(reg);\r\n                if (styles) {\r\n                    root.appendChild(UE.uNode.createElement('<p style=\"display:none;\" data-background=\"' + utils.trim(styles[1].replace(/\"/g, '').replace(/[\\s]+/g, ' ')) + '\"><br/></p>'));\r\n                }\r\n            },\r\n            commands: {\r\n                'background': {\r\n                    execCommand: function (cmd, obj) {\r\n                        setBackground(obj);\r\n                    },\r\n                    queryCommandValue: function () {\r\n                        var me = this,\r\n                            styles = (utils.cssRule(cssRuleId, me.document) || '').replace(/[\\n\\r]+/g, '').match(reg);\r\n                        return styles ? stringToObj(styles[1]) : null;\r\n                    },\r\n                    notNeedUndo: true\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    // plugins/image.js\r\n    /**\r\n     * 图片插入、排版插件\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * 图片对齐方式\r\n     * @command imagefloat\r\n     * @method execCommand\r\n     * @remind 值center为独占一行居中\r\n     * @param { String } cmd 命令字符串\r\n     * @param { String } align 对齐方式，可传left、right、none、center\r\n     * @remaind center表示图片独占一行\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'imagefloat', 'center' );\r\n     * ```\r\n     */\r\n\r\n    /**\r\n     * 如果选区所在位置是图片区域\r\n     * @command imagefloat\r\n     * @method queryCommandValue\r\n     * @param { String } cmd 命令字符串\r\n     * @return { String } 返回图片对齐方式\r\n     * @example\r\n     * ```javascript\r\n     * editor.queryCommandValue( 'imagefloat' );\r\n     * ```\r\n     */\r\n\r\n    UE.commands['imagefloat'] = {\r\n        execCommand: function (cmd, align) {\r\n            var me = this,\r\n                range = me.selection.getRange();\r\n            if (!range.collapsed) {\r\n                var img = range.getClosedNode();\r\n                if (img && img.tagName == 'IMG') {\r\n                    switch (align) {\r\n                        case 'left':\r\n                        case 'right':\r\n                        case 'none':\r\n                            var pN = img.parentNode, tmpNode, pre, next;\r\n                            while (dtd.$inline[pN.tagName] || pN.tagName == 'A') {\r\n                                pN = pN.parentNode;\r\n                            }\r\n                            tmpNode = pN;\r\n                            if (tmpNode.tagName == 'P' && domUtils.getStyle(tmpNode, 'text-align') == 'center') {\r\n                                if (!domUtils.isBody(tmpNode) && domUtils.getChildCount(tmpNode, function (node) {\r\n                                    return !domUtils.isBr(node) && !domUtils.isWhitespace(node);\r\n                                }) == 1) {\r\n                                    pre = tmpNode.previousSibling;\r\n                                    next = tmpNode.nextSibling;\r\n                                    if (pre && next && pre.nodeType == 1 && next.nodeType == 1 && pre.tagName == next.tagName && domUtils.isBlockElm(pre)) {\r\n                                        pre.appendChild(tmpNode.firstChild);\r\n                                        while (next.firstChild) {\r\n                                            pre.appendChild(next.firstChild);\r\n                                        }\r\n                                        domUtils.remove(tmpNode);\r\n                                        domUtils.remove(next);\r\n                                    } else {\r\n                                        domUtils.setStyle(tmpNode, 'text-align', '');\r\n                                    }\r\n\r\n\r\n                                }\r\n\r\n                                range.selectNode(img).select();\r\n                            }\r\n                            domUtils.setStyle(img, 'float', align == 'none' ? '' : align);\r\n                            if (align == 'none') {\r\n                                domUtils.removeAttributes(img, 'align');\r\n                            }\r\n\r\n                            break;\r\n                        case 'center':\r\n                            if (me.queryCommandValue('imagefloat') != 'center') {\r\n                                pN = img.parentNode;\r\n                                domUtils.setStyle(img, 'float', '');\r\n                                domUtils.removeAttributes(img, 'align');\r\n                                tmpNode = img;\r\n                                while (pN && domUtils.getChildCount(pN, function (node) {\r\n                                    return !domUtils.isBr(node) && !domUtils.isWhitespace(node);\r\n                                }) == 1\r\n                                    && (dtd.$inline[pN.tagName] || pN.tagName == 'A')) {\r\n                                    tmpNode = pN;\r\n                                    pN = pN.parentNode;\r\n                                }\r\n                                range.setStartBefore(tmpNode).setCursor(false);\r\n                                pN = me.document.createElement('div');\r\n                                pN.appendChild(tmpNode);\r\n                                domUtils.setStyle(tmpNode, 'float', '');\r\n\r\n                                me.execCommand('insertHtml', '<p id=\"_img_parent_tmp\" style=\"text-align:center\">' + pN.innerHTML + '</p>');\r\n\r\n                                tmpNode = me.document.getElementById('_img_parent_tmp');\r\n                                if (!tmpNode) {\r\n                                    return;\r\n                                }\r\n                                tmpNode.removeAttribute('id');\r\n                                tmpNode = tmpNode.firstChild;\r\n                                range.selectNode(tmpNode).select();\r\n                                //去掉后边多余的元素\r\n                                next = tmpNode.parentNode.nextSibling;\r\n                                if (next && domUtils.isEmptyNode(next)) {\r\n                                    domUtils.remove(next);\r\n                                }\r\n\r\n                            }\r\n\r\n                            break;\r\n                    }\r\n\r\n                }\r\n            }\r\n        },\r\n        queryCommandValue: function () {\r\n            var range = this.selection.getRange(),\r\n                startNode, floatStyle;\r\n            if (range.collapsed) {\r\n                return 'none';\r\n            }\r\n            startNode = range.getClosedNode();\r\n            if (startNode && startNode.nodeType == 1 && startNode.tagName == 'IMG') {\r\n                floatStyle = domUtils.getComputedStyle(startNode, 'float') || startNode.getAttribute('align');\r\n\r\n                if (floatStyle == 'none') {\r\n                    floatStyle = domUtils.getComputedStyle(startNode.parentNode, 'text-align') == 'center' ? 'center' : floatStyle;\r\n                }\r\n                return {\r\n                    left: 1,\r\n                    right: 1,\r\n                    center: 1\r\n                }[floatStyle] ? floatStyle : 'none';\r\n            }\r\n            return 'none';\r\n\r\n\r\n        },\r\n        queryCommandState: function () {\r\n            var range = this.selection.getRange(),\r\n                startNode;\r\n\r\n            if (range.collapsed) return -1;\r\n\r\n            startNode = range.getClosedNode();\r\n            if (startNode && startNode.nodeType == 1 && startNode.tagName == 'IMG') {\r\n                return 0;\r\n            }\r\n            return -1;\r\n        }\r\n    };\r\n\r\n\r\n    /**\r\n     * 插入图片\r\n     * @command insertimage\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @param { Object } opt 属性键值对，这些属性都将被复制到当前插入图片\r\n     * @remind 该命令第二个参数可接受一个图片配置项对象的数组，可以插入多张图片，\r\n     * 此时数组的每一个元素都是一个Object类型的图片属性集合。\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'insertimage', {\r\n     *     src:'a/b/c.jpg',\r\n     *     width:'100',\r\n     *     height:'100'\r\n     * } );\r\n     * ```\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'insertimage', [{\r\n     *     src:'a/b/c.jpg',\r\n     *     width:'100',\r\n     *     height:'100'\r\n     * },{\r\n     *     src:'a/b/d.jpg',\r\n     *     width:'100',\r\n     *     height:'100'\r\n     * }] );\r\n     * ```\r\n     */\r\n\r\n    UE.commands['insertimage'] = {\r\n        execCommand: function (cmd, opt) {\r\n\r\n            opt = utils.isArray(opt) ? opt : [opt];\r\n            if (!opt.length) {\r\n                return;\r\n            }\r\n            var me = this,\r\n                range = me.selection.getRange(),\r\n                img = range.getClosedNode();\r\n\r\n            if (me.fireEvent('beforeinsertimage', opt) === true) {\r\n                return;\r\n            }\r\n\r\n            function unhtmlData(imgCi) {\r\n\r\n                utils.each('width,height,border,hspace,vspace'.split(','), function (item) {\r\n\r\n                    if (imgCi[item]) {\r\n                        imgCi[item] = parseInt(imgCi[item], 10) || 0;\r\n                    }\r\n                });\r\n\r\n                utils.each('src,_src'.split(','), function (item) {\r\n\r\n                    if (imgCi[item]) {\r\n                        imgCi[item] = utils.unhtmlForUrl(imgCi[item]);\r\n                    }\r\n                });\r\n                utils.each('title,alt'.split(','), function (item) {\r\n\r\n                    if (imgCi[item]) {\r\n                        imgCi[item] = utils.unhtml(imgCi[item]);\r\n                    }\r\n                });\r\n            }\r\n\r\n            if (img && /img/i.test(img.tagName) && (img.className != \"edui-faked-video\" || img.className.indexOf(\"edui-upload-video\") != -1) && !img.getAttribute(\"word_img\")) {\r\n                var first = opt.shift();\r\n                var floatStyle = first['floatStyle'];\r\n                delete first['floatStyle'];\r\n                ////                img.style.border = (first.border||0) +\"px solid #000\";\r\n                ////                img.style.margin = (first.margin||0) +\"px\";\r\n                //                img.style.cssText += ';margin:' + (first.margin||0) +\"px;\" + 'border:' + (first.border||0) +\"px solid #000\";\r\n                domUtils.setAttributes(img, first);\r\n                me.execCommand('imagefloat', floatStyle);\r\n                if (opt.length > 0) {\r\n                    range.setStartAfter(img).setCursor(false, true);\r\n                    me.execCommand('insertimage', opt);\r\n                }\r\n\r\n            } else {\r\n                var html = [], str = '', ci;\r\n                ci = opt[0];\r\n                if (opt.length == 1) {\r\n                    unhtmlData(ci);\r\n\r\n                    str = '<img src=\"' + ci.src + '\" ' + (ci._src ? ' _src=\"' + ci._src + '\" ' : '') +\r\n                        (ci.width ? 'width=\"' + ci.width + '\" ' : '') +\r\n                        (ci.height ? ' height=\"' + ci.height + '\" ' : '') +\r\n                        (ci['floatStyle'] == 'left' || ci['floatStyle'] == 'right' ? ' style=\"float:' + ci['floatStyle'] + ';\"' : '') +\r\n                        (ci.title && ci.title != \"\" ? ' title=\"' + ci.title + '\"' : '') +\r\n                        (ci.border && ci.border != \"0\" ? ' border=\"' + ci.border + '\"' : '') +\r\n                        (ci.alt && ci.alt != \"\" ? ' alt=\"' + ci.alt + '\"' : '') +\r\n                        (ci.hspace && ci.hspace != \"0\" ? ' hspace = \"' + ci.hspace + '\"' : '') +\r\n                        (ci.vspace && ci.vspace != \"0\" ? ' vspace = \"' + ci.vspace + '\"' : '') + '/>';\r\n                    if (ci['floatStyle'] == 'center') {\r\n                        str = '<p style=\"text-align: center\">' + str + '</p>';\r\n                    }\r\n                    html.push(str);\r\n\r\n                } else {\r\n                    for (var i = 0; ci = opt[i++];) {\r\n                        unhtmlData(ci);\r\n                        str = '<p ' + (ci['floatStyle'] == 'center' ? 'style=\"text-align: center\" ' : '') + '><img src=\"' + ci.src + '\" ' +\r\n                            (ci.width ? 'width=\"' + ci.width + '\" ' : '') + (ci._src ? ' _src=\"' + ci._src + '\" ' : '') +\r\n                            (ci.height ? ' height=\"' + ci.height + '\" ' : '') +\r\n                            ' style=\"' + (ci['floatStyle'] && ci['floatStyle'] != 'center' ? 'float:' + ci['floatStyle'] + ';' : '') +\r\n                            (ci.border || '') + '\" ' +\r\n                            (ci.title ? ' title=\"' + ci.title + '\"' : '') + ' /></p>';\r\n                        html.push(str);\r\n                    }\r\n                }\r\n\r\n                me.execCommand('insertHtml', html.join(''));\r\n            }\r\n\r\n            me.fireEvent('afterinsertimage', opt)\r\n        }\r\n    };\r\n\r\n\r\n    // plugins/justify.js\r\n    /**\r\n     * 段落格式\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * 段落对齐方式\r\n     * @command justify\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @param { String } align 对齐方式：left => 居左，right => 居右，center => 居中，justify => 两端对齐\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'justify', 'center' );\r\n     * ```\r\n     */\r\n    /**\r\n     * 如果选区所在位置是段落区域，返回当前段落对齐方式\r\n     * @command justify\r\n     * @method queryCommandValue\r\n     * @param { String } cmd 命令字符串\r\n     * @return { String } 返回段落对齐方式\r\n     * @example\r\n     * ```javascript\r\n     * editor.queryCommandValue( 'justify' );\r\n     * ```\r\n     */\r\n\r\n    UE.plugins['justify'] = function () {\r\n        var me = this,\r\n            block = domUtils.isBlockElm,\r\n            defaultValue = {\r\n                left: 1,\r\n                right: 1,\r\n                center: 1,\r\n                justify: 1\r\n            },\r\n            doJustify = function (range, style) {\r\n                var bookmark = range.createBookmark(),\r\n                    filterFn = function (node) {\r\n                        return node.nodeType == 1 ? node.tagName.toLowerCase() != 'br' && !domUtils.isBookmarkNode(node) : !domUtils.isWhitespace(node);\r\n                    };\r\n\r\n                range.enlarge(true);\r\n                var bookmark2 = range.createBookmark(),\r\n                    current = domUtils.getNextDomNode(bookmark2.start, false, filterFn),\r\n                    tmpRange = range.cloneRange(),\r\n                    tmpNode;\r\n                while (current && !(domUtils.getPosition(current, bookmark2.end) & domUtils.POSITION_FOLLOWING)) {\r\n                    if (current.nodeType == 3 || !block(current)) {\r\n                        tmpRange.setStartBefore(current);\r\n                        while (current && current !== bookmark2.end && !block(current)) {\r\n                            tmpNode = current;\r\n                            current = domUtils.getNextDomNode(current, false, null, function (node) {\r\n                                return !block(node);\r\n                            });\r\n                        }\r\n                        tmpRange.setEndAfter(tmpNode);\r\n                        var common = tmpRange.getCommonAncestor();\r\n                        if (!domUtils.isBody(common) && block(common)) {\r\n                            domUtils.setStyles(common, utils.isString(style) ? { 'text-align': style } : style);\r\n                            current = common;\r\n                        } else {\r\n                            var p = range.document.createElement('p');\r\n                            domUtils.setStyles(p, utils.isString(style) ? { 'text-align': style } : style);\r\n                            var frag = tmpRange.extractContents();\r\n                            p.appendChild(frag);\r\n                            tmpRange.insertNode(p);\r\n                            current = p;\r\n                        }\r\n                        current = domUtils.getNextDomNode(current, false, filterFn);\r\n                    } else {\r\n                        current = domUtils.getNextDomNode(current, true, filterFn);\r\n                    }\r\n                }\r\n                return range.moveToBookmark(bookmark2).moveToBookmark(bookmark);\r\n            };\r\n\r\n        UE.commands['justify'] = {\r\n            execCommand: function (cmdName, align) {\r\n                var range = this.selection.getRange(),\r\n                    txt;\r\n\r\n                //闭合时单独处理\r\n                if (range.collapsed) {\r\n                    txt = this.document.createTextNode('p');\r\n                    range.insertNode(txt);\r\n                }\r\n                doJustify(range, align);\r\n                if (txt) {\r\n                    range.setStartBefore(txt).collapse(true);\r\n                    domUtils.remove(txt);\r\n                }\r\n\r\n                range.select();\r\n\r\n\r\n                return true;\r\n            },\r\n            queryCommandValue: function () {\r\n                var startNode = this.selection.getStart(),\r\n                    value = domUtils.getComputedStyle(startNode, 'text-align');\r\n                return defaultValue[value] ? value : 'left';\r\n            },\r\n            queryCommandState: function () {\r\n                var start = this.selection.getStart(),\r\n                    cell = start && domUtils.findParentByTagName(start, [\"td\", \"th\", \"caption\"], true);\r\n\r\n                return cell ? -1 : 0;\r\n            }\r\n\r\n        };\r\n    };\r\n\r\n\r\n    // plugins/font.js\r\n    /**\r\n     * 字体颜色,背景色,字号,字体,下划线,删除线\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * 字体颜色\r\n     * @command forecolor\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @param { String } value 色值(必须十六进制)\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'forecolor', '#000' );\r\n     * ```\r\n     */\r\n    /**\r\n     * 返回选区字体颜色\r\n     * @command forecolor\r\n     * @method queryCommandValue\r\n     * @param { String } cmd 命令字符串\r\n     * @return { String } 返回字体颜色\r\n     * @example\r\n     * ```javascript\r\n     * editor.queryCommandValue( 'forecolor' );\r\n     * ```\r\n     */\r\n\r\n    /**\r\n     * 字体背景颜色\r\n     * @command backcolor\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @param { String } value 色值(必须十六进制)\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'backcolor', '#000' );\r\n     * ```\r\n     */\r\n    /**\r\n     * 返回选区字体颜色\r\n     * @command backcolor\r\n     * @method queryCommandValue\r\n     * @param { String } cmd 命令字符串\r\n     * @return { String } 返回字体背景颜色\r\n     * @example\r\n     * ```javascript\r\n     * editor.queryCommandValue( 'backcolor' );\r\n     * ```\r\n     */\r\n\r\n    /**\r\n     * 字体大小\r\n     * @command fontsize\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @param { String } value 字体大小\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'fontsize', '14px' );\r\n     * ```\r\n     */\r\n    /**\r\n     * 返回选区字体大小\r\n     * @command fontsize\r\n     * @method queryCommandValue\r\n     * @param { String } cmd 命令字符串\r\n     * @return { String } 返回字体大小\r\n     * @example\r\n     * ```javascript\r\n     * editor.queryCommandValue( 'fontsize' );\r\n     * ```\r\n     */\r\n\r\n    /**\r\n     * 字体样式\r\n     * @command fontfamily\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @param { String } value 字体样式\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'fontfamily', '微软雅黑' );\r\n     * ```\r\n     */\r\n    /**\r\n     * 返回选区字体样式\r\n     * @command fontfamily\r\n     * @method queryCommandValue\r\n     * @param { String } cmd 命令字符串\r\n     * @return { String } 返回字体样式\r\n     * @example\r\n     * ```javascript\r\n     * editor.queryCommandValue( 'fontfamily' );\r\n     * ```\r\n     */\r\n\r\n    /**\r\n     * 字体下划线,与删除线互斥\r\n     * @command underline\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'underline' );\r\n     * ```\r\n     */\r\n\r\n    /**\r\n     * 字体删除线,与下划线互斥\r\n     * @command strikethrough\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'strikethrough' );\r\n     * ```\r\n     */\r\n\r\n    /**\r\n     * 字体边框\r\n     * @command fontborder\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'fontborder' );\r\n     * ```\r\n     */\r\n\r\n    UE.plugins['font'] = function () {\r\n        var me = this,\r\n            fonts = {\r\n                'forecolor': 'color',\r\n                'backcolor': 'background-color',\r\n                'fontsize': 'font-size',\r\n                'fontfamily': 'font-family',\r\n                'underline': 'text-decoration',\r\n                'strikethrough': 'text-decoration',\r\n                'fontborder': 'border'\r\n            },\r\n            needCmd = { 'underline': 1, 'strikethrough': 1, 'fontborder': 1 },\r\n            needSetChild = {\r\n                'forecolor': 'color',\r\n                'backcolor': 'background-color',\r\n                'fontsize': 'font-size',\r\n                'fontfamily': 'font-family'\r\n\r\n            };\r\n        me.setOpt({\r\n            'fontfamily': [\r\n                { name: 'songti', val: '宋体,SimSun' },\r\n                { name: 'yahei', val: '微软雅黑,Microsoft YaHei' },\r\n                { name: 'kaiti', val: '楷体,楷体_GB2312, SimKai' },\r\n                { name: 'heiti', val: '黑体, SimHei' },\r\n                { name: 'lishu', val: '隶书, SimLi' },\r\n                { name: 'andaleMono', val: 'andale mono' },\r\n                { name: 'arial', val: 'arial, helvetica,sans-serif' },\r\n                { name: 'arialBlack', val: 'arial black,avant garde' },\r\n                { name: 'comicSansMs', val: 'comic sans ms' },\r\n                { name: 'impact', val: 'impact,chicago' },\r\n                { name: 'timesNewRoman', val: 'times new roman' }\r\n            ],\r\n            'fontsize': [10, 11, 12, 14, 16, 18, 20, 24, 36]\r\n        });\r\n\r\n        function mergeWithParent(node) {\r\n            var parent;\r\n            while (parent = node.parentNode) {\r\n                if (parent.tagName == 'SPAN' && domUtils.getChildCount(parent, function (child) {\r\n                    return !domUtils.isBookmarkNode(child) && !domUtils.isBr(child)\r\n                }) == 1) {\r\n                    parent.style.cssText += node.style.cssText;\r\n                    domUtils.remove(node, true);\r\n                    node = parent;\r\n\r\n                } else {\r\n                    break;\r\n                }\r\n            }\r\n\r\n        }\r\n        function mergeChild(rng, cmdName, value) {\r\n            if (needSetChild[cmdName]) {\r\n                rng.adjustmentBoundary();\r\n                if (!rng.collapsed && rng.startContainer.nodeType == 1) {\r\n                    var start = rng.startContainer.childNodes[rng.startOffset];\r\n                    if (start && domUtils.isTagNode(start, 'span')) {\r\n                        var bk = rng.createBookmark();\r\n                        utils.each(domUtils.getElementsByTagName(start, 'span'), function (span) {\r\n                            if (!span.parentNode || domUtils.isBookmarkNode(span)) return;\r\n                            if (cmdName == 'backcolor' && domUtils.getComputedStyle(span, 'background-color').toLowerCase() === value) {\r\n                                return;\r\n                            }\r\n                            domUtils.removeStyle(span, needSetChild[cmdName]);\r\n                            if (span.style.cssText.replace(/^\\s+$/, '').length == 0) {\r\n                                domUtils.remove(span, true)\r\n                            }\r\n                        });\r\n                        rng.moveToBookmark(bk)\r\n                    }\r\n                }\r\n            }\r\n\r\n        }\r\n        function mergesibling(rng, cmdName, value) {\r\n            var collapsed = rng.collapsed,\r\n                bk = rng.createBookmark(), common;\r\n            if (collapsed) {\r\n                common = bk.start.parentNode;\r\n                while (dtd.$inline[common.tagName]) {\r\n                    common = common.parentNode;\r\n                }\r\n            } else {\r\n                common = domUtils.getCommonAncestor(bk.start, bk.end);\r\n            }\r\n            utils.each(domUtils.getElementsByTagName(common, 'span'), function (span) {\r\n                if (!span.parentNode || domUtils.isBookmarkNode(span)) return;\r\n                if (/\\s*border\\s*:\\s*none;?\\s*/i.test(span.style.cssText)) {\r\n                    if (/^\\s*border\\s*:\\s*none;?\\s*$/.test(span.style.cssText)) {\r\n                        domUtils.remove(span, true);\r\n                    } else {\r\n                        domUtils.removeStyle(span, 'border');\r\n                    }\r\n                    return\r\n                }\r\n                if (/border/i.test(span.style.cssText) && span.parentNode.tagName == 'SPAN' && /border/i.test(span.parentNode.style.cssText)) {\r\n                    span.style.cssText = span.style.cssText.replace(/border[^:]*:[^;]+;?/gi, '');\r\n                }\r\n                if (!(cmdName == 'fontborder' && value == 'none')) {\r\n                    var next = span.nextSibling;\r\n                    while (next && next.nodeType == 1 && next.tagName == 'SPAN') {\r\n                        if (domUtils.isBookmarkNode(next) && cmdName == 'fontborder') {\r\n                            span.appendChild(next);\r\n                            next = span.nextSibling;\r\n                            continue;\r\n                        }\r\n                        if (next.style.cssText == span.style.cssText) {\r\n                            domUtils.moveChild(next, span);\r\n                            domUtils.remove(next);\r\n                        }\r\n                        if (span.nextSibling === next)\r\n                            break;\r\n                        next = span.nextSibling;\r\n                    }\r\n                }\r\n\r\n\r\n                mergeWithParent(span);\r\n                if (browser.ie && browser.version > 8) {\r\n                    //拷贝父亲们的特别的属性,这里只做背景颜色的处理\r\n                    var parent = domUtils.findParent(span, function (n) { return n.tagName == 'SPAN' && /background-color/.test(n.style.cssText) });\r\n                    if (parent && !/background-color/.test(span.style.cssText)) {\r\n                        span.style.backgroundColor = parent.style.backgroundColor;\r\n                    }\r\n                }\r\n\r\n            });\r\n            rng.moveToBookmark(bk);\r\n            mergeChild(rng, cmdName, value)\r\n        }\r\n\r\n        me.addInputRule(function (root) {\r\n            utils.each(root.getNodesByTagName('u s del font strike'), function (node) {\r\n                if (node.tagName == 'font') {\r\n                    var cssStyle = [];\r\n                    for (var p in node.attrs) {\r\n                        switch (p) {\r\n                            case 'size':\r\n                                cssStyle.push('font-size:' +\r\n                                    ({\r\n                                        '1': '10',\r\n                                        '2': '12',\r\n                                        '3': '16',\r\n                                        '4': '18',\r\n                                        '5': '24',\r\n                                        '6': '32',\r\n                                        '7': '48'\r\n                                    }[node.attrs[p]] || node.attrs[p]) + 'px');\r\n                                break;\r\n                            case 'color':\r\n                                cssStyle.push('color:' + node.attrs[p]);\r\n                                break;\r\n                            case 'face':\r\n                                cssStyle.push('font-family:' + node.attrs[p]);\r\n                                break;\r\n                            case 'style':\r\n                                cssStyle.push(node.attrs[p]);\r\n                        }\r\n                    }\r\n                    node.attrs = {\r\n                        'style': cssStyle.join(';')\r\n                    };\r\n                } else {\r\n                    var val = node.tagName == 'u' ? 'underline' : 'line-through';\r\n                    node.attrs = {\r\n                        'style': (node.getAttr('style') || '') + 'text-decoration:' + val + ';'\r\n                    }\r\n                }\r\n                node.tagName = 'span';\r\n            });\r\n            //        utils.each(root.getNodesByTagName('span'), function (node) {\r\n            //            var val;\r\n            //            if(val = node.getAttr('class')){\r\n            //                if(/fontstrikethrough/.test(val)){\r\n            //                    node.setStyle('text-decoration','line-through');\r\n            //                    if(node.attrs['class']){\r\n            //                        node.attrs['class'] = node.attrs['class'].replace(/fontstrikethrough/,'');\r\n            //                    }else{\r\n            //                        node.setAttr('class')\r\n            //                    }\r\n            //                }\r\n            //                if(/fontborder/.test(val)){\r\n            //                    node.setStyle('border','1px solid #000');\r\n            //                    if(node.attrs['class']){\r\n            //                        node.attrs['class'] = node.attrs['class'].replace(/fontborder/,'');\r\n            //                    }else{\r\n            //                        node.setAttr('class')\r\n            //                    }\r\n            //                }\r\n            //            }\r\n            //        });\r\n        });\r\n        //    me.addOutputRule(function(root){\r\n        //        utils.each(root.getNodesByTagName('span'), function (node) {\r\n        //            var val;\r\n        //            if(val = node.getStyle('text-decoration')){\r\n        //                if(/line-through/.test(val)){\r\n        //                    if(node.attrs['class']){\r\n        //                        node.attrs['class'] += ' fontstrikethrough';\r\n        //                    }else{\r\n        //                        node.setAttr('class','fontstrikethrough')\r\n        //                    }\r\n        //                }\r\n        //\r\n        //                node.setStyle('text-decoration')\r\n        //            }\r\n        //            if(val = node.getStyle('border')){\r\n        //                if(/1px/.test(val) && /solid/.test(val)){\r\n        //                    if(node.attrs['class']){\r\n        //                        node.attrs['class'] += ' fontborder';\r\n        //\r\n        //                    }else{\r\n        //                        node.setAttr('class','fontborder')\r\n        //                    }\r\n        //                }\r\n        //                node.setStyle('border')\r\n        //\r\n        //            }\r\n        //        });\r\n        //    });\r\n        for (var p in fonts) {\r\n            (function (cmd, style) {\r\n                UE.commands[cmd] = {\r\n                    execCommand: function (cmdName, value) {\r\n                        value = value || (this.queryCommandState(cmdName) ? 'none' : cmdName == 'underline' ? 'underline' :\r\n                            cmdName == 'fontborder' ? '1px solid #000' :\r\n                                'line-through');\r\n                        var me = this,\r\n                            range = this.selection.getRange(),\r\n                            text;\r\n\r\n                        if (value == 'default') {\r\n\r\n                            if (range.collapsed) {\r\n                                text = me.document.createTextNode('font');\r\n                                range.insertNode(text).select();\r\n\r\n                            }\r\n                            me.execCommand('removeFormat', 'span,a', style);\r\n                            if (text) {\r\n                                range.setStartBefore(text).collapse(true);\r\n                                domUtils.remove(text);\r\n                            }\r\n                            mergesibling(range, cmdName, value);\r\n                            range.select()\r\n                        } else {\r\n                            if (!range.collapsed) {\r\n                                if (needCmd[cmd] && me.queryCommandValue(cmd)) {\r\n                                    me.execCommand('removeFormat', 'span,a', style);\r\n                                }\r\n                                range = me.selection.getRange();\r\n\r\n                                range.applyInlineStyle('span', { 'style': style + ':' + value });\r\n                                mergesibling(range, cmdName, value);\r\n                                range.select();\r\n                            } else {\r\n\r\n                                var span = domUtils.findParentByTagName(range.startContainer, 'span', true);\r\n                                text = me.document.createTextNode('font');\r\n                                if (span && !span.children.length && !span[browser.ie ? 'innerText' : 'textContent'].replace(fillCharReg, '').length) {\r\n                                    //for ie hack when enter\r\n                                    range.insertNode(text);\r\n                                    if (needCmd[cmd]) {\r\n                                        range.selectNode(text).select();\r\n                                        me.execCommand('removeFormat', 'span,a', style, null);\r\n\r\n                                        span = domUtils.findParentByTagName(text, 'span', true);\r\n                                        range.setStartBefore(text);\r\n\r\n                                    }\r\n                                    span && (span.style.cssText += ';' + style + ':' + value);\r\n                                    range.collapse(true).select();\r\n\r\n\r\n                                } else {\r\n                                    range.insertNode(text);\r\n                                    range.selectNode(text).select();\r\n                                    span = range.document.createElement('span');\r\n\r\n                                    if (needCmd[cmd]) {\r\n                                        //a标签内的不处理跳过\r\n                                        if (domUtils.findParentByTagName(text, 'a', true)) {\r\n                                            range.setStartBefore(text).setCursor();\r\n                                            domUtils.remove(text);\r\n                                            return;\r\n                                        }\r\n                                        me.execCommand('removeFormat', 'span,a', style);\r\n                                    }\r\n\r\n                                    span.style.cssText = style + ':' + value;\r\n\r\n\r\n                                    text.parentNode.insertBefore(span, text);\r\n                                    //修复，span套span 但样式不继承的问题\r\n                                    if (!browser.ie || browser.ie && browser.version == 9) {\r\n                                        var spanParent = span.parentNode;\r\n                                        while (!domUtils.isBlockElm(spanParent)) {\r\n                                            if (spanParent.tagName == 'SPAN') {\r\n                                                //opera合并style不会加入\";\"\r\n                                                span.style.cssText = spanParent.style.cssText + \";\" + span.style.cssText;\r\n                                            }\r\n                                            spanParent = spanParent.parentNode;\r\n                                        }\r\n                                    }\r\n\r\n\r\n                                    if (opera) {\r\n                                        setTimeout(function () {\r\n                                            range.setStart(span, 0).collapse(true);\r\n                                            mergesibling(range, cmdName, value);\r\n                                            range.select();\r\n                                        });\r\n                                    } else {\r\n                                        range.setStart(span, 0).collapse(true);\r\n                                        mergesibling(range, cmdName, value);\r\n                                        range.select();\r\n                                    }\r\n\r\n                                    //trace:981\r\n                                    //domUtils.mergeToParent(span)\r\n                                }\r\n                                domUtils.remove(text);\r\n                            }\r\n\r\n\r\n                        }\r\n                        return true;\r\n                    },\r\n                    queryCommandValue: function (cmdName) {\r\n                        var startNode = this.selection.getStart();\r\n\r\n                        //trace:946\r\n                        if (cmdName == 'underline' || cmdName == 'strikethrough') {\r\n                            var tmpNode = startNode, value;\r\n                            while (tmpNode && !domUtils.isBlockElm(tmpNode) && !domUtils.isBody(tmpNode)) {\r\n                                if (tmpNode.nodeType == 1) {\r\n                                    value = domUtils.getComputedStyle(tmpNode, style);\r\n                                    if (value != 'none') {\r\n                                        return value;\r\n                                    }\r\n                                }\r\n\r\n                                tmpNode = tmpNode.parentNode;\r\n                            }\r\n                            return 'none';\r\n                        }\r\n                        if (cmdName == 'fontborder') {\r\n                            var tmp = startNode, val;\r\n                            while (tmp && dtd.$inline[tmp.tagName]) {\r\n                                if (val = domUtils.getComputedStyle(tmp, 'border')) {\r\n\r\n                                    if (/1px/.test(val) && /solid/.test(val)) {\r\n                                        return val;\r\n                                    }\r\n                                }\r\n                                tmp = tmp.parentNode;\r\n                            }\r\n                            return ''\r\n                        }\r\n\r\n                        if (cmdName == 'FontSize') {\r\n                            var styleVal = domUtils.getComputedStyle(startNode, style),\r\n                                tmp = /^([\\d\\.]+)(\\w+)$/.exec(styleVal);\r\n\r\n                            if (tmp) {\r\n\r\n                                return Math.floor(tmp[1]) + tmp[2];\r\n\r\n                            }\r\n\r\n                            return styleVal;\r\n\r\n                        }\r\n\r\n                        return domUtils.getComputedStyle(startNode, style);\r\n                    },\r\n                    queryCommandState: function (cmdName) {\r\n                        if (!needCmd[cmdName])\r\n                            return 0;\r\n                        var val = this.queryCommandValue(cmdName);\r\n                        if (cmdName == 'fontborder') {\r\n                            return /1px/.test(val) && /solid/.test(val)\r\n                        } else {\r\n                            return cmdName == 'underline' ? /underline/.test(val) : /line\\-through/.test(val);\r\n\r\n                        }\r\n\r\n                    }\r\n                };\r\n            })(p, fonts[p]);\r\n        }\r\n    };\r\n\r\n    // plugins/link.js\r\n    /**\r\n     * 超链接\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * 插入超链接\r\n     * @command link\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @param { Object } options   设置自定义属性，例如：url、title、target\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'link', '{\r\n     *     url:'ueditor.baidu.com',\r\n     *     title:'ueditor',\r\n     *     target:'_blank'\r\n     * }' );\r\n     * ```\r\n     */\r\n    /**\r\n     * 返回当前选中的第一个超链接节点\r\n     * @command link\r\n     * @method queryCommandValue\r\n     * @param { String } cmd 命令字符串\r\n     * @return { Element } 超链接节点\r\n     * @example\r\n     * ```javascript\r\n     * editor.queryCommandValue( 'link' );\r\n     * ```\r\n     */\r\n\r\n    /**\r\n     * 取消超链接\r\n     * @command unlink\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'unlink');\r\n     * ```\r\n     */\r\n\r\n    UE.plugins['link'] = function () {\r\n        function optimize(range) {\r\n            var start = range.startContainer, end = range.endContainer;\r\n\r\n            if (start = domUtils.findParentByTagName(start, 'a', true)) {\r\n                range.setStartBefore(start);\r\n            }\r\n            if (end = domUtils.findParentByTagName(end, 'a', true)) {\r\n                range.setEndAfter(end);\r\n            }\r\n        }\r\n\r\n\r\n        UE.commands['unlink'] = {\r\n            execCommand: function () {\r\n                var range = this.selection.getRange(),\r\n                    bookmark;\r\n                if (range.collapsed && !domUtils.findParentByTagName(range.startContainer, 'a', true)) {\r\n                    return;\r\n                }\r\n                bookmark = range.createBookmark();\r\n                optimize(range);\r\n                range.removeInlineStyle('a').moveToBookmark(bookmark).select();\r\n            },\r\n            queryCommandState: function () {\r\n                return !this.highlight && this.queryCommandValue('link') ? 0 : -1;\r\n            }\r\n\r\n        };\r\n        function doLink(range, opt, me) {\r\n            var rngClone = range.cloneRange(),\r\n                link = me.queryCommandValue('link');\r\n            optimize(range = range.adjustmentBoundary());\r\n            var start = range.startContainer;\r\n            if (start.nodeType == 1 && link) {\r\n                start = start.childNodes[range.startOffset];\r\n                if (start && start.nodeType == 1 && start.tagName == 'A' && /^(?:https?|ftp|file)\\s*:\\s*\\/\\//.test(start[browser.ie ? 'innerText' : 'textContent'])) {\r\n                    start[browser.ie ? 'innerText' : 'textContent'] = utils.html(opt.textValue || opt.href);\r\n\r\n                }\r\n            }\r\n            if (!rngClone.collapsed || link) {\r\n                range.removeInlineStyle('a');\r\n                rngClone = range.cloneRange();\r\n            }\r\n\r\n            if (rngClone.collapsed) {\r\n                var a = range.document.createElement('a'),\r\n                    text = '';\r\n                if (opt.textValue) {\r\n\r\n                    text = utils.html(opt.textValue);\r\n                    delete opt.textValue;\r\n                } else {\r\n                    text = utils.html(opt.href);\r\n\r\n                }\r\n                domUtils.setAttributes(a, opt);\r\n                start = domUtils.findParentByTagName(rngClone.startContainer, 'a', true);\r\n                if (start && domUtils.isInNodeEndBoundary(rngClone, start)) {\r\n                    range.setStartAfter(start).collapse(true);\r\n\r\n                }\r\n                a[browser.ie ? 'innerText' : 'textContent'] = text;\r\n                range.insertNode(a).selectNode(a);\r\n            } else {\r\n                range.applyInlineStyle('a', opt);\r\n\r\n            }\r\n        }\r\n        UE.commands['link'] = {\r\n            execCommand: function (cmdName, opt) {\r\n                var range;\r\n                opt._href && (opt._href = utils.unhtml(opt._href, /[<\">]/g));\r\n                opt.href && (opt.href = utils.unhtml(opt.href, /[<\">]/g));\r\n                opt.textValue && (opt.textValue = utils.unhtml(opt.textValue, /[<\">]/g));\r\n                doLink(range = this.selection.getRange(), opt, this);\r\n                //闭合都不加占位符，如果加了会在a后边多个占位符节点，导致a是图片背景组成的列表，出现空白问题\r\n                range.collapse().select(true);\r\n\r\n            },\r\n            queryCommandValue: function () {\r\n                var range = this.selection.getRange(),\r\n                    node;\r\n                if (range.collapsed) {\r\n                    //                    node = this.selection.getStart();\r\n                    //在ie下getstart()取值偏上了\r\n                    node = range.startContainer;\r\n                    node = node.nodeType == 1 ? node : node.parentNode;\r\n\r\n                    if (node && (node = domUtils.findParentByTagName(node, 'a', true)) && !domUtils.isInNodeEndBoundary(range, node)) {\r\n\r\n                        return node;\r\n                    }\r\n                } else {\r\n                    //trace:1111  如果是<p><a>xx</a></p> startContainer是p就会找不到a\r\n                    range.shrinkBoundary();\r\n                    var start = range.startContainer.nodeType == 3 || !range.startContainer.childNodes[range.startOffset] ? range.startContainer : range.startContainer.childNodes[range.startOffset],\r\n                        end = range.endContainer.nodeType == 3 || range.endOffset == 0 ? range.endContainer : range.endContainer.childNodes[range.endOffset - 1],\r\n                        common = range.getCommonAncestor();\r\n                    node = domUtils.findParentByTagName(common, 'a', true);\r\n                    if (!node && common.nodeType == 1) {\r\n\r\n                        var as = common.getElementsByTagName('a'),\r\n                            ps, pe;\r\n\r\n                        for (var i = 0, ci; ci = as[i++];) {\r\n                            ps = domUtils.getPosition(ci, start), pe = domUtils.getPosition(ci, end);\r\n                            if ((ps & domUtils.POSITION_FOLLOWING || ps & domUtils.POSITION_CONTAINS)\r\n                                &&\r\n                                (pe & domUtils.POSITION_PRECEDING || pe & domUtils.POSITION_CONTAINS)\r\n                            ) {\r\n                                node = ci;\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                    return node;\r\n                }\r\n\r\n            },\r\n            queryCommandState: function () {\r\n                //判断如果是视频的话连接不可用\r\n                //fix 853\r\n                var img = this.selection.getRange().getClosedNode(),\r\n                    flag = img && (img.className == \"edui-faked-video\" || img.className.indexOf(\"edui-upload-video\") != -1);\r\n                return flag ? -1 : 0;\r\n            }\r\n        };\r\n    };\r\n\r\n    // plugins/iframe.js\r\n    ///import core\r\n    ///import plugins\\inserthtml.js\r\n    ///commands 插入框架\r\n    ///commandsName  InsertFrame\r\n    ///commandsTitle  插入Iframe\r\n    ///commandsDialog  dialogs\\insertframe\r\n\r\n    UE.plugins['insertframe'] = function () {\r\n        var me = this;\r\n        function deleteIframe() {\r\n            me._iframe && delete me._iframe;\r\n        }\r\n\r\n        me.addListener(\"selectionchange\", function () {\r\n            deleteIframe();\r\n        });\r\n\r\n    };\r\n\r\n\r\n\r\n    // plugins/scrawl.js\r\n    ///import core\r\n    ///commands 涂鸦\r\n    ///commandsName  Scrawl\r\n    ///commandsTitle  涂鸦\r\n    ///commandsDialog  dialogs\\scrawl\r\n    UE.commands['scrawl'] = {\r\n        queryCommandState: function () {\r\n            return (browser.ie && browser.version <= 8) ? -1 : 0;\r\n        }\r\n    };\r\n\r\n\r\n    // plugins/removeformat.js\r\n    /**\r\n     * 清除格式\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * 清除文字样式\r\n     * @command removeformat\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @param   {String}   tags     以逗号隔开的标签。如：strong\r\n     * @param   {String}   style    样式如：color\r\n     * @param   {String}   attrs    属性如:width\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'removeformat', 'strong','color','width' );\r\n     * ```\r\n     */\r\n\r\n    UE.plugins['removeformat'] = function () {\r\n        var me = this;\r\n        me.setOpt({\r\n            'removeFormatTags': 'b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var',\r\n            'removeFormatAttributes': 'class,style,lang,width,height,align,hspace,valign'\r\n        });\r\n        me.commands['removeformat'] = {\r\n            execCommand: function (cmdName, tags, style, attrs, notIncludeA) {\r\n\r\n                var tagReg = new RegExp('^(?:' + (tags || this.options.removeFormatTags).replace(/,/g, '|') + ')$', 'i'),\r\n                    removeFormatAttributes = style ? [] : (attrs || this.options.removeFormatAttributes).split(','),\r\n                    range = new dom.Range(this.document),\r\n                    bookmark, node, parent,\r\n                    filter = function (node) {\r\n                        return node.nodeType == 1;\r\n                    };\r\n\r\n                function isRedundantSpan(node) {\r\n                    if (node.nodeType == 3 || node.tagName.toLowerCase() != 'span') {\r\n                        return 0;\r\n                    }\r\n                    if (browser.ie) {\r\n                        //ie 下判断实效，所以只能简单用style来判断\r\n                        //return node.style.cssText == '' ? 1 : 0;\r\n                        var attrs = node.attributes;\r\n                        if (attrs.length) {\r\n                            for (var i = 0, l = attrs.length; i < l; i++) {\r\n                                if (attrs[i].specified) {\r\n                                    return 0;\r\n                                }\r\n                            }\r\n                            return 1;\r\n                        }\r\n                    }\r\n                    return !node.attributes.length;\r\n                }\r\n                function doRemove(range) {\r\n\r\n                    var bookmark1 = range.createBookmark();\r\n                    if (range.collapsed) {\r\n                        range.enlarge(true);\r\n                    }\r\n\r\n                    //不能把a标签切了\r\n                    if (!notIncludeA) {\r\n                        var aNode = domUtils.findParentByTagName(range.startContainer, 'a', true);\r\n                        if (aNode) {\r\n                            range.setStartBefore(aNode);\r\n                        }\r\n\r\n                        aNode = domUtils.findParentByTagName(range.endContainer, 'a', true);\r\n                        if (aNode) {\r\n                            range.setEndAfter(aNode);\r\n                        }\r\n\r\n                    }\r\n\r\n\r\n                    bookmark = range.createBookmark();\r\n\r\n                    node = bookmark.start;\r\n\r\n                    //切开始\r\n                    while ((parent = node.parentNode) && !domUtils.isBlockElm(parent)) {\r\n                        domUtils.breakParent(node, parent);\r\n\r\n                        domUtils.clearEmptySibling(node);\r\n                    }\r\n                    if (bookmark.end) {\r\n                        //切结束\r\n                        node = bookmark.end;\r\n                        while ((parent = node.parentNode) && !domUtils.isBlockElm(parent)) {\r\n                            domUtils.breakParent(node, parent);\r\n                            domUtils.clearEmptySibling(node);\r\n                        }\r\n\r\n                        //开始去除样式\r\n                        var current = domUtils.getNextDomNode(bookmark.start, false, filter),\r\n                            next;\r\n                        while (current) {\r\n                            if (current == bookmark.end) {\r\n                                break;\r\n                            }\r\n\r\n                            next = domUtils.getNextDomNode(current, true, filter);\r\n\r\n                            if (!dtd.$empty[current.tagName.toLowerCase()] && !domUtils.isBookmarkNode(current)) {\r\n                                if (tagReg.test(current.tagName)) {\r\n                                    if (style) {\r\n                                        domUtils.removeStyle(current, style);\r\n                                        if (isRedundantSpan(current) && style != 'text-decoration') {\r\n                                            domUtils.remove(current, true);\r\n                                        }\r\n                                    } else {\r\n                                        domUtils.remove(current, true);\r\n                                    }\r\n                                } else {\r\n                                    //trace:939  不能把list上的样式去掉\r\n                                    if (!dtd.$tableContent[current.tagName] && !dtd.$list[current.tagName]) {\r\n                                        domUtils.removeAttributes(current, removeFormatAttributes);\r\n                                        if (isRedundantSpan(current)) {\r\n                                            domUtils.remove(current, true);\r\n                                        }\r\n                                    }\r\n\r\n                                }\r\n                            }\r\n                            current = next;\r\n                        }\r\n                    }\r\n                    //trace:1035\r\n                    //trace:1096 不能把td上的样式去掉，比如边框\r\n                    var pN = bookmark.start.parentNode;\r\n                    if (domUtils.isBlockElm(pN) && !dtd.$tableContent[pN.tagName] && !dtd.$list[pN.tagName]) {\r\n                        domUtils.removeAttributes(pN, removeFormatAttributes);\r\n                    }\r\n                    pN = bookmark.end.parentNode;\r\n                    if (bookmark.end && domUtils.isBlockElm(pN) && !dtd.$tableContent[pN.tagName] && !dtd.$list[pN.tagName]) {\r\n                        domUtils.removeAttributes(pN, removeFormatAttributes);\r\n                    }\r\n                    range.moveToBookmark(bookmark).moveToBookmark(bookmark1);\r\n                    //清除冗余的代码 <b><bookmark></b>\r\n                    var node = range.startContainer,\r\n                        tmp,\r\n                        collapsed = range.collapsed;\r\n                    while (node.nodeType == 1 && domUtils.isEmptyNode(node) && dtd.$removeEmpty[node.tagName]) {\r\n                        tmp = node.parentNode;\r\n                        range.setStartBefore(node);\r\n                        //trace:937\r\n                        //更新结束边界\r\n                        if (range.startContainer === range.endContainer) {\r\n                            range.endOffset--;\r\n                        }\r\n                        domUtils.remove(node);\r\n                        node = tmp;\r\n                    }\r\n\r\n                    if (!collapsed) {\r\n                        node = range.endContainer;\r\n                        while (node.nodeType == 1 && domUtils.isEmptyNode(node) && dtd.$removeEmpty[node.tagName]) {\r\n                            tmp = node.parentNode;\r\n                            range.setEndBefore(node);\r\n                            domUtils.remove(node);\r\n\r\n                            node = tmp;\r\n                        }\r\n\r\n\r\n                    }\r\n                }\r\n\r\n\r\n\r\n                range = this.selection.getRange();\r\n                doRemove(range);\r\n                range.select();\r\n\r\n            }\r\n\r\n        };\r\n\r\n    };\r\n\r\n\r\n    // plugins/blockquote.js\r\n    /**\r\n     * 添加引用\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * 添加引用\r\n     * @command blockquote\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'blockquote' );\r\n     * ```\r\n     */\r\n\r\n    /**\r\n     * 添加引用\r\n     * @command blockquote\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @param { Object } attrs 节点属性\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'blockquote',{\r\n     *     style: \"color: red;\"\r\n     * } );\r\n     * ```\r\n     */\r\n\r\n\r\n    UE.plugins['blockquote'] = function () {\r\n        var me = this;\r\n        function getObj(editor) {\r\n            return domUtils.filterNodeList(editor.selection.getStartElementPath(), 'blockquote');\r\n        }\r\n        me.commands['blockquote'] = {\r\n            execCommand: function (cmdName, attrs) {\r\n                var range = this.selection.getRange(),\r\n                    obj = getObj(this),\r\n                    blockquote = dtd.blockquote,\r\n                    bookmark = range.createBookmark();\r\n\r\n                if (obj) {\r\n\r\n                    var start = range.startContainer,\r\n                        startBlock = domUtils.isBlockElm(start) ? start : domUtils.findParent(start, function (node) { return domUtils.isBlockElm(node) }),\r\n\r\n                        end = range.endContainer,\r\n                        endBlock = domUtils.isBlockElm(end) ? end : domUtils.findParent(end, function (node) { return domUtils.isBlockElm(node) });\r\n\r\n                    //处理一下li\r\n                    startBlock = domUtils.findParentByTagName(startBlock, 'li', true) || startBlock;\r\n                    endBlock = domUtils.findParentByTagName(endBlock, 'li', true) || endBlock;\r\n\r\n\r\n                    if (startBlock.tagName == 'LI' || startBlock.tagName == 'TD' || startBlock === obj || domUtils.isBody(startBlock)) {\r\n                        domUtils.remove(obj, true);\r\n                    } else {\r\n                        domUtils.breakParent(startBlock, obj);\r\n                    }\r\n\r\n                    if (startBlock !== endBlock) {\r\n                        obj = domUtils.findParentByTagName(endBlock, 'blockquote');\r\n                        if (obj) {\r\n                            if (endBlock.tagName == 'LI' || endBlock.tagName == 'TD' || domUtils.isBody(endBlock)) {\r\n                                obj.parentNode && domUtils.remove(obj, true);\r\n                            } else {\r\n                                domUtils.breakParent(endBlock, obj);\r\n                            }\r\n\r\n                        }\r\n                    }\r\n\r\n                    var blockquotes = domUtils.getElementsByTagName(this.document, 'blockquote');\r\n                    for (var i = 0, bi; bi = blockquotes[i++];) {\r\n                        if (!bi.childNodes.length) {\r\n                            domUtils.remove(bi);\r\n                        } else if (domUtils.getPosition(bi, startBlock) & domUtils.POSITION_FOLLOWING && domUtils.getPosition(bi, endBlock) & domUtils.POSITION_PRECEDING) {\r\n                            domUtils.remove(bi, true);\r\n                        }\r\n                    }\r\n\r\n\r\n\r\n\r\n                } else {\r\n\r\n                    var tmpRange = range.cloneRange(),\r\n                        node = tmpRange.startContainer.nodeType == 1 ? tmpRange.startContainer : tmpRange.startContainer.parentNode,\r\n                        preNode = node,\r\n                        doEnd = 1;\r\n\r\n                    //调整开始\r\n                    while (1) {\r\n                        if (domUtils.isBody(node)) {\r\n                            if (preNode !== node) {\r\n                                if (range.collapsed) {\r\n                                    tmpRange.selectNode(preNode);\r\n                                    doEnd = 0;\r\n                                } else {\r\n                                    tmpRange.setStartBefore(preNode);\r\n                                }\r\n                            } else {\r\n                                tmpRange.setStart(node, 0);\r\n                            }\r\n\r\n                            break;\r\n                        }\r\n                        if (!blockquote[node.tagName]) {\r\n                            if (range.collapsed) {\r\n                                tmpRange.selectNode(preNode);\r\n                            } else {\r\n                                tmpRange.setStartBefore(preNode);\r\n                            }\r\n                            break;\r\n                        }\r\n\r\n                        preNode = node;\r\n                        node = node.parentNode;\r\n                    }\r\n\r\n                    //调整结束\r\n                    if (doEnd) {\r\n                        preNode = node = node = tmpRange.endContainer.nodeType == 1 ? tmpRange.endContainer : tmpRange.endContainer.parentNode;\r\n                        while (1) {\r\n\r\n                            if (domUtils.isBody(node)) {\r\n                                if (preNode !== node) {\r\n\r\n                                    tmpRange.setEndAfter(preNode);\r\n\r\n                                } else {\r\n                                    tmpRange.setEnd(node, node.childNodes.length);\r\n                                }\r\n\r\n                                break;\r\n                            }\r\n                            if (!blockquote[node.tagName]) {\r\n                                tmpRange.setEndAfter(preNode);\r\n                                break;\r\n                            }\r\n\r\n                            preNode = node;\r\n                            node = node.parentNode;\r\n                        }\r\n\r\n                    }\r\n\r\n\r\n                    node = range.document.createElement('blockquote');\r\n                    domUtils.setAttributes(node, attrs);\r\n                    node.appendChild(tmpRange.extractContents());\r\n                    tmpRange.insertNode(node);\r\n                    //去除重复的\r\n                    var childs = domUtils.getElementsByTagName(node, 'blockquote');\r\n                    for (var i = 0, ci; ci = childs[i++];) {\r\n                        if (ci.parentNode) {\r\n                            domUtils.remove(ci, true);\r\n                        }\r\n                    }\r\n\r\n                }\r\n                range.moveToBookmark(bookmark).select();\r\n            },\r\n            queryCommandState: function () {\r\n                return getObj(this) ? 1 : 0;\r\n            }\r\n        };\r\n    };\r\n\r\n\r\n\r\n    // plugins/convertcase.js\r\n    /**\r\n     * 大小写转换\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * 把选区内文本变大写，与“tolowercase”命令互斥\r\n     * @command touppercase\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'touppercase' );\r\n     * ```\r\n     */\r\n\r\n    /**\r\n     * 把选区内文本变小写，与“touppercase”命令互斥\r\n     * @command tolowercase\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'tolowercase' );\r\n     * ```\r\n     */\r\n    UE.commands['touppercase'] =\r\n        UE.commands['tolowercase'] = {\r\n            execCommand: function (cmd) {\r\n                var me = this;\r\n                var rng = me.selection.getRange();\r\n                if (rng.collapsed) {\r\n                    return rng;\r\n                }\r\n                var bk = rng.createBookmark(),\r\n                    bkEnd = bk.end,\r\n                    filterFn = function (node) {\r\n                        return !domUtils.isBr(node) && !domUtils.isWhitespace(node);\r\n                    },\r\n                    curNode = domUtils.getNextDomNode(bk.start, false, filterFn);\r\n                while (curNode && (domUtils.getPosition(curNode, bkEnd) & domUtils.POSITION_PRECEDING)) {\r\n\r\n                    if (curNode.nodeType == 3) {\r\n                        curNode.nodeValue = curNode.nodeValue[cmd == 'touppercase' ? 'toUpperCase' : 'toLowerCase']();\r\n                    }\r\n                    curNode = domUtils.getNextDomNode(curNode, true, filterFn);\r\n                    if (curNode === bkEnd) {\r\n                        break;\r\n                    }\r\n\r\n                }\r\n                rng.moveToBookmark(bk).select();\r\n            }\r\n        };\r\n\r\n\r\n\r\n    // plugins/indent.js\r\n    /**\r\n     * 首行缩进\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * 缩进\r\n     * @command indent\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'indent' );\r\n     * ```\r\n     */\r\n    UE.commands['indent'] = {\r\n        execCommand: function () {\r\n            var me = this, value = me.queryCommandState(\"indent\") ? \"0em\" : (me.options.indentValue || '2em');\r\n            me.execCommand('Paragraph', 'p', { style: 'text-indent:' + value });\r\n        },\r\n        queryCommandState: function () {\r\n            var pN = domUtils.filterNodeList(this.selection.getStartElementPath(), 'p h1 h2 h3 h4 h5 h6');\r\n            return pN && pN.style.textIndent && parseInt(pN.style.textIndent) ? 1 : 0;\r\n        }\r\n\r\n    };\r\n\r\n\r\n    // plugins/print.js\r\n    /**\r\n     * 打印\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * 打印\r\n     * @command print\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'print' );\r\n     * ```\r\n     */\r\n    UE.commands['print'] = {\r\n        execCommand: function () {\r\n            this.window.print();\r\n        },\r\n        notNeedUndo: 1\r\n    };\r\n\r\n\r\n\r\n    // plugins/preview.js\r\n    /**\r\n     * 预览\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * 预览\r\n     * @command preview\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'preview' );\r\n     * ```\r\n     */\r\n    UE.commands['preview'] = {\r\n        execCommand: function () {\r\n            var w = window.open('', '_blank', ''),\r\n                d = w.document;\r\n            d.open();\r\n            d.write('<!DOCTYPE html><html><head><meta charset=\"utf-8\"/><script src=\"' + this.options.UEDITOR_HOME_URL + 'ueditor.parse.js\"></script><script>' +\r\n                \"setTimeout(function(){uParse('div',{rootPath: '\" + this.options.UEDITOR_HOME_URL + \"'})},300)\" +\r\n                '</script></head><body><div>' + this.getContent(null, null, true) + '</div></body></html>');\r\n            d.close();\r\n        },\r\n        notNeedUndo: 1\r\n    };\r\n\r\n\r\n    // plugins/selectall.js\r\n    /**\r\n     * 全选\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * 选中所有内容\r\n     * @command selectall\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'selectall' );\r\n     * ```\r\n     */\r\n    UE.plugins['selectall'] = function () {\r\n        var me = this;\r\n        me.commands['selectall'] = {\r\n            execCommand: function () {\r\n                //去掉了原生的selectAll,因为会出现报错和当内容为空时，不能出现闭合状态的光标\r\n                var me = this, body = me.body,\r\n                    range = me.selection.getRange();\r\n                range.selectNodeContents(body);\r\n                if (domUtils.isEmptyBlock(body)) {\r\n                    //opera不能自动合并到元素的里边，要手动处理一下\r\n                    if (browser.opera && body.firstChild && body.firstChild.nodeType == 1) {\r\n                        range.setStartAtFirst(body.firstChild);\r\n                    }\r\n                    range.collapse(true);\r\n                }\r\n                range.select(true);\r\n            },\r\n            notNeedUndo: 1\r\n        };\r\n\r\n\r\n        //快捷键\r\n        me.addshortcutkey({\r\n            \"selectAll\": \"ctrl+65\"\r\n        });\r\n    };\r\n\r\n\r\n    // plugins/paragraph.js\r\n    /**\r\n     * 段落样式\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * 段落格式\r\n     * @command paragraph\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @param {String}   style               标签值为：'p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6'\r\n     * @param {Object}   attrs               标签的属性\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'Paragraph','h1','{\r\n     *     class:'test'\r\n     * }' );\r\n     * ```\r\n     */\r\n\r\n    /**\r\n     * 返回选区内节点标签名\r\n     * @command paragraph\r\n     * @method queryCommandValue\r\n     * @param { String } cmd 命令字符串\r\n     * @return { String } 节点标签名\r\n     * @example\r\n     * ```javascript\r\n     * editor.queryCommandValue( 'Paragraph' );\r\n     * ```\r\n     */\r\n\r\n    UE.plugins['paragraph'] = function () {\r\n        var me = this,\r\n            block = domUtils.isBlockElm,\r\n            notExchange = ['TD', 'LI', 'PRE'],\r\n\r\n            doParagraph = function (range, style, attrs, sourceCmdName) {\r\n                var bookmark = range.createBookmark(),\r\n                    filterFn = function (node) {\r\n                        return node.nodeType == 1 ? node.tagName.toLowerCase() != 'br' && !domUtils.isBookmarkNode(node) : !domUtils.isWhitespace(node);\r\n                    },\r\n                    para;\r\n\r\n                range.enlarge(true);\r\n                var bookmark2 = range.createBookmark(),\r\n                    current = domUtils.getNextDomNode(bookmark2.start, false, filterFn),\r\n                    tmpRange = range.cloneRange(),\r\n                    tmpNode;\r\n                while (current && !(domUtils.getPosition(current, bookmark2.end) & domUtils.POSITION_FOLLOWING)) {\r\n                    if (current.nodeType == 3 || !block(current)) {\r\n                        tmpRange.setStartBefore(current);\r\n                        while (current && current !== bookmark2.end && !block(current)) {\r\n                            tmpNode = current;\r\n                            current = domUtils.getNextDomNode(current, false, null, function (node) {\r\n                                return !block(node);\r\n                            });\r\n                        }\r\n                        tmpRange.setEndAfter(tmpNode);\r\n\r\n                        para = range.document.createElement(style);\r\n                        if (attrs) {\r\n                            domUtils.setAttributes(para, attrs);\r\n                            if (sourceCmdName && sourceCmdName == 'customstyle' && attrs.style) {\r\n                                para.style.cssText = attrs.style;\r\n                            }\r\n                        }\r\n                        para.appendChild(tmpRange.extractContents());\r\n                        //需要内容占位\r\n                        if (domUtils.isEmptyNode(para)) {\r\n                            domUtils.fillChar(range.document, para);\r\n\r\n                        }\r\n\r\n                        tmpRange.insertNode(para);\r\n\r\n                        var parent = para.parentNode;\r\n                        //如果para上一级是一个block元素且不是body,td就删除它\r\n                        if (block(parent) && !domUtils.isBody(para.parentNode) && utils.indexOf(notExchange, parent.tagName) == -1) {\r\n                            //存储dir,style\r\n                            if (!(sourceCmdName && sourceCmdName == 'customstyle')) {\r\n                                parent.getAttribute('dir') && para.setAttribute('dir', parent.getAttribute('dir'));\r\n                                //trace:1070\r\n                                parent.style.cssText && (para.style.cssText = parent.style.cssText + ';' + para.style.cssText);\r\n                                //trace:1030\r\n                                parent.style.textAlign && !para.style.textAlign && (para.style.textAlign = parent.style.textAlign);\r\n                                parent.style.textIndent && !para.style.textIndent && (para.style.textIndent = parent.style.textIndent);\r\n                                parent.style.padding && !para.style.padding && (para.style.padding = parent.style.padding);\r\n                            }\r\n\r\n                            //trace:1706 选择的就是h1-6要删除\r\n                            if (attrs && /h\\d/i.test(parent.tagName) && !/h\\d/i.test(para.tagName)) {\r\n                                domUtils.setAttributes(parent, attrs);\r\n                                if (sourceCmdName && sourceCmdName == 'customstyle' && attrs.style) {\r\n                                    parent.style.cssText = attrs.style;\r\n                                }\r\n                                domUtils.remove(para, true);\r\n                                para = parent;\r\n                            } else {\r\n                                domUtils.remove(para.parentNode, true);\r\n                            }\r\n\r\n                        }\r\n                        if (utils.indexOf(notExchange, parent.tagName) != -1) {\r\n                            current = parent;\r\n                        } else {\r\n                            current = para;\r\n                        }\r\n\r\n\r\n                        current = domUtils.getNextDomNode(current, false, filterFn);\r\n                    } else {\r\n                        current = domUtils.getNextDomNode(current, true, filterFn);\r\n                    }\r\n                }\r\n                return range.moveToBookmark(bookmark2).moveToBookmark(bookmark);\r\n            };\r\n        me.setOpt('paragraph', { 'p': '', 'h1': '', 'h2': '', 'h3': '', 'h4': '', 'h5': '', 'h6': '' });\r\n        me.commands['paragraph'] = {\r\n            execCommand: function (cmdName, style, attrs, sourceCmdName) {\r\n                var range = this.selection.getRange();\r\n                //闭合时单独处理\r\n                if (range.collapsed) {\r\n                    var txt = this.document.createTextNode('p');\r\n                    range.insertNode(txt);\r\n                    //去掉冗余的fillchar\r\n                    if (browser.ie) {\r\n                        var node = txt.previousSibling;\r\n                        if (node && domUtils.isWhitespace(node)) {\r\n                            domUtils.remove(node);\r\n                        }\r\n                        node = txt.nextSibling;\r\n                        if (node && domUtils.isWhitespace(node)) {\r\n                            domUtils.remove(node);\r\n                        }\r\n                    }\r\n\r\n                }\r\n                range = doParagraph(range, style, attrs, sourceCmdName);\r\n                if (txt) {\r\n                    range.setStartBefore(txt).collapse(true);\r\n                    pN = txt.parentNode;\r\n\r\n                    domUtils.remove(txt);\r\n\r\n                    if (domUtils.isBlockElm(pN) && domUtils.isEmptyNode(pN)) {\r\n                        domUtils.fillNode(this.document, pN);\r\n                    }\r\n\r\n                }\r\n\r\n                if (browser.gecko && range.collapsed && range.startContainer.nodeType == 1) {\r\n                    var child = range.startContainer.childNodes[range.startOffset];\r\n                    if (child && child.nodeType == 1 && child.tagName.toLowerCase() == style) {\r\n                        range.setStart(child, 0).collapse(true);\r\n                    }\r\n                }\r\n                //trace:1097 原来有true，原因忘了，但去了就不能清除多余的占位符了\r\n                range.select();\r\n\r\n\r\n                return true;\r\n            },\r\n            queryCommandValue: function () {\r\n                var node = domUtils.filterNodeList(this.selection.getStartElementPath(), 'p h1 h2 h3 h4 h5 h6');\r\n                return node ? node.tagName.toLowerCase() : '';\r\n            }\r\n        };\r\n    };\r\n\r\n\r\n    // plugins/directionality.js\r\n    /**\r\n     * 设置文字输入的方向的插件\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n    (function () {\r\n        var block = domUtils.isBlockElm,\r\n            getObj = function (editor) {\r\n                //            var startNode = editor.selection.getStart(),\r\n                //                parents;\r\n                //            if ( startNode ) {\r\n                //                //查找所有的是block的父亲节点\r\n                //                parents = domUtils.findParents( startNode, true, block, true );\r\n                //                for ( var i = 0,ci; ci = parents[i++]; ) {\r\n                //                    if ( ci.getAttribute( 'dir' ) ) {\r\n                //                        return ci;\r\n                //                    }\r\n                //                }\r\n                //            }\r\n                return domUtils.filterNodeList(editor.selection.getStartElementPath(), function (n) { return n && n.nodeType == 1 && n.getAttribute('dir') });\r\n\r\n            },\r\n            doDirectionality = function (range, editor, forward) {\r\n\r\n                var bookmark,\r\n                    filterFn = function (node) {\r\n                        return node.nodeType == 1 ? !domUtils.isBookmarkNode(node) : !domUtils.isWhitespace(node);\r\n                    },\r\n\r\n                    obj = getObj(editor);\r\n\r\n                if (obj && range.collapsed) {\r\n                    obj.setAttribute('dir', forward);\r\n                    return range;\r\n                }\r\n                bookmark = range.createBookmark();\r\n                range.enlarge(true);\r\n                var bookmark2 = range.createBookmark(),\r\n                    current = domUtils.getNextDomNode(bookmark2.start, false, filterFn),\r\n                    tmpRange = range.cloneRange(),\r\n                    tmpNode;\r\n                while (current && !(domUtils.getPosition(current, bookmark2.end) & domUtils.POSITION_FOLLOWING)) {\r\n                    if (current.nodeType == 3 || !block(current)) {\r\n                        tmpRange.setStartBefore(current);\r\n                        while (current && current !== bookmark2.end && !block(current)) {\r\n                            tmpNode = current;\r\n                            current = domUtils.getNextDomNode(current, false, null, function (node) {\r\n                                return !block(node);\r\n                            });\r\n                        }\r\n                        tmpRange.setEndAfter(tmpNode);\r\n                        var common = tmpRange.getCommonAncestor();\r\n                        if (!domUtils.isBody(common) && block(common)) {\r\n                            //遍历到了block节点\r\n                            common.setAttribute('dir', forward);\r\n                            current = common;\r\n                        } else {\r\n                            //没有遍历到，添加一个block节点\r\n                            var p = range.document.createElement('p');\r\n                            p.setAttribute('dir', forward);\r\n                            var frag = tmpRange.extractContents();\r\n                            p.appendChild(frag);\r\n                            tmpRange.insertNode(p);\r\n                            current = p;\r\n                        }\r\n\r\n                        current = domUtils.getNextDomNode(current, false, filterFn);\r\n                    } else {\r\n                        current = domUtils.getNextDomNode(current, true, filterFn);\r\n                    }\r\n                }\r\n                return range.moveToBookmark(bookmark2).moveToBookmark(bookmark);\r\n            };\r\n\r\n        /**\r\n         * 文字输入方向\r\n         * @command directionality\r\n         * @method execCommand\r\n         * @param { String } cmdName 命令字符串\r\n         * @param { String } forward 传入'ltr'表示从左向右输入，传入'rtl'表示从右向左输入\r\n         * @example\r\n         * ```javascript\r\n         * editor.execCommand( 'directionality', 'ltr');\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 查询当前选区的文字输入方向\r\n         * @command directionality\r\n         * @method queryCommandValue\r\n         * @param { String } cmdName 命令字符串\r\n         * @return { String } 返回'ltr'表示从左向右输入，返回'rtl'表示从右向左输入\r\n         * @example\r\n         * ```javascript\r\n         * editor.queryCommandValue( 'directionality');\r\n         * ```\r\n         */\r\n        UE.commands['directionality'] = {\r\n            execCommand: function (cmdName, forward) {\r\n                var range = this.selection.getRange();\r\n                //闭合时单独处理\r\n                if (range.collapsed) {\r\n                    var txt = this.document.createTextNode('d');\r\n                    range.insertNode(txt);\r\n                }\r\n                doDirectionality(range, this, forward);\r\n                if (txt) {\r\n                    range.setStartBefore(txt).collapse(true);\r\n                    domUtils.remove(txt);\r\n                }\r\n\r\n                range.select();\r\n                return true;\r\n            },\r\n            queryCommandValue: function () {\r\n                var node = getObj(this);\r\n                return node ? node.getAttribute('dir') : 'ltr';\r\n            }\r\n        };\r\n    })();\r\n\r\n\r\n\r\n    // plugins/horizontal.js\r\n    /**\r\n     * 插入分割线插件\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * 插入分割线\r\n     * @command horizontal\r\n     * @method execCommand\r\n     * @param { String } cmdName 命令字符串\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'horizontal' );\r\n     * ```\r\n     */\r\n    UE.plugins['horizontal'] = function () {\r\n        var me = this;\r\n        me.commands['horizontal'] = {\r\n            execCommand: function (cmdName) {\r\n                var me = this;\r\n                if (me.queryCommandState(cmdName) !== -1) {\r\n                    me.execCommand('insertHtml', '<hr>');\r\n                    var range = me.selection.getRange(),\r\n                        start = range.startContainer;\r\n                    if (start.nodeType == 1 && !start.childNodes[range.startOffset]) {\r\n\r\n                        var tmp;\r\n                        if (tmp = start.childNodes[range.startOffset - 1]) {\r\n                            if (tmp.nodeType == 1 && tmp.tagName == 'HR') {\r\n                                if (me.options.enterTag == 'p') {\r\n                                    tmp = me.document.createElement('p');\r\n                                    range.insertNode(tmp);\r\n                                    range.setStart(tmp, 0).setCursor();\r\n\r\n                                } else {\r\n                                    tmp = me.document.createElement('br');\r\n                                    range.insertNode(tmp);\r\n                                    range.setStartBefore(tmp).setCursor();\r\n                                }\r\n                            }\r\n                        }\r\n\r\n                    }\r\n                    return true;\r\n                }\r\n\r\n            },\r\n            //边界在table里不能加分隔线\r\n            queryCommandState: function () {\r\n                return domUtils.filterNodeList(this.selection.getStartElementPath(), 'table') ? -1 : 0;\r\n            }\r\n        };\r\n        //    me.addListener('delkeyup',function(){\r\n        //        var rng = this.selection.getRange();\r\n        //        if(browser.ie && browser.version > 8){\r\n        //            rng.txtToElmBoundary(true);\r\n        //            if(domUtils.isStartInblock(rng)){\r\n        //                var tmpNode = rng.startContainer;\r\n        //                var pre = tmpNode.previousSibling;\r\n        //                if(pre && domUtils.isTagNode(pre,'hr')){\r\n        //                    domUtils.remove(pre);\r\n        //                    rng.select();\r\n        //                    return;\r\n        //                }\r\n        //            }\r\n        //        }\r\n        //        if(domUtils.isBody(rng.startContainer)){\r\n        //            var hr = rng.startContainer.childNodes[rng.startOffset -1];\r\n        //            if(hr && hr.nodeName == 'HR'){\r\n        //                var next = hr.nextSibling;\r\n        //                if(next){\r\n        //                    rng.setStart(next,0)\r\n        //                }else if(hr.previousSibling){\r\n        //                    rng.setStartAtLast(hr.previousSibling)\r\n        //                }else{\r\n        //                    var p = this.document.createElement('p');\r\n        //                    hr.parentNode.insertBefore(p,hr);\r\n        //                    domUtils.fillNode(this.document,p);\r\n        //                    rng.setStart(p,0);\r\n        //                }\r\n        //                domUtils.remove(hr);\r\n        //                rng.setCursor(false,true);\r\n        //            }\r\n        //        }\r\n        //    })\r\n        me.addListener('delkeydown', function (name, evt) {\r\n            var rng = this.selection.getRange();\r\n            rng.txtToElmBoundary(true);\r\n            if (domUtils.isStartInblock(rng)) {\r\n                var tmpNode = rng.startContainer;\r\n                var pre = tmpNode.previousSibling;\r\n                if (pre && domUtils.isTagNode(pre, 'hr')) {\r\n                    domUtils.remove(pre);\r\n                    rng.select();\r\n                    domUtils.preventDefault(evt);\r\n                    return true;\r\n\r\n                }\r\n            }\r\n\r\n        })\r\n    };\r\n\r\n\r\n\r\n    // plugins/time.js\r\n    /**\r\n     * 插入时间和日期\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * 插入时间，默认格式：12:59:59\r\n     * @command time\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'time');\r\n     * ```\r\n     */\r\n\r\n    /**\r\n     * 插入日期，默认格式：2013-08-30\r\n     * @command date\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'date');\r\n     * ```\r\n     */\r\n    UE.commands['time'] = UE.commands[\"date\"] = {\r\n        execCommand: function (cmd, format) {\r\n            var date = new Date;\r\n\r\n            function formatTime(date, format) {\r\n                var hh = ('0' + date.getHours()).slice(-2),\r\n                    ii = ('0' + date.getMinutes()).slice(-2),\r\n                    ss = ('0' + date.getSeconds()).slice(-2);\r\n                format = format || 'hh:ii:ss';\r\n                return format.replace(/hh/ig, hh).replace(/ii/ig, ii).replace(/ss/ig, ss);\r\n            }\r\n            function formatDate(date, format) {\r\n                var yyyy = ('000' + date.getFullYear()).slice(-4),\r\n                    yy = yyyy.slice(-2),\r\n                    mm = ('0' + (date.getMonth() + 1)).slice(-2),\r\n                    dd = ('0' + date.getDate()).slice(-2);\r\n                format = format || 'yyyy-mm-dd';\r\n                return format.replace(/yyyy/ig, yyyy).replace(/yy/ig, yy).replace(/mm/ig, mm).replace(/dd/ig, dd);\r\n            }\r\n\r\n            this.execCommand('insertHtml', cmd == \"time\" ? formatTime(date, format) : formatDate(date, format));\r\n        }\r\n    };\r\n\r\n\r\n    // plugins/rowspacing.js\r\n    /**\r\n     * 段前段后间距插件\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * 设置段间距\r\n     * @command rowspacing\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @param { String } value 段间距的值，以px为单位\r\n     * @param { String } dir 间距位置，top或bottom，分别表示段前和段后\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'rowspacing', '10', 'top' );\r\n     * ```\r\n     */\r\n\r\n    UE.plugins['rowspacing'] = function () {\r\n        var me = this;\r\n        me.setOpt({\r\n            'rowspacingtop': ['5', '10', '15', '20', '25'],\r\n            'rowspacingbottom': ['5', '10', '15', '20', '25']\r\n\r\n        });\r\n        me.commands['rowspacing'] = {\r\n            execCommand: function (cmdName, value, dir) {\r\n                this.execCommand('paragraph', 'p', { style: 'margin-' + dir + ':' + value + 'px' });\r\n                return true;\r\n            },\r\n            queryCommandValue: function (cmdName, dir) {\r\n                var pN = domUtils.filterNodeList(this.selection.getStartElementPath(), function (node) { return domUtils.isBlockElm(node) }),\r\n                    value;\r\n                //trace:1026\r\n                if (pN) {\r\n                    value = domUtils.getComputedStyle(pN, 'margin-' + dir).replace(/[^\\d]/g, '');\r\n                    return !value ? 0 : value;\r\n                }\r\n                return 0;\r\n\r\n            }\r\n        };\r\n    };\r\n\r\n\r\n\r\n\r\n    // plugins/lineheight.js\r\n    /**\r\n     * 设置行内间距\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n    UE.plugins['lineheight'] = function () {\r\n        var me = this;\r\n        me.setOpt({ 'lineheight': ['1', '1.5', '1.75', '2', '3', '4', '5'] });\r\n\r\n        /**\r\n         * 行距\r\n         * @command lineheight\r\n         * @method execCommand\r\n         * @param { String } cmdName 命令字符串\r\n         * @param { String } value 传入的行高值， 该值是当前字体的倍数， 例如： 1.5, 1.75\r\n         * @example\r\n         * ```javascript\r\n         * editor.execCommand( 'lineheight', 1.5);\r\n         * ```\r\n         */\r\n        /**\r\n         * 查询当前选区内容的行高大小\r\n         * @command lineheight\r\n         * @method queryCommandValue\r\n         * @param { String } cmd 命令字符串\r\n         * @return { String } 返回当前行高大小\r\n         * @example\r\n         * ```javascript\r\n         * editor.queryCommandValue( 'lineheight' );\r\n         * ```\r\n         */\r\n\r\n        me.commands['lineheight'] = {\r\n            execCommand: function (cmdName, value) {\r\n                this.execCommand('paragraph', 'p', { style: 'line-height:' + (value == \"1\" ? \"normal\" : value + 'em') });\r\n                return true;\r\n            },\r\n            queryCommandValue: function () {\r\n                var pN = domUtils.filterNodeList(this.selection.getStartElementPath(), function (node) { return domUtils.isBlockElm(node) });\r\n                if (pN) {\r\n                    var value = domUtils.getComputedStyle(pN, 'line-height');\r\n                    return value == 'normal' ? 1 : value.replace(/[^\\d.]*/ig, \"\");\r\n                }\r\n            }\r\n        };\r\n    };\r\n\r\n\r\n\r\n\r\n    // plugins/insertcode.js\r\n    /**\r\n     * 插入代码插件\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    UE.plugins['insertcode'] = function () {\r\n        var me = this;\r\n        me.ready(function () {\r\n            utils.cssRule('pre', 'pre{margin:.5em 0;padding:.4em .6em;border-radius:8px;background:#f8f8f8;}',\r\n                me.document)\r\n        });\r\n        me.setOpt('insertcode', {\r\n            'as3': 'ActionScript3',\r\n            'bash': 'Bash/Shell',\r\n            'cpp': 'C/C++',\r\n            'css': 'Css',\r\n            'cf': 'CodeFunction',\r\n            'c#': 'C#',\r\n            'delphi': 'Delphi',\r\n            'diff': 'Diff',\r\n            'erlang': 'Erlang',\r\n            'groovy': 'Groovy',\r\n            'html': 'Html',\r\n            'java': 'Java',\r\n            'jfx': 'JavaFx',\r\n            'js': 'Javascript',\r\n            'pl': 'Perl',\r\n            'php': 'Php',\r\n            'plain': 'Plain Text',\r\n            'ps': 'PowerShell',\r\n            'python': 'Python',\r\n            'ruby': 'Ruby',\r\n            'scala': 'Scala',\r\n            'sql': 'Sql',\r\n            'vb': 'Vb',\r\n            'xml': 'Xml'\r\n        });\r\n\r\n        /**\r\n         * 插入代码\r\n         * @command insertcode\r\n         * @method execCommand\r\n         * @param { String } cmd 命令字符串\r\n         * @param { String } lang 插入代码的语言\r\n         * @example\r\n         * ```javascript\r\n         * editor.execCommand( 'insertcode', 'javascript' );\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 如果选区所在位置是插入插入代码区域，返回代码的语言\r\n         * @command insertcode\r\n         * @method queryCommandValue\r\n         * @param { String } cmd 命令字符串\r\n         * @return { String } 返回代码的语言\r\n         * @example\r\n         * ```javascript\r\n         * editor.queryCommandValue( 'insertcode' );\r\n         * ```\r\n         */\r\n\r\n        me.commands['insertcode'] = {\r\n            execCommand: function (cmd, lang) {\r\n                var me = this,\r\n                    rng = me.selection.getRange(),\r\n                    pre = domUtils.findParentByTagName(rng.startContainer, 'pre', true);\r\n                if (pre) {\r\n                    pre.className = 'brush:' + lang + ';toolbar:false;';\r\n                } else {\r\n                    var code = '';\r\n                    if (rng.collapsed) {\r\n                        code = browser.ie && browser.ie11below ? (browser.version <= 8 ? '&nbsp;' : '') : '<br/>';\r\n                    } else {\r\n                        var frag = rng.extractContents();\r\n                        var div = me.document.createElement('div');\r\n                        div.appendChild(frag);\r\n\r\n                        utils.each(UE.filterNode(UE.htmlparser(div.innerHTML.replace(/[\\r\\t]/g, '')), me.options.filterTxtRules).children, function (node) {\r\n                            if (browser.ie && browser.ie11below && browser.version > 8) {\r\n\r\n                                if (node.type == 'element') {\r\n                                    if (node.tagName == 'br') {\r\n                                        code += '\\n'\r\n                                    } else if (!dtd.$empty[node.tagName]) {\r\n                                        utils.each(node.children, function (cn) {\r\n                                            if (cn.type == 'element') {\r\n                                                if (cn.tagName == 'br') {\r\n                                                    code += '\\n'\r\n                                                } else if (!dtd.$empty[node.tagName]) {\r\n                                                    code += cn.innerText();\r\n                                                }\r\n                                            } else {\r\n                                                code += cn.data\r\n                                            }\r\n                                        })\r\n                                        if (!/\\n$/.test(code)) {\r\n                                            code += '\\n';\r\n                                        }\r\n                                    }\r\n                                } else {\r\n                                    code += node.data + '\\n'\r\n                                }\r\n                                if (!node.nextSibling() && /\\n$/.test(code)) {\r\n                                    code = code.replace(/\\n$/, '');\r\n                                }\r\n                            } else {\r\n                                if (browser.ie && browser.ie11below) {\r\n\r\n                                    if (node.type == 'element') {\r\n                                        if (node.tagName == 'br') {\r\n                                            code += '<br>'\r\n                                        } else if (!dtd.$empty[node.tagName]) {\r\n                                            utils.each(node.children, function (cn) {\r\n                                                if (cn.type == 'element') {\r\n                                                    if (cn.tagName == 'br') {\r\n                                                        code += '<br>'\r\n                                                    } else if (!dtd.$empty[node.tagName]) {\r\n                                                        code += cn.innerText();\r\n                                                    }\r\n                                                } else {\r\n                                                    code += cn.data\r\n                                                }\r\n                                            });\r\n                                            if (!/br>$/.test(code)) {\r\n                                                code += '<br>';\r\n                                            }\r\n                                        }\r\n                                    } else {\r\n                                        code += node.data + '<br>'\r\n                                    }\r\n                                    if (!node.nextSibling() && /<br>$/.test(code)) {\r\n                                        code = code.replace(/<br>$/, '');\r\n                                    }\r\n\r\n                                } else {\r\n                                    code += (node.type == 'element' ? (dtd.$empty[node.tagName] ? '' : node.innerText()) : node.data);\r\n                                    if (!/br\\/?\\s*>$/.test(code)) {\r\n                                        if (!node.nextSibling())\r\n                                            return;\r\n                                        code += '<br>'\r\n                                    }\r\n                                }\r\n\r\n                            }\r\n\r\n                        });\r\n                    }\r\n                    me.execCommand('inserthtml', '<pre id=\"coder\"class=\"brush:' + lang + ';toolbar:false\">' + code + '</pre>', true);\r\n\r\n                    pre = me.document.getElementById('coder');\r\n                    domUtils.removeAttributes(pre, 'id');\r\n                    var tmpNode = pre.previousSibling;\r\n\r\n                    if (tmpNode && (tmpNode.nodeType == 3 && tmpNode.nodeValue.length == 1 && browser.ie && browser.version == 6 || domUtils.isEmptyBlock(tmpNode))) {\r\n\r\n                        domUtils.remove(tmpNode)\r\n                    }\r\n                    var rng = me.selection.getRange();\r\n                    if (domUtils.isEmptyBlock(pre)) {\r\n                        rng.setStart(pre, 0).setCursor(false, true)\r\n                    } else {\r\n                        rng.selectNodeContents(pre).select()\r\n                    }\r\n                }\r\n\r\n\r\n\r\n            },\r\n            queryCommandValue: function () {\r\n                var path = this.selection.getStartElementPath();\r\n                var lang = '';\r\n                utils.each(path, function (node) {\r\n                    if (node.nodeName == 'PRE') {\r\n                        var match = node.className.match(/brush:([^;]+)/);\r\n                        lang = match && match[1] ? match[1] : '';\r\n                        return false;\r\n                    }\r\n                });\r\n                return lang;\r\n            }\r\n        };\r\n\r\n        me.addInputRule(function (root) {\r\n            utils.each(root.getNodesByTagName('pre'), function (pre) {\r\n                var brs = pre.getNodesByTagName('br');\r\n                if (brs.length) {\r\n                    browser.ie && browser.ie11below && browser.version > 8 && utils.each(brs, function (br) {\r\n                        var txt = UE.uNode.createText('\\n');\r\n                        br.parentNode.insertBefore(txt, br);\r\n                        br.parentNode.removeChild(br);\r\n                    });\r\n                    return;\r\n                }\r\n                if (browser.ie && browser.ie11below && browser.version > 8)\r\n                    return;\r\n                var code = pre.innerText().split(/\\n/);\r\n                pre.innerHTML('');\r\n                utils.each(code, function (c) {\r\n                    if (c.length) {\r\n                        pre.appendChild(UE.uNode.createText(c));\r\n                    }\r\n                    pre.appendChild(UE.uNode.createElement('br'))\r\n                })\r\n            })\r\n        });\r\n        me.addOutputRule(function (root) {\r\n            utils.each(root.getNodesByTagName('pre'), function (pre) {\r\n                var code = '';\r\n                utils.each(pre.children, function (n) {\r\n                    if (n.type == 'text') {\r\n                        //在ie下文本内容有可能末尾带有\\n要去掉\r\n                        //trace:3396\r\n                        code += n.data.replace(/[ ]/g, '&nbsp;').replace(/\\n$/, '');\r\n                    } else {\r\n                        if (n.tagName == 'br') {\r\n                            code += '\\n'\r\n                        } else {\r\n                            code += (!dtd.$empty[n.tagName] ? '' : n.innerText());\r\n                        }\r\n\r\n                    }\r\n\r\n                });\r\n\r\n                pre.innerText(code.replace(/(&nbsp;|\\n)+$/, ''))\r\n            })\r\n        });\r\n        //不需要判断highlight的command列表\r\n        me.notNeedCodeQuery = {\r\n            help: 1,\r\n            undo: 1,\r\n            redo: 1,\r\n            source: 1,\r\n            print: 1,\r\n            searchreplace: 1,\r\n            fullscreen: 1,\r\n            preview: 1,\r\n            insertparagraph: 1,\r\n            elementpath: 1,\r\n            insertcode: 1,\r\n            inserthtml: 1,\r\n            selectall: 1\r\n        };\r\n        //将queyCommamndState重置\r\n        var orgQuery = me.queryCommandState;\r\n        me.queryCommandState = function (cmd) {\r\n            var me = this;\r\n\r\n            if (!me.notNeedCodeQuery[cmd.toLowerCase()] && me.selection && me.queryCommandValue('insertcode')) {\r\n                return -1;\r\n            }\r\n            return UE.Editor.prototype.queryCommandState.apply(this, arguments)\r\n        };\r\n        me.addListener('beforeenterkeydown', function () {\r\n            var rng = me.selection.getRange();\r\n            var pre = domUtils.findParentByTagName(rng.startContainer, 'pre', true);\r\n            if (pre) {\r\n                me.fireEvent('saveScene');\r\n                if (!rng.collapsed) {\r\n                    rng.deleteContents();\r\n                }\r\n                if (!browser.ie || browser.ie9above) {\r\n                    var tmpNode = me.document.createElement('br'), pre;\r\n                    rng.insertNode(tmpNode).setStartAfter(tmpNode).collapse(true);\r\n                    var next = tmpNode.nextSibling;\r\n                    if (!next && (!browser.ie || browser.version > 10)) {\r\n                        rng.insertNode(tmpNode.cloneNode(false));\r\n                    } else {\r\n                        rng.setStartAfter(tmpNode);\r\n                    }\r\n                    pre = tmpNode.previousSibling;\r\n                    var tmp;\r\n                    while (pre) {\r\n                        tmp = pre;\r\n                        pre = pre.previousSibling;\r\n                        if (!pre || pre.nodeName == 'BR') {\r\n                            pre = tmp;\r\n                            break;\r\n                        }\r\n                    }\r\n                    if (pre) {\r\n                        var str = '';\r\n                        while (pre && pre.nodeName != 'BR' && new RegExp('^[\\\\s' + domUtils.fillChar + ']*$').test(pre.nodeValue)) {\r\n                            str += pre.nodeValue;\r\n                            pre = pre.nextSibling;\r\n                        }\r\n                        if (pre.nodeName != 'BR') {\r\n                            var match = pre.nodeValue.match(new RegExp('^([\\\\s' + domUtils.fillChar + ']+)'));\r\n                            if (match && match[1]) {\r\n                                str += match[1]\r\n                            }\r\n\r\n                        }\r\n                        if (str) {\r\n                            str = me.document.createTextNode(str);\r\n                            rng.insertNode(str).setStartAfter(str);\r\n                        }\r\n                    }\r\n                    rng.collapse(true).select(true);\r\n                } else {\r\n                    if (browser.version > 8) {\r\n\r\n                        var txt = me.document.createTextNode('\\n');\r\n                        var start = rng.startContainer;\r\n                        if (rng.startOffset == 0) {\r\n                            var preNode = start.previousSibling;\r\n                            if (preNode) {\r\n                                rng.insertNode(txt);\r\n                                var fillchar = me.document.createTextNode(' ');\r\n                                rng.setStartAfter(txt).insertNode(fillchar).setStart(fillchar, 0).collapse(true).select(true)\r\n                            }\r\n                        } else {\r\n                            rng.insertNode(txt).setStartAfter(txt);\r\n                            var fillchar = me.document.createTextNode(' ');\r\n                            start = rng.startContainer.childNodes[rng.startOffset];\r\n                            if (start && !/^\\n/.test(start.nodeValue)) {\r\n                                rng.setStartBefore(txt)\r\n                            }\r\n                            rng.insertNode(fillchar).setStart(fillchar, 0).collapse(true).select(true)\r\n                        }\r\n\r\n                    } else {\r\n                        var tmpNode = me.document.createElement('br');\r\n                        rng.insertNode(tmpNode);\r\n                        rng.insertNode(me.document.createTextNode(domUtils.fillChar));\r\n                        rng.setStartAfter(tmpNode);\r\n                        pre = tmpNode.previousSibling;\r\n                        var tmp;\r\n                        while (pre) {\r\n                            tmp = pre;\r\n                            pre = pre.previousSibling;\r\n                            if (!pre || pre.nodeName == 'BR') {\r\n                                pre = tmp;\r\n                                break;\r\n                            }\r\n                        }\r\n                        if (pre) {\r\n                            var str = '';\r\n                            while (pre && pre.nodeName != 'BR' && new RegExp('^[ ' + domUtils.fillChar + ']*$').test(pre.nodeValue)) {\r\n                                str += pre.nodeValue;\r\n                                pre = pre.nextSibling;\r\n                            }\r\n                            if (pre.nodeName != 'BR') {\r\n                                var match = pre.nodeValue.match(new RegExp('^([ ' + domUtils.fillChar + ']+)'));\r\n                                if (match && match[1]) {\r\n                                    str += match[1]\r\n                                }\r\n\r\n                            }\r\n\r\n                            str = me.document.createTextNode(str);\r\n                            rng.insertNode(str).setStartAfter(str);\r\n                        }\r\n                        rng.collapse(true).select();\r\n                    }\r\n\r\n\r\n                }\r\n                me.fireEvent('saveScene');\r\n                return true;\r\n            }\r\n\r\n\r\n        });\r\n\r\n        me.addListener('tabkeydown', function (cmd, evt) {\r\n            var rng = me.selection.getRange();\r\n            var pre = domUtils.findParentByTagName(rng.startContainer, 'pre', true);\r\n            if (pre) {\r\n                me.fireEvent('saveScene');\r\n                if (evt.shiftKey) {\r\n\r\n                } else {\r\n                    if (!rng.collapsed) {\r\n                        var bk = rng.createBookmark();\r\n                        var start = bk.start.previousSibling;\r\n\r\n                        while (start) {\r\n                            if (pre.firstChild === start && !domUtils.isBr(start)) {\r\n                                pre.insertBefore(me.document.createTextNode('    '), start);\r\n\r\n                                break;\r\n                            }\r\n                            if (domUtils.isBr(start)) {\r\n                                pre.insertBefore(me.document.createTextNode('    '), start.nextSibling);\r\n\r\n                                break;\r\n                            }\r\n                            start = start.previousSibling;\r\n                        }\r\n                        var end = bk.end;\r\n                        start = bk.start.nextSibling;\r\n                        if (pre.firstChild === bk.start) {\r\n                            pre.insertBefore(me.document.createTextNode('    '), start.nextSibling)\r\n\r\n                        }\r\n                        while (start && start !== end) {\r\n                            if (domUtils.isBr(start) && start.nextSibling) {\r\n                                if (start.nextSibling === end) {\r\n                                    break;\r\n                                }\r\n                                pre.insertBefore(me.document.createTextNode('    '), start.nextSibling)\r\n                            }\r\n\r\n                            start = start.nextSibling;\r\n                        }\r\n                        rng.moveToBookmark(bk).select();\r\n                    } else {\r\n                        var tmpNode = me.document.createTextNode('    ');\r\n                        rng.insertNode(tmpNode).setStartAfter(tmpNode).collapse(true).select(true);\r\n                    }\r\n                }\r\n\r\n\r\n                me.fireEvent('saveScene');\r\n                return true;\r\n            }\r\n\r\n\r\n        });\r\n\r\n\r\n        me.addListener('beforeinserthtml', function (evtName, html) {\r\n            var me = this,\r\n                rng = me.selection.getRange(),\r\n                pre = domUtils.findParentByTagName(rng.startContainer, 'pre', true);\r\n            if (pre) {\r\n                if (!rng.collapsed) {\r\n                    rng.deleteContents()\r\n                }\r\n                var htmlstr = '';\r\n                if (browser.ie && browser.version > 8) {\r\n\r\n                    utils.each(UE.filterNode(UE.htmlparser(html), me.options.filterTxtRules).children, function (node) {\r\n                        if (node.type == 'element') {\r\n                            if (node.tagName == 'br') {\r\n                                htmlstr += '\\n'\r\n                            } else if (!dtd.$empty[node.tagName]) {\r\n                                utils.each(node.children, function (cn) {\r\n                                    if (cn.type == 'element') {\r\n                                        if (cn.tagName == 'br') {\r\n                                            htmlstr += '\\n'\r\n                                        } else if (!dtd.$empty[node.tagName]) {\r\n                                            htmlstr += cn.innerText();\r\n                                        }\r\n                                    } else {\r\n                                        htmlstr += cn.data\r\n                                    }\r\n                                })\r\n                                if (!/\\n$/.test(htmlstr)) {\r\n                                    htmlstr += '\\n';\r\n                                }\r\n                            }\r\n                        } else {\r\n                            htmlstr += node.data + '\\n'\r\n                        }\r\n                        if (!node.nextSibling() && /\\n$/.test(htmlstr)) {\r\n                            htmlstr = htmlstr.replace(/\\n$/, '');\r\n                        }\r\n                    });\r\n                    var tmpNode = me.document.createTextNode(utils.html(htmlstr.replace(/&nbsp;/g, ' ')));\r\n                    rng.insertNode(tmpNode).selectNode(tmpNode).select();\r\n                } else {\r\n                    var frag = me.document.createDocumentFragment();\r\n\r\n                    utils.each(UE.filterNode(UE.htmlparser(html), me.options.filterTxtRules).children, function (node) {\r\n                        if (node.type == 'element') {\r\n                            if (node.tagName == 'br') {\r\n                                frag.appendChild(me.document.createElement('br'))\r\n                            } else if (!dtd.$empty[node.tagName]) {\r\n                                utils.each(node.children, function (cn) {\r\n                                    if (cn.type == 'element') {\r\n                                        if (cn.tagName == 'br') {\r\n\r\n                                            frag.appendChild(me.document.createElement('br'))\r\n                                        } else if (!dtd.$empty[node.tagName]) {\r\n                                            frag.appendChild(me.document.createTextNode(utils.html(cn.innerText().replace(/&nbsp;/g, ' '))));\r\n\r\n                                        }\r\n                                    } else {\r\n                                        frag.appendChild(me.document.createTextNode(utils.html(cn.data.replace(/&nbsp;/g, ' '))));\r\n\r\n                                    }\r\n                                })\r\n                                if (frag.lastChild.nodeName != 'BR') {\r\n                                    frag.appendChild(me.document.createElement('br'))\r\n                                }\r\n                            }\r\n                        } else {\r\n                            frag.appendChild(me.document.createTextNode(utils.html(node.data.replace(/&nbsp;/g, ' '))));\r\n                        }\r\n                        if (!node.nextSibling() && frag.lastChild.nodeName == 'BR') {\r\n                            frag.removeChild(frag.lastChild)\r\n                        }\r\n\r\n\r\n                    });\r\n                    rng.insertNode(frag).select();\r\n\r\n                }\r\n\r\n                return true;\r\n            }\r\n        });\r\n        //方向键的处理\r\n        me.addListener('keydown', function (cmd, evt) {\r\n            var me = this, keyCode = evt.keyCode || evt.which;\r\n            if (keyCode == 40) {\r\n                var rng = me.selection.getRange(), pre, start = rng.startContainer;\r\n                if (rng.collapsed && (pre = domUtils.findParentByTagName(rng.startContainer, 'pre', true)) && !pre.nextSibling) {\r\n                    var last = pre.lastChild\r\n                    while (last && last.nodeName == 'BR') {\r\n                        last = last.previousSibling;\r\n                    }\r\n                    if (last === start || rng.startContainer === pre && rng.startOffset == pre.childNodes.length) {\r\n                        me.execCommand('insertparagraph');\r\n                        domUtils.preventDefault(evt)\r\n                    }\r\n\r\n                }\r\n            }\r\n        });\r\n        //trace:3395\r\n        me.addListener('delkeydown', function (type, evt) {\r\n            var rng = this.selection.getRange();\r\n            rng.txtToElmBoundary(true);\r\n            var start = rng.startContainer;\r\n            if (domUtils.isTagNode(start, 'pre') && rng.collapsed && domUtils.isStartInblock(rng)) {\r\n                var p = me.document.createElement('p');\r\n                domUtils.fillNode(me.document, p);\r\n                start.parentNode.insertBefore(p, start);\r\n                domUtils.remove(start);\r\n                rng.setStart(p, 0).setCursor(false, true);\r\n                domUtils.preventDefault(evt);\r\n                return true;\r\n            }\r\n        })\r\n    };\r\n\r\n\r\n    // plugins/cleardoc.js\r\n    /**\r\n     * 清空文档插件\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * 清空文档\r\n     * @command cleardoc\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @example\r\n     * ```javascript\r\n     * //editor 是编辑器实例\r\n     * editor.execCommand('cleardoc');\r\n     * ```\r\n     */\r\n\r\n    UE.commands['cleardoc'] = {\r\n        execCommand: function (cmdName) {\r\n            var me = this,\r\n                enterTag = me.options.enterTag,\r\n                range = me.selection.getRange();\r\n            if (enterTag == \"br\") {\r\n                me.body.innerHTML = \"<br/>\";\r\n                range.setStart(me.body, 0).setCursor();\r\n            } else {\r\n                me.body.innerHTML = \"<p>\" + (ie ? \"\" : \"<br/>\") + \"</p>\";\r\n                range.setStart(me.body.firstChild, 0).setCursor(false, true);\r\n            }\r\n            setTimeout(function () {\r\n                me.fireEvent(\"clearDoc\");\r\n            }, 0);\r\n\r\n        }\r\n    };\r\n\r\n\r\n\r\n    // plugins/anchor.js\r\n    /**\r\n     * 锚点插件，为UEditor提供插入锚点支持\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n    UE.plugin.register('anchor', function () {\r\n\r\n        return {\r\n            bindEvents: {\r\n                'ready': function () {\r\n                    utils.cssRule('anchor',\r\n                        '.anchorclass{background: url(\\''\r\n                        + this.options.themePath\r\n                        + this.options.theme + '/images/anchor.gif\\') no-repeat scroll left center transparent;cursor: auto;display: inline-block;height: 16px;width: 15px;}',\r\n                        this.document);\r\n                }\r\n            },\r\n            outputRule: function (root) {\r\n                utils.each(root.getNodesByTagName('img'), function (a) {\r\n                    var val;\r\n                    if (val = a.getAttr('anchorname')) {\r\n                        a.tagName = 'a';\r\n                        a.setAttr({\r\n                            anchorname: '',\r\n                            name: val,\r\n                            'class': ''\r\n                        })\r\n                    }\r\n                })\r\n            },\r\n            inputRule: function (root) {\r\n                utils.each(root.getNodesByTagName('a'), function (a) {\r\n                    var val;\r\n                    if ((val = a.getAttr('name')) && !a.getAttr('href')) {\r\n                        a.tagName = 'img';\r\n                        a.setAttr({\r\n                            anchorname: a.getAttr('name'),\r\n                            'class': 'anchorclass'\r\n                        });\r\n                        a.setAttr('name')\r\n\r\n                    }\r\n                })\r\n\r\n            },\r\n            commands: {\r\n                /**\r\n                 * 插入锚点\r\n                 * @command anchor\r\n                 * @method execCommand\r\n                 * @param { String } cmd 命令字符串\r\n                 * @param { String } name 锚点名称字符串\r\n                 * @example\r\n                 * ```javascript\r\n                 * //editor 是编辑器实例\r\n                 * editor.execCommand('anchor', 'anchor1');\r\n                 * ```\r\n                 */\r\n                'anchor': {\r\n                    execCommand: function (cmd, name) {\r\n                        var range = this.selection.getRange(), img = range.getClosedNode();\r\n                        if (img && img.getAttribute('anchorname')) {\r\n                            if (name) {\r\n                                img.setAttribute('anchorname', name);\r\n                            } else {\r\n                                range.setStartBefore(img).setCursor();\r\n                                domUtils.remove(img);\r\n                            }\r\n                        } else {\r\n                            if (name) {\r\n                                //只在选区的开始插入\r\n                                var anchor = this.document.createElement('img');\r\n                                range.collapse(true);\r\n                                domUtils.setAttributes(anchor, {\r\n                                    'anchorname': name,\r\n                                    'class': 'anchorclass'\r\n                                });\r\n                                range.insertNode(anchor).setStartAfter(anchor).setCursor(false, true);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n\r\n    // plugins/wordcount.js\r\n    ///import core\r\n    ///commands 字数统计\r\n    ///commandsName  WordCount,wordCount\r\n    ///commandsTitle  字数统计\r\n    /*\r\n     * Created by JetBrains WebStorm.\r\n     * User: taoqili\r\n     * Date: 11-9-7\r\n     * Time: 下午8:18\r\n     * To change this template use File | Settings | File Templates.\r\n     */\r\n\r\n    UE.plugins['wordcount'] = function () {\r\n        var me = this;\r\n        me.setOpt('wordCount', true);\r\n        me.addListener('contentchange', function () {\r\n            me.fireEvent('wordcount');\r\n        });\r\n        var timer;\r\n        me.addListener('ready', function () {\r\n            var me = this;\r\n            domUtils.on(me.body, \"keyup\", function (evt) {\r\n                var code = evt.keyCode || evt.which,\r\n                    //忽略的按键,ctr,alt,shift,方向键\r\n                    ignores = { \"16\": 1, \"18\": 1, \"20\": 1, \"37\": 1, \"38\": 1, \"39\": 1, \"40\": 1 };\r\n                if (code in ignores) return;\r\n                clearTimeout(timer);\r\n                timer = setTimeout(function () {\r\n                    me.fireEvent('wordcount');\r\n                }, 200)\r\n            })\r\n        });\r\n    };\r\n\r\n\r\n    // plugins/pagebreak.js\r\n    /**\r\n     * 分页功能插件\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n    UE.plugins['pagebreak'] = function () {\r\n        var me = this,\r\n            notBreakTags = ['td'];\r\n        me.setOpt('pageBreakTag', '_ueditor_page_break_tag_');\r\n\r\n        function fillNode(node) {\r\n            if (domUtils.isEmptyBlock(node)) {\r\n                var firstChild = node.firstChild, tmpNode;\r\n\r\n                while (firstChild && firstChild.nodeType == 1 && domUtils.isEmptyBlock(firstChild)) {\r\n                    tmpNode = firstChild;\r\n                    firstChild = firstChild.firstChild;\r\n                }\r\n                !tmpNode && (tmpNode = node);\r\n                domUtils.fillNode(me.document, tmpNode);\r\n            }\r\n        }\r\n        //分页符样式添加\r\n\r\n        me.ready(function () {\r\n            utils.cssRule('pagebreak', '.pagebreak{display:block;clear:both !important;cursor:default !important;width: 100% !important;margin:0;}', me.document);\r\n        });\r\n        function isHr(node) {\r\n            return node && node.nodeType == 1 && node.tagName == 'HR' && node.className == 'pagebreak';\r\n        }\r\n        me.addInputRule(function (root) {\r\n            root.traversal(function (node) {\r\n                if (node.type == 'text' && node.data == me.options.pageBreakTag) {\r\n                    var hr = UE.uNode.createElement('<hr class=\"pagebreak\" noshade=\"noshade\" size=\"5\" style=\"-webkit-user-select: none;\">');\r\n                    node.parentNode.insertBefore(hr, node);\r\n                    node.parentNode.removeChild(node)\r\n                }\r\n            })\r\n        });\r\n        me.addOutputRule(function (node) {\r\n            utils.each(node.getNodesByTagName('hr'), function (n) {\r\n                if (n.getAttr('class') == 'pagebreak') {\r\n                    var txt = UE.uNode.createText(me.options.pageBreakTag);\r\n                    n.parentNode.insertBefore(txt, n);\r\n                    n.parentNode.removeChild(n);\r\n                }\r\n            })\r\n\r\n        });\r\n\r\n        /**\r\n         * 插入分页符\r\n         * @command pagebreak\r\n         * @method execCommand\r\n         * @param { String } cmd 命令字符串\r\n         * @remind 在表格中插入分页符会把表格切分成两部分\r\n         * @remind 获取编辑器内的数据时， 编辑器会把分页符转换成“_ueditor_page_break_tag_”字符串，\r\n         *          以便于提交数据到服务器端后处理分页。\r\n         * @example\r\n         * ```javascript\r\n         * editor.execCommand( 'pagebreak'); //插入一个hr标签，带有样式类名pagebreak\r\n         * ```\r\n         */\r\n\r\n        me.commands['pagebreak'] = {\r\n            execCommand: function () {\r\n                var range = me.selection.getRange(), hr = me.document.createElement('hr');\r\n                domUtils.setAttributes(hr, {\r\n                    'class': 'pagebreak',\r\n                    noshade: \"noshade\",\r\n                    size: \"5\"\r\n                });\r\n                domUtils.unSelectable(hr);\r\n                //table单独处理\r\n                var node = domUtils.findParentByTagName(range.startContainer, notBreakTags, true),\r\n\r\n                    parents = [], pN;\r\n                if (node) {\r\n                    switch (node.tagName) {\r\n                        case 'TD':\r\n                            pN = node.parentNode;\r\n                            if (!pN.previousSibling) {\r\n                                var table = domUtils.findParentByTagName(pN, 'table');\r\n                                //                            var tableWrapDiv = table.parentNode;\r\n                                //                            if(tableWrapDiv && tableWrapDiv.nodeType == 1\r\n                                //                                && tableWrapDiv.tagName == 'DIV'\r\n                                //                                && tableWrapDiv.getAttribute('dropdrag')\r\n                                //                                ){\r\n                                //                                domUtils.remove(tableWrapDiv,true);\r\n                                //                            }\r\n                                table.parentNode.insertBefore(hr, table);\r\n                                parents = domUtils.findParents(hr, true);\r\n\r\n                            } else {\r\n                                pN.parentNode.insertBefore(hr, pN);\r\n                                parents = domUtils.findParents(hr);\r\n\r\n                            }\r\n                            pN = parents[1];\r\n                            if (hr !== pN) {\r\n                                domUtils.breakParent(hr, pN);\r\n\r\n                            }\r\n                            //table要重写绑定一下拖拽\r\n                            me.fireEvent('afteradjusttable', me.document);\r\n                    }\r\n\r\n                } else {\r\n\r\n                    if (!range.collapsed) {\r\n                        range.deleteContents();\r\n                        var start = range.startContainer;\r\n                        while (!domUtils.isBody(start) && domUtils.isBlockElm(start) && domUtils.isEmptyNode(start)) {\r\n                            range.setStartBefore(start).collapse(true);\r\n                            domUtils.remove(start);\r\n                            start = range.startContainer;\r\n                        }\r\n\r\n                    }\r\n                    range.insertNode(hr);\r\n\r\n                    var pN = hr.parentNode, nextNode;\r\n                    while (!domUtils.isBody(pN)) {\r\n                        domUtils.breakParent(hr, pN);\r\n                        nextNode = hr.nextSibling;\r\n                        if (nextNode && domUtils.isEmptyBlock(nextNode)) {\r\n                            domUtils.remove(nextNode);\r\n                        }\r\n                        pN = hr.parentNode;\r\n                    }\r\n                    nextNode = hr.nextSibling;\r\n                    var pre = hr.previousSibling;\r\n                    if (isHr(pre)) {\r\n                        domUtils.remove(pre);\r\n                    } else {\r\n                        pre && fillNode(pre);\r\n                    }\r\n\r\n                    if (!nextNode) {\r\n                        var p = me.document.createElement('p');\r\n\r\n                        hr.parentNode.appendChild(p);\r\n                        domUtils.fillNode(me.document, p);\r\n                        range.setStart(p, 0).collapse(true);\r\n                    } else {\r\n                        if (isHr(nextNode)) {\r\n                            domUtils.remove(nextNode);\r\n                        } else {\r\n                            fillNode(nextNode);\r\n                        }\r\n                        range.setEndAfter(hr).collapse(false);\r\n                    }\r\n\r\n                    range.select(true);\r\n\r\n                }\r\n\r\n            }\r\n        };\r\n    };\r\n\r\n    // plugins/wordimage.js\r\n    ///import core\r\n    ///commands 本地图片引导上传\r\n    ///commandsName  WordImage\r\n    ///commandsTitle  本地图片引导上传\r\n    ///commandsDialog  dialogs\\wordimage\r\n\r\n    UE.plugin.register('wordimage', function () {\r\n        var me = this,\r\n            images = [];\r\n        return {\r\n            commands: {\r\n                'wordimage': {\r\n                    execCommand: function () {\r\n                        var images = domUtils.getElementsByTagName(me.body, \"img\");\r\n                        var urlList = [];\r\n                        for (var i = 0, ci; ci = images[i++];) {\r\n                            var url = ci.getAttribute(\"word_img\");\r\n                            url && urlList.push(url);\r\n                        }\r\n                        return urlList;\r\n                    },\r\n                    queryCommandState: function () {\r\n                        images = domUtils.getElementsByTagName(me.body, \"img\");\r\n                        for (var i = 0, ci; ci = images[i++];) {\r\n                            if (ci.getAttribute(\"word_img\")) {\r\n                                return 1;\r\n                            }\r\n                        }\r\n                        return -1;\r\n                    },\r\n                    notNeedUndo: true\r\n                }\r\n            },\r\n            inputRule: function (root) {\r\n                utils.each(root.getNodesByTagName('img'), function (img) {\r\n                    var attrs = img.attrs,\r\n                        flag = parseInt(attrs.width) < 128 || parseInt(attrs.height) < 43,\r\n                        opt = me.options,\r\n                        src = opt.UEDITOR_HOME_URL + 'themes/default/images/spacer.gif';\r\n                    if (attrs['src'] && /^(?:(file:\\/+))/.test(attrs['src'])) {\r\n                        img.setAttr({\r\n                            width: attrs.width,\r\n                            height: attrs.height,\r\n                            alt: attrs.alt,\r\n                            word_img: attrs.src,\r\n                            src: src,\r\n                            'style': 'background:url(' + (flag ? opt.themePath + opt.theme + '/images/word.gif' : opt.langPath + opt.lang + '/images/localimage.png') + ') no-repeat center center;border:1px solid #ddd'\r\n                        })\r\n                    }\r\n                })\r\n            }\r\n        }\r\n    });\r\n\r\n    // plugins/dragdrop.js\r\n    UE.plugins['dragdrop'] = function () {\r\n\r\n        var me = this;\r\n        me.ready(function () {\r\n            domUtils.on(this.body, 'dragend', function () {\r\n                var rng = me.selection.getRange();\r\n                var node = rng.getClosedNode() || me.selection.getStart();\r\n\r\n                if (node && node.tagName == 'IMG') {\r\n\r\n                    var pre = node.previousSibling, next;\r\n                    while (next = node.nextSibling) {\r\n                        if (next.nodeType == 1 && next.tagName == 'SPAN' && !next.firstChild) {\r\n                            domUtils.remove(next)\r\n                        } else {\r\n                            break;\r\n                        }\r\n                    }\r\n\r\n\r\n                    if ((pre && pre.nodeType == 1 && !domUtils.isEmptyBlock(pre) || !pre) && (!next || next && !domUtils.isEmptyBlock(next))) {\r\n                        if (pre && pre.tagName == 'P' && !domUtils.isEmptyBlock(pre)) {\r\n                            pre.appendChild(node);\r\n                            domUtils.moveChild(next, pre);\r\n                            domUtils.remove(next);\r\n                        } else if (next && next.tagName == 'P' && !domUtils.isEmptyBlock(next)) {\r\n                            next.insertBefore(node, next.firstChild);\r\n                        }\r\n\r\n                        if (pre && pre.tagName == 'P' && domUtils.isEmptyBlock(pre)) {\r\n                            domUtils.remove(pre)\r\n                        }\r\n                        if (next && next.tagName == 'P' && domUtils.isEmptyBlock(next)) {\r\n                            domUtils.remove(next)\r\n                        }\r\n                        rng.selectNode(node).select();\r\n                        me.fireEvent('saveScene');\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            })\r\n        });\r\n        me.addListener('keyup', function (type, evt) {\r\n            var keyCode = evt.keyCode || evt.which;\r\n            if (keyCode == 13) {\r\n                var rng = me.selection.getRange(), node;\r\n                if (node = domUtils.findParentByTagName(rng.startContainer, 'p', true)) {\r\n                    if (domUtils.getComputedStyle(node, 'text-align') == 'center') {\r\n                        domUtils.removeStyle(node, 'text-align')\r\n                    }\r\n                }\r\n            }\r\n        })\r\n    };\r\n\r\n\r\n    // plugins/undo.js\r\n    /**\r\n     * undo redo\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * 撤销上一次执行的命令\r\n     * @command undo\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'undo' );\r\n     * ```\r\n     */\r\n\r\n    /**\r\n     * 重做上一次执行的命令\r\n     * @command redo\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'redo' );\r\n     * ```\r\n     */\r\n\r\n    UE.plugins['undo'] = function () {\r\n        var saveSceneTimer;\r\n        var me = this,\r\n            maxUndoCount = me.options.maxUndoCount || 20,\r\n            maxInputCount = me.options.maxInputCount || 20,\r\n            fillchar = new RegExp(domUtils.fillChar + '|<\\/hr>', 'gi');// ie会产生多余的</hr>\r\n        var noNeedFillCharTags = {\r\n            ol: 1, ul: 1, table: 1, tbody: 1, tr: 1, body: 1\r\n        };\r\n        var orgState = me.options.autoClearEmptyNode;\r\n        function compareAddr(indexA, indexB) {\r\n            if (indexA.length != indexB.length)\r\n                return 0;\r\n            for (var i = 0, l = indexA.length; i < l; i++) {\r\n                if (indexA[i] != indexB[i])\r\n                    return 0\r\n            }\r\n            return 1;\r\n        }\r\n\r\n        function compareRangeAddress(rngAddrA, rngAddrB) {\r\n            if (rngAddrA.collapsed != rngAddrB.collapsed) {\r\n                return 0;\r\n            }\r\n            if (!compareAddr(rngAddrA.startAddress, rngAddrB.startAddress) || !compareAddr(rngAddrA.endAddress, rngAddrB.endAddress)) {\r\n                return 0;\r\n            }\r\n            return 1;\r\n        }\r\n\r\n        function UndoManager() {\r\n            this.list = [];\r\n            this.index = 0;\r\n            this.hasUndo = false;\r\n            this.hasRedo = false;\r\n            this.undo = function () {\r\n                if (this.hasUndo) {\r\n                    if (!this.list[this.index - 1] && this.list.length == 1) {\r\n                        this.reset();\r\n                        return;\r\n                    }\r\n                    while (this.list[this.index].content == this.list[this.index - 1].content) {\r\n                        this.index--;\r\n                        if (this.index == 0) {\r\n                            return this.restore(0);\r\n                        }\r\n                    }\r\n                    this.restore(--this.index);\r\n                }\r\n            };\r\n            this.redo = function () {\r\n                if (this.hasRedo) {\r\n                    while (this.list[this.index].content == this.list[this.index + 1].content) {\r\n                        this.index++;\r\n                        if (this.index == this.list.length - 1) {\r\n                            return this.restore(this.index);\r\n                        }\r\n                    }\r\n                    this.restore(++this.index);\r\n                }\r\n            };\r\n\r\n            this.restore = function () {\r\n                var me = this.editor;\r\n                var scene = this.list[this.index];\r\n                var root = UE.htmlparser(scene.content.replace(fillchar, ''));\r\n                me.options.autoClearEmptyNode = false;\r\n                me.filterInputRule(root);\r\n                me.options.autoClearEmptyNode = orgState;\r\n                //trace:873\r\n                //去掉展位符\r\n                me.document.body.innerHTML = root.toHtml();\r\n                me.fireEvent('afterscencerestore');\r\n                //处理undo后空格不展位的问题\r\n                if (browser.ie) {\r\n                    utils.each(domUtils.getElementsByTagName(me.document, 'td th caption p'), function (node) {\r\n                        if (domUtils.isEmptyNode(node)) {\r\n                            domUtils.fillNode(me.document, node);\r\n                        }\r\n                    })\r\n                }\r\n\r\n                try {\r\n                    var rng = new dom.Range(me.document).moveToAddress(scene.address);\r\n                    rng.select(noNeedFillCharTags[rng.startContainer.nodeName.toLowerCase()]);\r\n                } catch (e) { }\r\n\r\n                this.update();\r\n                this.clearKey();\r\n                //不能把自己reset了\r\n                me.fireEvent('reset', true);\r\n            };\r\n\r\n            this.getScene = function () {\r\n                var me = this.editor;\r\n                var rng = me.selection.getRange(),\r\n                    rngAddress = rng.createAddress(false, true);\r\n                me.fireEvent('beforegetscene');\r\n                var root = UE.htmlparser(me.body.innerHTML);\r\n                me.options.autoClearEmptyNode = false;\r\n                me.filterOutputRule(root);\r\n                me.options.autoClearEmptyNode = orgState;\r\n                var cont = root.toHtml();\r\n                //trace:3461\r\n                //这个会引起回退时导致空格丢失的情况\r\n                //            browser.ie && (cont = cont.replace(/>&nbsp;</g, '><').replace(/\\s*</g, '<').replace(/>\\s*/g, '>'));\r\n                me.fireEvent('aftergetscene');\r\n\r\n                return {\r\n                    address: rngAddress,\r\n                    content: cont\r\n                }\r\n            };\r\n            this.save = function (notCompareRange, notSetCursor) {\r\n                clearTimeout(saveSceneTimer);\r\n                var currentScene = this.getScene(notSetCursor),\r\n                    lastScene = this.list[this.index];\r\n\r\n                if (lastScene && lastScene.content != currentScene.content) {\r\n                    me.trigger('contentchange')\r\n                }\r\n                //内容相同位置相同不存\r\n                if (lastScene && lastScene.content == currentScene.content &&\r\n                    (notCompareRange ? 1 : compareRangeAddress(lastScene.address, currentScene.address))\r\n                ) {\r\n                    return;\r\n                }\r\n                this.list = this.list.slice(0, this.index + 1);\r\n                this.list.push(currentScene);\r\n                //如果大于最大数量了，就把最前的剔除\r\n                if (this.list.length > maxUndoCount) {\r\n                    this.list.shift();\r\n                }\r\n                this.index = this.list.length - 1;\r\n                this.clearKey();\r\n                //跟新undo/redo状态\r\n                this.update();\r\n\r\n            };\r\n            this.update = function () {\r\n                this.hasRedo = !!this.list[this.index + 1];\r\n                this.hasUndo = !!this.list[this.index - 1];\r\n            };\r\n            this.reset = function () {\r\n                this.list = [];\r\n                this.index = 0;\r\n                this.hasUndo = false;\r\n                this.hasRedo = false;\r\n                this.clearKey();\r\n            };\r\n            this.clearKey = function () {\r\n                keycont = 0;\r\n                lastKeyCode = null;\r\n            };\r\n        }\r\n\r\n        me.undoManger = new UndoManager();\r\n        me.undoManger.editor = me;\r\n        function saveScene() {\r\n            this.undoManger.save();\r\n        }\r\n\r\n        me.addListener('saveScene', function () {\r\n            var args = Array.prototype.splice.call(arguments, 1);\r\n            this.undoManger.save.apply(this.undoManger, args);\r\n        });\r\n\r\n        //    me.addListener('beforeexeccommand', saveScene);\r\n        //    me.addListener('afterexeccommand', saveScene);\r\n\r\n        me.addListener('reset', function (type, exclude) {\r\n            if (!exclude) {\r\n                this.undoManger.reset();\r\n            }\r\n        });\r\n        me.commands['redo'] = me.commands['undo'] = {\r\n            execCommand: function (cmdName) {\r\n                this.undoManger[cmdName]();\r\n            },\r\n            queryCommandState: function (cmdName) {\r\n                return this.undoManger['has' + (cmdName.toLowerCase() == 'undo' ? 'Undo' : 'Redo')] ? 0 : -1;\r\n            },\r\n            notNeedUndo: 1\r\n        };\r\n\r\n        var keys = {\r\n            //  /*Backspace*/ 8:1, /*Delete*/ 46:1,\r\n            /*Shift*/ 16: 1, /*Ctrl*/ 17: 1, /*Alt*/ 18: 1,\r\n            37: 1, 38: 1, 39: 1, 40: 1\r\n\r\n        },\r\n            keycont = 0,\r\n            lastKeyCode;\r\n        //输入法状态下不计算字符数\r\n        var inputType = false;\r\n        me.addListener('ready', function () {\r\n            domUtils.on(this.body, 'compositionstart', function () {\r\n                inputType = true;\r\n            });\r\n            domUtils.on(this.body, 'compositionend', function () {\r\n                inputType = false;\r\n            })\r\n        });\r\n        //快捷键\r\n        me.addshortcutkey({\r\n            \"Undo\": \"ctrl+90\", //undo\r\n            \"Redo\": \"ctrl+89\" //redo\r\n\r\n        });\r\n        var isCollapsed = true;\r\n        me.addListener('keydown', function (type, evt) {\r\n\r\n            var me = this;\r\n            var keyCode = evt.keyCode || evt.which;\r\n            if (!keys[keyCode] && !evt.ctrlKey && !evt.metaKey && !evt.shiftKey && !evt.altKey) {\r\n                if (inputType)\r\n                    return;\r\n\r\n                if (!me.selection.getRange().collapsed) {\r\n                    me.undoManger.save(false, true);\r\n                    isCollapsed = false;\r\n                    return;\r\n                }\r\n                if (me.undoManger.list.length == 0) {\r\n                    me.undoManger.save(true);\r\n                }\r\n                clearTimeout(saveSceneTimer);\r\n                function save(cont) {\r\n                    cont.undoManger.save(false, true);\r\n                    cont.fireEvent('selectionchange');\r\n                }\r\n                saveSceneTimer = setTimeout(function () {\r\n                    if (inputType) {\r\n                        var interalTimer = setInterval(function () {\r\n                            if (!inputType) {\r\n                                save(me);\r\n                                clearInterval(interalTimer)\r\n                            }\r\n                        }, 300)\r\n                        return;\r\n                    }\r\n                    save(me);\r\n                }, 200);\r\n\r\n                lastKeyCode = keyCode;\r\n                keycont++;\r\n                if (keycont >= maxInputCount) {\r\n                    save(me)\r\n                }\r\n            }\r\n        });\r\n        me.addListener('keyup', function (type, evt) {\r\n            var keyCode = evt.keyCode || evt.which;\r\n            if (!keys[keyCode] && !evt.ctrlKey && !evt.metaKey && !evt.shiftKey && !evt.altKey) {\r\n                if (inputType)\r\n                    return;\r\n                if (!isCollapsed) {\r\n                    this.undoManger.save(false, true);\r\n                    isCollapsed = true;\r\n                }\r\n            }\r\n        });\r\n        //扩展实例，添加关闭和开启命令undo\r\n        me.stopCmdUndo = function () {\r\n            me.__hasEnterExecCommand = true;\r\n        };\r\n        me.startCmdUndo = function () {\r\n            me.__hasEnterExecCommand = false;\r\n        }\r\n    };\r\n\r\n\r\n    // plugins/copy.js\r\n    UE.plugin.register('copy', function () {\r\n\r\n        var me = this;\r\n\r\n        function initZeroClipboard() {\r\n            ZeroClipboard.config({\r\n                debug: false,\r\n                swfPath: me.options.UEDITOR_HOME_URL + 'third-party/zeroclipboard/ZeroClipboard.swf'\r\n            });\r\n\r\n            var client = me.zeroclipboard = new ZeroClipboard();\r\n\r\n            // 复制内容\r\n            client.on('copy', function (e) {\r\n                var client = e.client,\r\n                    rng = me.selection.getRange(),\r\n                    div = document.createElement('div');\r\n\r\n                div.appendChild(rng.cloneContents());\r\n                client.setText(div.innerText || div.textContent);\r\n                client.setHtml(div.innerHTML);\r\n                rng.select();\r\n            });\r\n            // hover事件传递到target\r\n            client.on('mouseover mouseout', function (e) {\r\n                var target = e.target;\r\n                if (e.type == 'mouseover') {\r\n                    domUtils.addClass(target, 'edui-state-hover');\r\n                } else if (e.type == 'mouseout') {\r\n                    domUtils.removeClasses(target, 'edui-state-hover');\r\n                }\r\n            });\r\n            // flash加载不成功\r\n            client.on('wrongflash noflash', function () {\r\n                ZeroClipboard.destroy();\r\n            });\r\n        }\r\n\r\n        return {\r\n            bindEvents: {\r\n                'ready': function () {\r\n                    if (!browser.ie) {\r\n                        if (window.ZeroClipboard) {\r\n                            initZeroClipboard();\r\n                        } else {\r\n                            utils.loadFile(document, {\r\n                                src: me.options.UEDITOR_HOME_URL + \"third-party/zeroclipboard/ZeroClipboard.js\",\r\n                                tag: \"script\",\r\n                                type: \"text/javascript\",\r\n                                defer: \"defer\"\r\n                            }, function () {\r\n                                initZeroClipboard();\r\n                            });\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            commands: {\r\n                'copy': {\r\n                    execCommand: function (cmd) {\r\n                        if (!me.document.execCommand('copy')) {\r\n                            alert(me.getLang('copymsg'));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n\r\n    // plugins/paste.js\r\n    ///import core\r\n    ///import plugins/inserthtml.js\r\n    ///import plugins/undo.js\r\n    ///import plugins/serialize.js\r\n    ///commands 粘贴\r\n    ///commandsName  PastePlain\r\n    ///commandsTitle  纯文本粘贴模式\r\n    /**\r\n     * @description 粘贴\r\n     * @author zhanyi\r\n     */\r\n    UE.plugins['paste'] = function () {\r\n        function getClipboardData(callback) {\r\n            var doc = this.document;\r\n            if (doc.getElementById('baidu_pastebin')) {\r\n                return;\r\n            }\r\n            var range = this.selection.getRange(),\r\n                bk = range.createBookmark(),\r\n                //创建剪贴的容器div\r\n                pastebin = doc.createElement('div');\r\n            pastebin.id = 'baidu_pastebin';\r\n            // Safari 要求div必须有内容，才能粘贴内容进来\r\n            browser.webkit && pastebin.appendChild(doc.createTextNode(domUtils.fillChar + domUtils.fillChar));\r\n            doc.body.appendChild(pastebin);\r\n            //trace:717 隐藏的span不能得到top\r\n            //bk.start.innerHTML = '&nbsp;';\r\n            bk.start.style.display = '';\r\n            pastebin.style.cssText = \"position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:\" +\r\n                //要在现在光标平行的位置加入，否则会出现跳动的问题\r\n                domUtils.getXY(bk.start).y + 'px';\r\n\r\n            range.selectNodeContents(pastebin).select(true);\r\n\r\n            setTimeout(function () {\r\n                if (browser.webkit) {\r\n                    for (var i = 0, pastebins = doc.querySelectorAll('#baidu_pastebin'), pi; pi = pastebins[i++];) {\r\n                        if (domUtils.isEmptyNode(pi)) {\r\n                            domUtils.remove(pi);\r\n                        } else {\r\n                            pastebin = pi;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n                try {\r\n                    pastebin.parentNode.removeChild(pastebin);\r\n                } catch (e) {\r\n                }\r\n                range.moveToBookmark(bk).select(true);\r\n                callback(pastebin);\r\n            }, 0);\r\n        }\r\n\r\n        var me = this;\r\n\r\n        me.setOpt({\r\n            retainOnlyLabelPasted: false\r\n        });\r\n\r\n        var txtContent, htmlContent, address;\r\n\r\n        function getPureHtml(html) {\r\n            return html.replace(/<(\\/?)([\\w\\-]+)([^>]*)>/gi, function (a, b, tagName, attrs) {\r\n                tagName = tagName.toLowerCase();\r\n                if ({ img: 1 }[tagName]) {\r\n                    return a;\r\n                }\r\n                attrs = attrs.replace(/([\\w\\-]*?)\\s*=\\s*((\"([^\"]*)\")|('([^']*)')|([^\\s>]+))/gi, function (str, atr, val) {\r\n                    if ({\r\n                        'src': 1,\r\n                        'href': 1,\r\n                        'name': 1\r\n                    }[atr.toLowerCase()]) {\r\n                        return atr + '=' + val + ' '\r\n                    }\r\n                    return ''\r\n                });\r\n                if ({\r\n                    'span': 1,\r\n                    'div': 1\r\n                }[tagName]) {\r\n                    return ''\r\n                } else {\r\n\r\n                    return '<' + b + tagName + ' ' + utils.trim(attrs) + '>'\r\n                }\r\n\r\n            });\r\n        }\r\n        function filter(div) {\r\n            var html;\r\n            if (div.firstChild) {\r\n                //去掉cut中添加的边界值\r\n                var nodes = domUtils.getElementsByTagName(div, 'span');\r\n                for (var i = 0, ni; ni = nodes[i++];) {\r\n                    if (ni.id == '_baidu_cut_start' || ni.id == '_baidu_cut_end') {\r\n                        domUtils.remove(ni);\r\n                    }\r\n                }\r\n\r\n                if (browser.webkit) {\r\n\r\n                    var brs = div.querySelectorAll('div br');\r\n                    for (var i = 0, bi; bi = brs[i++];) {\r\n                        var pN = bi.parentNode;\r\n                        if (pN.tagName == 'DIV' && pN.childNodes.length == 1) {\r\n                            pN.innerHTML = '<p><br/></p>';\r\n                            domUtils.remove(pN);\r\n                        }\r\n                    }\r\n                    var divs = div.querySelectorAll('#baidu_pastebin');\r\n                    for (var i = 0, di; di = divs[i++];) {\r\n                        var tmpP = me.document.createElement('p');\r\n                        di.parentNode.insertBefore(tmpP, di);\r\n                        while (di.firstChild) {\r\n                            tmpP.appendChild(di.firstChild);\r\n                        }\r\n                        domUtils.remove(di);\r\n                    }\r\n\r\n                    var metas = div.querySelectorAll('meta');\r\n                    for (var i = 0, ci; ci = metas[i++];) {\r\n                        domUtils.remove(ci);\r\n                    }\r\n\r\n                    var brs = div.querySelectorAll('br');\r\n                    for (i = 0; ci = brs[i++];) {\r\n                        if (/^apple-/i.test(ci.className)) {\r\n                            domUtils.remove(ci);\r\n                        }\r\n                    }\r\n                }\r\n                if (browser.gecko) {\r\n                    var dirtyNodes = div.querySelectorAll('[_moz_dirty]');\r\n                    for (i = 0; ci = dirtyNodes[i++];) {\r\n                        ci.removeAttribute('_moz_dirty');\r\n                    }\r\n                }\r\n                if (!browser.ie) {\r\n                    var spans = div.querySelectorAll('span.Apple-style-span');\r\n                    for (var i = 0, ci; ci = spans[i++];) {\r\n                        domUtils.remove(ci, true);\r\n                    }\r\n                }\r\n\r\n                //ie下使用innerHTML会产生多余的\\r\\n字符，也会产生&nbsp;这里过滤掉\r\n                html = div.innerHTML;//.replace(/>(?:(\\s|&nbsp;)*?)</g,'><');\r\n\r\n                //过滤word粘贴过来的冗余属性\r\n                html = UE.filterWord(html);\r\n                //取消了忽略空白的第二个参数，粘贴过来的有些是有空白的，会被套上相关的标签\r\n                var root = UE.htmlparser(html);\r\n                //如果给了过滤规则就先进行过滤\r\n                if (me.options.filterRules) {\r\n                    UE.filterNode(root, me.options.filterRules);\r\n                }\r\n                //执行默认的处理\r\n                me.filterInputRule(root);\r\n                //针对chrome的处理\r\n                if (browser.webkit) {\r\n                    var br = root.lastChild();\r\n                    if (br && br.type == 'element' && br.tagName == 'br') {\r\n                        root.removeChild(br)\r\n                    }\r\n                    utils.each(me.body.querySelectorAll('div'), function (node) {\r\n                        if (domUtils.isEmptyBlock(node)) {\r\n                            domUtils.remove(node, true)\r\n                        }\r\n                    })\r\n                }\r\n                html = { 'html': root.toHtml() };\r\n                me.fireEvent('beforepaste', html, root);\r\n                //抢了默认的粘贴，那后边的内容就不执行了，比如表格粘贴\r\n                if (!html.html) {\r\n                    return;\r\n                }\r\n                root = UE.htmlparser(html.html, true);\r\n                //如果开启了纯文本模式\r\n                if (me.queryCommandState('pasteplain') === 1) {\r\n                    me.execCommand('insertHtml', UE.filterNode(root, me.options.filterTxtRules).toHtml(), true);\r\n                } else {\r\n                    //文本模式\r\n                    UE.filterNode(root, me.options.filterTxtRules);\r\n                    txtContent = root.toHtml();\r\n                    //完全模式\r\n                    htmlContent = html.html;\r\n\r\n                    address = me.selection.getRange().createAddress(true);\r\n                    me.execCommand('insertHtml', me.getOpt('retainOnlyLabelPasted') === true ? getPureHtml(htmlContent) : htmlContent, true);\r\n                }\r\n                me.fireEvent(\"afterpaste\", html);\r\n            }\r\n        }\r\n\r\n        me.addListener('pasteTransfer', function (cmd, plainType) {\r\n\r\n            if (address && txtContent && htmlContent && txtContent != htmlContent) {\r\n                var range = me.selection.getRange();\r\n                range.moveToAddress(address, true);\r\n\r\n                if (!range.collapsed) {\r\n\r\n                    while (!domUtils.isBody(range.startContainer)\r\n                    ) {\r\n                        var start = range.startContainer;\r\n                        if (start.nodeType == 1) {\r\n                            start = start.childNodes[range.startOffset];\r\n                            if (!start) {\r\n                                range.setStartBefore(range.startContainer);\r\n                                continue;\r\n                            }\r\n                            var pre = start.previousSibling;\r\n\r\n                            if (pre && pre.nodeType == 3 && new RegExp('^[\\n\\r\\t ' + domUtils.fillChar + ']*$').test(pre.nodeValue)) {\r\n                                range.setStartBefore(pre)\r\n                            }\r\n                        }\r\n                        if (range.startOffset == 0) {\r\n                            range.setStartBefore(range.startContainer);\r\n                        } else {\r\n                            break;\r\n                        }\r\n\r\n                    }\r\n                    while (!domUtils.isBody(range.endContainer)\r\n                    ) {\r\n                        var end = range.endContainer;\r\n                        if (end.nodeType == 1) {\r\n                            end = end.childNodes[range.endOffset];\r\n                            if (!end) {\r\n                                range.setEndAfter(range.endContainer);\r\n                                continue;\r\n                            }\r\n                            var next = end.nextSibling;\r\n                            if (next && next.nodeType == 3 && new RegExp('^[\\n\\r\\t' + domUtils.fillChar + ']*$').test(next.nodeValue)) {\r\n                                range.setEndAfter(next)\r\n                            }\r\n                        }\r\n                        if (range.endOffset == range.endContainer[range.endContainer.nodeType == 3 ? 'nodeValue' : 'childNodes'].length) {\r\n                            range.setEndAfter(range.endContainer);\r\n                        } else {\r\n                            break;\r\n                        }\r\n\r\n                    }\r\n\r\n                }\r\n\r\n                range.deleteContents();\r\n                range.select(true);\r\n                me.__hasEnterExecCommand = true;\r\n                var html = htmlContent;\r\n                if (plainType === 2) {\r\n                    html = getPureHtml(html);\r\n                } else if (plainType) {\r\n                    html = txtContent;\r\n                }\r\n                me.execCommand('inserthtml', html, true);\r\n                me.__hasEnterExecCommand = false;\r\n                var rng = me.selection.getRange();\r\n                while (!domUtils.isBody(rng.startContainer) && !rng.startOffset &&\r\n                    rng.startContainer[rng.startContainer.nodeType == 3 ? 'nodeValue' : 'childNodes'].length\r\n                ) {\r\n                    rng.setStartBefore(rng.startContainer);\r\n                }\r\n                var tmpAddress = rng.createAddress(true);\r\n                address.endAddress = tmpAddress.startAddress;\r\n            }\r\n        });\r\n\r\n        me.addListener('ready', function () {\r\n            domUtils.on(me.body, 'cut', function () {\r\n                var range = me.selection.getRange();\r\n                if (!range.collapsed && me.undoManger) {\r\n                    me.undoManger.save();\r\n                }\r\n            });\r\n\r\n            //ie下beforepaste在点击右键时也会触发，所以用监控键盘才处理\r\n            domUtils.on(me.body, browser.ie || browser.opera ? 'keydown' : 'paste', function (e) {\r\n                if ((browser.ie || browser.opera) && ((!e.ctrlKey && !e.metaKey) || e.keyCode != '86')) {\r\n                    return;\r\n                }\r\n                getClipboardData.call(me, function (div) {\r\n                    filter(div);\r\n                });\r\n            });\r\n\r\n        });\r\n\r\n        me.commands['paste'] = {\r\n            execCommand: function (cmd) {\r\n                if (browser.ie) {\r\n                    getClipboardData.call(me, function (div) {\r\n                        filter(div);\r\n                    });\r\n                    me.document.execCommand('paste');\r\n                } else {\r\n                    alert(me.getLang('pastemsg'));\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n\r\n    // plugins/puretxtpaste.js\r\n    /**\r\n     * 纯文本粘贴插件\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    UE.plugins['pasteplain'] = function () {\r\n        var me = this;\r\n        me.setOpt({\r\n            'pasteplain': false,\r\n            'filterTxtRules': function () {\r\n                function transP(node) {\r\n                    node.tagName = 'p';\r\n                    node.setStyle();\r\n                }\r\n                function removeNode(node) {\r\n                    node.parentNode.removeChild(node, true)\r\n                }\r\n                return {\r\n                    //直接删除及其字节点内容\r\n                    '-': 'script style object iframe embed input select',\r\n                    'p': { $: {} },\r\n                    'br': { $: {} },\r\n                    div: function (node) {\r\n                        var tmpNode, p = UE.uNode.createElement('p');\r\n                        while (tmpNode = node.firstChild()) {\r\n                            if (tmpNode.type == 'text' || !UE.dom.dtd.$block[tmpNode.tagName]) {\r\n                                p.appendChild(tmpNode);\r\n                            } else {\r\n                                if (p.firstChild()) {\r\n                                    node.parentNode.insertBefore(p, node);\r\n                                    p = UE.uNode.createElement('p');\r\n                                } else {\r\n                                    node.parentNode.insertBefore(tmpNode, node);\r\n                                }\r\n                            }\r\n                        }\r\n                        if (p.firstChild()) {\r\n                            node.parentNode.insertBefore(p, node);\r\n                        }\r\n                        node.parentNode.removeChild(node);\r\n                    },\r\n                    ol: removeNode,\r\n                    ul: removeNode,\r\n                    dl: removeNode,\r\n                    dt: removeNode,\r\n                    dd: removeNode,\r\n                    'li': removeNode,\r\n                    'caption': transP,\r\n                    'th': transP,\r\n                    'tr': transP,\r\n                    'h1': transP, 'h2': transP, 'h3': transP, 'h4': transP, 'h5': transP, 'h6': transP,\r\n                    'td': function (node) {\r\n                        //没有内容的td直接删掉\r\n                        var txt = !!node.innerText();\r\n                        if (txt) {\r\n                            node.parentNode.insertAfter(UE.uNode.createText(' &nbsp; &nbsp;'), node);\r\n                        }\r\n                        node.parentNode.removeChild(node, node.innerText())\r\n                    }\r\n                }\r\n            }()\r\n        });\r\n        //暂时这里支持一下老版本的属性\r\n        var pasteplain = me.options.pasteplain;\r\n\r\n        /**\r\n         * 启用或取消纯文本粘贴模式\r\n         * @command pasteplain\r\n         * @method execCommand\r\n         * @param { String } cmd 命令字符串\r\n         * @example\r\n         * ```javascript\r\n         * editor.queryCommandState( 'pasteplain' );\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 查询当前是否处于纯文本粘贴模式\r\n         * @command pasteplain\r\n         * @method queryCommandState\r\n         * @param { String } cmd 命令字符串\r\n         * @return { int } 如果处于纯文本模式，返回1，否则，返回0\r\n         * @example\r\n         * ```javascript\r\n         * editor.queryCommandState( 'pasteplain' );\r\n         * ```\r\n         */\r\n        me.commands['pasteplain'] = {\r\n            queryCommandState: function () {\r\n                return pasteplain ? 1 : 0;\r\n            },\r\n            execCommand: function () {\r\n                pasteplain = !pasteplain | 0;\r\n            },\r\n            notNeedUndo: 1\r\n        };\r\n    };\r\n\r\n    // plugins/list.js\r\n    /**\r\n     * 有序列表,无序列表插件\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    UE.plugins['list'] = function () {\r\n        var me = this,\r\n            notExchange = {\r\n                'TD': 1,\r\n                'PRE': 1,\r\n                'BLOCKQUOTE': 1\r\n            };\r\n        var customStyle = {\r\n            'cn': 'cn-1-',\r\n            'cn1': 'cn-2-',\r\n            'cn2': 'cn-3-',\r\n            'num': 'num-1-',\r\n            'num1': 'num-2-',\r\n            'num2': 'num-3-',\r\n            'dash': 'dash',\r\n            'dot': 'dot'\r\n        };\r\n\r\n        me.setOpt({\r\n            'autoTransWordToList': false,\r\n            'insertorderedlist': {\r\n                'num': '',\r\n                'num1': '',\r\n                'num2': '',\r\n                'cn': '',\r\n                'cn1': '',\r\n                'cn2': '',\r\n                'decimal': '',\r\n                'lower-alpha': '',\r\n                'lower-roman': '',\r\n                'upper-alpha': '',\r\n                'upper-roman': ''\r\n            },\r\n            'insertunorderedlist': {\r\n                'circle': '',\r\n                'disc': '',\r\n                'square': '',\r\n                'dash': '',\r\n                'dot': ''\r\n            },\r\n            listDefaultPaddingLeft: '30',\r\n            listiconpath: 'http://bs.baidu.com/listicon/',\r\n            maxListLevel: -1,//-1不限制\r\n            disablePInList: false\r\n        });\r\n        function listToArray(list) {\r\n            var arr = [];\r\n            for (var p in list) {\r\n                arr.push(p)\r\n            }\r\n            return arr;\r\n        }\r\n        var listStyle = {\r\n            'OL': listToArray(me.options.insertorderedlist),\r\n            'UL': listToArray(me.options.insertunorderedlist)\r\n        };\r\n        var liiconpath = me.options.listiconpath;\r\n\r\n        //根据用户配置，调整customStyle\r\n        for (var s in customStyle) {\r\n            if (!me.options.insertorderedlist.hasOwnProperty(s) && !me.options.insertunorderedlist.hasOwnProperty(s)) {\r\n                delete customStyle[s];\r\n            }\r\n        }\r\n\r\n        me.ready(function () {\r\n            var customCss = [];\r\n            for (var p in customStyle) {\r\n                if (p == 'dash' || p == 'dot') {\r\n                    customCss.push('li.list-' + customStyle[p] + '{background-image:url(' + liiconpath + customStyle[p] + '.gif)}');\r\n                    customCss.push('ul.custom_' + p + '{list-style:none;}ul.custom_' + p + ' li{background-position:0 3px;background-repeat:no-repeat}');\r\n                } else {\r\n                    for (var i = 0; i < 99; i++) {\r\n                        customCss.push('li.list-' + customStyle[p] + i + '{background-image:url(' + liiconpath + 'list-' + customStyle[p] + i + '.gif)}')\r\n                    }\r\n                    customCss.push('ol.custom_' + p + '{list-style:none;}ol.custom_' + p + ' li{background-position:0 3px;background-repeat:no-repeat}');\r\n                }\r\n                switch (p) {\r\n                    case 'cn':\r\n                        customCss.push('li.list-' + p + '-paddingleft-1{padding-left:25px}');\r\n                        customCss.push('li.list-' + p + '-paddingleft-2{padding-left:40px}');\r\n                        customCss.push('li.list-' + p + '-paddingleft-3{padding-left:55px}');\r\n                        break;\r\n                    case 'cn1':\r\n                        customCss.push('li.list-' + p + '-paddingleft-1{padding-left:30px}');\r\n                        customCss.push('li.list-' + p + '-paddingleft-2{padding-left:40px}');\r\n                        customCss.push('li.list-' + p + '-paddingleft-3{padding-left:55px}');\r\n                        break;\r\n                    case 'cn2':\r\n                        customCss.push('li.list-' + p + '-paddingleft-1{padding-left:40px}');\r\n                        customCss.push('li.list-' + p + '-paddingleft-2{padding-left:55px}');\r\n                        customCss.push('li.list-' + p + '-paddingleft-3{padding-left:68px}');\r\n                        break;\r\n                    case 'num':\r\n                    case 'num1':\r\n                        customCss.push('li.list-' + p + '-paddingleft-1{padding-left:25px}');\r\n                        break;\r\n                    case 'num2':\r\n                        customCss.push('li.list-' + p + '-paddingleft-1{padding-left:35px}');\r\n                        customCss.push('li.list-' + p + '-paddingleft-2{padding-left:40px}');\r\n                        break;\r\n                    case 'dash':\r\n                        customCss.push('li.list-' + p + '-paddingleft{padding-left:35px}');\r\n                        break;\r\n                    case 'dot':\r\n                        customCss.push('li.list-' + p + '-paddingleft{padding-left:20px}');\r\n                }\r\n            }\r\n            customCss.push('.list-paddingleft-1{padding-left:0}');\r\n            customCss.push('.list-paddingleft-2{padding-left:' + me.options.listDefaultPaddingLeft + 'px}');\r\n            customCss.push('.list-paddingleft-3{padding-left:' + me.options.listDefaultPaddingLeft * 2 + 'px}');\r\n            //如果不给宽度会在自定应样式里出现滚动条\r\n            utils.cssRule('list', 'ol,ul{margin:0;pading:0;' + (browser.ie ? '' : 'width:95%') + '}li{clear:both;}' + customCss.join('\\n'), me.document);\r\n        });\r\n        //单独处理剪切的问题\r\n        me.ready(function () {\r\n            domUtils.on(me.body, 'cut', function () {\r\n                setTimeout(function () {\r\n                    var rng = me.selection.getRange(), li;\r\n                    //trace:3416\r\n                    if (!rng.collapsed) {\r\n                        if (li = domUtils.findParentByTagName(rng.startContainer, 'li', true)) {\r\n                            if (!li.nextSibling && domUtils.isEmptyBlock(li)) {\r\n                                var pn = li.parentNode, node;\r\n                                if (node = pn.previousSibling) {\r\n                                    domUtils.remove(pn);\r\n                                    rng.setStartAtLast(node).collapse(true);\r\n                                    rng.select(true);\r\n                                } else if (node = pn.nextSibling) {\r\n                                    domUtils.remove(pn);\r\n                                    rng.setStartAtFirst(node).collapse(true);\r\n                                    rng.select(true);\r\n                                } else {\r\n                                    var tmpNode = me.document.createElement('p');\r\n                                    domUtils.fillNode(me.document, tmpNode);\r\n                                    pn.parentNode.insertBefore(tmpNode, pn);\r\n                                    domUtils.remove(pn);\r\n                                    rng.setStart(tmpNode, 0).collapse(true);\r\n                                    rng.select(true);\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                })\r\n            })\r\n        });\r\n\r\n        function getStyle(node) {\r\n            var cls = node.className;\r\n            if (domUtils.hasClass(node, /custom_/)) {\r\n                return cls.match(/custom_(\\w+)/)[1]\r\n            }\r\n            return domUtils.getStyle(node, 'list-style-type')\r\n\r\n        }\r\n\r\n        me.addListener('beforepaste', function (type, html) {\r\n            var me = this,\r\n                rng = me.selection.getRange(), li;\r\n            var root = UE.htmlparser(html.html, true);\r\n            if (li = domUtils.findParentByTagName(rng.startContainer, 'li', true)) {\r\n                var list = li.parentNode, tagName = list.tagName == 'OL' ? 'ul' : 'ol';\r\n                utils.each(root.getNodesByTagName(tagName), function (n) {\r\n                    n.tagName = list.tagName;\r\n                    n.setAttr();\r\n                    if (n.parentNode === root) {\r\n                        type = getStyle(list) || (list.tagName == 'OL' ? 'decimal' : 'disc')\r\n                    } else {\r\n                        var className = n.parentNode.getAttr('class');\r\n                        if (className && /custom_/.test(className)) {\r\n                            type = className.match(/custom_(\\w+)/)[1]\r\n                        } else {\r\n                            type = n.parentNode.getStyle('list-style-type');\r\n                        }\r\n                        if (!type) {\r\n                            type = list.tagName == 'OL' ? 'decimal' : 'disc';\r\n                        }\r\n                    }\r\n                    var index = utils.indexOf(listStyle[list.tagName], type);\r\n                    if (n.parentNode !== root)\r\n                        index = index + 1 == listStyle[list.tagName].length ? 0 : index + 1;\r\n                    var currentStyle = listStyle[list.tagName][index];\r\n                    if (customStyle[currentStyle]) {\r\n                        n.setAttr('class', 'custom_' + currentStyle)\r\n\r\n                    } else {\r\n                        n.setStyle('list-style-type', currentStyle)\r\n                    }\r\n                })\r\n\r\n            }\r\n\r\n            html.html = root.toHtml();\r\n        });\r\n        //导出时，去掉p标签\r\n        me.getOpt('disablePInList') === true && me.addOutputRule(function (root) {\r\n            utils.each(root.getNodesByTagName('li'), function (li) {\r\n                var newChildrens = [], index = 0;\r\n                utils.each(li.children, function (n) {\r\n                    if (n.tagName == 'p') {\r\n                        var tmpNode;\r\n                        while (tmpNode = n.children.pop()) {\r\n                            newChildrens.splice(index, 0, tmpNode);\r\n                            tmpNode.parentNode = li;\r\n                            lastNode = tmpNode;\r\n                        }\r\n                        tmpNode = newChildrens[newChildrens.length - 1];\r\n                        if (!tmpNode || tmpNode.type != 'element' || tmpNode.tagName != 'br') {\r\n                            var br = UE.uNode.createElement('br');\r\n                            br.parentNode = li;\r\n                            newChildrens.push(br);\r\n                        }\r\n\r\n                        index = newChildrens.length;\r\n                    }\r\n                });\r\n                if (newChildrens.length) {\r\n                    li.children = newChildrens;\r\n                }\r\n            });\r\n        });\r\n        //进入编辑器的li要套p标签\r\n        me.addInputRule(function (root) {\r\n            utils.each(root.getNodesByTagName('li'), function (li) {\r\n                var tmpP = UE.uNode.createElement('p');\r\n                for (var i = 0, ci; ci = li.children[i];) {\r\n                    if (ci.type == 'text' || dtd.p[ci.tagName]) {\r\n                        tmpP.appendChild(ci);\r\n                    } else {\r\n                        if (tmpP.firstChild()) {\r\n                            li.insertBefore(tmpP, ci);\r\n                            tmpP = UE.uNode.createElement('p');\r\n                            i = i + 2;\r\n                        } else {\r\n                            i++;\r\n                        }\r\n\r\n                    }\r\n                }\r\n                if (tmpP.firstChild() && !tmpP.parentNode || !li.firstChild()) {\r\n                    li.appendChild(tmpP);\r\n                }\r\n                //trace:3357\r\n                //p不能为空\r\n                if (!tmpP.firstChild()) {\r\n                    tmpP.innerHTML(browser.ie ? '&nbsp;' : '<br/>')\r\n                }\r\n                //去掉末尾的空白\r\n                var p = li.firstChild();\r\n                var lastChild = p.lastChild();\r\n                if (lastChild && lastChild.type == 'text' && /^\\s*$/.test(lastChild.data)) {\r\n                    p.removeChild(lastChild)\r\n                }\r\n            });\r\n            if (me.options.autoTransWordToList) {\r\n                var orderlisttype = {\r\n                    'num1': /^\\d+\\)/,\r\n                    'decimal': /^\\d+\\./,\r\n                    'lower-alpha': /^[a-z]+\\)/,\r\n                    'upper-alpha': /^[A-Z]+\\./,\r\n                    'cn': /^[\\u4E00\\u4E8C\\u4E09\\u56DB\\u516d\\u4e94\\u4e03\\u516b\\u4e5d]+[\\u3001]/,\r\n                    'cn2': /^\\([\\u4E00\\u4E8C\\u4E09\\u56DB\\u516d\\u4e94\\u4e03\\u516b\\u4e5d]+\\)/\r\n                },\r\n                    unorderlisttype = {\r\n                        'square': 'n'\r\n                    };\r\n                function checkListType(content, container) {\r\n                    var span = container.firstChild();\r\n                    if (span && span.type == 'element' && span.tagName == 'span' && /Wingdings|Symbol/.test(span.getStyle('font-family'))) {\r\n                        for (var p in unorderlisttype) {\r\n                            if (unorderlisttype[p] == span.data) {\r\n                                return p\r\n                            }\r\n                        }\r\n                        return 'disc'\r\n                    }\r\n                    for (var p in orderlisttype) {\r\n                        if (orderlisttype[p].test(content)) {\r\n                            return p;\r\n                        }\r\n                    }\r\n\r\n                }\r\n                utils.each(root.getNodesByTagName('p'), function (node) {\r\n                    if (node.getAttr('class') != 'MsoListParagraph') {\r\n                        return\r\n                    }\r\n\r\n                    //word粘贴过来的会带有margin要去掉,但这样也可能会误命中一些央视\r\n                    node.setStyle('margin', '');\r\n                    node.setStyle('margin-left', '');\r\n                    node.setAttr('class', '');\r\n\r\n                    function appendLi(list, p, type) {\r\n                        if (list.tagName == 'ol') {\r\n                            if (browser.ie) {\r\n                                var first = p.firstChild();\r\n                                if (first.type == 'element' && first.tagName == 'span' && orderlisttype[type].test(first.innerText())) {\r\n                                    p.removeChild(first);\r\n                                }\r\n                            } else {\r\n                                p.innerHTML(p.innerHTML().replace(orderlisttype[type], ''));\r\n                            }\r\n                        } else {\r\n                            p.removeChild(p.firstChild())\r\n                        }\r\n\r\n                        var li = UE.uNode.createElement('li');\r\n                        li.appendChild(p);\r\n                        list.appendChild(li);\r\n                    }\r\n                    var tmp = node, type, cacheNode = node;\r\n\r\n                    if (node.parentNode.tagName != 'li' && (type = checkListType(node.innerText(), node))) {\r\n\r\n                        var list = UE.uNode.createElement(me.options.insertorderedlist.hasOwnProperty(type) ? 'ol' : 'ul');\r\n                        if (customStyle[type]) {\r\n                            list.setAttr('class', 'custom_' + type)\r\n                        } else {\r\n                            list.setStyle('list-style-type', type)\r\n                        }\r\n                        while (node && node.parentNode.tagName != 'li' && checkListType(node.innerText(), node)) {\r\n                            tmp = node.nextSibling();\r\n                            if (!tmp) {\r\n                                node.parentNode.insertBefore(list, node)\r\n                            }\r\n                            appendLi(list, node, type);\r\n                            node = tmp;\r\n                        }\r\n                        if (!list.parentNode && node && node.parentNode) {\r\n                            node.parentNode.insertBefore(list, node)\r\n                        }\r\n                    }\r\n                    var span = cacheNode.firstChild();\r\n                    if (span && span.type == 'element' && span.tagName == 'span' && /^\\s*(&nbsp;)+\\s*$/.test(span.innerText())) {\r\n                        span.parentNode.removeChild(span)\r\n                    }\r\n                })\r\n            }\r\n\r\n        });\r\n\r\n        //调整索引标签\r\n        me.addListener('contentchange', function () {\r\n            adjustListStyle(me.document)\r\n        });\r\n\r\n        function adjustListStyle(doc, ignore) {\r\n            utils.each(domUtils.getElementsByTagName(doc, 'ol ul'), function (node) {\r\n\r\n                if (!domUtils.inDoc(node, doc))\r\n                    return;\r\n\r\n                var parent = node.parentNode;\r\n                if (parent.tagName == node.tagName) {\r\n                    var nodeStyleType = getStyle(node) || (node.tagName == 'OL' ? 'decimal' : 'disc'),\r\n                        parentStyleType = getStyle(parent) || (parent.tagName == 'OL' ? 'decimal' : 'disc');\r\n                    if (nodeStyleType == parentStyleType) {\r\n                        var styleIndex = utils.indexOf(listStyle[node.tagName], nodeStyleType);\r\n                        styleIndex = styleIndex + 1 == listStyle[node.tagName].length ? 0 : styleIndex + 1;\r\n                        setListStyle(node, listStyle[node.tagName][styleIndex])\r\n                    }\r\n\r\n                }\r\n                var index = 0, type = 2;\r\n                if (domUtils.hasClass(node, /custom_/)) {\r\n                    if (!(/[ou]l/i.test(parent.tagName) && domUtils.hasClass(parent, /custom_/))) {\r\n                        type = 1;\r\n                    }\r\n                } else {\r\n                    if (/[ou]l/i.test(parent.tagName) && domUtils.hasClass(parent, /custom_/)) {\r\n                        type = 3;\r\n                    }\r\n                }\r\n\r\n                var style = domUtils.getStyle(node, 'list-style-type');\r\n                style && (node.style.cssText = 'list-style-type:' + style);\r\n                node.className = utils.trim(node.className.replace(/list-paddingleft-\\w+/, '')) + ' list-paddingleft-' + type;\r\n                utils.each(domUtils.getElementsByTagName(node, 'li'), function (li) {\r\n                    li.style.cssText && (li.style.cssText = '');\r\n                    if (!li.firstChild) {\r\n                        domUtils.remove(li);\r\n                        return;\r\n                    }\r\n                    if (li.parentNode !== node) {\r\n                        return;\r\n                    }\r\n                    index++;\r\n                    if (domUtils.hasClass(node, /custom_/)) {\r\n                        var paddingLeft = 1, currentStyle = getStyle(node);\r\n                        if (node.tagName == 'OL') {\r\n                            if (currentStyle) {\r\n                                switch (currentStyle) {\r\n                                    case 'cn':\r\n                                    case 'cn1':\r\n                                    case 'cn2':\r\n                                        if (index > 10 && (index % 10 == 0 || index > 10 && index < 20)) {\r\n                                            paddingLeft = 2\r\n                                        } else if (index > 20) {\r\n                                            paddingLeft = 3\r\n                                        }\r\n                                        break;\r\n                                    case 'num2':\r\n                                        if (index > 9) {\r\n                                            paddingLeft = 2\r\n                                        }\r\n                                }\r\n                            }\r\n                            li.className = 'list-' + customStyle[currentStyle] + index + ' ' + 'list-' + currentStyle + '-paddingleft-' + paddingLeft;\r\n                        } else {\r\n                            li.className = 'list-' + customStyle[currentStyle] + ' ' + 'list-' + currentStyle + '-paddingleft';\r\n                        }\r\n                    } else {\r\n                        li.className = li.className.replace(/list-[\\w\\-]+/gi, '');\r\n                    }\r\n                    var className = li.getAttribute('class');\r\n                    if (className !== null && !className.replace(/\\s/g, '')) {\r\n                        domUtils.removeAttributes(li, 'class')\r\n                    }\r\n                });\r\n                !ignore && adjustList(node, node.tagName.toLowerCase(), getStyle(node) || domUtils.getStyle(node, 'list-style-type'), true);\r\n            })\r\n        }\r\n        function adjustList(list, tag, style, ignoreEmpty) {\r\n            var nextList = list.nextSibling;\r\n            if (nextList && nextList.nodeType == 1 && nextList.tagName.toLowerCase() == tag && (getStyle(nextList) || domUtils.getStyle(nextList, 'list-style-type') || (tag == 'ol' ? 'decimal' : 'disc')) == style) {\r\n                domUtils.moveChild(nextList, list);\r\n                if (nextList.childNodes.length == 0) {\r\n                    domUtils.remove(nextList);\r\n                }\r\n            }\r\n            if (nextList && domUtils.isFillChar(nextList)) {\r\n                domUtils.remove(nextList);\r\n            }\r\n            var preList = list.previousSibling;\r\n            if (preList && preList.nodeType == 1 && preList.tagName.toLowerCase() == tag && (getStyle(preList) || domUtils.getStyle(preList, 'list-style-type') || (tag == 'ol' ? 'decimal' : 'disc')) == style) {\r\n                domUtils.moveChild(list, preList);\r\n            }\r\n            if (preList && domUtils.isFillChar(preList)) {\r\n                domUtils.remove(preList);\r\n            }\r\n            !ignoreEmpty && domUtils.isEmptyBlock(list) && domUtils.remove(list);\r\n            if (getStyle(list)) {\r\n                adjustListStyle(list.ownerDocument, true)\r\n            }\r\n        }\r\n\r\n        function setListStyle(list, style) {\r\n            if (customStyle[style]) {\r\n                list.className = 'custom_' + style;\r\n            }\r\n            try {\r\n                domUtils.setStyle(list, 'list-style-type', style);\r\n            } catch (e) { }\r\n        }\r\n        function clearEmptySibling(node) {\r\n            var tmpNode = node.previousSibling;\r\n            if (tmpNode && domUtils.isEmptyBlock(tmpNode)) {\r\n                domUtils.remove(tmpNode);\r\n            }\r\n            tmpNode = node.nextSibling;\r\n            if (tmpNode && domUtils.isEmptyBlock(tmpNode)) {\r\n                domUtils.remove(tmpNode);\r\n            }\r\n        }\r\n\r\n        me.addListener('keydown', function (type, evt) {\r\n            function preventAndSave() {\r\n                evt.preventDefault ? evt.preventDefault() : (evt.returnValue = false);\r\n                me.fireEvent('contentchange');\r\n                me.undoManger && me.undoManger.save();\r\n            }\r\n            function findList(node, filterFn) {\r\n                while (node && !domUtils.isBody(node)) {\r\n                    if (filterFn(node)) {\r\n                        return null\r\n                    }\r\n                    if (node.nodeType == 1 && /[ou]l/i.test(node.tagName)) {\r\n                        return node;\r\n                    }\r\n                    node = node.parentNode;\r\n                }\r\n                return null;\r\n            }\r\n            var keyCode = evt.keyCode || evt.which;\r\n            if (keyCode == 13 && !evt.shiftKey) {//回车\r\n                var rng = me.selection.getRange(),\r\n                    parent = domUtils.findParent(rng.startContainer, function (node) { return domUtils.isBlockElm(node) }, true),\r\n                    li = domUtils.findParentByTagName(rng.startContainer, 'li', true);\r\n                if (parent && parent.tagName != 'PRE' && !li) {\r\n                    var html = parent.innerHTML.replace(new RegExp(domUtils.fillChar, 'g'), '');\r\n                    if (/^\\s*1\\s*\\.[^\\d]/.test(html)) {\r\n                        parent.innerHTML = html.replace(/^\\s*1\\s*\\./, '');\r\n                        rng.setStartAtLast(parent).collapse(true).select();\r\n                        me.__hasEnterExecCommand = true;\r\n                        me.execCommand('insertorderedlist');\r\n                        me.__hasEnterExecCommand = false;\r\n                    }\r\n                }\r\n                var range = me.selection.getRange(),\r\n                    start = findList(range.startContainer, function (node) {\r\n                        return node.tagName == 'TABLE';\r\n                    }),\r\n                    end = range.collapsed ? start : findList(range.endContainer, function (node) {\r\n                        return node.tagName == 'TABLE';\r\n                    });\r\n\r\n                if (start && end && start === end) {\r\n\r\n                    if (!range.collapsed) {\r\n                        start = domUtils.findParentByTagName(range.startContainer, 'li', true);\r\n                        end = domUtils.findParentByTagName(range.endContainer, 'li', true);\r\n                        if (start && end && start === end) {\r\n                            range.deleteContents();\r\n                            li = domUtils.findParentByTagName(range.startContainer, 'li', true);\r\n                            if (li && domUtils.isEmptyBlock(li)) {\r\n\r\n                                pre = li.previousSibling;\r\n                                next = li.nextSibling;\r\n                                p = me.document.createElement('p');\r\n\r\n                                domUtils.fillNode(me.document, p);\r\n                                parentList = li.parentNode;\r\n                                if (pre && next) {\r\n                                    range.setStart(next, 0).collapse(true).select(true);\r\n                                    domUtils.remove(li);\r\n\r\n                                } else {\r\n                                    if (!pre && !next || !pre) {\r\n\r\n                                        parentList.parentNode.insertBefore(p, parentList);\r\n\r\n\r\n                                    } else {\r\n                                        li.parentNode.parentNode.insertBefore(p, parentList.nextSibling);\r\n                                    }\r\n                                    domUtils.remove(li);\r\n                                    if (!parentList.firstChild) {\r\n                                        domUtils.remove(parentList);\r\n                                    }\r\n                                    range.setStart(p, 0).setCursor();\r\n\r\n\r\n                                }\r\n                                preventAndSave();\r\n                                return;\r\n\r\n                            }\r\n                        } else {\r\n                            var tmpRange = range.cloneRange(),\r\n                                bk = tmpRange.collapse(false).createBookmark();\r\n\r\n                            range.deleteContents();\r\n                            tmpRange.moveToBookmark(bk);\r\n                            var li = domUtils.findParentByTagName(tmpRange.startContainer, 'li', true);\r\n\r\n                            clearEmptySibling(li);\r\n                            tmpRange.select();\r\n                            preventAndSave();\r\n                            return;\r\n                        }\r\n                    }\r\n\r\n\r\n                    li = domUtils.findParentByTagName(range.startContainer, 'li', true);\r\n\r\n                    if (li) {\r\n                        if (domUtils.isEmptyBlock(li)) {\r\n                            bk = range.createBookmark();\r\n                            var parentList = li.parentNode;\r\n                            if (li !== parentList.lastChild) {\r\n                                domUtils.breakParent(li, parentList);\r\n                                clearEmptySibling(li);\r\n                            } else {\r\n\r\n                                parentList.parentNode.insertBefore(li, parentList.nextSibling);\r\n                                if (domUtils.isEmptyNode(parentList)) {\r\n                                    domUtils.remove(parentList);\r\n                                }\r\n                            }\r\n                            //嵌套不处理\r\n                            if (!dtd.$list[li.parentNode.tagName]) {\r\n\r\n                                if (!domUtils.isBlockElm(li.firstChild)) {\r\n                                    p = me.document.createElement('p');\r\n                                    li.parentNode.insertBefore(p, li);\r\n                                    while (li.firstChild) {\r\n                                        p.appendChild(li.firstChild);\r\n                                    }\r\n                                    domUtils.remove(li);\r\n                                } else {\r\n                                    domUtils.remove(li, true);\r\n                                }\r\n                            }\r\n                            range.moveToBookmark(bk).select();\r\n\r\n\r\n                        } else {\r\n                            var first = li.firstChild;\r\n                            if (!first || !domUtils.isBlockElm(first)) {\r\n                                var p = me.document.createElement('p');\r\n\r\n                                !li.firstChild && domUtils.fillNode(me.document, p);\r\n                                while (li.firstChild) {\r\n\r\n                                    p.appendChild(li.firstChild);\r\n                                }\r\n                                li.appendChild(p);\r\n                                first = p;\r\n                            }\r\n\r\n                            var span = me.document.createElement('span');\r\n\r\n                            range.insertNode(span);\r\n                            domUtils.breakParent(span, li);\r\n\r\n                            var nextLi = span.nextSibling;\r\n                            first = nextLi.firstChild;\r\n\r\n                            if (!first) {\r\n                                p = me.document.createElement('p');\r\n\r\n                                domUtils.fillNode(me.document, p);\r\n                                nextLi.appendChild(p);\r\n                                first = p;\r\n                            }\r\n                            if (domUtils.isEmptyNode(first)) {\r\n                                first.innerHTML = '';\r\n                                domUtils.fillNode(me.document, first);\r\n                            }\r\n\r\n                            range.setStart(first, 0).collapse(true).shrinkBoundary().select();\r\n                            domUtils.remove(span);\r\n                            var pre = nextLi.previousSibling;\r\n                            if (pre && domUtils.isEmptyBlock(pre)) {\r\n                                pre.innerHTML = '<p></p>';\r\n                                domUtils.fillNode(me.document, pre.firstChild);\r\n                            }\r\n\r\n                        }\r\n                        //                        }\r\n                        preventAndSave();\r\n                    }\r\n\r\n\r\n                }\r\n\r\n\r\n            }\r\n            if (keyCode == 8) {\r\n                //修中ie中li下的问题\r\n                range = me.selection.getRange();\r\n                if (range.collapsed && domUtils.isStartInblock(range)) {\r\n                    tmpRange = range.cloneRange().trimBoundary();\r\n                    li = domUtils.findParentByTagName(range.startContainer, 'li', true);\r\n                    //要在li的最左边，才能处理\r\n                    if (li && domUtils.isStartInblock(tmpRange)) {\r\n                        start = domUtils.findParentByTagName(range.startContainer, 'p', true);\r\n                        if (start && start !== li.firstChild) {\r\n                            var parentList = domUtils.findParentByTagName(start, ['ol', 'ul']);\r\n                            domUtils.breakParent(start, parentList);\r\n                            clearEmptySibling(start);\r\n                            me.fireEvent('contentchange');\r\n                            range.setStart(start, 0).setCursor(false, true);\r\n                            me.fireEvent('saveScene');\r\n                            domUtils.preventDefault(evt);\r\n                            return;\r\n                        }\r\n\r\n                        if (li && (pre = li.previousSibling)) {\r\n                            if (keyCode == 46 && li.childNodes.length) {\r\n                                return;\r\n                            }\r\n                            //有可能上边的兄弟节点是个2级菜单，要追加到2级菜单的最后的li\r\n                            if (dtd.$list[pre.tagName]) {\r\n                                pre = pre.lastChild;\r\n                            }\r\n                            me.undoManger && me.undoManger.save();\r\n                            first = li.firstChild;\r\n                            if (domUtils.isBlockElm(first)) {\r\n                                if (domUtils.isEmptyNode(first)) {\r\n                                    //                                    range.setEnd(pre, pre.childNodes.length).shrinkBoundary().collapse().select(true);\r\n                                    pre.appendChild(first);\r\n                                    range.setStart(first, 0).setCursor(false, true);\r\n                                    //first不是唯一的节点\r\n                                    while (li.firstChild) {\r\n                                        pre.appendChild(li.firstChild);\r\n                                    }\r\n                                } else {\r\n\r\n                                    span = me.document.createElement('span');\r\n                                    range.insertNode(span);\r\n                                    //判断pre是否是空的节点,如果是<p><br/></p>类型的空节点，干掉p标签防止它占位\r\n                                    if (domUtils.isEmptyBlock(pre)) {\r\n                                        pre.innerHTML = '';\r\n                                    }\r\n                                    domUtils.moveChild(li, pre);\r\n                                    range.setStartBefore(span).collapse(true).select(true);\r\n\r\n                                    domUtils.remove(span);\r\n\r\n                                }\r\n                            } else {\r\n                                if (domUtils.isEmptyNode(li)) {\r\n                                    var p = me.document.createElement('p');\r\n                                    pre.appendChild(p);\r\n                                    range.setStart(p, 0).setCursor();\r\n                                    //                                    range.setEnd(pre, pre.childNodes.length).shrinkBoundary().collapse().select(true);\r\n                                } else {\r\n                                    range.setEnd(pre, pre.childNodes.length).collapse().select(true);\r\n                                    while (li.firstChild) {\r\n                                        pre.appendChild(li.firstChild);\r\n                                    }\r\n                                }\r\n                            }\r\n                            domUtils.remove(li);\r\n                            me.fireEvent('contentchange');\r\n                            me.fireEvent('saveScene');\r\n                            domUtils.preventDefault(evt);\r\n                            return;\r\n\r\n                        }\r\n                        //trace:980\r\n\r\n                        if (li && !li.previousSibling) {\r\n                            var parentList = li.parentNode;\r\n                            var bk = range.createBookmark();\r\n                            if (domUtils.isTagNode(parentList.parentNode, 'ol ul')) {\r\n                                parentList.parentNode.insertBefore(li, parentList);\r\n                                if (domUtils.isEmptyNode(parentList)) {\r\n                                    domUtils.remove(parentList)\r\n                                }\r\n                            } else {\r\n\r\n                                while (li.firstChild) {\r\n                                    parentList.parentNode.insertBefore(li.firstChild, parentList);\r\n                                }\r\n\r\n                                domUtils.remove(li);\r\n                                if (domUtils.isEmptyNode(parentList)) {\r\n                                    domUtils.remove(parentList)\r\n                                }\r\n\r\n                            }\r\n                            range.moveToBookmark(bk).setCursor(false, true);\r\n                            me.fireEvent('contentchange');\r\n                            me.fireEvent('saveScene');\r\n                            domUtils.preventDefault(evt);\r\n                            return;\r\n\r\n                        }\r\n\r\n\r\n                    }\r\n\r\n\r\n                }\r\n\r\n            }\r\n        });\r\n\r\n        me.addListener('keyup', function (type, evt) {\r\n            var keyCode = evt.keyCode || evt.which;\r\n            if (keyCode == 8) {\r\n                var rng = me.selection.getRange(), list;\r\n                if (list = domUtils.findParentByTagName(rng.startContainer, ['ol', 'ul'], true)) {\r\n                    adjustList(list, list.tagName.toLowerCase(), getStyle(list) || domUtils.getComputedStyle(list, 'list-style-type'), true)\r\n                }\r\n            }\r\n        });\r\n        //处理tab键\r\n        me.addListener('tabkeydown', function () {\r\n\r\n            var range = me.selection.getRange();\r\n\r\n            //控制级数\r\n            function checkLevel(li) {\r\n                if (me.options.maxListLevel != -1) {\r\n                    var level = li.parentNode, levelNum = 0;\r\n                    while (/[ou]l/i.test(level.tagName)) {\r\n                        levelNum++;\r\n                        level = level.parentNode;\r\n                    }\r\n                    if (levelNum >= me.options.maxListLevel) {\r\n                        return true;\r\n                    }\r\n                }\r\n            }\r\n            //只以开始为准\r\n            //todo 后续改进\r\n            var li = domUtils.findParentByTagName(range.startContainer, 'li', true);\r\n            if (li) {\r\n\r\n                var bk;\r\n                if (range.collapsed) {\r\n                    if (checkLevel(li))\r\n                        return true;\r\n                    var parentLi = li.parentNode,\r\n                        list = me.document.createElement(parentLi.tagName),\r\n                        index = utils.indexOf(listStyle[list.tagName], getStyle(parentLi) || domUtils.getComputedStyle(parentLi, 'list-style-type'));\r\n                    index = index + 1 == listStyle[list.tagName].length ? 0 : index + 1;\r\n                    var currentStyle = listStyle[list.tagName][index];\r\n                    setListStyle(list, currentStyle);\r\n                    if (domUtils.isStartInblock(range)) {\r\n                        me.fireEvent('saveScene');\r\n                        bk = range.createBookmark();\r\n                        parentLi.insertBefore(list, li);\r\n                        list.appendChild(li);\r\n                        adjustList(list, list.tagName.toLowerCase(), currentStyle);\r\n                        me.fireEvent('contentchange');\r\n                        range.moveToBookmark(bk).select(true);\r\n                        return true;\r\n                    }\r\n                } else {\r\n                    me.fireEvent('saveScene');\r\n                    bk = range.createBookmark();\r\n                    for (var i = 0, closeList, parents = domUtils.findParents(li), ci; ci = parents[i++];) {\r\n                        if (domUtils.isTagNode(ci, 'ol ul')) {\r\n                            closeList = ci;\r\n                            break;\r\n                        }\r\n                    }\r\n                    var current = li;\r\n                    if (bk.end) {\r\n                        while (current && !(domUtils.getPosition(current, bk.end) & domUtils.POSITION_FOLLOWING)) {\r\n                            if (checkLevel(current)) {\r\n                                current = domUtils.getNextDomNode(current, false, null, function (node) { return node !== closeList });\r\n                                continue;\r\n                            }\r\n                            var parentLi = current.parentNode,\r\n                                list = me.document.createElement(parentLi.tagName),\r\n                                index = utils.indexOf(listStyle[list.tagName], getStyle(parentLi) || domUtils.getComputedStyle(parentLi, 'list-style-type'));\r\n                            var currentIndex = index + 1 == listStyle[list.tagName].length ? 0 : index + 1;\r\n                            var currentStyle = listStyle[list.tagName][currentIndex];\r\n                            setListStyle(list, currentStyle);\r\n                            parentLi.insertBefore(list, current);\r\n                            while (current && !(domUtils.getPosition(current, bk.end) & domUtils.POSITION_FOLLOWING)) {\r\n                                li = current.nextSibling;\r\n                                list.appendChild(current);\r\n                                if (!li || domUtils.isTagNode(li, 'ol ul')) {\r\n                                    if (li) {\r\n                                        while (li = li.firstChild) {\r\n                                            if (li.tagName == 'LI') {\r\n                                                break;\r\n                                            }\r\n                                        }\r\n                                    } else {\r\n                                        li = domUtils.getNextDomNode(current, false, null, function (node) { return node !== closeList });\r\n                                    }\r\n                                    break;\r\n                                }\r\n                                current = li;\r\n                            }\r\n                            adjustList(list, list.tagName.toLowerCase(), currentStyle);\r\n                            current = li;\r\n                        }\r\n                    }\r\n                    me.fireEvent('contentchange');\r\n                    range.moveToBookmark(bk).select();\r\n                    return true;\r\n                }\r\n            }\r\n\r\n        });\r\n        function getLi(start) {\r\n            while (start && !domUtils.isBody(start)) {\r\n                if (start.nodeName == 'TABLE') {\r\n                    return null;\r\n                }\r\n                if (start.nodeName == 'LI') {\r\n                    return start\r\n                }\r\n                start = start.parentNode;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * 有序列表，与“insertunorderedlist”命令互斥\r\n         * @command insertorderedlist\r\n         * @method execCommand\r\n         * @param { String } command 命令字符串\r\n         * @param { String } style 插入的有序列表类型，值为：decimal,lower-alpha,lower-roman,upper-alpha,upper-roman,cn,cn1,cn2,num,num1,num2\r\n         * @example\r\n         * ```javascript\r\n         * editor.execCommand( 'insertorderedlist','decimal');\r\n         * ```\r\n         */\r\n        /**\r\n         * 查询当前选区内容是否有序列表\r\n         * @command insertorderedlist\r\n         * @method queryCommandState\r\n         * @param { String } cmd 命令字符串\r\n         * @return { int } 如果当前选区是有序列表返回1，否则返回0\r\n         * @example\r\n         * ```javascript\r\n         * editor.queryCommandState( 'insertorderedlist' );\r\n         * ```\r\n         */\r\n        /**\r\n         * 查询当前选区内容是否有序列表\r\n         * @command insertorderedlist\r\n         * @method queryCommandValue\r\n         * @param { String } cmd 命令字符串\r\n         * @return { String } 返回当前有序列表的类型，值为null或decimal,lower-alpha,lower-roman,upper-alpha,upper-roman,cn,cn1,cn2,num,num1,num2\r\n         * @example\r\n         * ```javascript\r\n         * editor.queryCommandValue( 'insertorderedlist' );\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 无序列表，与“insertorderedlist”命令互斥\r\n         * @command insertunorderedlist\r\n         * @method execCommand\r\n         * @param { String } command 命令字符串\r\n         * @param { String } style 插入的无序列表类型，值为：circle,disc,square,dash,dot\r\n         * @example\r\n         * ```javascript\r\n         * editor.execCommand( 'insertunorderedlist','circle');\r\n         * ```\r\n         */\r\n        /**\r\n         * 查询当前是否有word文档粘贴进来的图片\r\n         * @command insertunorderedlist\r\n         * @method insertunorderedlist\r\n         * @param { String } command 命令字符串\r\n         * @return { int } 如果当前选区是无序列表返回1，否则返回0\r\n         * @example\r\n         * ```javascript\r\n         * editor.queryCommandState( 'insertunorderedlist' );\r\n         * ```\r\n         */\r\n        /**\r\n         * 查询当前选区内容是否有序列表\r\n         * @command insertunorderedlist\r\n         * @method queryCommandValue\r\n         * @param { String } command 命令字符串\r\n         * @return { String } 返回当前无序列表的类型，值为null或circle,disc,square,dash,dot\r\n         * @example\r\n         * ```javascript\r\n         * editor.queryCommandValue( 'insertunorderedlist' );\r\n         * ```\r\n         */\r\n\r\n        me.commands['insertorderedlist'] =\r\n            me.commands['insertunorderedlist'] = {\r\n                execCommand: function (command, style) {\r\n\r\n                    if (!style) {\r\n                        style = command.toLowerCase() == 'insertorderedlist' ? 'decimal' : 'disc';\r\n                    }\r\n                    var me = this,\r\n                        range = this.selection.getRange(),\r\n                        filterFn = function (node) {\r\n                            return node.nodeType == 1 ? node.tagName.toLowerCase() != 'br' : !domUtils.isWhitespace(node);\r\n                        },\r\n                        tag = command.toLowerCase() == 'insertorderedlist' ? 'ol' : 'ul',\r\n                        frag = me.document.createDocumentFragment();\r\n                    //去掉是因为会出现选到末尾，导致adjustmentBoundary缩到ol/ul的位置\r\n                    //range.shrinkBoundary();//.adjustmentBoundary();\r\n                    range.adjustmentBoundary().shrinkBoundary();\r\n                    var bko = range.createBookmark(true),\r\n                        start = getLi(me.document.getElementById(bko.start)),\r\n                        modifyStart = 0,\r\n                        end = getLi(me.document.getElementById(bko.end)),\r\n                        modifyEnd = 0,\r\n                        startParent, endParent,\r\n                        list, tmp;\r\n\r\n                    if (start || end) {\r\n                        start && (startParent = start.parentNode);\r\n                        if (!bko.end) {\r\n                            end = start;\r\n                        }\r\n                        end && (endParent = end.parentNode);\r\n\r\n                        if (startParent === endParent) {\r\n                            while (start !== end) {\r\n                                tmp = start;\r\n                                start = start.nextSibling;\r\n                                if (!domUtils.isBlockElm(tmp.firstChild)) {\r\n                                    var p = me.document.createElement('p');\r\n                                    while (tmp.firstChild) {\r\n                                        p.appendChild(tmp.firstChild);\r\n                                    }\r\n                                    tmp.appendChild(p);\r\n                                }\r\n                                frag.appendChild(tmp);\r\n                            }\r\n                            tmp = me.document.createElement('span');\r\n                            startParent.insertBefore(tmp, end);\r\n                            if (!domUtils.isBlockElm(end.firstChild)) {\r\n                                p = me.document.createElement('p');\r\n                                while (end.firstChild) {\r\n                                    p.appendChild(end.firstChild);\r\n                                }\r\n                                end.appendChild(p);\r\n                            }\r\n                            frag.appendChild(end);\r\n                            domUtils.breakParent(tmp, startParent);\r\n                            if (domUtils.isEmptyNode(tmp.previousSibling)) {\r\n                                domUtils.remove(tmp.previousSibling);\r\n                            }\r\n                            if (domUtils.isEmptyNode(tmp.nextSibling)) {\r\n                                domUtils.remove(tmp.nextSibling)\r\n                            }\r\n                            var nodeStyle = getStyle(startParent) || domUtils.getComputedStyle(startParent, 'list-style-type') || (command.toLowerCase() == 'insertorderedlist' ? 'decimal' : 'disc');\r\n                            if (startParent.tagName.toLowerCase() == tag && nodeStyle == style) {\r\n                                for (var i = 0, ci, tmpFrag = me.document.createDocumentFragment(); ci = frag.firstChild;) {\r\n                                    if (domUtils.isTagNode(ci, 'ol ul')) {\r\n                                        //                                  删除时，子列表不处理\r\n                                        //                                  utils.each(domUtils.getElementsByTagName(ci,'li'),function(li){\r\n                                        //                                        while(li.firstChild){\r\n                                        //                                            tmpFrag.appendChild(li.firstChild);\r\n                                        //                                        }\r\n                                        //\r\n                                        //                                    });\r\n                                        tmpFrag.appendChild(ci);\r\n                                    } else {\r\n                                        while (ci.firstChild) {\r\n\r\n                                            tmpFrag.appendChild(ci.firstChild);\r\n                                            domUtils.remove(ci);\r\n                                        }\r\n                                    }\r\n\r\n                                }\r\n                                tmp.parentNode.insertBefore(tmpFrag, tmp);\r\n                            } else {\r\n                                list = me.document.createElement(tag);\r\n                                setListStyle(list, style);\r\n                                list.appendChild(frag);\r\n                                tmp.parentNode.insertBefore(list, tmp);\r\n                            }\r\n\r\n                            domUtils.remove(tmp);\r\n                            list && adjustList(list, tag, style);\r\n                            range.moveToBookmark(bko).select();\r\n                            return;\r\n                        }\r\n                        //开始\r\n                        if (start) {\r\n                            while (start) {\r\n                                tmp = start.nextSibling;\r\n                                if (domUtils.isTagNode(start, 'ol ul')) {\r\n                                    frag.appendChild(start);\r\n                                } else {\r\n                                    var tmpfrag = me.document.createDocumentFragment(),\r\n                                        hasBlock = 0;\r\n                                    while (start.firstChild) {\r\n                                        if (domUtils.isBlockElm(start.firstChild)) {\r\n                                            hasBlock = 1;\r\n                                        }\r\n                                        tmpfrag.appendChild(start.firstChild);\r\n                                    }\r\n                                    if (!hasBlock) {\r\n                                        var tmpP = me.document.createElement('p');\r\n                                        tmpP.appendChild(tmpfrag);\r\n                                        frag.appendChild(tmpP);\r\n                                    } else {\r\n                                        frag.appendChild(tmpfrag);\r\n                                    }\r\n                                    domUtils.remove(start);\r\n                                }\r\n\r\n                                start = tmp;\r\n                            }\r\n                            startParent.parentNode.insertBefore(frag, startParent.nextSibling);\r\n                            if (domUtils.isEmptyNode(startParent)) {\r\n                                range.setStartBefore(startParent);\r\n                                domUtils.remove(startParent);\r\n                            } else {\r\n                                range.setStartAfter(startParent);\r\n                            }\r\n                            modifyStart = 1;\r\n                        }\r\n\r\n                        if (end && domUtils.inDoc(endParent, me.document)) {\r\n                            //结束\r\n                            start = endParent.firstChild;\r\n                            while (start && start !== end) {\r\n                                tmp = start.nextSibling;\r\n                                if (domUtils.isTagNode(start, 'ol ul')) {\r\n                                    frag.appendChild(start);\r\n                                } else {\r\n                                    tmpfrag = me.document.createDocumentFragment();\r\n                                    hasBlock = 0;\r\n                                    while (start.firstChild) {\r\n                                        if (domUtils.isBlockElm(start.firstChild)) {\r\n                                            hasBlock = 1;\r\n                                        }\r\n                                        tmpfrag.appendChild(start.firstChild);\r\n                                    }\r\n                                    if (!hasBlock) {\r\n                                        tmpP = me.document.createElement('p');\r\n                                        tmpP.appendChild(tmpfrag);\r\n                                        frag.appendChild(tmpP);\r\n                                    } else {\r\n                                        frag.appendChild(tmpfrag);\r\n                                    }\r\n                                    domUtils.remove(start);\r\n                                }\r\n                                start = tmp;\r\n                            }\r\n                            var tmpDiv = domUtils.createElement(me.document, 'div', {\r\n                                'tmpDiv': 1\r\n                            });\r\n                            domUtils.moveChild(end, tmpDiv);\r\n\r\n                            frag.appendChild(tmpDiv);\r\n                            domUtils.remove(end);\r\n                            endParent.parentNode.insertBefore(frag, endParent);\r\n                            range.setEndBefore(endParent);\r\n                            if (domUtils.isEmptyNode(endParent)) {\r\n                                domUtils.remove(endParent);\r\n                            }\r\n\r\n                            modifyEnd = 1;\r\n                        }\r\n\r\n\r\n                    }\r\n\r\n                    if (!modifyStart) {\r\n                        range.setStartBefore(me.document.getElementById(bko.start));\r\n                    }\r\n                    if (bko.end && !modifyEnd) {\r\n                        range.setEndAfter(me.document.getElementById(bko.end));\r\n                    }\r\n                    range.enlarge(true, function (node) {\r\n                        return notExchange[node.tagName];\r\n                    });\r\n\r\n                    frag = me.document.createDocumentFragment();\r\n\r\n                    var bk = range.createBookmark(),\r\n                        current = domUtils.getNextDomNode(bk.start, false, filterFn),\r\n                        tmpRange = range.cloneRange(),\r\n                        tmpNode,\r\n                        block = domUtils.isBlockElm;\r\n\r\n                    while (current && current !== bk.end && (domUtils.getPosition(current, bk.end) & domUtils.POSITION_PRECEDING)) {\r\n\r\n                        if (current.nodeType == 3 || dtd.li[current.tagName]) {\r\n                            if (current.nodeType == 1 && dtd.$list[current.tagName]) {\r\n                                while (current.firstChild) {\r\n                                    frag.appendChild(current.firstChild);\r\n                                }\r\n                                tmpNode = domUtils.getNextDomNode(current, false, filterFn);\r\n                                domUtils.remove(current);\r\n                                current = tmpNode;\r\n                                continue;\r\n\r\n                            }\r\n                            tmpNode = current;\r\n                            tmpRange.setStartBefore(current);\r\n\r\n                            while (current && current !== bk.end && (!block(current) || domUtils.isBookmarkNode(current))) {\r\n                                tmpNode = current;\r\n                                current = domUtils.getNextDomNode(current, false, null, function (node) {\r\n                                    return !notExchange[node.tagName];\r\n                                });\r\n                            }\r\n\r\n                            if (current && block(current)) {\r\n                                tmp = domUtils.getNextDomNode(tmpNode, false, filterFn);\r\n                                if (tmp && domUtils.isBookmarkNode(tmp)) {\r\n                                    current = domUtils.getNextDomNode(tmp, false, filterFn);\r\n                                    tmpNode = tmp;\r\n                                }\r\n                            }\r\n                            tmpRange.setEndAfter(tmpNode);\r\n\r\n                            current = domUtils.getNextDomNode(tmpNode, false, filterFn);\r\n\r\n                            var li = range.document.createElement('li');\r\n\r\n                            li.appendChild(tmpRange.extractContents());\r\n                            if (domUtils.isEmptyNode(li)) {\r\n                                var tmpNode = range.document.createElement('p');\r\n                                while (li.firstChild) {\r\n                                    tmpNode.appendChild(li.firstChild)\r\n                                }\r\n                                li.appendChild(tmpNode);\r\n                            }\r\n                            frag.appendChild(li);\r\n                        } else {\r\n                            current = domUtils.getNextDomNode(current, true, filterFn);\r\n                        }\r\n                    }\r\n                    range.moveToBookmark(bk).collapse(true);\r\n                    list = me.document.createElement(tag);\r\n                    setListStyle(list, style);\r\n                    list.appendChild(frag);\r\n                    range.insertNode(list);\r\n                    //当前list上下看能否合并\r\n                    adjustList(list, tag, style);\r\n                    //去掉冗余的tmpDiv\r\n                    for (var i = 0, ci, tmpDivs = domUtils.getElementsByTagName(list, 'div'); ci = tmpDivs[i++];) {\r\n                        if (ci.getAttribute('tmpDiv')) {\r\n                            domUtils.remove(ci, true)\r\n                        }\r\n                    }\r\n                    range.moveToBookmark(bko).select();\r\n\r\n                },\r\n                queryCommandState: function (command) {\r\n                    var tag = command.toLowerCase() == 'insertorderedlist' ? 'ol' : 'ul';\r\n                    var path = this.selection.getStartElementPath();\r\n                    for (var i = 0, ci; ci = path[i++];) {\r\n                        if (ci.nodeName == 'TABLE') {\r\n                            return 0\r\n                        }\r\n                        if (tag == ci.nodeName.toLowerCase()) {\r\n                            return 1\r\n                        };\r\n                    }\r\n                    return 0;\r\n\r\n                },\r\n                queryCommandValue: function (command) {\r\n                    var tag = command.toLowerCase() == 'insertorderedlist' ? 'ol' : 'ul';\r\n                    var path = this.selection.getStartElementPath(),\r\n                        node;\r\n                    for (var i = 0, ci; ci = path[i++];) {\r\n                        if (ci.nodeName == 'TABLE') {\r\n                            node = null;\r\n                            break;\r\n                        }\r\n                        if (tag == ci.nodeName.toLowerCase()) {\r\n                            node = ci;\r\n                            break;\r\n                        };\r\n                    }\r\n                    return node ? getStyle(node) || domUtils.getComputedStyle(node, 'list-style-type') : null;\r\n                }\r\n            };\r\n    };\r\n\r\n\r\n\r\n    // plugins/source.js\r\n    /**\r\n     * 源码编辑插件\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    (function () {\r\n        var sourceEditors = {\r\n            textarea: function (editor, holder) {\r\n                var textarea = holder.ownerDocument.createElement('textarea');\r\n                textarea.style.cssText = 'position:absolute;resize:none;width:100%;height:100%;border:0;padding:0;margin:0;overflow-y:auto;';\r\n                // todo: IE下只有onresize属性可用... 很纠结\r\n                if (browser.ie && browser.version < 8) {\r\n                    textarea.style.width = holder.offsetWidth + 'px';\r\n                    textarea.style.height = holder.offsetHeight + 'px';\r\n                    holder.onresize = function () {\r\n                        textarea.style.width = holder.offsetWidth + 'px';\r\n                        textarea.style.height = holder.offsetHeight + 'px';\r\n                    };\r\n                }\r\n                holder.appendChild(textarea);\r\n                return {\r\n                    setContent: function (content) {\r\n                        textarea.value = content;\r\n                    },\r\n                    getContent: function () {\r\n                        return textarea.value;\r\n                    },\r\n                    select: function () {\r\n                        var range;\r\n                        if (browser.ie) {\r\n                            range = textarea.createTextRange();\r\n                            range.collapse(true);\r\n                            range.select();\r\n                        } else {\r\n                            //todo: chrome下无法设置焦点\r\n                            textarea.setSelectionRange(0, 0);\r\n                            textarea.focus();\r\n                        }\r\n                    },\r\n                    dispose: function () {\r\n                        holder.removeChild(textarea);\r\n                        // todo\r\n                        holder.onresize = null;\r\n                        textarea = null;\r\n                        holder = null;\r\n                    }\r\n                };\r\n            },\r\n            codemirror: function (editor, holder) {\r\n\r\n                var codeEditor = window.CodeMirror(holder, {\r\n                    mode: \"text/html\",\r\n                    tabMode: \"indent\",\r\n                    lineNumbers: true,\r\n                    lineWrapping: true\r\n                });\r\n                var dom = codeEditor.getWrapperElement();\r\n                dom.style.cssText = 'position:absolute;left:0;top:0;width:100%;height:100%;font-family:consolas,\"Courier new\",monospace;font-size:13px;';\r\n                codeEditor.getScrollerElement().style.cssText = 'position:absolute;left:0;top:0;width:100%;height:100%;';\r\n                codeEditor.refresh();\r\n                return {\r\n                    getCodeMirror: function () {\r\n                        return codeEditor;\r\n                    },\r\n                    setContent: function (content) {\r\n                        codeEditor.setValue(content);\r\n                    },\r\n                    getContent: function () {\r\n                        return codeEditor.getValue();\r\n                    },\r\n                    select: function () {\r\n                        codeEditor.focus();\r\n                    },\r\n                    dispose: function () {\r\n                        holder.removeChild(dom);\r\n                        dom = null;\r\n                        codeEditor = null;\r\n                    }\r\n                };\r\n            }\r\n        };\r\n\r\n        UE.plugins['source'] = function () {\r\n            var me = this;\r\n            var opt = this.options;\r\n            var sourceMode = false;\r\n            var sourceEditor;\r\n            var orgSetContent;\r\n            opt.sourceEditor = browser.ie ? 'textarea' : (opt.sourceEditor || 'codemirror');\r\n\r\n            me.setOpt({\r\n                sourceEditorFirst: false\r\n            });\r\n            function createSourceEditor(holder) {\r\n                return sourceEditors[opt.sourceEditor == 'codemirror' && window.CodeMirror ? 'codemirror' : 'textarea'](me, holder);\r\n            }\r\n\r\n            var bakCssText;\r\n            //解决在源码模式下getContent不能得到最新的内容问题\r\n            var oldGetContent,\r\n                bakAddress;\r\n\r\n            /**\r\n             * 切换源码模式和编辑模式\r\n             * @command source\r\n             * @method execCommand\r\n             * @param { String } cmd 命令字符串\r\n             * @example\r\n             * ```javascript\r\n             * editor.execCommand( 'source');\r\n             * ```\r\n             */\r\n\r\n            /**\r\n             * 查询当前编辑区域的状态是源码模式还是可视化模式\r\n             * @command source\r\n             * @method queryCommandState\r\n             * @param { String } cmd 命令字符串\r\n             * @return { int } 如果当前是源码编辑模式，返回1，否则返回0\r\n             * @example\r\n             * ```javascript\r\n             * editor.queryCommandState( 'source' );\r\n             * ```\r\n             */\r\n\r\n            me.commands['source'] = {\r\n                execCommand: function () {\r\n\r\n                    sourceMode = !sourceMode;\r\n                    if (sourceMode) {\r\n                        bakAddress = me.selection.getRange().createAddress(false, true);\r\n                        me.undoManger && me.undoManger.save(true);\r\n                        if (browser.gecko) {\r\n                            me.body.contentEditable = false;\r\n                        }\r\n\r\n                        bakCssText = me.iframe.style.cssText;\r\n                        me.iframe.style.cssText += 'position:absolute;left:-32768px;top:-32768px;';\r\n\r\n\r\n                        me.fireEvent('beforegetcontent');\r\n                        var root = UE.htmlparser(me.body.innerHTML);\r\n                        me.filterOutputRule(root);\r\n                        root.traversal(function (node) {\r\n                            if (node.type == 'element') {\r\n                                switch (node.tagName) {\r\n                                    case 'td':\r\n                                    case 'th':\r\n                                    case 'caption':\r\n                                        if (node.children && node.children.length == 1) {\r\n                                            if (node.firstChild().tagName == 'br') {\r\n                                                node.removeChild(node.firstChild())\r\n                                            }\r\n                                        };\r\n                                        break;\r\n                                    case 'pre':\r\n                                        node.innerText(node.innerText().replace(/&nbsp;/g, ' '))\r\n\r\n                                }\r\n                            }\r\n                        });\r\n\r\n                        me.fireEvent('aftergetcontent');\r\n\r\n                        var content = root.toHtml(true);\r\n\r\n                        sourceEditor = createSourceEditor(me.iframe.parentNode);\r\n\r\n                        sourceEditor.setContent(content);\r\n\r\n                        orgSetContent = me.setContent;\r\n\r\n                        me.setContent = function (html) {\r\n                            //这里暂时不触发事件，防止报错\r\n                            var root = UE.htmlparser(html);\r\n                            me.filterInputRule(root);\r\n                            html = root.toHtml();\r\n                            sourceEditor.setContent(html);\r\n                        };\r\n\r\n                        setTimeout(function () {\r\n                            sourceEditor.select();\r\n                            me.addListener('fullscreenchanged', function () {\r\n                                try {\r\n                                    sourceEditor.getCodeMirror().refresh()\r\n                                } catch (e) { }\r\n                            });\r\n                        });\r\n\r\n                        //重置getContent，源码模式下取值也能是最新的数据\r\n                        oldGetContent = me.getContent;\r\n                        me.getContent = function () {\r\n                            return sourceEditor.getContent() || '<p>' + (browser.ie ? '' : '<br/>') + '</p>';\r\n                        };\r\n                    } else {\r\n                        me.iframe.style.cssText = bakCssText;\r\n                        var cont = sourceEditor.getContent() || '<p>' + (browser.ie ? '' : '<br/>') + '</p>';\r\n                        //处理掉block节点前后的空格,有可能会误命中，暂时不考虑\r\n                        cont = cont.replace(new RegExp('[\\\\r\\\\t\\\\n ]*<\\/?(\\\\w+)\\\\s*(?:[^>]*)>', 'g'), function (a, b) {\r\n                            if (b && !dtd.$inlineWithA[b.toLowerCase()]) {\r\n                                return a.replace(/(^[\\n\\r\\t ]*)|([\\n\\r\\t ]*$)/g, '');\r\n                            }\r\n                            return a.replace(/(^[\\n\\r\\t]*)|([\\n\\r\\t]*$)/g, '')\r\n                        });\r\n\r\n                        me.setContent = orgSetContent;\r\n\r\n                        me.setContent(cont);\r\n                        sourceEditor.dispose();\r\n                        sourceEditor = null;\r\n                        //还原getContent方法\r\n                        me.getContent = oldGetContent;\r\n                        var first = me.body.firstChild;\r\n                        //trace:1106 都删除空了，下边会报错，所以补充一个p占位\r\n                        if (!first) {\r\n                            me.body.innerHTML = '<p>' + (browser.ie ? '' : '<br/>') + '</p>';\r\n                            first = me.body.firstChild;\r\n                        }\r\n\r\n\r\n                        //要在ifm为显示时ff才能取到selection,否则报错\r\n                        //这里不能比较位置了\r\n                        me.undoManger && me.undoManger.save(true);\r\n\r\n                        if (browser.gecko) {\r\n\r\n                            var input = document.createElement('input');\r\n                            input.style.cssText = 'position:absolute;left:0;top:-32768px';\r\n\r\n                            document.body.appendChild(input);\r\n\r\n                            me.body.contentEditable = false;\r\n                            setTimeout(function () {\r\n                                domUtils.setViewportOffset(input, { left: -32768, top: 0 });\r\n                                input.focus();\r\n                                setTimeout(function () {\r\n                                    me.body.contentEditable = true;\r\n                                    me.selection.getRange().moveToAddress(bakAddress).select(true);\r\n                                    domUtils.remove(input);\r\n                                });\r\n\r\n                            });\r\n                        } else {\r\n                            //ie下有可能报错，比如在代码顶头的情况\r\n                            try {\r\n                                me.selection.getRange().moveToAddress(bakAddress).select(true);\r\n                            } catch (e) { }\r\n\r\n                        }\r\n                    }\r\n                    this.fireEvent('sourcemodechanged', sourceMode);\r\n                },\r\n                queryCommandState: function () {\r\n                    return sourceMode | 0;\r\n                },\r\n                notNeedUndo: 1\r\n            };\r\n            var oldQueryCommandState = me.queryCommandState;\r\n\r\n            me.queryCommandState = function (cmdName) {\r\n                cmdName = cmdName.toLowerCase();\r\n                if (sourceMode) {\r\n                    //源码模式下可以开启的命令\r\n                    return cmdName in {\r\n                        'source': 1,\r\n                        'fullscreen': 1\r\n                    } ? 1 : -1\r\n                }\r\n                return oldQueryCommandState.apply(this, arguments);\r\n            };\r\n\r\n            // if (opt.sourceEditor == \"codemirror\") {\r\n\r\n            //     me.addListener(\"ready\", function () {\r\n            //         utils.loadFile(document, {\r\n            //             src: opt.codeMirrorJsUrl || opt.UEDITOR_HOME_URL + \"third-party/codemirror/codemirror.js\",\r\n            //             tag: \"script\",\r\n            //             type: \"text/javascript\",\r\n            //             defer: \"defer\"\r\n            //         }, function () {\r\n            //             if (opt.sourceEditorFirst) {\r\n            //                 setTimeout(function () {\r\n            //                     me.execCommand(\"source\");\r\n            //                 }, 0);\r\n            //             }\r\n            //         });\r\n            //         utils.loadFile(document, {\r\n            //             tag: \"link\",\r\n            //             rel: \"stylesheet\",\r\n            //             type: \"text/css\",\r\n            //             href: opt.codeMirrorCssUrl || opt.UEDITOR_HOME_URL + \"third-party/codemirror/codemirror.css\"\r\n            //         });\r\n\r\n            //     });\r\n            // }\r\n\r\n        };\r\n\r\n    })();\r\n\r\n    // plugins/enterkey.js\r\n    ///import core\r\n    ///import plugins/undo.js\r\n    ///commands 设置回车标签p或br\r\n    ///commandsName  EnterKey\r\n    ///commandsTitle  设置回车标签p或br\r\n    /**\r\n     * @description 处理回车\r\n     * @author zhanyi\r\n     */\r\n    UE.plugins['enterkey'] = function () {\r\n        var hTag,\r\n            me = this,\r\n            tag = me.options.enterTag;\r\n        me.addListener('keyup', function (type, evt) {\r\n\r\n            var keyCode = evt.keyCode || evt.which;\r\n            if (keyCode == 13) {\r\n                var range = me.selection.getRange(),\r\n                    start = range.startContainer,\r\n                    doSave;\r\n\r\n                //修正在h1-h6里边回车后不能嵌套p的问题\r\n                if (!browser.ie) {\r\n\r\n                    if (/h\\d/i.test(hTag)) {\r\n                        if (browser.gecko) {\r\n                            var h = domUtils.findParentByTagName(start, ['h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'blockquote', 'caption', 'table'], true);\r\n                            if (!h) {\r\n                                me.document.execCommand('formatBlock', false, '<p>');\r\n                                doSave = 1;\r\n                            }\r\n                        } else {\r\n                            //chrome remove div\r\n                            if (start.nodeType == 1) {\r\n                                var tmp = me.document.createTextNode(''), div;\r\n                                range.insertNode(tmp);\r\n                                div = domUtils.findParentByTagName(tmp, 'div', true);\r\n                                if (div) {\r\n                                    var p = me.document.createElement('p');\r\n                                    while (div.firstChild) {\r\n                                        p.appendChild(div.firstChild);\r\n                                    }\r\n                                    div.parentNode.insertBefore(p, div);\r\n                                    domUtils.remove(div);\r\n                                    range.setStartBefore(tmp).setCursor();\r\n                                    doSave = 1;\r\n                                }\r\n                                domUtils.remove(tmp);\r\n\r\n                            }\r\n                        }\r\n\r\n                        if (me.undoManger && doSave) {\r\n                            me.undoManger.save();\r\n                        }\r\n                    }\r\n                    //没有站位符，会出现多行的问题\r\n                    browser.opera && range.select();\r\n                } else {\r\n                    me.fireEvent('saveScene', true, true)\r\n                }\r\n            }\r\n        });\r\n\r\n        me.addListener('keydown', function (type, evt) {\r\n            var keyCode = evt.keyCode || evt.which;\r\n            if (keyCode == 13) {//回车\r\n                if (me.fireEvent('beforeenterkeydown')) {\r\n                    domUtils.preventDefault(evt);\r\n                    return;\r\n                }\r\n                me.fireEvent('saveScene', true, true);\r\n                hTag = '';\r\n\r\n\r\n                var range = me.selection.getRange();\r\n\r\n                if (!range.collapsed) {\r\n                    //跨td不能删\r\n                    var start = range.startContainer,\r\n                        end = range.endContainer,\r\n                        startTd = domUtils.findParentByTagName(start, 'td', true),\r\n                        endTd = domUtils.findParentByTagName(end, 'td', true);\r\n                    if (startTd && endTd && startTd !== endTd || !startTd && endTd || startTd && !endTd) {\r\n                        evt.preventDefault ? evt.preventDefault() : (evt.returnValue = false);\r\n                        return;\r\n                    }\r\n                }\r\n                if (tag == 'p') {\r\n\r\n\r\n                    if (!browser.ie) {\r\n\r\n                        start = domUtils.findParentByTagName(range.startContainer, ['ol', 'ul', 'p', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'blockquote', 'caption'], true);\r\n\r\n                        //opera下执行formatblock会在table的场景下有问题，回车在opera原生支持很好，所以暂时在opera去掉调用这个原生的command\r\n                        //trace:2431\r\n                        if (!start && !browser.opera) {\r\n\r\n                            me.document.execCommand('formatBlock', false, '<p>');\r\n\r\n                            if (browser.gecko) {\r\n                                range = me.selection.getRange();\r\n                                start = domUtils.findParentByTagName(range.startContainer, 'p', true);\r\n                                start && domUtils.removeDirtyAttr(start);\r\n                            }\r\n\r\n\r\n                        } else {\r\n                            hTag = start.tagName;\r\n                            start.tagName.toLowerCase() == 'p' && browser.gecko && domUtils.removeDirtyAttr(start);\r\n                        }\r\n\r\n                    }\r\n\r\n                } else {\r\n                    evt.preventDefault ? evt.preventDefault() : (evt.returnValue = false);\r\n\r\n                    if (!range.collapsed) {\r\n                        range.deleteContents();\r\n                        start = range.startContainer;\r\n                        if (start.nodeType == 1 && (start = start.childNodes[range.startOffset])) {\r\n                            while (start.nodeType == 1) {\r\n                                if (dtd.$empty[start.tagName]) {\r\n                                    range.setStartBefore(start).setCursor();\r\n                                    if (me.undoManger) {\r\n                                        me.undoManger.save();\r\n                                    }\r\n                                    return false;\r\n                                }\r\n                                if (!start.firstChild) {\r\n                                    var br = range.document.createElement('br');\r\n                                    start.appendChild(br);\r\n                                    range.setStart(start, 0).setCursor();\r\n                                    if (me.undoManger) {\r\n                                        me.undoManger.save();\r\n                                    }\r\n                                    return false;\r\n                                }\r\n                                start = start.firstChild;\r\n                            }\r\n                            if (start === range.startContainer.childNodes[range.startOffset]) {\r\n                                br = range.document.createElement('br');\r\n                                range.insertNode(br).setCursor();\r\n\r\n                            } else {\r\n                                range.setStart(start, 0).setCursor();\r\n                            }\r\n\r\n\r\n                        } else {\r\n                            br = range.document.createElement('br');\r\n                            range.insertNode(br).setStartAfter(br).setCursor();\r\n                        }\r\n\r\n\r\n                    } else {\r\n                        br = range.document.createElement('br');\r\n                        range.insertNode(br);\r\n                        var parent = br.parentNode;\r\n                        if (parent.lastChild === br) {\r\n                            br.parentNode.insertBefore(br.cloneNode(true), br);\r\n                            range.setStartBefore(br);\r\n                        } else {\r\n                            range.setStartAfter(br);\r\n                        }\r\n                        range.setCursor();\r\n\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n        });\r\n    };\r\n\r\n\r\n    // plugins/keystrokes.js\r\n    /* 处理特殊键的兼容性问题 */\r\n    UE.plugins['keystrokes'] = function () {\r\n        var me = this;\r\n        var collapsed = true;\r\n        me.addListener('keydown', function (type, evt) {\r\n            var keyCode = evt.keyCode || evt.which,\r\n                rng = me.selection.getRange();\r\n\r\n            //处理全选的情况\r\n            if (!rng.collapsed && !(evt.ctrlKey || evt.shiftKey || evt.altKey || evt.metaKey) && (keyCode >= 65 && keyCode <= 90\r\n                || keyCode >= 48 && keyCode <= 57 ||\r\n                keyCode >= 96 && keyCode <= 111 || {\r\n                    13: 1,\r\n                    8: 1,\r\n                    46: 1\r\n                }[keyCode])\r\n            ) {\r\n\r\n                var tmpNode = rng.startContainer;\r\n                if (domUtils.isFillChar(tmpNode)) {\r\n                    rng.setStartBefore(tmpNode)\r\n                }\r\n                tmpNode = rng.endContainer;\r\n                if (domUtils.isFillChar(tmpNode)) {\r\n                    rng.setEndAfter(tmpNode)\r\n                }\r\n                rng.txtToElmBoundary();\r\n                //结束边界可能放到了br的前边，要把br包含进来\r\n                // x[xxx]<br/>\r\n                if (rng.endContainer && rng.endContainer.nodeType == 1) {\r\n                    tmpNode = rng.endContainer.childNodes[rng.endOffset];\r\n                    if (tmpNode && domUtils.isBr(tmpNode)) {\r\n                        rng.setEndAfter(tmpNode);\r\n                    }\r\n                }\r\n                if (rng.startOffset == 0) {\r\n                    tmpNode = rng.startContainer;\r\n                    if (domUtils.isBoundaryNode(tmpNode, 'firstChild')) {\r\n                        tmpNode = rng.endContainer;\r\n                        if (rng.endOffset == (tmpNode.nodeType == 3 ? tmpNode.nodeValue.length : tmpNode.childNodes.length) && domUtils.isBoundaryNode(tmpNode, 'lastChild')) {\r\n                            me.fireEvent('saveScene');\r\n                            me.body.innerHTML = '<p>' + (browser.ie ? '' : '<br/>') + '</p>';\r\n                            rng.setStart(me.body.firstChild, 0).setCursor(false, true);\r\n                            me._selectionChange();\r\n                            return;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            //处理backspace\r\n            if (keyCode == keymap.Backspace) {\r\n                rng = me.selection.getRange();\r\n                collapsed = rng.collapsed;\r\n                if (me.fireEvent('delkeydown', evt)) {\r\n                    return;\r\n                }\r\n                var start, end;\r\n                //避免按两次删除才能生效的问题\r\n                if (rng.collapsed && rng.inFillChar()) {\r\n                    start = rng.startContainer;\r\n\r\n                    if (domUtils.isFillChar(start)) {\r\n                        rng.setStartBefore(start).shrinkBoundary(true).collapse(true);\r\n                        domUtils.remove(start)\r\n                    } else {\r\n                        start.nodeValue = start.nodeValue.replace(new RegExp('^' + domUtils.fillChar), '');\r\n                        rng.startOffset--;\r\n                        rng.collapse(true).select(true)\r\n                    }\r\n                }\r\n\r\n                //解决选中control元素不能删除的问题\r\n                if (start = rng.getClosedNode()) {\r\n                    me.fireEvent('saveScene');\r\n                    rng.setStartBefore(start);\r\n                    domUtils.remove(start);\r\n                    rng.setCursor();\r\n                    me.fireEvent('saveScene');\r\n                    domUtils.preventDefault(evt);\r\n                    return;\r\n                }\r\n                //阻止在table上的删除\r\n                if (!browser.ie) {\r\n                    start = domUtils.findParentByTagName(rng.startContainer, 'table', true);\r\n                    end = domUtils.findParentByTagName(rng.endContainer, 'table', true);\r\n                    if (start && !end || !start && end || start !== end) {\r\n                        evt.preventDefault();\r\n                        return;\r\n                    }\r\n                }\r\n\r\n            }\r\n            //处理tab键的逻辑\r\n            if (keyCode == keymap.Tab) {\r\n                //不处理以下标签\r\n                var excludeTagNameForTabKey = {\r\n                    'ol': 1,\r\n                    'ul': 1,\r\n                    'table': 1\r\n                };\r\n                //处理组件里的tab按下事件\r\n                if (me.fireEvent('tabkeydown', evt)) {\r\n                    domUtils.preventDefault(evt);\r\n                    return;\r\n                }\r\n                var range = me.selection.getRange();\r\n                me.fireEvent('saveScene');\r\n                for (var i = 0, txt = '', tabSize = me.options.tabSize || 4, tabNode = me.options.tabNode || '&nbsp;'; i < tabSize; i++) {\r\n                    txt += tabNode;\r\n                }\r\n                var span = me.document.createElement('span');\r\n                span.innerHTML = txt + domUtils.fillChar;\r\n                if (range.collapsed) {\r\n                    range.insertNode(span.cloneNode(true).firstChild).setCursor(true);\r\n                } else {\r\n                    var filterFn = function (node) {\r\n                        return domUtils.isBlockElm(node) && !excludeTagNameForTabKey[node.tagName.toLowerCase()]\r\n\r\n                    };\r\n                    //普通的情况\r\n                    start = domUtils.findParent(range.startContainer, filterFn, true);\r\n                    end = domUtils.findParent(range.endContainer, filterFn, true);\r\n                    if (start && end && start === end) {\r\n                        range.deleteContents();\r\n                        range.insertNode(span.cloneNode(true).firstChild).setCursor(true);\r\n                    } else {\r\n                        var bookmark = range.createBookmark();\r\n                        range.enlarge(true);\r\n                        var bookmark2 = range.createBookmark(),\r\n                            current = domUtils.getNextDomNode(bookmark2.start, false, filterFn);\r\n                        while (current && !(domUtils.getPosition(current, bookmark2.end) & domUtils.POSITION_FOLLOWING)) {\r\n                            current.insertBefore(span.cloneNode(true).firstChild, current.firstChild);\r\n                            current = domUtils.getNextDomNode(current, false, filterFn);\r\n                        }\r\n                        range.moveToBookmark(bookmark2).moveToBookmark(bookmark).select();\r\n                    }\r\n                }\r\n                domUtils.preventDefault(evt)\r\n            }\r\n            //trace:1634\r\n            //ff的del键在容器空的时候，也会删除\r\n            if (browser.gecko && keyCode == 46) {\r\n                range = me.selection.getRange();\r\n                if (range.collapsed) {\r\n                    start = range.startContainer;\r\n                    if (domUtils.isEmptyBlock(start)) {\r\n                        var parent = start.parentNode;\r\n                        while (domUtils.getChildCount(parent) == 1 && !domUtils.isBody(parent)) {\r\n                            start = parent;\r\n                            parent = parent.parentNode;\r\n                        }\r\n                        if (start === parent.lastChild)\r\n                            evt.preventDefault();\r\n                        return;\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        me.addListener('keyup', function (type, evt) {\r\n            var keyCode = evt.keyCode || evt.which,\r\n                rng, me = this;\r\n            if (keyCode == keymap.Backspace) {\r\n                if (me.fireEvent('delkeyup')) {\r\n                    return;\r\n                }\r\n                rng = me.selection.getRange();\r\n                if (rng.collapsed) {\r\n                    var tmpNode,\r\n                        autoClearTagName = ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'];\r\n                    if (tmpNode = domUtils.findParentByTagName(rng.startContainer, autoClearTagName, true)) {\r\n                        if (domUtils.isEmptyBlock(tmpNode)) {\r\n                            var pre = tmpNode.previousSibling;\r\n                            if (pre && pre.nodeName != 'TABLE') {\r\n                                domUtils.remove(tmpNode);\r\n                                rng.setStartAtLast(pre).setCursor(false, true);\r\n                                return;\r\n                            } else {\r\n                                var next = tmpNode.nextSibling;\r\n                                if (next && next.nodeName != 'TABLE') {\r\n                                    domUtils.remove(tmpNode);\r\n                                    rng.setStartAtFirst(next).setCursor(false, true);\r\n                                    return;\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                    //处理当删除到body时，要重新给p标签展位\r\n                    if (domUtils.isBody(rng.startContainer)) {\r\n                        var tmpNode = domUtils.createElement(me.document, 'p', {\r\n                            'innerHTML': browser.ie ? domUtils.fillChar : '<br/>'\r\n                        });\r\n                        rng.insertNode(tmpNode).setStart(tmpNode, 0).setCursor(false, true);\r\n                    }\r\n                }\r\n\r\n\r\n                //chrome下如果删除了inline标签，浏览器会有记忆，在输入文字还是会套上刚才删除的标签，所以这里再选一次就不会了\r\n                if (!collapsed && (rng.startContainer.nodeType == 3 || rng.startContainer.nodeType == 1 && domUtils.isEmptyBlock(rng.startContainer))) {\r\n                    if (browser.ie) {\r\n                        var span = rng.document.createElement('span');\r\n                        rng.insertNode(span).setStartBefore(span).collapse(true);\r\n                        rng.select();\r\n                        domUtils.remove(span)\r\n                    } else {\r\n                        rng.select()\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n\r\n        })\r\n    };\r\n\r\n    // plugins/fiximgclick.js\r\n    ///import core\r\n    ///commands 修复chrome下图片不能点击的问题，出现八个角可改变大小\r\n    ///commandsName  FixImgClick\r\n    ///commandsTitle  修复chrome下图片不能点击的问题，出现八个角可改变大小\r\n    //修复chrome下图片不能点击的问题，出现八个角可改变大小\r\n\r\n    UE.plugins['fiximgclick'] = (function () {\r\n\r\n        var elementUpdated = false;\r\n        function Scale() {\r\n            this.editor = null;\r\n            this.resizer = null;\r\n            this.cover = null;\r\n            this.doc = document;\r\n            this.prePos = { x: 0, y: 0 };\r\n            this.startPos = { x: 0, y: 0 };\r\n        }\r\n\r\n        (function () {\r\n            var rect = [\r\n                //[left, top, width, height]\r\n                [0, 0, -1, -1],\r\n                [0, 0, 0, -1],\r\n                [0, 0, 1, -1],\r\n                [0, 0, -1, 0],\r\n                [0, 0, 1, 0],\r\n                [0, 0, -1, 1],\r\n                [0, 0, 0, 1],\r\n                [0, 0, 1, 1]\r\n            ];\r\n\r\n            Scale.prototype = {\r\n                init: function (editor) {\r\n                    var me = this;\r\n                    me.editor = editor;\r\n                    me.startPos = this.prePos = { x: 0, y: 0 };\r\n                    me.dragId = -1;\r\n\r\n                    var hands = [],\r\n                        cover = me.cover = document.createElement('div'),\r\n                        resizer = me.resizer = document.createElement('div');\r\n\r\n                    cover.id = me.editor.ui.id + '_imagescale_cover';\r\n                    cover.style.cssText = 'position:absolute;display:none;z-index:' + (me.editor.options.zIndex) + ';filter:alpha(opacity=0); opacity:0;background:#CCC;';\r\n                    domUtils.on(cover, 'mousedown click', function () {\r\n                        me.hide();\r\n                    });\r\n\r\n                    for (i = 0; i < 8; i++) {\r\n                        hands.push('<span class=\"edui-editor-imagescale-hand' + i + '\"></span>');\r\n                    }\r\n                    resizer.id = me.editor.ui.id + '_imagescale';\r\n                    resizer.className = 'edui-editor-imagescale';\r\n                    resizer.innerHTML = hands.join('');\r\n                    resizer.style.cssText += ';display:none;border:1px solid #3b77ff;z-index:' + (me.editor.options.zIndex) + ';';\r\n\r\n                    me.editor.ui.getDom().appendChild(cover);\r\n                    me.editor.ui.getDom().appendChild(resizer);\r\n\r\n                    me.initStyle();\r\n                    me.initEvents();\r\n                },\r\n                initStyle: function () {\r\n                    utils.cssRule('imagescale', '.edui-editor-imagescale{display:none;position:absolute;border:1px solid #38B2CE;cursor:hand;-webkit-box-sizing: content-box;-moz-box-sizing: content-box;box-sizing: content-box;}' +\r\n                        '.edui-editor-imagescale span{position:absolute;width:6px;height:6px;overflow:hidden;font-size:0px;display:block;background-color:#3C9DD0;}'\r\n                        + '.edui-editor-imagescale .edui-editor-imagescale-hand0{cursor:nw-resize;top:0;margin-top:-4px;left:0;margin-left:-4px;}'\r\n                        + '.edui-editor-imagescale .edui-editor-imagescale-hand1{cursor:n-resize;top:0;margin-top:-4px;left:50%;margin-left:-4px;}'\r\n                        + '.edui-editor-imagescale .edui-editor-imagescale-hand2{cursor:ne-resize;top:0;margin-top:-4px;left:100%;margin-left:-3px;}'\r\n                        + '.edui-editor-imagescale .edui-editor-imagescale-hand3{cursor:w-resize;top:50%;margin-top:-4px;left:0;margin-left:-4px;}'\r\n                        + '.edui-editor-imagescale .edui-editor-imagescale-hand4{cursor:e-resize;top:50%;margin-top:-4px;left:100%;margin-left:-3px;}'\r\n                        + '.edui-editor-imagescale .edui-editor-imagescale-hand5{cursor:sw-resize;top:100%;margin-top:-3px;left:0;margin-left:-4px;}'\r\n                        + '.edui-editor-imagescale .edui-editor-imagescale-hand6{cursor:s-resize;top:100%;margin-top:-3px;left:50%;margin-left:-4px;}'\r\n                        + '.edui-editor-imagescale .edui-editor-imagescale-hand7{cursor:se-resize;top:100%;margin-top:-3px;left:100%;margin-left:-3px;}');\r\n                },\r\n                initEvents: function () {\r\n                    var me = this;\r\n\r\n                    me.startPos.x = me.startPos.y = 0;\r\n                    me.isDraging = false;\r\n                },\r\n                _eventHandler: function (e) {\r\n                    var me = this;\r\n                    switch (e.type) {\r\n                        case 'mousedown':\r\n                            var hand = e.target || e.srcElement, hand;\r\n                            if (hand.className.indexOf('edui-editor-imagescale-hand') != -1 && me.dragId == -1) {\r\n                                me.dragId = hand.className.slice(-1);\r\n                                me.startPos.x = me.prePos.x = e.clientX;\r\n                                me.startPos.y = me.prePos.y = e.clientY;\r\n                                domUtils.on(me.doc, 'mousemove', me.proxy(me._eventHandler, me));\r\n                            }\r\n                            break;\r\n                        case 'mousemove':\r\n                            if (me.dragId != -1) {\r\n                                me.updateContainerStyle(me.dragId, { x: e.clientX - me.prePos.x, y: e.clientY - me.prePos.y });\r\n                                me.prePos.x = e.clientX;\r\n                                me.prePos.y = e.clientY;\r\n                                elementUpdated = true;\r\n                                me.updateTargetElement();\r\n\r\n                            }\r\n                            break;\r\n                        case 'mouseup':\r\n                            if (me.dragId != -1) {\r\n                                me.updateContainerStyle(me.dragId, { x: e.clientX - me.prePos.x, y: e.clientY - me.prePos.y });\r\n                                me.updateTargetElement();\r\n                                if (me.target.parentNode) me.attachTo(me.target);\r\n                                me.dragId = -1;\r\n                            }\r\n                            domUtils.un(me.doc, 'mousemove', me.proxy(me._eventHandler, me));\r\n                            //修复只是点击挪动点，但没有改变大小，不应该触发contentchange\r\n                            if (elementUpdated) {\r\n                                elementUpdated = false;\r\n                                me.editor.fireEvent('contentchange');\r\n                            }\r\n\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                },\r\n                updateTargetElement: function () {\r\n                    var me = this;\r\n                    domUtils.setStyles(me.target, {\r\n                        'width': me.resizer.style.width,\r\n                        'height': me.resizer.style.height\r\n                    });\r\n                    me.target.width = parseInt(me.resizer.style.width);\r\n                    me.target.height = parseInt(me.resizer.style.height);\r\n                    me.attachTo(me.target);\r\n                },\r\n                updateContainerStyle: function (dir, offset) {\r\n                    var me = this,\r\n                        dom = me.resizer, tmp;\r\n\r\n                    if (rect[dir][0] != 0) {\r\n                        tmp = parseInt(dom.style.left) + offset.x;\r\n                        dom.style.left = me._validScaledProp('left', tmp) + 'px';\r\n                    }\r\n                    if (rect[dir][1] != 0) {\r\n                        tmp = parseInt(dom.style.top) + offset.y;\r\n                        dom.style.top = me._validScaledProp('top', tmp) + 'px';\r\n                    }\r\n                    if (rect[dir][2] != 0) {\r\n                        tmp = dom.clientWidth + rect[dir][2] * offset.x;\r\n                        dom.style.width = me._validScaledProp('width', tmp) + 'px';\r\n                    }\r\n                    if (rect[dir][3] != 0) {\r\n                        tmp = dom.clientHeight + rect[dir][3] * offset.y;\r\n                        dom.style.height = me._validScaledProp('height', tmp) + 'px';\r\n                    }\r\n                },\r\n                _validScaledProp: function (prop, value) {\r\n                    var ele = this.resizer,\r\n                        wrap = document;\r\n\r\n                    value = isNaN(value) ? 0 : value;\r\n                    switch (prop) {\r\n                        case 'left':\r\n                            return value < 0 ? 0 : (value + ele.clientWidth) > wrap.clientWidth ? wrap.clientWidth - ele.clientWidth : value;\r\n                        case 'top':\r\n                            return value < 0 ? 0 : (value + ele.clientHeight) > wrap.clientHeight ? wrap.clientHeight - ele.clientHeight : value;\r\n                        case 'width':\r\n                            return value <= 0 ? 1 : (value + ele.offsetLeft) > wrap.clientWidth ? wrap.clientWidth - ele.offsetLeft : value;\r\n                        case 'height':\r\n                            return value <= 0 ? 1 : (value + ele.offsetTop) > wrap.clientHeight ? wrap.clientHeight - ele.offsetTop : value;\r\n                    }\r\n                },\r\n                hideCover: function () {\r\n                    this.cover.style.display = 'none';\r\n                },\r\n                showCover: function () {\r\n                    var me = this,\r\n                        editorPos = domUtils.getXY(me.editor.ui.getDom()),\r\n                        iframePos = domUtils.getXY(me.editor.iframe);\r\n\r\n                    domUtils.setStyles(me.cover, {\r\n                        'width': me.editor.iframe.offsetWidth + 'px',\r\n                        'height': me.editor.iframe.offsetHeight + 'px',\r\n                        'top': iframePos.y - editorPos.y + 'px',\r\n                        'left': iframePos.x - editorPos.x + 'px',\r\n                        'position': 'absolute',\r\n                        'display': ''\r\n                    })\r\n                },\r\n                show: function (targetObj) {\r\n                    var me = this;\r\n                    me.resizer.style.display = 'block';\r\n                    if (targetObj) me.attachTo(targetObj);\r\n\r\n                    domUtils.on(this.resizer, 'mousedown', me.proxy(me._eventHandler, me));\r\n                    domUtils.on(me.doc, 'mouseup', me.proxy(me._eventHandler, me));\r\n\r\n                    me.showCover();\r\n                    me.editor.fireEvent('afterscaleshow', me);\r\n                    me.editor.fireEvent('saveScene');\r\n                },\r\n                hide: function () {\r\n                    var me = this;\r\n                    me.hideCover();\r\n                    me.resizer.style.display = 'none';\r\n\r\n                    domUtils.un(me.resizer, 'mousedown', me.proxy(me._eventHandler, me));\r\n                    domUtils.un(me.doc, 'mouseup', me.proxy(me._eventHandler, me));\r\n                    me.editor.fireEvent('afterscalehide', me);\r\n                },\r\n                proxy: function (fn, context) {\r\n                    return function (e) {\r\n                        return fn.apply(context || this, arguments);\r\n                    };\r\n                },\r\n                attachTo: function (targetObj) {\r\n                    var me = this,\r\n                        target = me.target = targetObj,\r\n                        resizer = this.resizer,\r\n                        imgPos = domUtils.getXY(target),\r\n                        iframePos = domUtils.getXY(me.editor.iframe),\r\n                        editorPos = domUtils.getXY(resizer.parentNode);\r\n\r\n                    domUtils.setStyles(resizer, {\r\n                        'width': target.width + 'px',\r\n                        'height': target.height + 'px',\r\n                        'left': iframePos.x + imgPos.x - me.editor.document.body.scrollLeft - editorPos.x - parseInt(resizer.style.borderLeftWidth) + 'px',\r\n                        'top': iframePos.y + imgPos.y - me.editor.document.body.scrollTop - editorPos.y - parseInt(resizer.style.borderTopWidth) + 'px'\r\n                    });\r\n                }\r\n            }\r\n        })();\r\n\r\n        return function () {\r\n            var me = this,\r\n                imageScale;\r\n\r\n            me.setOpt('imageScaleEnabled', true);\r\n\r\n            if (!browser.ie && me.options.imageScaleEnabled) {\r\n                me.addListener('click', function (type, e) {\r\n\r\n                    var range = me.selection.getRange(),\r\n                        img = range.getClosedNode();\r\n\r\n                    if (img && img.tagName == 'IMG' && me.body.contentEditable != \"false\") {\r\n\r\n                        if (img.className.indexOf(\"edui-faked-music\") != -1 ||\r\n                            img.getAttribute(\"anchorname\") ||\r\n                            domUtils.hasClass(img, 'loadingclass') ||\r\n                            domUtils.hasClass(img, 'loaderrorclass')) { return }\r\n\r\n                        if (!imageScale) {\r\n                            imageScale = new Scale();\r\n                            imageScale.init(me);\r\n                            me.ui.getDom().appendChild(imageScale.resizer);\r\n\r\n                            var _keyDownHandler = function (e) {\r\n                                imageScale.hide();\r\n                                if (imageScale.target) me.selection.getRange().selectNode(imageScale.target).select();\r\n                            }, _mouseDownHandler = function (e) {\r\n                                var ele = e.target || e.srcElement;\r\n                                if (ele && (ele.className === undefined || ele.className.indexOf('edui-editor-imagescale') == -1)) {\r\n                                    _keyDownHandler(e);\r\n                                }\r\n                            }, timer;\r\n\r\n                            me.addListener('afterscaleshow', function (e) {\r\n                                me.addListener('beforekeydown', _keyDownHandler);\r\n                                me.addListener('beforemousedown', _mouseDownHandler);\r\n                                domUtils.on(document, 'keydown', _keyDownHandler);\r\n                                domUtils.on(document, 'mousedown', _mouseDownHandler);\r\n                                me.selection.getNative().removeAllRanges();\r\n                            });\r\n                            me.addListener('afterscalehide', function (e) {\r\n                                me.removeListener('beforekeydown', _keyDownHandler);\r\n                                me.removeListener('beforemousedown', _mouseDownHandler);\r\n                                domUtils.un(document, 'keydown', _keyDownHandler);\r\n                                domUtils.un(document, 'mousedown', _mouseDownHandler);\r\n                                var target = imageScale.target;\r\n                                if (target.parentNode) {\r\n                                    me.selection.getRange().selectNode(target).select();\r\n                                }\r\n                            });\r\n                            //TODO 有iframe的情况，mousedown不能往下传。。\r\n                            domUtils.on(imageScale.resizer, 'mousedown', function (e) {\r\n                                me.selection.getNative().removeAllRanges();\r\n                                var ele = e.target || e.srcElement;\r\n                                if (ele && ele.className.indexOf('edui-editor-imagescale-hand') == -1) {\r\n                                    timer = setTimeout(function () {\r\n                                        imageScale.hide();\r\n                                        if (imageScale.target) me.selection.getRange().selectNode(ele).select();\r\n                                    }, 200);\r\n                                }\r\n                            });\r\n                            domUtils.on(imageScale.resizer, 'mouseup', function (e) {\r\n                                var ele = e.target || e.srcElement;\r\n                                if (ele && ele.className.indexOf('edui-editor-imagescale-hand') == -1) {\r\n                                    clearTimeout(timer);\r\n                                }\r\n                            });\r\n                        }\r\n                        imageScale.show(img);\r\n                    } else {\r\n                        if (imageScale && imageScale.resizer.style.display != 'none') imageScale.hide();\r\n                    }\r\n                });\r\n            }\r\n\r\n            if (browser.webkit) {\r\n                me.addListener('click', function (type, e) {\r\n                    if (e.target.tagName == 'IMG' && me.body.contentEditable != \"false\") {\r\n                        var range = new dom.Range(me.document);\r\n                        range.selectNode(e.target).select();\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    })();\r\n\r\n    // plugins/autolink.js\r\n    ///import core\r\n    ///commands 为非ie浏览器自动添加a标签\r\n    ///commandsName  AutoLink\r\n    ///commandsTitle  自动增加链接\r\n    /**\r\n     * @description 为非ie浏览器自动添加a标签\r\n     * @author zhanyi\r\n     */\r\n\r\n    UE.plugin.register('autolink', function () {\r\n        var cont = 0;\r\n\r\n        return !browser.ie ? {\r\n\r\n            bindEvents: {\r\n                'reset': function () {\r\n                    cont = 0;\r\n                },\r\n                'keydown': function (type, evt) {\r\n                    var me = this;\r\n                    var keyCode = evt.keyCode || evt.which;\r\n\r\n                    if (keyCode == 32 || keyCode == 13) {\r\n\r\n                        var sel = me.selection.getNative(),\r\n                            range = sel.getRangeAt(0).cloneRange(),\r\n                            offset,\r\n                            charCode;\r\n\r\n                        var start = range.startContainer;\r\n                        while (start.nodeType == 1 && range.startOffset > 0) {\r\n                            start = range.startContainer.childNodes[range.startOffset - 1];\r\n                            if (!start) {\r\n                                break;\r\n                            }\r\n                            range.setStart(start, start.nodeType == 1 ? start.childNodes.length : start.nodeValue.length);\r\n                            range.collapse(true);\r\n                            start = range.startContainer;\r\n                        }\r\n\r\n                        do {\r\n                            if (range.startOffset == 0) {\r\n                                start = range.startContainer.previousSibling;\r\n\r\n                                while (start && start.nodeType == 1) {\r\n                                    start = start.lastChild;\r\n                                }\r\n                                if (!start || domUtils.isFillChar(start)) {\r\n                                    break;\r\n                                }\r\n                                offset = start.nodeValue.length;\r\n                            } else {\r\n                                start = range.startContainer;\r\n                                offset = range.startOffset;\r\n                            }\r\n                            range.setStart(start, offset - 1);\r\n                            charCode = range.toString().charCodeAt(0);\r\n                        } while (charCode != 160 && charCode != 32);\r\n\r\n                        if (range.toString().replace(new RegExp(domUtils.fillChar, 'g'), '').match(/(?:https?:\\/\\/|ssh:\\/\\/|ftp:\\/\\/|file:\\/|www\\.)/i)) {\r\n                            while (range.toString().length) {\r\n                                if (/^(?:https?:\\/\\/|ssh:\\/\\/|ftp:\\/\\/|file:\\/|www\\.)/i.test(range.toString())) {\r\n                                    break;\r\n                                }\r\n                                try {\r\n                                    range.setStart(range.startContainer, range.startOffset + 1);\r\n                                } catch (e) {\r\n                                    //trace:2121\r\n                                    var start = range.startContainer;\r\n                                    while (!(next = start.nextSibling)) {\r\n                                        if (domUtils.isBody(start)) {\r\n                                            return;\r\n                                        }\r\n                                        start = start.parentNode;\r\n\r\n                                    }\r\n                                    range.setStart(next, 0);\r\n\r\n                                }\r\n\r\n                            }\r\n                            //range的开始边界已经在a标签里的不再处理\r\n                            if (domUtils.findParentByTagName(range.startContainer, 'a', true)) {\r\n                                return;\r\n                            }\r\n                            var a = me.document.createElement('a'), text = me.document.createTextNode(' '), href;\r\n\r\n                            me.undoManger && me.undoManger.save();\r\n                            a.appendChild(range.extractContents());\r\n                            a.href = a.innerHTML = a.innerHTML.replace(/<[^>]+>/g, '');\r\n                            href = a.getAttribute(\"href\").replace(new RegExp(domUtils.fillChar, 'g'), '');\r\n                            href = /^(?:https?:\\/\\/)/ig.test(href) ? href : \"http://\" + href;\r\n                            a.setAttribute('_src', utils.html(href));\r\n                            a.href = utils.html(href);\r\n\r\n                            range.insertNode(a);\r\n                            a.parentNode.insertBefore(text, a.nextSibling);\r\n                            range.setStart(text, 0);\r\n                            range.collapse(true);\r\n                            sel.removeAllRanges();\r\n                            sel.addRange(range);\r\n                            me.undoManger && me.undoManger.save();\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        } : {}\r\n    }, function () {\r\n        var keyCodes = {\r\n            37: 1, 38: 1, 39: 1, 40: 1,\r\n            13: 1, 32: 1\r\n        };\r\n        function checkIsCludeLink(node) {\r\n            if (node.nodeType == 3) {\r\n                return null\r\n            }\r\n            if (node.nodeName == 'A') {\r\n                return node;\r\n            }\r\n            var lastChild = node.lastChild;\r\n\r\n            while (lastChild) {\r\n                if (lastChild.nodeName == 'A') {\r\n                    return lastChild;\r\n                }\r\n                if (lastChild.nodeType == 3) {\r\n                    if (domUtils.isWhitespace(lastChild)) {\r\n                        lastChild = lastChild.previousSibling;\r\n                        continue;\r\n                    }\r\n                    return null\r\n                }\r\n                lastChild = lastChild.lastChild;\r\n            }\r\n        }\r\n        browser.ie && this.addListener('keyup', function (cmd, evt) {\r\n            var me = this, keyCode = evt.keyCode;\r\n            if (keyCodes[keyCode]) {\r\n                var rng = me.selection.getRange();\r\n                var start = rng.startContainer;\r\n\r\n                if (keyCode == 13) {\r\n                    while (start && !domUtils.isBody(start) && !domUtils.isBlockElm(start)) {\r\n                        start = start.parentNode;\r\n                    }\r\n                    if (start && !domUtils.isBody(start) && start.nodeName == 'P') {\r\n                        var pre = start.previousSibling;\r\n                        if (pre && pre.nodeType == 1) {\r\n                            var pre = checkIsCludeLink(pre);\r\n                            if (pre && !pre.getAttribute('_href')) {\r\n                                domUtils.remove(pre, true);\r\n                            }\r\n                        }\r\n                    }\r\n                } else if (keyCode == 32) {\r\n                    if (start.nodeType == 3 && /^\\s$/.test(start.nodeValue)) {\r\n                        start = start.previousSibling;\r\n                        if (start && start.nodeName == 'A' && !start.getAttribute('_href')) {\r\n                            domUtils.remove(start, true);\r\n                        }\r\n                    }\r\n                } else {\r\n                    start = domUtils.findParentByTagName(start, 'a', true);\r\n                    if (start && !start.getAttribute('_href')) {\r\n                        var bk = rng.createBookmark();\r\n\r\n                        domUtils.remove(start, true);\r\n                        rng.moveToBookmark(bk).select(true)\r\n                    }\r\n                }\r\n\r\n            }\r\n\r\n\r\n        });\r\n    }\r\n    );\r\n\r\n    // plugins/autoheight.js\r\n    ///import core\r\n    ///commands 当输入内容超过编辑器高度时，编辑器自动增高\r\n    ///commandsName  AutoHeight,autoHeightEnabled\r\n    ///commandsTitle  自动增高\r\n    /**\r\n     * @description 自动伸展\r\n     * @author zhanyi\r\n     */\r\n    UE.plugins['autoheight'] = function () {\r\n        var me = this;\r\n        //提供开关，就算加载也可以关闭\r\n        me.autoHeightEnabled = me.options.autoHeightEnabled !== false;\r\n        if (!me.autoHeightEnabled) {\r\n            return;\r\n        }\r\n\r\n        var bakOverflow,\r\n            lastHeight = 0,\r\n            options = me.options,\r\n            currentHeight,\r\n            timer;\r\n\r\n        function adjustHeight() {\r\n            var me = this;\r\n            clearTimeout(timer);\r\n            if (isFullscreen) return;\r\n            if (!me.queryCommandState || me.queryCommandState && me.queryCommandState('source') != 1) {\r\n                timer = setTimeout(function () {\r\n\r\n                    var node = me.body.lastChild;\r\n                    while (node && node.nodeType != 1) {\r\n                        node = node.previousSibling;\r\n                    }\r\n                    if (node && node.nodeType == 1) {\r\n                        node.style.clear = 'both';\r\n                        currentHeight = Math.max(domUtils.getXY(node).y + node.offsetHeight + 25, Math.max(options.minFrameHeight, options.initialFrameHeight));\r\n                        if (currentHeight != lastHeight) {\r\n                            if (currentHeight !== parseInt(me.iframe.parentNode.style.height)) {\r\n                                me.iframe.parentNode.style.height = currentHeight + 'px';\r\n                            }\r\n                            me.body.style.height = currentHeight + 'px';\r\n                            lastHeight = currentHeight;\r\n                        }\r\n                        domUtils.removeStyle(node, 'clear');\r\n                    }\r\n\r\n\r\n                }, 50)\r\n            }\r\n        }\r\n        var isFullscreen;\r\n        me.addListener('fullscreenchanged', function (cmd, f) {\r\n            isFullscreen = f\r\n        });\r\n        me.addListener('destroy', function () {\r\n            me.removeListener('contentchange afterinserthtml keyup mouseup', adjustHeight)\r\n        });\r\n        me.enableAutoHeight = function () {\r\n            var me = this;\r\n            if (!me.autoHeightEnabled) {\r\n                return;\r\n            }\r\n            var doc = me.document;\r\n            me.autoHeightEnabled = true;\r\n            bakOverflow = doc.body.style.overflowY;\r\n            doc.body.style.overflowY = 'hidden';\r\n            me.addListener('contentchange afterinserthtml keyup mouseup', adjustHeight);\r\n            //ff不给事件算得不对\r\n\r\n            setTimeout(function () {\r\n                adjustHeight.call(me);\r\n            }, browser.gecko ? 100 : 0);\r\n            me.fireEvent('autoheightchanged', me.autoHeightEnabled);\r\n        };\r\n        me.disableAutoHeight = function () {\r\n\r\n            me.body.style.overflowY = bakOverflow || '';\r\n\r\n            me.removeListener('contentchange', adjustHeight);\r\n            me.removeListener('keyup', adjustHeight);\r\n            me.removeListener('mouseup', adjustHeight);\r\n            me.autoHeightEnabled = false;\r\n            me.fireEvent('autoheightchanged', me.autoHeightEnabled);\r\n        };\r\n\r\n        me.on('setHeight', function () {\r\n            me.disableAutoHeight()\r\n        });\r\n        me.addListener('ready', function () {\r\n            me.enableAutoHeight();\r\n            //trace:1764\r\n            var timer;\r\n            domUtils.on(browser.ie ? me.body : me.document, browser.webkit ? 'dragover' : 'drop', function () {\r\n                clearTimeout(timer);\r\n                timer = setTimeout(function () {\r\n                    //trace:3681\r\n                    adjustHeight.call(me);\r\n                }, 100);\r\n\r\n            });\r\n            //修复内容过多时，回到顶部，顶部内容被工具栏遮挡问题\r\n            var lastScrollY;\r\n            window.onscroll = function () {\r\n                if (lastScrollY === null) {\r\n                    lastScrollY = this.scrollY\r\n                } else if (this.scrollY == 0 && lastScrollY != 0) {\r\n                    me.window.scrollTo(0, 0);\r\n                    lastScrollY = null;\r\n                }\r\n            }\r\n        });\r\n\r\n\r\n    };\r\n\r\n\r\n\r\n    // plugins/autofloat.js\r\n    ///import core\r\n    ///commands 悬浮工具栏\r\n    ///commandsName  AutoFloat,autoFloatEnabled\r\n    ///commandsTitle  悬浮工具栏\r\n    /**\r\n     *  modified by chengchao01\r\n     *  注意： 引入此功能后，在IE6下会将body的背景图片覆盖掉！\r\n     */\r\n    UE.plugins['autofloat'] = function () {\r\n        var me = this,\r\n            lang = me.getLang();\r\n        me.setOpt({\r\n            topOffset: 0\r\n        });\r\n        var optsAutoFloatEnabled = me.options.autoFloatEnabled !== false,\r\n            topOffset = me.options.topOffset;\r\n\r\n\r\n        //如果不固定toolbar的位置，则直接退出\r\n        if (!optsAutoFloatEnabled) {\r\n            return;\r\n        }\r\n        var uiUtils = UE.ui.uiUtils,\r\n            LteIE6 = browser.ie && browser.version <= 6,\r\n            quirks = browser.quirks;\r\n\r\n        function checkHasUI() {\r\n            if (!UE.ui) {\r\n                alert(lang.autofloatMsg);\r\n                return 0;\r\n            }\r\n            return 1;\r\n        }\r\n        function fixIE6FixedPos() {\r\n            var docStyle = document.body.style;\r\n            docStyle.backgroundImage = 'url(\"about:blank\")';\r\n            docStyle.backgroundAttachment = 'fixed';\r\n        }\r\n        var bakCssText,\r\n            placeHolder = document.createElement('div'),\r\n            toolbarBox, orgTop,\r\n            getPosition,\r\n            flag = true;   //ie7模式下需要偏移\r\n        function setFloating() {\r\n            var toobarBoxPos = domUtils.getXY(toolbarBox),\r\n                origalFloat = domUtils.getComputedStyle(toolbarBox, 'position'),\r\n                origalLeft = domUtils.getComputedStyle(toolbarBox, 'left');\r\n            toolbarBox.style.width = toolbarBox.offsetWidth + 'px';\r\n            toolbarBox.style.zIndex = me.options.zIndex * 1 + 1;\r\n            toolbarBox.parentNode.insertBefore(placeHolder, toolbarBox);\r\n            if (LteIE6 || (quirks && browser.ie)) {\r\n                if (toolbarBox.style.position != 'absolute') {\r\n                    toolbarBox.style.position = 'absolute';\r\n                }\r\n                toolbarBox.style.top = (document.body.scrollTop || document.documentElement.scrollTop) - orgTop + topOffset + 'px';\r\n            } else {\r\n                if (browser.ie7Compat && flag) {\r\n                    flag = false;\r\n                    toolbarBox.style.left = domUtils.getXY(toolbarBox).x - document.documentElement.getBoundingClientRect().left + 2 + 'px';\r\n                }\r\n                if (toolbarBox.style.position != 'fixed') {\r\n                    // toolbarBox.style.position = 'fixed';\r\n                    toolbarBox.style.top = topOffset + \"px\";\r\n                    ((origalFloat == 'absolute' || origalFloat == 'relative') && parseFloat(origalLeft)) && (toolbarBox.style.left = toobarBoxPos.x + 'px');\r\n                }\r\n            }\r\n        }\r\n        function unsetFloating() {\r\n            flag = true;\r\n            if (placeHolder.parentNode) {\r\n                placeHolder.parentNode.removeChild(placeHolder);\r\n            }\r\n\r\n            toolbarBox.style.cssText = bakCssText;\r\n        }\r\n\r\n        function updateFloating() {\r\n            var rect3 = getPosition(me.container);\r\n            var offset = me.options.toolbarTopOffset || 0;\r\n            if (rect3.top < 0 && rect3.bottom - toolbarBox.offsetHeight > offset) {\r\n                setFloating();\r\n            } else {\r\n                unsetFloating();\r\n            }\r\n        }\r\n        var defer_updateFloating = utils.defer(function () {\r\n            updateFloating();\r\n        }, browser.ie ? 200 : 100, true);\r\n\r\n        me.addListener('destroy', function () {\r\n            domUtils.un(window, ['scroll', 'resize'], updateFloating);\r\n            me.removeListener('keydown', defer_updateFloating);\r\n        });\r\n\r\n        me.addListener('ready', function () {\r\n            if (checkHasUI(me)) {\r\n                //加载了ui组件，但在new时，没有加载ui，导致编辑器实例上没有ui类，所以这里做判断\r\n                if (!me.ui) {\r\n                    return;\r\n                }\r\n                getPosition = uiUtils.getClientRect;\r\n                toolbarBox = me.ui.getDom('toolbarbox');\r\n                orgTop = getPosition(toolbarBox).top;\r\n                bakCssText = toolbarBox.style.cssText;\r\n                placeHolder.style.height = toolbarBox.offsetHeight + 'px';\r\n                if (LteIE6) {\r\n                    fixIE6FixedPos();\r\n                }\r\n                domUtils.on(window, ['scroll', 'resize'], updateFloating);\r\n                me.addListener('keydown', defer_updateFloating);\r\n\r\n                me.addListener('beforefullscreenchange', function (t, enabled) {\r\n                    if (enabled) {\r\n                        unsetFloating();\r\n                    }\r\n                });\r\n                me.addListener('fullscreenchanged', function (t, enabled) {\r\n                    if (!enabled) {\r\n                        updateFloating();\r\n                    }\r\n                });\r\n                me.addListener('sourcemodechanged', function (t, enabled) {\r\n                    setTimeout(function () {\r\n                        updateFloating();\r\n                    }, 0);\r\n                });\r\n                me.addListener(\"clearDoc\", function () {\r\n                    setTimeout(function () {\r\n                        updateFloating();\r\n                    }, 0);\r\n\r\n                })\r\n            }\r\n        });\r\n    };\r\n\r\n\r\n    // plugins/video.js\r\n    /**\r\n     * video插件， 为UEditor提供视频插入支持\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    UE.plugins['video'] = function () {\r\n        var me = this;\r\n\r\n        /**\r\n         * 创建插入视频字符窜\r\n         * @param url 视频地址\r\n         * @param width 视频宽度\r\n         * @param height 视频高度\r\n         * @param align 视频对齐\r\n         * @param toEmbed 是否以flash代替显示\r\n         * @param addParagraph  是否需要添加P 标签\r\n         */\r\n        function creatInsertStr(url, width, height, id, align, classname, type) {\r\n\r\n            url = utils.unhtmlForUrl(url);\r\n            align = utils.unhtml(align);\r\n            classname = utils.unhtml(classname);\r\n\r\n            width = parseInt(width, 10) || 0;\r\n            height = parseInt(height, 10) || 0;\r\n\r\n            var str;\r\n            switch (type) {\r\n                case 'image':\r\n                    str = '<img ' + (id ? 'id=\"' + id + '\"' : '') + ' width=\"' + width + '\" height=\"' + height + '\" _url=\"' + url + '\" class=\"' + classname.replace(/\\bvideo-js\\b/, '') + '\"' +\r\n                        ' src=\"' + me.options.UEDITOR_HOME_URL + 'themes/default/images/spacer.gif\" style=\"background:url(' + me.options.UEDITOR_HOME_URL + 'themes/default/images/videologo.gif) no-repeat center center; border:1px solid gray;' + (align ? 'float:' + align + ';' : '') + '\" />'\r\n                    break;\r\n                case 'embed':\r\n                    str = '<embed type=\"application/x-shockwave-flash\" class=\"' + classname + '\" pluginspage=\"http://www.macromedia.com/go/getflashplayer\"' +\r\n                        ' src=\"' + utils.html(url) + '\" width=\"' + width + '\" height=\"' + height + '\"' + (align ? ' style=\"float:' + align + '\"' : '') +\r\n                        ' wmode=\"transparent\" play=\"true\" loop=\"false\" menu=\"false\" allowscriptaccess=\"never\" allowfullscreen=\"true\" >';\r\n                    break;\r\n                case 'video':\r\n                    var ext = url.substr(url.lastIndexOf('.') + 1);\r\n                    if (ext == 'ogv') ext = 'ogg';\r\n                    str = '<video' + (id ? ' id=\"' + id + '\"' : '') + ' class=\"' + classname + ' video-js\" ' + (align ? ' style=\"float:' + align + '\"' : '') +\r\n                        ' controls preload=\"none\" width=\"' + width + '\" height=\"' + height + '\" src=\"' + url + '\" data-setup=\"{}\">' +\r\n                        '<source src=\"' + url + '\" type=\"video/' + ext + '\" /></video>';\r\n                    break;\r\n            }\r\n            return str;\r\n        }\r\n\r\n        function switchImgAndVideo(root, img2video) {\r\n            utils.each(root.getNodesByTagName(img2video ? 'img' : 'embed video'), function (node) {\r\n                var className = node.getAttr('class');\r\n                if (className && className.indexOf('edui-faked-video') != -1) {\r\n                    var html = creatInsertStr(img2video ? node.getAttr('_url') : node.getAttr('src'), node.getAttr('width'), node.getAttr('height'), null, node.getStyle('float') || '', className, img2video ? 'embed' : 'image');\r\n                    node.parentNode.replaceChild(UE.uNode.createElement(html), node);\r\n                }\r\n                if (className && className.indexOf('edui-upload-video') != -1) {\r\n                    var html = creatInsertStr(img2video ? node.getAttr('_url') : node.getAttr('src'), node.getAttr('width'), node.getAttr('height'), null, node.getStyle('float') || '', className, img2video ? 'video' : 'image');\r\n                    node.parentNode.replaceChild(UE.uNode.createElement(html), node);\r\n                }\r\n            })\r\n        }\r\n\r\n        me.addOutputRule(function (root) {\r\n            switchImgAndVideo(root, true)\r\n        });\r\n        me.addInputRule(function (root) {\r\n            switchImgAndVideo(root)\r\n        });\r\n\r\n        /**\r\n         * 插入视频\r\n         * @command insertvideo\r\n         * @method execCommand\r\n         * @param { String } cmd 命令字符串\r\n         * @param { Object } videoAttr 键值对对象， 描述一个视频的所有属性\r\n         * @example\r\n         * ```javascript\r\n         *\r\n         * var videoAttr = {\r\n         *      //视频地址\r\n         *      url: 'http://www.youku.com/xxx',\r\n         *      //视频宽高值， 单位px\r\n         *      width: 200,\r\n         *      height: 100\r\n         * };\r\n         *\r\n         * //editor 是编辑器实例\r\n         * //向编辑器插入单个视频\r\n         * editor.execCommand( 'insertvideo', videoAttr );\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 插入视频\r\n         * @command insertvideo\r\n         * @method execCommand\r\n         * @param { String } cmd 命令字符串\r\n         * @param { Array } videoArr 需要插入的视频的数组， 其中的每一个元素都是一个键值对对象， 描述了一个视频的所有属性\r\n         * @example\r\n         * ```javascript\r\n         *\r\n         * var videoAttr1 = {\r\n         *      //视频地址\r\n         *      url: 'http://www.youku.com/xxx',\r\n         *      //视频宽高值， 单位px\r\n         *      width: 200,\r\n         *      height: 100\r\n         * },\r\n         * videoAttr2 = {\r\n         *      //视频地址\r\n         *      url: 'http://www.youku.com/xxx',\r\n         *      //视频宽高值， 单位px\r\n         *      width: 200,\r\n         *      height: 100\r\n         * }\r\n         *\r\n         * //editor 是编辑器实例\r\n         * //该方法将会向编辑器内插入两个视频\r\n         * editor.execCommand( 'insertvideo', [ videoAttr1, videoAttr2 ] );\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 查询当前光标所在处是否是一个视频\r\n         * @command insertvideo\r\n         * @method queryCommandState\r\n         * @param { String } cmd 需要查询的命令字符串\r\n         * @return { int } 如果当前光标所在处的元素是一个视频对象， 则返回1，否则返回0\r\n         * @example\r\n         * ```javascript\r\n         *\r\n         * //editor 是编辑器实例\r\n         * editor.queryCommandState( 'insertvideo' );\r\n         * ```\r\n         */\r\n        me.commands[\"insertvideo\"] = {\r\n            execCommand: function (cmd, videoObjs, type) {\r\n                videoObjs = utils.isArray(videoObjs) ? videoObjs : [videoObjs];\r\n                var html = [], id = 'tmpVedio', cl;\r\n                for (var i = 0, vi, len = videoObjs.length; i < len; i++) {\r\n                    vi = videoObjs[i];\r\n                    cl = (type == 'upload' ? 'edui-upload-video video-js vjs-default-skin' : 'edui-faked-video');\r\n                    html.push(creatInsertStr(vi.url, vi.width || 420, vi.height || 280, id + i, null, cl, 'image'));\r\n                }\r\n                me.execCommand(\"inserthtml\", html.join(\"\"), true);\r\n                var rng = this.selection.getRange();\r\n                for (var i = 0, len = videoObjs.length; i < len; i++) {\r\n                    var img = this.document.getElementById('tmpVedio' + i);\r\n                    domUtils.removeAttributes(img, 'id');\r\n                    rng.selectNode(img).select();\r\n                    me.execCommand('imagefloat', videoObjs[i].align)\r\n                }\r\n            },\r\n            queryCommandState: function () {\r\n                var img = me.selection.getRange().getClosedNode(),\r\n                    flag = img && (img.className == \"edui-faked-video\" || img.className.indexOf(\"edui-upload-video\") != -1);\r\n                return flag ? 1 : 0;\r\n            }\r\n        };\r\n    };\r\n\r\n\r\n    // plugins/table.core.js\r\n    /**\r\n     * Created with JetBrains WebStorm.\r\n     * User: taoqili\r\n     * Date: 13-1-18\r\n     * Time: 上午11:09\r\n     * To change this template use File | Settings | File Templates.\r\n     */\r\n    /**\r\n     * UE表格操作类\r\n     * @param table\r\n     * @constructor\r\n     */\r\n    (function () {\r\n        var UETable = UE.UETable = function (table) {\r\n            this.table = table;\r\n            this.indexTable = [];\r\n            this.selectedTds = [];\r\n            this.cellsRange = {};\r\n            this.update(table);\r\n        };\r\n\r\n        //===以下为静态工具方法===\r\n        UETable.removeSelectedClass = function (cells) {\r\n            utils.each(cells, function (cell) {\r\n                domUtils.removeClasses(cell, \"selectTdClass\");\r\n            })\r\n        };\r\n        UETable.addSelectedClass = function (cells) {\r\n            utils.each(cells, function (cell) {\r\n                domUtils.addClass(cell, \"selectTdClass\");\r\n            })\r\n        };\r\n        UETable.isEmptyBlock = function (node) {\r\n            var reg = new RegExp(domUtils.fillChar, 'g');\r\n            if (node[browser.ie ? 'innerText' : 'textContent'].replace(/^\\s*$/, '').replace(reg, '').length > 0) {\r\n                return 0;\r\n            }\r\n            for (var i in dtd.$isNotEmpty) if (dtd.$isNotEmpty.hasOwnProperty(i)) {\r\n                if (node.getElementsByTagName(i).length) {\r\n                    return 0;\r\n                }\r\n            }\r\n            return 1;\r\n        };\r\n        UETable.getWidth = function (cell) {\r\n            if (!cell) return 0;\r\n            return parseInt(domUtils.getComputedStyle(cell, \"width\"), 10);\r\n        };\r\n\r\n        /**\r\n         * 获取单元格或者单元格组的“对齐”状态。 如果当前的检测对象是一个单元格组， 只有在满足所有单元格的 水平和竖直 对齐属性都相同的\r\n         * 条件时才会返回其状态值，否则将返回null； 如果当前只检测了一个单元格， 则直接返回当前单元格的对齐状态；\r\n         * @param table cell or table cells , 支持单个单元格dom对象 或者 单元格dom对象数组\r\n         * @return { align: 'left' || 'right' || 'center', valign: 'top' || 'middle' || 'bottom' } 或者 null\r\n         */\r\n        UETable.getTableCellAlignState = function (cells) {\r\n\r\n            !utils.isArray(cells) && (cells = [cells]);\r\n\r\n            var result = {},\r\n                status = ['align', 'valign'],\r\n                tempStatus = null,\r\n                isSame = true;//状态是否相同\r\n\r\n            utils.each(cells, function (cellNode) {\r\n\r\n                utils.each(status, function (currentState) {\r\n\r\n                    tempStatus = cellNode.getAttribute(currentState);\r\n\r\n                    if (!result[currentState] && tempStatus) {\r\n                        result[currentState] = tempStatus;\r\n                    } else if (!result[currentState] || (tempStatus !== result[currentState])) {\r\n                        isSame = false;\r\n                        return false;\r\n                    }\r\n\r\n                });\r\n\r\n                return isSame;\r\n\r\n            });\r\n\r\n            return isSame ? result : null;\r\n\r\n        };\r\n\r\n        /**\r\n         * 根据当前选区获取相关的table信息\r\n         * @return {Object}\r\n         */\r\n        UETable.getTableItemsByRange = function (editor) {\r\n            var start = editor.selection.getStart();\r\n\r\n            //ff下会选中bookmark\r\n            if (start && start.id && start.id.indexOf('_baidu_bookmark_start_') === 0 && start.nextSibling) {\r\n                start = start.nextSibling;\r\n            }\r\n\r\n            //在table或者td边缘有可能存在选中tr的情况\r\n            var cell = start && domUtils.findParentByTagName(start, [\"td\", \"th\"], true),\r\n                tr = cell && cell.parentNode,\r\n                caption = start && domUtils.findParentByTagName(start, 'caption', true),\r\n                table = caption ? caption.parentNode : tr && tr.parentNode.parentNode;\r\n\r\n            return {\r\n                cell: cell,\r\n                tr: tr,\r\n                table: table,\r\n                caption: caption\r\n            }\r\n        };\r\n        UETable.getUETableBySelected = function (editor) {\r\n            var table = UETable.getTableItemsByRange(editor).table;\r\n            if (table && table.ueTable && table.ueTable.selectedTds.length) {\r\n                return table.ueTable;\r\n            }\r\n            return null;\r\n        };\r\n\r\n        UETable.getDefaultValue = function (editor, table) {\r\n            var borderMap = {\r\n                thin: '0px',\r\n                medium: '1px',\r\n                thick: '2px'\r\n            },\r\n                tableBorder, tdPadding, tdBorder, tmpValue;\r\n            if (!table) {\r\n                table = editor.document.createElement('table');\r\n                table.insertRow(0).insertCell(0).innerHTML = 'xxx';\r\n                editor.body.appendChild(table);\r\n                var td = table.getElementsByTagName('td')[0];\r\n                tmpValue = domUtils.getComputedStyle(table, 'border-left-width');\r\n                tableBorder = parseInt(borderMap[tmpValue] || tmpValue, 10);\r\n                tmpValue = domUtils.getComputedStyle(td, 'padding-left');\r\n                tdPadding = parseInt(borderMap[tmpValue] || tmpValue, 10);\r\n                tmpValue = domUtils.getComputedStyle(td, 'border-left-width');\r\n                tdBorder = parseInt(borderMap[tmpValue] || tmpValue, 10);\r\n                domUtils.remove(table);\r\n                return {\r\n                    tableBorder: tableBorder,\r\n                    tdPadding: tdPadding,\r\n                    tdBorder: tdBorder\r\n                };\r\n            } else {\r\n                td = table.getElementsByTagName('td')[0];\r\n                tmpValue = domUtils.getComputedStyle(table, 'border-left-width');\r\n                tableBorder = parseInt(borderMap[tmpValue] || tmpValue, 10);\r\n                tmpValue = domUtils.getComputedStyle(td, 'padding-left');\r\n                tdPadding = parseInt(borderMap[tmpValue] || tmpValue, 10);\r\n                tmpValue = domUtils.getComputedStyle(td, 'border-left-width');\r\n                tdBorder = parseInt(borderMap[tmpValue] || tmpValue, 10);\r\n                return {\r\n                    tableBorder: tableBorder,\r\n                    tdPadding: tdPadding,\r\n                    tdBorder: tdBorder\r\n                };\r\n            }\r\n        };\r\n        /**\r\n         * 根据当前点击的td或者table获取索引对象\r\n         * @param tdOrTable\r\n         */\r\n        UETable.getUETable = function (tdOrTable) {\r\n            var tag = tdOrTable.tagName.toLowerCase();\r\n            tdOrTable = (tag == \"td\" || tag == \"th\" || tag == 'caption') ? domUtils.findParentByTagName(tdOrTable, \"table\", true) : tdOrTable;\r\n            if (!tdOrTable.ueTable) {\r\n                tdOrTable.ueTable = new UETable(tdOrTable);\r\n            }\r\n            return tdOrTable.ueTable;\r\n        };\r\n\r\n        UETable.cloneCell = function (cell, ignoreMerge, keepPro) {\r\n            if (!cell || utils.isString(cell)) {\r\n                return this.table.ownerDocument.createElement(cell || 'td');\r\n            }\r\n            var flag = domUtils.hasClass(cell, \"selectTdClass\");\r\n            flag && domUtils.removeClasses(cell, \"selectTdClass\");\r\n            var tmpCell = cell.cloneNode(true);\r\n            if (ignoreMerge) {\r\n                tmpCell.rowSpan = tmpCell.colSpan = 1;\r\n            }\r\n            //去掉宽高\r\n            !keepPro && domUtils.removeAttributes(tmpCell, 'width height');\r\n            !keepPro && domUtils.removeAttributes(tmpCell, 'style');\r\n\r\n            tmpCell.style.borderLeftStyle = \"\";\r\n            tmpCell.style.borderTopStyle = \"\";\r\n            tmpCell.style.borderLeftColor = cell.style.borderRightColor;\r\n            tmpCell.style.borderLeftWidth = cell.style.borderRightWidth;\r\n            tmpCell.style.borderTopColor = cell.style.borderBottomColor;\r\n            tmpCell.style.borderTopWidth = cell.style.borderBottomWidth;\r\n            flag && domUtils.addClass(cell, \"selectTdClass\");\r\n            return tmpCell;\r\n        }\r\n\r\n        UETable.prototype = {\r\n            getMaxRows: function () {\r\n                var rows = this.table.rows, maxLen = 1;\r\n                for (var i = 0, row; row = rows[i]; i++) {\r\n                    var currentMax = 1;\r\n                    for (var j = 0, cj; cj = row.cells[j++];) {\r\n                        currentMax = Math.max(cj.rowSpan || 1, currentMax);\r\n                    }\r\n                    maxLen = Math.max(currentMax + i, maxLen);\r\n                }\r\n                return maxLen;\r\n            },\r\n            /**\r\n             * 获取当前表格的最大列数\r\n             */\r\n            getMaxCols: function () {\r\n                var rows = this.table.rows, maxLen = 0, cellRows = {};\r\n                for (var i = 0, row; row = rows[i]; i++) {\r\n                    var cellsNum = 0;\r\n                    for (var j = 0, cj; cj = row.cells[j++];) {\r\n                        cellsNum += (cj.colSpan || 1);\r\n                        if (cj.rowSpan && cj.rowSpan > 1) {\r\n                            for (var k = 1; k < cj.rowSpan; k++) {\r\n                                if (!cellRows['row_' + (i + k)]) {\r\n                                    cellRows['row_' + (i + k)] = (cj.colSpan || 1);\r\n                                } else {\r\n                                    cellRows['row_' + (i + k)]++\r\n                                }\r\n                            }\r\n\r\n                        }\r\n                    }\r\n                    cellsNum += cellRows['row_' + i] || 0;\r\n                    maxLen = Math.max(cellsNum, maxLen);\r\n                }\r\n                return maxLen;\r\n            },\r\n            getCellColIndex: function (cell) {\r\n\r\n            },\r\n            /**\r\n             * 获取当前cell旁边的单元格，\r\n             * @param cell\r\n             * @param right\r\n             */\r\n            getHSideCell: function (cell, right) {\r\n                try {\r\n                    var cellInfo = this.getCellInfo(cell),\r\n                        previewRowIndex, previewColIndex;\r\n                    var len = this.selectedTds.length,\r\n                        range = this.cellsRange;\r\n                    //首行或者首列没有前置单元格\r\n                    if ((!right && (!len ? !cellInfo.colIndex : !range.beginColIndex)) || (right && (!len ? (cellInfo.colIndex == (this.colsNum - 1)) : (range.endColIndex == this.colsNum - 1)))) return null;\r\n\r\n                    previewRowIndex = !len ? cellInfo.rowIndex : range.beginRowIndex;\r\n                    previewColIndex = !right ? (!len ? (cellInfo.colIndex < 1 ? 0 : (cellInfo.colIndex - 1)) : range.beginColIndex - 1)\r\n                        : (!len ? cellInfo.colIndex + 1 : range.endColIndex + 1);\r\n                    return this.getCell(this.indexTable[previewRowIndex][previewColIndex].rowIndex, this.indexTable[previewRowIndex][previewColIndex].cellIndex);\r\n                } catch (e) {\r\n                    showError(e);\r\n                }\r\n            },\r\n            getTabNextCell: function (cell, preRowIndex) {\r\n                var cellInfo = this.getCellInfo(cell),\r\n                    rowIndex = preRowIndex || cellInfo.rowIndex,\r\n                    colIndex = cellInfo.colIndex + 1 + (cellInfo.colSpan - 1),\r\n                    nextCell;\r\n                try {\r\n                    nextCell = this.getCell(this.indexTable[rowIndex][colIndex].rowIndex, this.indexTable[rowIndex][colIndex].cellIndex);\r\n                } catch (e) {\r\n                    try {\r\n                        rowIndex = rowIndex * 1 + 1;\r\n                        colIndex = 0;\r\n                        nextCell = this.getCell(this.indexTable[rowIndex][colIndex].rowIndex, this.indexTable[rowIndex][colIndex].cellIndex);\r\n                    } catch (e) {\r\n                    }\r\n                }\r\n                return nextCell;\r\n\r\n            },\r\n            /**\r\n             * 获取视觉上的后置单元格\r\n             * @param cell\r\n             * @param bottom\r\n             */\r\n            getVSideCell: function (cell, bottom, ignoreRange) {\r\n                try {\r\n                    var cellInfo = this.getCellInfo(cell),\r\n                        nextRowIndex, nextColIndex;\r\n                    var len = this.selectedTds.length && !ignoreRange,\r\n                        range = this.cellsRange;\r\n                    //末行或者末列没有后置单元格\r\n                    if ((!bottom && (cellInfo.rowIndex == 0)) || (bottom && (!len ? (cellInfo.rowIndex + cellInfo.rowSpan > this.rowsNum - 1) : (range.endRowIndex == this.rowsNum - 1)))) return null;\r\n\r\n                    nextRowIndex = !bottom ? (!len ? cellInfo.rowIndex - 1 : range.beginRowIndex - 1)\r\n                        : (!len ? (cellInfo.rowIndex + cellInfo.rowSpan) : range.endRowIndex + 1);\r\n                    nextColIndex = !len ? cellInfo.colIndex : range.beginColIndex;\r\n                    return this.getCell(this.indexTable[nextRowIndex][nextColIndex].rowIndex, this.indexTable[nextRowIndex][nextColIndex].cellIndex);\r\n                } catch (e) {\r\n                    showError(e);\r\n                }\r\n            },\r\n            /**\r\n             * 获取相同结束位置的单元格，xOrY指代了是获取x轴相同还是y轴相同\r\n             */\r\n            getSameEndPosCells: function (cell, xOrY) {\r\n                try {\r\n                    var flag = (xOrY.toLowerCase() === \"x\"),\r\n                        end = domUtils.getXY(cell)[flag ? 'x' : 'y'] + cell[\"offset\" + (flag ? 'Width' : 'Height')],\r\n                        rows = this.table.rows,\r\n                        cells = null, returns = [];\r\n                    for (var i = 0; i < this.rowsNum; i++) {\r\n                        cells = rows[i].cells;\r\n                        for (var j = 0, tmpCell; tmpCell = cells[j++];) {\r\n                            var tmpEnd = domUtils.getXY(tmpCell)[flag ? 'x' : 'y'] + tmpCell[\"offset\" + (flag ? 'Width' : 'Height')];\r\n                            //对应行的td已经被上面行rowSpan了\r\n                            if (tmpEnd > end && flag) break;\r\n                            if (cell == tmpCell || end == tmpEnd) {\r\n                                //只获取单一的单元格\r\n                                //todo 仅获取单一单元格在特定情况下会造成returns为空，从而影响后续的拖拽实现，修正这个。需考虑性能\r\n                                if (tmpCell[flag ? \"colSpan\" : \"rowSpan\"] == 1) {\r\n                                    returns.push(tmpCell);\r\n                                }\r\n                                if (flag) break;\r\n                            }\r\n                        }\r\n                    }\r\n                    return returns;\r\n                } catch (e) {\r\n                    showError(e);\r\n                }\r\n            },\r\n            setCellContent: function (cell, content) {\r\n                cell.innerHTML = content || (browser.ie ? domUtils.fillChar : \"<br />\");\r\n            },\r\n            cloneCell: UETable.cloneCell,\r\n            /**\r\n             * 获取跟当前单元格的右边竖线为左边的所有未合并单元格\r\n             */\r\n            getSameStartPosXCells: function (cell) {\r\n                try {\r\n                    var start = domUtils.getXY(cell).x + cell.offsetWidth,\r\n                        rows = this.table.rows, cells, returns = [];\r\n                    for (var i = 0; i < this.rowsNum; i++) {\r\n                        cells = rows[i].cells;\r\n                        for (var j = 0, tmpCell; tmpCell = cells[j++];) {\r\n                            var tmpStart = domUtils.getXY(tmpCell).x;\r\n                            if (tmpStart > start) break;\r\n                            if (tmpStart == start && tmpCell.colSpan == 1) {\r\n                                returns.push(tmpCell);\r\n                                break;\r\n                            }\r\n                        }\r\n                    }\r\n                    return returns;\r\n                } catch (e) {\r\n                    showError(e);\r\n                }\r\n            },\r\n            /**\r\n             * 更新table对应的索引表\r\n             */\r\n            update: function (table) {\r\n                this.table = table || this.table;\r\n                this.selectedTds = [];\r\n                this.cellsRange = {};\r\n                this.indexTable = [];\r\n                var rows = this.table.rows,\r\n                    rowsNum = this.getMaxRows(),\r\n                    dNum = rowsNum - rows.length,\r\n                    colsNum = this.getMaxCols();\r\n                while (dNum--) {\r\n                    this.table.insertRow(rows.length);\r\n                }\r\n                this.rowsNum = rowsNum;\r\n                this.colsNum = colsNum;\r\n                for (var i = 0, len = rows.length; i < len; i++) {\r\n                    this.indexTable[i] = new Array(colsNum);\r\n                }\r\n                //填充索引表\r\n                for (var rowIndex = 0, row; row = rows[rowIndex]; rowIndex++) {\r\n                    for (var cellIndex = 0, cell, cells = row.cells; cell = cells[cellIndex]; cellIndex++) {\r\n                        //修正整行被rowSpan时导致的行数计算错误\r\n                        if (cell.rowSpan > rowsNum) {\r\n                            cell.rowSpan = rowsNum;\r\n                        }\r\n                        var colIndex = cellIndex,\r\n                            rowSpan = cell.rowSpan || 1,\r\n                            colSpan = cell.colSpan || 1;\r\n                        //当已经被上一行rowSpan或者被前一列colSpan了，则跳到下一个单元格进行\r\n                        while (this.indexTable[rowIndex][colIndex]) colIndex++;\r\n                        for (var j = 0; j < rowSpan; j++) {\r\n                            for (var k = 0; k < colSpan; k++) {\r\n                                this.indexTable[rowIndex + j][colIndex + k] = {\r\n                                    rowIndex: rowIndex,\r\n                                    cellIndex: cellIndex,\r\n                                    colIndex: colIndex,\r\n                                    rowSpan: rowSpan,\r\n                                    colSpan: colSpan\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                //修复残缺td\r\n                for (j = 0; j < rowsNum; j++) {\r\n                    for (k = 0; k < colsNum; k++) {\r\n                        if (this.indexTable[j][k] === undefined) {\r\n                            row = rows[j];\r\n                            cell = row.cells[row.cells.length - 1];\r\n                            cell = cell ? cell.cloneNode(true) : this.table.ownerDocument.createElement(\"td\");\r\n                            this.setCellContent(cell);\r\n                            if (cell.colSpan !== 1) cell.colSpan = 1;\r\n                            if (cell.rowSpan !== 1) cell.rowSpan = 1;\r\n                            row.appendChild(cell);\r\n                            this.indexTable[j][k] = {\r\n                                rowIndex: j,\r\n                                cellIndex: cell.cellIndex,\r\n                                colIndex: k,\r\n                                rowSpan: 1,\r\n                                colSpan: 1\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n                //当框选后删除行或者列后撤销，需要重建选区。\r\n                var tds = domUtils.getElementsByTagName(this.table, \"td\"),\r\n                    selectTds = [];\r\n                utils.each(tds, function (td) {\r\n                    if (domUtils.hasClass(td, \"selectTdClass\")) {\r\n                        selectTds.push(td);\r\n                    }\r\n                });\r\n                if (selectTds.length) {\r\n                    var start = selectTds[0],\r\n                        end = selectTds[selectTds.length - 1],\r\n                        startInfo = this.getCellInfo(start),\r\n                        endInfo = this.getCellInfo(end);\r\n                    this.selectedTds = selectTds;\r\n                    this.cellsRange = {\r\n                        beginRowIndex: startInfo.rowIndex,\r\n                        beginColIndex: startInfo.colIndex,\r\n                        endRowIndex: endInfo.rowIndex + endInfo.rowSpan - 1,\r\n                        endColIndex: endInfo.colIndex + endInfo.colSpan - 1\r\n                    };\r\n                }\r\n                //给第一行设置firstRow的样式名称,在排序图标的样式上使用到\r\n                if (!domUtils.hasClass(this.table.rows[0], \"firstRow\")) {\r\n                    domUtils.addClass(this.table.rows[0], \"firstRow\");\r\n                    for (var i = 1; i < this.table.rows.length; i++) {\r\n                        domUtils.removeClasses(this.table.rows[i], \"firstRow\");\r\n                    }\r\n                }\r\n            },\r\n            /**\r\n             * 获取单元格的索引信息\r\n             */\r\n            getCellInfo: function (cell) {\r\n                if (!cell) return;\r\n                var cellIndex = cell.cellIndex,\r\n                    rowIndex = cell.parentNode.rowIndex,\r\n                    rowInfo = this.indexTable[rowIndex],\r\n                    numCols = this.colsNum;\r\n                for (var colIndex = cellIndex; colIndex < numCols; colIndex++) {\r\n                    var cellInfo = rowInfo[colIndex];\r\n                    if (cellInfo.rowIndex === rowIndex && cellInfo.cellIndex === cellIndex) {\r\n                        return cellInfo;\r\n                    }\r\n                }\r\n            },\r\n            /**\r\n             * 根据行列号获取单元格\r\n             */\r\n            getCell: function (rowIndex, cellIndex) {\r\n                return rowIndex < this.rowsNum && this.table.rows[rowIndex].cells[cellIndex] || null;\r\n            },\r\n            /**\r\n             * 删除单元格\r\n             */\r\n            deleteCell: function (cell, rowIndex) {\r\n                rowIndex = typeof rowIndex == 'number' ? rowIndex : cell.parentNode.rowIndex;\r\n                var row = this.table.rows[rowIndex];\r\n                row.deleteCell(cell.cellIndex);\r\n            },\r\n            /**\r\n             * 根据始末两个单元格获取被框选的所有单元格范围\r\n             */\r\n            getCellsRange: function (cellA, cellB) {\r\n                function checkRange(beginRowIndex, beginColIndex, endRowIndex, endColIndex) {\r\n                    var tmpBeginRowIndex = beginRowIndex,\r\n                        tmpBeginColIndex = beginColIndex,\r\n                        tmpEndRowIndex = endRowIndex,\r\n                        tmpEndColIndex = endColIndex,\r\n                        cellInfo, colIndex, rowIndex;\r\n                    // 通过indexTable检查是否存在超出TableRange上边界的情况\r\n                    if (beginRowIndex > 0) {\r\n                        for (colIndex = beginColIndex; colIndex < endColIndex; colIndex++) {\r\n                            cellInfo = me.indexTable[beginRowIndex][colIndex];\r\n                            rowIndex = cellInfo.rowIndex;\r\n                            if (rowIndex < beginRowIndex) {\r\n                                tmpBeginRowIndex = Math.min(rowIndex, tmpBeginRowIndex);\r\n                            }\r\n                        }\r\n                    }\r\n                    // 通过indexTable检查是否存在超出TableRange右边界的情况\r\n                    if (endColIndex < me.colsNum) {\r\n                        for (rowIndex = beginRowIndex; rowIndex < endRowIndex; rowIndex++) {\r\n                            cellInfo = me.indexTable[rowIndex][endColIndex];\r\n                            colIndex = cellInfo.colIndex + cellInfo.colSpan - 1;\r\n                            if (colIndex > endColIndex) {\r\n                                tmpEndColIndex = Math.max(colIndex, tmpEndColIndex);\r\n                            }\r\n                        }\r\n                    }\r\n                    // 检查是否有超出TableRange下边界的情况\r\n                    if (endRowIndex < me.rowsNum) {\r\n                        for (colIndex = beginColIndex; colIndex < endColIndex; colIndex++) {\r\n                            cellInfo = me.indexTable[endRowIndex][colIndex];\r\n                            rowIndex = cellInfo.rowIndex + cellInfo.rowSpan - 1;\r\n                            if (rowIndex > endRowIndex) {\r\n                                tmpEndRowIndex = Math.max(rowIndex, tmpEndRowIndex);\r\n                            }\r\n                        }\r\n                    }\r\n                    // 检查是否有超出TableRange左边界的情况\r\n                    if (beginColIndex > 0) {\r\n                        for (rowIndex = beginRowIndex; rowIndex < endRowIndex; rowIndex++) {\r\n                            cellInfo = me.indexTable[rowIndex][beginColIndex];\r\n                            colIndex = cellInfo.colIndex;\r\n                            if (colIndex < beginColIndex) {\r\n                                tmpBeginColIndex = Math.min(cellInfo.colIndex, tmpBeginColIndex);\r\n                            }\r\n                        }\r\n                    }\r\n                    //递归调用直至所有完成所有框选单元格的扩展\r\n                    if (tmpBeginRowIndex != beginRowIndex || tmpBeginColIndex != beginColIndex || tmpEndRowIndex != endRowIndex || tmpEndColIndex != endColIndex) {\r\n                        return checkRange(tmpBeginRowIndex, tmpBeginColIndex, tmpEndRowIndex, tmpEndColIndex);\r\n                    } else {\r\n                        // 不需要扩展TableRange的情况\r\n                        return {\r\n                            beginRowIndex: beginRowIndex,\r\n                            beginColIndex: beginColIndex,\r\n                            endRowIndex: endRowIndex,\r\n                            endColIndex: endColIndex\r\n                        };\r\n                    }\r\n                }\r\n\r\n                try {\r\n                    var me = this,\r\n                        cellAInfo = me.getCellInfo(cellA);\r\n                    if (cellA === cellB) {\r\n                        return {\r\n                            beginRowIndex: cellAInfo.rowIndex,\r\n                            beginColIndex: cellAInfo.colIndex,\r\n                            endRowIndex: cellAInfo.rowIndex + cellAInfo.rowSpan - 1,\r\n                            endColIndex: cellAInfo.colIndex + cellAInfo.colSpan - 1\r\n                        };\r\n                    }\r\n                    var cellBInfo = me.getCellInfo(cellB);\r\n                    // 计算TableRange的四个边\r\n                    var beginRowIndex = Math.min(cellAInfo.rowIndex, cellBInfo.rowIndex),\r\n                        beginColIndex = Math.min(cellAInfo.colIndex, cellBInfo.colIndex),\r\n                        endRowIndex = Math.max(cellAInfo.rowIndex + cellAInfo.rowSpan - 1, cellBInfo.rowIndex + cellBInfo.rowSpan - 1),\r\n                        endColIndex = Math.max(cellAInfo.colIndex + cellAInfo.colSpan - 1, cellBInfo.colIndex + cellBInfo.colSpan - 1);\r\n\r\n                    return checkRange(beginRowIndex, beginColIndex, endRowIndex, endColIndex);\r\n                } catch (e) {\r\n                    //throw e;\r\n                }\r\n            },\r\n            /**\r\n             * 依据cellsRange获取对应的单元格集合\r\n             */\r\n            getCells: function (range) {\r\n                //每次获取cells之前必须先清除上次的选择，否则会对后续获取操作造成影响\r\n                this.clearSelected();\r\n                var beginRowIndex = range.beginRowIndex,\r\n                    beginColIndex = range.beginColIndex,\r\n                    endRowIndex = range.endRowIndex,\r\n                    endColIndex = range.endColIndex,\r\n                    cellInfo, rowIndex, colIndex, tdHash = {}, returnTds = [];\r\n                for (var i = beginRowIndex; i <= endRowIndex; i++) {\r\n                    for (var j = beginColIndex; j <= endColIndex; j++) {\r\n                        cellInfo = this.indexTable[i][j];\r\n                        rowIndex = cellInfo.rowIndex;\r\n                        colIndex = cellInfo.colIndex;\r\n                        // 如果Cells里已经包含了此Cell则跳过\r\n                        var key = rowIndex + '|' + colIndex;\r\n                        if (tdHash[key]) continue;\r\n                        tdHash[key] = 1;\r\n                        if (rowIndex < i || colIndex < j || rowIndex + cellInfo.rowSpan - 1 > endRowIndex || colIndex + cellInfo.colSpan - 1 > endColIndex) {\r\n                            return null;\r\n                        }\r\n                        returnTds.push(this.getCell(rowIndex, cellInfo.cellIndex));\r\n                    }\r\n                }\r\n                return returnTds;\r\n            },\r\n            /**\r\n             * 清理已经选中的单元格\r\n             */\r\n            clearSelected: function () {\r\n                UETable.removeSelectedClass(this.selectedTds);\r\n                this.selectedTds = [];\r\n                this.cellsRange = {};\r\n            },\r\n            /**\r\n             * 根据range设置已经选中的单元格\r\n             */\r\n            setSelected: function (range) {\r\n                var cells = this.getCells(range);\r\n                UETable.addSelectedClass(cells);\r\n                this.selectedTds = cells;\r\n                this.cellsRange = range;\r\n            },\r\n            isFullRow: function () {\r\n                var range = this.cellsRange;\r\n                return (range.endColIndex - range.beginColIndex + 1) == this.colsNum;\r\n            },\r\n            isFullCol: function () {\r\n                var range = this.cellsRange,\r\n                    table = this.table,\r\n                    ths = table.getElementsByTagName(\"th\"),\r\n                    rows = range.endRowIndex - range.beginRowIndex + 1;\r\n                return !ths.length ? rows == this.rowsNum : rows == this.rowsNum || (rows == this.rowsNum - 1);\r\n\r\n            },\r\n            /**\r\n             * 获取视觉上的前置单元格，默认是左边，top传入时\r\n             * @param cell\r\n             * @param top\r\n             */\r\n            getNextCell: function (cell, bottom, ignoreRange) {\r\n                try {\r\n                    var cellInfo = this.getCellInfo(cell),\r\n                        nextRowIndex, nextColIndex;\r\n                    var len = this.selectedTds.length && !ignoreRange,\r\n                        range = this.cellsRange;\r\n                    //末行或者末列没有后置单元格\r\n                    if ((!bottom && (cellInfo.rowIndex == 0)) || (bottom && (!len ? (cellInfo.rowIndex + cellInfo.rowSpan > this.rowsNum - 1) : (range.endRowIndex == this.rowsNum - 1)))) return null;\r\n\r\n                    nextRowIndex = !bottom ? (!len ? cellInfo.rowIndex - 1 : range.beginRowIndex - 1)\r\n                        : (!len ? (cellInfo.rowIndex + cellInfo.rowSpan) : range.endRowIndex + 1);\r\n                    nextColIndex = !len ? cellInfo.colIndex : range.beginColIndex;\r\n                    return this.getCell(this.indexTable[nextRowIndex][nextColIndex].rowIndex, this.indexTable[nextRowIndex][nextColIndex].cellIndex);\r\n                } catch (e) {\r\n                    showError(e);\r\n                }\r\n            },\r\n            getPreviewCell: function (cell, top) {\r\n                try {\r\n                    var cellInfo = this.getCellInfo(cell),\r\n                        previewRowIndex, previewColIndex;\r\n                    var len = this.selectedTds.length,\r\n                        range = this.cellsRange;\r\n                    //首行或者首列没有前置单元格\r\n                    if ((!top && (!len ? !cellInfo.colIndex : !range.beginColIndex)) || (top && (!len ? (cellInfo.rowIndex > (this.colsNum - 1)) : (range.endColIndex == this.colsNum - 1)))) return null;\r\n\r\n                    previewRowIndex = !top ? (!len ? cellInfo.rowIndex : range.beginRowIndex)\r\n                        : (!len ? (cellInfo.rowIndex < 1 ? 0 : (cellInfo.rowIndex - 1)) : range.beginRowIndex);\r\n                    previewColIndex = !top ? (!len ? (cellInfo.colIndex < 1 ? 0 : (cellInfo.colIndex - 1)) : range.beginColIndex - 1)\r\n                        : (!len ? cellInfo.colIndex : range.endColIndex + 1);\r\n                    return this.getCell(this.indexTable[previewRowIndex][previewColIndex].rowIndex, this.indexTable[previewRowIndex][previewColIndex].cellIndex);\r\n                } catch (e) {\r\n                    showError(e);\r\n                }\r\n            },\r\n            /**\r\n             * 移动单元格中的内容\r\n             */\r\n            moveContent: function (cellTo, cellFrom) {\r\n                if (UETable.isEmptyBlock(cellFrom)) return;\r\n                if (UETable.isEmptyBlock(cellTo)) {\r\n                    cellTo.innerHTML = cellFrom.innerHTML;\r\n                    return;\r\n                }\r\n                var child = cellTo.lastChild;\r\n                if (child.nodeType == 3 || !dtd.$block[child.tagName]) {\r\n                    cellTo.appendChild(cellTo.ownerDocument.createElement('br'))\r\n                }\r\n                while (child = cellFrom.firstChild) {\r\n                    cellTo.appendChild(child);\r\n                }\r\n            },\r\n            /**\r\n             * 向右合并单元格\r\n             */\r\n            mergeRight: function (cell) {\r\n                var cellInfo = this.getCellInfo(cell),\r\n                    rightColIndex = cellInfo.colIndex + cellInfo.colSpan,\r\n                    rightCellInfo = this.indexTable[cellInfo.rowIndex][rightColIndex],\r\n                    rightCell = this.getCell(rightCellInfo.rowIndex, rightCellInfo.cellIndex);\r\n                //合并\r\n                cell.colSpan = cellInfo.colSpan + rightCellInfo.colSpan;\r\n                //被合并的单元格不应存在宽度属性\r\n                cell.removeAttribute(\"width\");\r\n                //移动内容\r\n                this.moveContent(cell, rightCell);\r\n                //删掉被合并的Cell\r\n                this.deleteCell(rightCell, rightCellInfo.rowIndex);\r\n                this.update();\r\n            },\r\n            /**\r\n             * 向下合并单元格\r\n             */\r\n            mergeDown: function (cell) {\r\n                var cellInfo = this.getCellInfo(cell),\r\n                    downRowIndex = cellInfo.rowIndex + cellInfo.rowSpan,\r\n                    downCellInfo = this.indexTable[downRowIndex][cellInfo.colIndex],\r\n                    downCell = this.getCell(downCellInfo.rowIndex, downCellInfo.cellIndex);\r\n                cell.rowSpan = cellInfo.rowSpan + downCellInfo.rowSpan;\r\n                cell.removeAttribute(\"height\");\r\n                this.moveContent(cell, downCell);\r\n                this.deleteCell(downCell, downCellInfo.rowIndex);\r\n                this.update();\r\n            },\r\n            /**\r\n             * 合并整个range中的内容\r\n             */\r\n            mergeRange: function () {\r\n                //由于合并操作可以在任意时刻进行，所以无法通过鼠标位置等信息实时生成range，只能通过缓存实例中的cellsRange对象来访问\r\n                var range = this.cellsRange,\r\n                    leftTopCell = this.getCell(range.beginRowIndex, this.indexTable[range.beginRowIndex][range.beginColIndex].cellIndex);\r\n\r\n                if (leftTopCell.tagName == \"TH\" && range.endRowIndex !== range.beginRowIndex) {\r\n                    var index = this.indexTable,\r\n                        info = this.getCellInfo(leftTopCell);\r\n                    leftTopCell = this.getCell(1, index[1][info.colIndex].cellIndex);\r\n                    range = this.getCellsRange(leftTopCell, this.getCell(index[this.rowsNum - 1][info.colIndex].rowIndex, index[this.rowsNum - 1][info.colIndex].cellIndex));\r\n                }\r\n\r\n                // 删除剩余的Cells\r\n                var cells = this.getCells(range);\r\n                for (var i = 0, ci; ci = cells[i++];) {\r\n                    if (ci !== leftTopCell) {\r\n                        this.moveContent(leftTopCell, ci);\r\n                        this.deleteCell(ci);\r\n                    }\r\n                }\r\n                // 修改左上角Cell的rowSpan和colSpan，并调整宽度属性设置\r\n                leftTopCell.rowSpan = range.endRowIndex - range.beginRowIndex + 1;\r\n                leftTopCell.rowSpan > 1 && leftTopCell.removeAttribute(\"height\");\r\n                leftTopCell.colSpan = range.endColIndex - range.beginColIndex + 1;\r\n                leftTopCell.colSpan > 1 && leftTopCell.removeAttribute(\"width\");\r\n                if (leftTopCell.rowSpan == this.rowsNum && leftTopCell.colSpan != 1) {\r\n                    leftTopCell.colSpan = 1;\r\n                }\r\n\r\n                if (leftTopCell.colSpan == this.colsNum && leftTopCell.rowSpan != 1) {\r\n                    var rowIndex = leftTopCell.parentNode.rowIndex;\r\n                    //解决IE下的表格操作问题\r\n                    if (this.table.deleteRow) {\r\n                        for (var i = rowIndex + 1, curIndex = rowIndex + 1, len = leftTopCell.rowSpan; i < len; i++) {\r\n                            this.table.deleteRow(curIndex);\r\n                        }\r\n                    } else {\r\n                        for (var i = 0, len = leftTopCell.rowSpan - 1; i < len; i++) {\r\n                            var row = this.table.rows[rowIndex + 1];\r\n                            row.parentNode.removeChild(row);\r\n                        }\r\n                    }\r\n                    leftTopCell.rowSpan = 1;\r\n                }\r\n                this.update();\r\n            },\r\n            /**\r\n             * 插入一行单元格\r\n             */\r\n            insertRow: function (rowIndex, sourceCell) {\r\n                var numCols = this.colsNum,\r\n                    table = this.table,\r\n                    row = table.insertRow(rowIndex), cell,\r\n                    isInsertTitle = typeof sourceCell == 'string' && sourceCell.toUpperCase() == 'TH';\r\n\r\n                function replaceTdToTh(colIndex, cell, tableRow) {\r\n                    if (colIndex == 0) {\r\n                        var tr = tableRow.nextSibling || tableRow.previousSibling,\r\n                            th = tr.cells[colIndex];\r\n                        if (th.tagName == 'TH') {\r\n                            th = cell.ownerDocument.createElement(\"th\");\r\n                            th.appendChild(cell.firstChild);\r\n                            tableRow.insertBefore(th, cell);\r\n                            domUtils.remove(cell)\r\n                        }\r\n                    } else {\r\n                        if (cell.tagName == 'TH') {\r\n                            var td = cell.ownerDocument.createElement(\"td\");\r\n                            td.appendChild(cell.firstChild);\r\n                            tableRow.insertBefore(td, cell);\r\n                            domUtils.remove(cell)\r\n                        }\r\n                    }\r\n                }\r\n\r\n                //首行直接插入,无需考虑部分单元格被rowspan的情况\r\n                if (rowIndex == 0 || rowIndex == this.rowsNum) {\r\n                    for (var colIndex = 0; colIndex < numCols; colIndex++) {\r\n                        cell = this.cloneCell(sourceCell, true);\r\n                        this.setCellContent(cell);\r\n                        cell.getAttribute('vAlign') && cell.setAttribute('vAlign', cell.getAttribute('vAlign'));\r\n                        row.appendChild(cell);\r\n                        if (!isInsertTitle) replaceTdToTh(colIndex, cell, row);\r\n                    }\r\n                } else {\r\n                    var infoRow = this.indexTable[rowIndex],\r\n                        cellIndex = 0;\r\n                    for (colIndex = 0; colIndex < numCols; colIndex++) {\r\n                        var cellInfo = infoRow[colIndex];\r\n                        //如果存在某个单元格的rowspan穿过待插入行的位置，则修改该单元格的rowspan即可，无需插入单元格\r\n                        if (cellInfo.rowIndex < rowIndex) {\r\n                            cell = this.getCell(cellInfo.rowIndex, cellInfo.cellIndex);\r\n                            cell.rowSpan = cellInfo.rowSpan + 1;\r\n                        } else {\r\n                            cell = this.cloneCell(sourceCell, true);\r\n                            this.setCellContent(cell);\r\n                            row.appendChild(cell);\r\n                        }\r\n                        if (!isInsertTitle) replaceTdToTh(colIndex, cell, row);\r\n                    }\r\n                }\r\n                //框选时插入不触发contentchange，需要手动更新索引。\r\n                this.update();\r\n                return row;\r\n            },\r\n            /**\r\n             * 删除一行单元格\r\n             * @param rowIndex\r\n             */\r\n            deleteRow: function (rowIndex) {\r\n                var row = this.table.rows[rowIndex],\r\n                    infoRow = this.indexTable[rowIndex],\r\n                    colsNum = this.colsNum,\r\n                    count = 0;     //处理计数\r\n                for (var colIndex = 0; colIndex < colsNum;) {\r\n                    var cellInfo = infoRow[colIndex],\r\n                        cell = this.getCell(cellInfo.rowIndex, cellInfo.cellIndex);\r\n                    if (cell.rowSpan > 1) {\r\n                        if (cellInfo.rowIndex == rowIndex) {\r\n                            var clone = cell.cloneNode(true);\r\n                            clone.rowSpan = cell.rowSpan - 1;\r\n                            clone.innerHTML = \"\";\r\n                            cell.rowSpan = 1;\r\n                            var nextRowIndex = rowIndex + 1,\r\n                                nextRow = this.table.rows[nextRowIndex],\r\n                                insertCellIndex,\r\n                                preMerged = this.getPreviewMergedCellsNum(nextRowIndex, colIndex) - count;\r\n                            if (preMerged < colIndex) {\r\n                                insertCellIndex = colIndex - preMerged - 1;\r\n                                //nextRow.insertCell(insertCellIndex);\r\n                                domUtils.insertAfter(nextRow.cells[insertCellIndex], clone);\r\n                            } else {\r\n                                if (nextRow.cells.length) nextRow.insertBefore(clone, nextRow.cells[0])\r\n                            }\r\n                            count += 1;\r\n                            //cell.parentNode.removeChild(cell);\r\n                        }\r\n                    }\r\n                    colIndex += cell.colSpan || 1;\r\n                }\r\n                var deleteTds = [], cacheMap = {};\r\n                for (colIndex = 0; colIndex < colsNum; colIndex++) {\r\n                    var tmpRowIndex = infoRow[colIndex].rowIndex,\r\n                        tmpCellIndex = infoRow[colIndex].cellIndex,\r\n                        key = tmpRowIndex + \"_\" + tmpCellIndex;\r\n                    if (cacheMap[key]) continue;\r\n                    cacheMap[key] = 1;\r\n                    cell = this.getCell(tmpRowIndex, tmpCellIndex);\r\n                    deleteTds.push(cell);\r\n                }\r\n                var mergeTds = [];\r\n                utils.each(deleteTds, function (td) {\r\n                    if (td.rowSpan == 1) {\r\n                        td.parentNode.removeChild(td);\r\n                    } else {\r\n                        mergeTds.push(td);\r\n                    }\r\n                });\r\n                utils.each(mergeTds, function (td) {\r\n                    td.rowSpan--;\r\n                });\r\n                row.parentNode.removeChild(row);\r\n                //浏览器方法本身存在bug,采用自定义方法删除\r\n                //this.table.deleteRow(rowIndex);\r\n                this.update();\r\n            },\r\n            insertCol: function (colIndex, sourceCell, defaultValue) {\r\n                var rowsNum = this.rowsNum,\r\n                    rowIndex = 0,\r\n                    tableRow, cell,\r\n                    backWidth = parseInt((this.table.offsetWidth - (this.colsNum + 1) * 20 - (this.colsNum + 1)) / (this.colsNum + 1), 10),\r\n                    isInsertTitleCol = typeof sourceCell == 'string' && sourceCell.toUpperCase() == 'TH';\r\n\r\n                function replaceTdToTh(rowIndex, cell, tableRow) {\r\n                    if (rowIndex == 0) {\r\n                        var th = cell.nextSibling || cell.previousSibling;\r\n                        if (th.tagName == 'TH') {\r\n                            th = cell.ownerDocument.createElement(\"th\");\r\n                            th.appendChild(cell.firstChild);\r\n                            tableRow.insertBefore(th, cell);\r\n                            domUtils.remove(cell)\r\n                        }\r\n                    } else {\r\n                        if (cell.tagName == 'TH') {\r\n                            var td = cell.ownerDocument.createElement(\"td\");\r\n                            td.appendChild(cell.firstChild);\r\n                            tableRow.insertBefore(td, cell);\r\n                            domUtils.remove(cell)\r\n                        }\r\n                    }\r\n                }\r\n\r\n                var preCell;\r\n                if (colIndex == 0 || colIndex == this.colsNum) {\r\n                    for (; rowIndex < rowsNum; rowIndex++) {\r\n                        tableRow = this.table.rows[rowIndex];\r\n                        preCell = tableRow.cells[colIndex == 0 ? colIndex : tableRow.cells.length];\r\n                        cell = this.cloneCell(sourceCell, true); //tableRow.insertCell(colIndex == 0 ? colIndex : tableRow.cells.length);\r\n                        this.setCellContent(cell);\r\n                        cell.setAttribute('vAlign', cell.getAttribute('vAlign'));\r\n                        preCell && cell.setAttribute('width', preCell.getAttribute('width'));\r\n                        if (!colIndex) {\r\n                            tableRow.insertBefore(cell, tableRow.cells[0]);\r\n                        } else {\r\n                            domUtils.insertAfter(tableRow.cells[tableRow.cells.length - 1], cell);\r\n                        }\r\n                        if (!isInsertTitleCol) replaceTdToTh(rowIndex, cell, tableRow)\r\n                    }\r\n                } else {\r\n                    for (; rowIndex < rowsNum; rowIndex++) {\r\n                        var cellInfo = this.indexTable[rowIndex][colIndex];\r\n                        if (cellInfo.colIndex < colIndex) {\r\n                            cell = this.getCell(cellInfo.rowIndex, cellInfo.cellIndex);\r\n                            cell.colSpan = cellInfo.colSpan + 1;\r\n                        } else {\r\n                            tableRow = this.table.rows[rowIndex];\r\n                            preCell = tableRow.cells[cellInfo.cellIndex];\r\n\r\n                            cell = this.cloneCell(sourceCell, true);//tableRow.insertCell(cellInfo.cellIndex);\r\n                            this.setCellContent(cell);\r\n                            cell.setAttribute('vAlign', cell.getAttribute('vAlign'));\r\n                            preCell && cell.setAttribute('width', preCell.getAttribute('width'));\r\n                            //防止IE下报错\r\n                            preCell ? tableRow.insertBefore(cell, preCell) : tableRow.appendChild(cell);\r\n                        }\r\n                        if (!isInsertTitleCol) replaceTdToTh(rowIndex, cell, tableRow);\r\n                    }\r\n                }\r\n                //框选时插入不触发contentchange，需要手动更新索引\r\n                this.update();\r\n                this.updateWidth(backWidth, defaultValue || { tdPadding: 10, tdBorder: 1 });\r\n            },\r\n            updateWidth: function (width, defaultValue) {\r\n                var table = this.table,\r\n                    tmpWidth = UETable.getWidth(table) - defaultValue.tdPadding * 2 - defaultValue.tdBorder + width;\r\n                if (tmpWidth < table.ownerDocument.body.offsetWidth) {\r\n                    table.setAttribute(\"width\", tmpWidth);\r\n                    return;\r\n                }\r\n                var tds = domUtils.getElementsByTagName(this.table, \"td th\");\r\n                utils.each(tds, function (td) {\r\n                    td.setAttribute(\"width\", width);\r\n                })\r\n            },\r\n            deleteCol: function (colIndex) {\r\n                var indexTable = this.indexTable,\r\n                    tableRows = this.table.rows,\r\n                    backTableWidth = this.table.getAttribute(\"width\"),\r\n                    backTdWidth = 0,\r\n                    rowsNum = this.rowsNum,\r\n                    cacheMap = {};\r\n                for (var rowIndex = 0; rowIndex < rowsNum;) {\r\n                    var infoRow = indexTable[rowIndex],\r\n                        cellInfo = infoRow[colIndex],\r\n                        key = cellInfo.rowIndex + '_' + cellInfo.colIndex;\r\n                    // 跳过已经处理过的Cell\r\n                    if (cacheMap[key]) continue;\r\n                    cacheMap[key] = 1;\r\n                    var cell = this.getCell(cellInfo.rowIndex, cellInfo.cellIndex);\r\n                    if (!backTdWidth) backTdWidth = cell && parseInt(cell.offsetWidth / cell.colSpan, 10).toFixed(0);\r\n                    // 如果Cell的colSpan大于1, 就修改colSpan, 否则就删掉这个Cell\r\n                    if (cell.colSpan > 1) {\r\n                        cell.colSpan--;\r\n                    } else {\r\n                        tableRows[rowIndex].deleteCell(cellInfo.cellIndex);\r\n                    }\r\n                    rowIndex += cellInfo.rowSpan || 1;\r\n                }\r\n                this.table.setAttribute(\"width\", backTableWidth - backTdWidth);\r\n                this.update();\r\n            },\r\n            splitToCells: function (cell) {\r\n                var me = this,\r\n                    cells = this.splitToRows(cell);\r\n                utils.each(cells, function (cell) {\r\n                    me.splitToCols(cell);\r\n                })\r\n            },\r\n            splitToRows: function (cell) {\r\n                var cellInfo = this.getCellInfo(cell),\r\n                    rowIndex = cellInfo.rowIndex,\r\n                    colIndex = cellInfo.colIndex,\r\n                    results = [];\r\n                // 修改Cell的rowSpan\r\n                cell.rowSpan = 1;\r\n                results.push(cell);\r\n                // 补齐单元格\r\n                for (var i = rowIndex, endRow = rowIndex + cellInfo.rowSpan; i < endRow; i++) {\r\n                    if (i == rowIndex) continue;\r\n                    var tableRow = this.table.rows[i],\r\n                        tmpCell = tableRow.insertCell(colIndex - this.getPreviewMergedCellsNum(i, colIndex));\r\n                    tmpCell.colSpan = cellInfo.colSpan;\r\n                    this.setCellContent(tmpCell);\r\n                    tmpCell.setAttribute('vAlign', cell.getAttribute('vAlign'));\r\n                    tmpCell.setAttribute('align', cell.getAttribute('align'));\r\n                    if (cell.style.cssText) {\r\n                        tmpCell.style.cssText = cell.style.cssText;\r\n                    }\r\n                    results.push(tmpCell);\r\n                }\r\n                this.update();\r\n                return results;\r\n            },\r\n            getPreviewMergedCellsNum: function (rowIndex, colIndex) {\r\n                var indexRow = this.indexTable[rowIndex],\r\n                    num = 0;\r\n                for (var i = 0; i < colIndex;) {\r\n                    var colSpan = indexRow[i].colSpan,\r\n                        tmpRowIndex = indexRow[i].rowIndex;\r\n                    num += (colSpan - (tmpRowIndex == rowIndex ? 1 : 0));\r\n                    i += colSpan;\r\n                }\r\n                return num;\r\n            },\r\n            splitToCols: function (cell) {\r\n                var backWidth = (cell.offsetWidth / cell.colSpan - 22).toFixed(0),\r\n\r\n                    cellInfo = this.getCellInfo(cell),\r\n                    rowIndex = cellInfo.rowIndex,\r\n                    colIndex = cellInfo.colIndex,\r\n                    results = [];\r\n                // 修改Cell的rowSpan\r\n                cell.colSpan = 1;\r\n                cell.setAttribute(\"width\", backWidth);\r\n                results.push(cell);\r\n                // 补齐单元格\r\n                for (var j = colIndex, endCol = colIndex + cellInfo.colSpan; j < endCol; j++) {\r\n                    if (j == colIndex) continue;\r\n                    var tableRow = this.table.rows[rowIndex],\r\n                        tmpCell = tableRow.insertCell(this.indexTable[rowIndex][j].cellIndex + 1);\r\n                    tmpCell.rowSpan = cellInfo.rowSpan;\r\n                    this.setCellContent(tmpCell);\r\n                    tmpCell.setAttribute('vAlign', cell.getAttribute('vAlign'));\r\n                    tmpCell.setAttribute('align', cell.getAttribute('align'));\r\n                    tmpCell.setAttribute('width', backWidth);\r\n                    if (cell.style.cssText) {\r\n                        tmpCell.style.cssText = cell.style.cssText;\r\n                    }\r\n                    //处理th的情况\r\n                    if (cell.tagName == 'TH') {\r\n                        var th = cell.ownerDocument.createElement('th');\r\n                        th.appendChild(tmpCell.firstChild);\r\n                        th.setAttribute('vAlign', cell.getAttribute('vAlign'));\r\n                        th.rowSpan = tmpCell.rowSpan;\r\n                        tableRow.insertBefore(th, tmpCell);\r\n                        domUtils.remove(tmpCell);\r\n                    }\r\n                    results.push(tmpCell);\r\n                }\r\n                this.update();\r\n                return results;\r\n            },\r\n            isLastCell: function (cell, rowsNum, colsNum) {\r\n                rowsNum = rowsNum || this.rowsNum;\r\n                colsNum = colsNum || this.colsNum;\r\n                var cellInfo = this.getCellInfo(cell);\r\n                return ((cellInfo.rowIndex + cellInfo.rowSpan) == rowsNum) &&\r\n                    ((cellInfo.colIndex + cellInfo.colSpan) == colsNum);\r\n            },\r\n            getLastCell: function (cells) {\r\n                cells = cells || this.table.getElementsByTagName(\"td\");\r\n                var firstInfo = this.getCellInfo(cells[0]);\r\n                var me = this, last = cells[0],\r\n                    tr = last.parentNode,\r\n                    cellsNum = 0, cols = 0, rows;\r\n                utils.each(cells, function (cell) {\r\n                    if (cell.parentNode == tr) cols += cell.colSpan || 1;\r\n                    cellsNum += cell.rowSpan * cell.colSpan || 1;\r\n                });\r\n                rows = cellsNum / cols;\r\n                utils.each(cells, function (cell) {\r\n                    if (me.isLastCell(cell, rows, cols)) {\r\n                        last = cell;\r\n                        return false;\r\n                    }\r\n                });\r\n                return last;\r\n\r\n            },\r\n            selectRow: function (rowIndex) {\r\n                var indexRow = this.indexTable[rowIndex],\r\n                    start = this.getCell(indexRow[0].rowIndex, indexRow[0].cellIndex),\r\n                    end = this.getCell(indexRow[this.colsNum - 1].rowIndex, indexRow[this.colsNum - 1].cellIndex),\r\n                    range = this.getCellsRange(start, end);\r\n                this.setSelected(range);\r\n            },\r\n            selectTable: function () {\r\n                var tds = this.table.getElementsByTagName(\"td\"),\r\n                    range = this.getCellsRange(tds[0], tds[tds.length - 1]);\r\n                this.setSelected(range);\r\n            },\r\n            setBackground: function (cells, value) {\r\n                if (typeof value === \"string\") {\r\n                    utils.each(cells, function (cell) {\r\n                        cell.style.backgroundColor = value;\r\n                    })\r\n                } else if (typeof value === \"object\") {\r\n                    value = utils.extend({\r\n                        repeat: true,\r\n                        colorList: [\"#ddd\", \"#fff\"]\r\n                    }, value);\r\n                    var rowIndex = this.getCellInfo(cells[0]).rowIndex,\r\n                        count = 0,\r\n                        colors = value.colorList,\r\n                        getColor = function (list, index, repeat) {\r\n                            return list[index] ? list[index] : repeat ? list[index % list.length] : \"\";\r\n                        };\r\n                    for (var i = 0, cell; cell = cells[i++];) {\r\n                        var cellInfo = this.getCellInfo(cell);\r\n                        cell.style.backgroundColor = getColor(colors, ((rowIndex + count) == cellInfo.rowIndex) ? count : ++count, value.repeat);\r\n                    }\r\n                }\r\n            },\r\n            removeBackground: function (cells) {\r\n                utils.each(cells, function (cell) {\r\n                    cell.style.backgroundColor = \"\";\r\n                })\r\n            }\r\n\r\n\r\n        };\r\n        function showError(e) {\r\n        }\r\n    })();\r\n\r\n    // plugins/table.cmds.js\r\n    /**\r\n     * Created with JetBrains PhpStorm.\r\n     * User: taoqili\r\n     * Date: 13-2-20\r\n     * Time: 下午6:25\r\n     * To change this template use File | Settings | File Templates.\r\n     */\r\n    ;\r\n    (function () {\r\n        var UT = UE.UETable,\r\n            getTableItemsByRange = function (editor) {\r\n                return UT.getTableItemsByRange(editor);\r\n            },\r\n            getUETableBySelected = function (editor) {\r\n                return UT.getUETableBySelected(editor)\r\n            },\r\n            getDefaultValue = function (editor, table) {\r\n                return UT.getDefaultValue(editor, table);\r\n            },\r\n            getUETable = function (tdOrTable) {\r\n                return UT.getUETable(tdOrTable);\r\n            };\r\n\r\n\r\n        UE.commands['inserttable'] = {\r\n            queryCommandState: function () {\r\n                return getTableItemsByRange(this).table ? -1 : 0;\r\n            },\r\n            execCommand: function (cmd, opt) {\r\n                function createTable(opt, tdWidth) {\r\n                    var html = [],\r\n                        rowsNum = opt.numRows,\r\n                        colsNum = opt.numCols;\r\n                    for (var r = 0; r < rowsNum; r++) {\r\n                        html.push('<tr' + (r == 0 ? ' class=\"firstRow\"' : '') + '>');\r\n                        for (var c = 0; c < colsNum; c++) {\r\n                            html.push('<td width=\"' + tdWidth + '\"  vAlign=\"' + opt.tdvalign + '\" >' + (browser.ie && browser.version < 11 ? domUtils.fillChar : '<br/>') + '</td>')\r\n                        }\r\n                        html.push('</tr>')\r\n                    }\r\n                    //禁止指定table-width\r\n                    return '<table><tbody>' + html.join('') + '</tbody></table>'\r\n                }\r\n\r\n                if (!opt) {\r\n                    opt = utils.extend({}, {\r\n                        numCols: this.options.defaultCols,\r\n                        numRows: this.options.defaultRows,\r\n                        tdvalign: this.options.tdvalign\r\n                    })\r\n                }\r\n                var me = this;\r\n                var range = this.selection.getRange(),\r\n                    start = range.startContainer,\r\n                    firstParentBlock = domUtils.findParent(start, function (node) {\r\n                        return domUtils.isBlockElm(node);\r\n                    }, true) || me.body;\r\n\r\n                var defaultValue = getDefaultValue(me),\r\n                    tableWidth = firstParentBlock.offsetWidth,\r\n                    tdWidth = Math.floor(tableWidth / opt.numCols - defaultValue.tdPadding * 2 - defaultValue.tdBorder);\r\n\r\n                //todo其他属性\r\n                !opt.tdvalign && (opt.tdvalign = me.options.tdvalign);\r\n                me.execCommand(\"inserthtml\", createTable(opt, tdWidth));\r\n            }\r\n        };\r\n\r\n        UE.commands['insertparagraphbeforetable'] = {\r\n            queryCommandState: function () {\r\n                return getTableItemsByRange(this).cell ? 0 : -1;\r\n            },\r\n            execCommand: function () {\r\n                var table = getTableItemsByRange(this).table;\r\n                if (table) {\r\n                    var p = this.document.createElement(\"p\");\r\n                    p.innerHTML = browser.ie ? '&nbsp;' : '<br />';\r\n                    table.parentNode.insertBefore(p, table);\r\n                    this.selection.getRange().setStart(p, 0).setCursor();\r\n                }\r\n            }\r\n        };\r\n\r\n        UE.commands['deletetable'] = {\r\n            queryCommandState: function () {\r\n                var rng = this.selection.getRange();\r\n                return domUtils.findParentByTagName(rng.startContainer, 'table', true) ? 0 : -1;\r\n            },\r\n            execCommand: function (cmd, table) {\r\n                var rng = this.selection.getRange();\r\n                table = table || domUtils.findParentByTagName(rng.startContainer, 'table', true);\r\n                if (table) {\r\n                    var next = table.nextSibling;\r\n                    if (!next) {\r\n                        next = domUtils.createElement(this.document, 'p', {\r\n                            'innerHTML': browser.ie ? domUtils.fillChar : '<br/>'\r\n                        });\r\n                        table.parentNode.insertBefore(next, table);\r\n                    }\r\n                    domUtils.remove(table);\r\n                    rng = this.selection.getRange();\r\n                    if (next.nodeType == 3) {\r\n                        rng.setStartBefore(next)\r\n                    } else {\r\n                        rng.setStart(next, 0)\r\n                    }\r\n                    rng.setCursor(false, true)\r\n                    this.fireEvent(\"tablehasdeleted\")\r\n\r\n                }\r\n\r\n            }\r\n        };\r\n        UE.commands['cellalign'] = {\r\n            queryCommandState: function () {\r\n                return getSelectedArr(this).length ? 0 : -1\r\n            },\r\n            execCommand: function (cmd, align) {\r\n                var selectedTds = getSelectedArr(this);\r\n                if (selectedTds.length) {\r\n                    for (var i = 0, ci; ci = selectedTds[i++];) {\r\n                        ci.setAttribute('align', align);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        UE.commands['cellvalign'] = {\r\n            queryCommandState: function () {\r\n                return getSelectedArr(this).length ? 0 : -1;\r\n            },\r\n            execCommand: function (cmd, valign) {\r\n                var selectedTds = getSelectedArr(this);\r\n                if (selectedTds.length) {\r\n                    for (var i = 0, ci; ci = selectedTds[i++];) {\r\n                        ci.setAttribute('vAlign', valign);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        UE.commands['insertcaption'] = {\r\n            queryCommandState: function () {\r\n                var table = getTableItemsByRange(this).table;\r\n                if (table) {\r\n                    return table.getElementsByTagName('caption').length == 0 ? 1 : -1;\r\n                }\r\n                return -1;\r\n            },\r\n            execCommand: function () {\r\n                var table = getTableItemsByRange(this).table;\r\n                if (table) {\r\n                    var caption = this.document.createElement('caption');\r\n                    caption.innerHTML = browser.ie ? domUtils.fillChar : '<br/>';\r\n                    table.insertBefore(caption, table.firstChild);\r\n                    var range = this.selection.getRange();\r\n                    range.setStart(caption, 0).setCursor();\r\n                }\r\n\r\n            }\r\n        };\r\n        UE.commands['deletecaption'] = {\r\n            queryCommandState: function () {\r\n                var rng = this.selection.getRange(),\r\n                    table = domUtils.findParentByTagName(rng.startContainer, 'table');\r\n                if (table) {\r\n                    return table.getElementsByTagName('caption').length == 0 ? -1 : 1;\r\n                }\r\n                return -1;\r\n            },\r\n            execCommand: function () {\r\n                var rng = this.selection.getRange(),\r\n                    table = domUtils.findParentByTagName(rng.startContainer, 'table');\r\n                if (table) {\r\n                    domUtils.remove(table.getElementsByTagName('caption')[0]);\r\n                    var range = this.selection.getRange();\r\n                    range.setStart(table.rows[0].cells[0], 0).setCursor();\r\n                }\r\n\r\n            }\r\n        };\r\n        UE.commands['inserttitle'] = {\r\n            queryCommandState: function () {\r\n                var table = getTableItemsByRange(this).table;\r\n                if (table) {\r\n                    var firstRow = table.rows[0];\r\n                    return firstRow.cells[firstRow.cells.length - 1].tagName.toLowerCase() != 'th' ? 0 : -1\r\n                }\r\n                return -1;\r\n            },\r\n            execCommand: function () {\r\n                var table = getTableItemsByRange(this).table;\r\n                if (table) {\r\n                    getUETable(table).insertRow(0, 'th');\r\n                }\r\n                var th = table.getElementsByTagName('th')[0];\r\n                this.selection.getRange().setStart(th, 0).setCursor(false, true);\r\n            }\r\n        };\r\n        UE.commands['deletetitle'] = {\r\n            queryCommandState: function () {\r\n                var table = getTableItemsByRange(this).table;\r\n                if (table) {\r\n                    var firstRow = table.rows[0];\r\n                    return firstRow.cells[firstRow.cells.length - 1].tagName.toLowerCase() == 'th' ? 0 : -1\r\n                }\r\n                return -1;\r\n            },\r\n            execCommand: function () {\r\n                var table = getTableItemsByRange(this).table;\r\n                if (table) {\r\n                    domUtils.remove(table.rows[0])\r\n                }\r\n                var td = table.getElementsByTagName('td')[0];\r\n                this.selection.getRange().setStart(td, 0).setCursor(false, true);\r\n            }\r\n        };\r\n        UE.commands['inserttitlecol'] = {\r\n            queryCommandState: function () {\r\n                var table = getTableItemsByRange(this).table;\r\n                if (table) {\r\n                    var lastRow = table.rows[table.rows.length - 1];\r\n                    return lastRow.getElementsByTagName('th').length ? -1 : 0;\r\n                }\r\n                return -1;\r\n            },\r\n            execCommand: function (cmd) {\r\n                var table = getTableItemsByRange(this).table;\r\n                if (table) {\r\n                    getUETable(table).insertCol(0, 'th');\r\n                }\r\n                resetTdWidth(table, this);\r\n                var th = table.getElementsByTagName('th')[0];\r\n                this.selection.getRange().setStart(th, 0).setCursor(false, true);\r\n            }\r\n        };\r\n        UE.commands['deletetitlecol'] = {\r\n            queryCommandState: function () {\r\n                var table = getTableItemsByRange(this).table;\r\n                if (table) {\r\n                    var lastRow = table.rows[table.rows.length - 1];\r\n                    return lastRow.getElementsByTagName('th').length ? 0 : -1;\r\n                }\r\n                return -1;\r\n            },\r\n            execCommand: function () {\r\n                var table = getTableItemsByRange(this).table;\r\n                if (table) {\r\n                    for (var i = 0; i < table.rows.length; i++) {\r\n                        domUtils.remove(table.rows[i].children[0])\r\n                    }\r\n                }\r\n                resetTdWidth(table, this);\r\n                var td = table.getElementsByTagName('td')[0];\r\n                this.selection.getRange().setStart(td, 0).setCursor(false, true);\r\n            }\r\n        };\r\n\r\n        UE.commands[\"mergeright\"] = {\r\n            queryCommandState: function (cmd) {\r\n                var tableItems = getTableItemsByRange(this),\r\n                    table = tableItems.table,\r\n                    cell = tableItems.cell;\r\n\r\n                if (!table || !cell) return -1;\r\n                var ut = getUETable(table);\r\n                if (ut.selectedTds.length) return -1;\r\n\r\n                var cellInfo = ut.getCellInfo(cell),\r\n                    rightColIndex = cellInfo.colIndex + cellInfo.colSpan;\r\n                if (rightColIndex >= ut.colsNum) return -1; // 如果处于最右边则不能向右合并\r\n\r\n                var rightCellInfo = ut.indexTable[cellInfo.rowIndex][rightColIndex],\r\n                    rightCell = table.rows[rightCellInfo.rowIndex].cells[rightCellInfo.cellIndex];\r\n                if (!rightCell || cell.tagName != rightCell.tagName) return -1; // TH和TD不能相互合并\r\n\r\n                // 当且仅当两个Cell的开始列号和结束列号一致时能进行合并\r\n                return (rightCellInfo.rowIndex == cellInfo.rowIndex && rightCellInfo.rowSpan == cellInfo.rowSpan) ? 0 : -1;\r\n            },\r\n            execCommand: function (cmd) {\r\n                var rng = this.selection.getRange(),\r\n                    bk = rng.createBookmark(true);\r\n                var cell = getTableItemsByRange(this).cell,\r\n                    ut = getUETable(cell);\r\n                ut.mergeRight(cell);\r\n                rng.moveToBookmark(bk).select();\r\n            }\r\n        };\r\n        UE.commands[\"mergedown\"] = {\r\n            queryCommandState: function (cmd) {\r\n                var tableItems = getTableItemsByRange(this),\r\n                    table = tableItems.table,\r\n                    cell = tableItems.cell;\r\n\r\n                if (!table || !cell) return -1;\r\n                var ut = getUETable(table);\r\n                if (ut.selectedTds.length) return -1;\r\n\r\n                var cellInfo = ut.getCellInfo(cell),\r\n                    downRowIndex = cellInfo.rowIndex + cellInfo.rowSpan;\r\n                if (downRowIndex >= ut.rowsNum) return -1; // 如果处于最下边则不能向下合并\r\n\r\n                var downCellInfo = ut.indexTable[downRowIndex][cellInfo.colIndex],\r\n                    downCell = table.rows[downCellInfo.rowIndex].cells[downCellInfo.cellIndex];\r\n                if (!downCell || cell.tagName != downCell.tagName) return -1; // TH和TD不能相互合并\r\n\r\n                // 当且仅当两个Cell的开始列号和结束列号一致时能进行合并\r\n                return (downCellInfo.colIndex == cellInfo.colIndex && downCellInfo.colSpan == cellInfo.colSpan) ? 0 : -1;\r\n            },\r\n            execCommand: function () {\r\n                var rng = this.selection.getRange(),\r\n                    bk = rng.createBookmark(true);\r\n                var cell = getTableItemsByRange(this).cell,\r\n                    ut = getUETable(cell);\r\n                ut.mergeDown(cell);\r\n                rng.moveToBookmark(bk).select();\r\n            }\r\n        };\r\n        UE.commands[\"mergecells\"] = {\r\n            queryCommandState: function () {\r\n                return getUETableBySelected(this) ? 0 : -1;\r\n            },\r\n            execCommand: function () {\r\n                var ut = getUETableBySelected(this);\r\n                if (ut && ut.selectedTds.length) {\r\n                    var cell = ut.selectedTds[0];\r\n                    ut.mergeRange();\r\n                    var rng = this.selection.getRange();\r\n                    if (domUtils.isEmptyBlock(cell)) {\r\n                        rng.setStart(cell, 0).collapse(true)\r\n                    } else {\r\n                        rng.selectNodeContents(cell)\r\n                    }\r\n                    rng.select();\r\n                }\r\n\r\n\r\n            }\r\n        };\r\n        UE.commands[\"insertrow\"] = {\r\n            queryCommandState: function () {\r\n                var tableItems = getTableItemsByRange(this),\r\n                    cell = tableItems.cell;\r\n                return cell && (cell.tagName == \"TD\" || (cell.tagName == 'TH' && tableItems.tr !== tableItems.table.rows[0])) &&\r\n                    getUETable(tableItems.table).rowsNum < this.options.maxRowNum ? 0 : -1;\r\n            },\r\n            execCommand: function () {\r\n                var rng = this.selection.getRange(),\r\n                    bk = rng.createBookmark(true);\r\n                var tableItems = getTableItemsByRange(this),\r\n                    cell = tableItems.cell,\r\n                    table = tableItems.table,\r\n                    ut = getUETable(table),\r\n                    cellInfo = ut.getCellInfo(cell);\r\n                //ut.insertRow(!ut.selectedTds.length ? cellInfo.rowIndex:ut.cellsRange.beginRowIndex,'');\r\n                if (!ut.selectedTds.length) {\r\n                    ut.insertRow(cellInfo.rowIndex, cell);\r\n                } else {\r\n                    var range = ut.cellsRange;\r\n                    for (var i = 0, len = range.endRowIndex - range.beginRowIndex + 1; i < len; i++) {\r\n                        ut.insertRow(range.beginRowIndex, cell);\r\n                    }\r\n                }\r\n                rng.moveToBookmark(bk).select();\r\n                if (table.getAttribute(\"interlaced\") === \"enabled\") this.fireEvent(\"interlacetable\", table);\r\n            }\r\n        };\r\n        //后插入行\r\n        UE.commands[\"insertrownext\"] = {\r\n            queryCommandState: function () {\r\n                var tableItems = getTableItemsByRange(this),\r\n                    cell = tableItems.cell;\r\n                return cell && (cell.tagName == \"TD\") && getUETable(tableItems.table).rowsNum < this.options.maxRowNum ? 0 : -1;\r\n            },\r\n            execCommand: function () {\r\n                var rng = this.selection.getRange(),\r\n                    bk = rng.createBookmark(true);\r\n                var tableItems = getTableItemsByRange(this),\r\n                    cell = tableItems.cell,\r\n                    table = tableItems.table,\r\n                    ut = getUETable(table),\r\n                    cellInfo = ut.getCellInfo(cell);\r\n                //ut.insertRow(!ut.selectedTds.length? cellInfo.rowIndex + cellInfo.rowSpan : ut.cellsRange.endRowIndex + 1,'');\r\n                if (!ut.selectedTds.length) {\r\n                    ut.insertRow(cellInfo.rowIndex + cellInfo.rowSpan, cell);\r\n                } else {\r\n                    var range = ut.cellsRange;\r\n                    for (var i = 0, len = range.endRowIndex - range.beginRowIndex + 1; i < len; i++) {\r\n                        ut.insertRow(range.endRowIndex + 1, cell);\r\n                    }\r\n                }\r\n                rng.moveToBookmark(bk).select();\r\n                if (table.getAttribute(\"interlaced\") === \"enabled\") this.fireEvent(\"interlacetable\", table);\r\n            }\r\n        };\r\n        UE.commands[\"deleterow\"] = {\r\n            queryCommandState: function () {\r\n                var tableItems = getTableItemsByRange(this);\r\n                return tableItems.cell ? 0 : -1;\r\n            },\r\n            execCommand: function () {\r\n                var cell = getTableItemsByRange(this).cell,\r\n                    ut = getUETable(cell),\r\n                    cellsRange = ut.cellsRange,\r\n                    cellInfo = ut.getCellInfo(cell),\r\n                    preCell = ut.getVSideCell(cell),\r\n                    nextCell = ut.getVSideCell(cell, true),\r\n                    rng = this.selection.getRange();\r\n                if (utils.isEmptyObject(cellsRange)) {\r\n                    ut.deleteRow(cellInfo.rowIndex);\r\n                } else {\r\n                    for (var i = cellsRange.beginRowIndex; i < cellsRange.endRowIndex + 1; i++) {\r\n                        ut.deleteRow(cellsRange.beginRowIndex);\r\n                    }\r\n                }\r\n                var table = ut.table;\r\n                if (!table.getElementsByTagName('td').length) {\r\n                    var nextSibling = table.nextSibling;\r\n                    domUtils.remove(table);\r\n                    if (nextSibling) {\r\n                        rng.setStart(nextSibling, 0).setCursor(false, true);\r\n                    }\r\n                } else {\r\n                    if (cellInfo.rowSpan == 1 || cellInfo.rowSpan == cellsRange.endRowIndex - cellsRange.beginRowIndex + 1) {\r\n                        if (nextCell || preCell) rng.selectNodeContents(nextCell || preCell).setCursor(false, true);\r\n                    } else {\r\n                        var newCell = ut.getCell(cellInfo.rowIndex, ut.indexTable[cellInfo.rowIndex][cellInfo.colIndex].cellIndex);\r\n                        if (newCell) rng.selectNodeContents(newCell).setCursor(false, true);\r\n                    }\r\n                }\r\n                if (table.getAttribute(\"interlaced\") === \"enabled\") this.fireEvent(\"interlacetable\", table);\r\n            }\r\n        };\r\n        UE.commands[\"insertcol\"] = {\r\n            queryCommandState: function (cmd) {\r\n                var tableItems = getTableItemsByRange(this),\r\n                    cell = tableItems.cell;\r\n                return cell && (cell.tagName == \"TD\" || (cell.tagName == 'TH' && cell !== tableItems.tr.cells[0])) &&\r\n                    getUETable(tableItems.table).colsNum < this.options.maxColNum ? 0 : -1;\r\n            },\r\n            execCommand: function (cmd) {\r\n                var rng = this.selection.getRange(),\r\n                    bk = rng.createBookmark(true);\r\n                if (this.queryCommandState(cmd) == -1) return;\r\n                var cell = getTableItemsByRange(this).cell,\r\n                    ut = getUETable(cell),\r\n                    cellInfo = ut.getCellInfo(cell);\r\n\r\n                //ut.insertCol(!ut.selectedTds.length ? cellInfo.colIndex:ut.cellsRange.beginColIndex);\r\n                if (!ut.selectedTds.length) {\r\n                    ut.insertCol(cellInfo.colIndex, cell);\r\n                } else {\r\n                    var range = ut.cellsRange;\r\n                    for (var i = 0, len = range.endColIndex - range.beginColIndex + 1; i < len; i++) {\r\n                        ut.insertCol(range.beginColIndex, cell);\r\n                    }\r\n                }\r\n                rng.moveToBookmark(bk).select(true);\r\n            }\r\n        };\r\n        UE.commands[\"insertcolnext\"] = {\r\n            queryCommandState: function () {\r\n                var tableItems = getTableItemsByRange(this),\r\n                    cell = tableItems.cell;\r\n                return cell && getUETable(tableItems.table).colsNum < this.options.maxColNum ? 0 : -1;\r\n            },\r\n            execCommand: function () {\r\n                var rng = this.selection.getRange(),\r\n                    bk = rng.createBookmark(true);\r\n                var cell = getTableItemsByRange(this).cell,\r\n                    ut = getUETable(cell),\r\n                    cellInfo = ut.getCellInfo(cell);\r\n                //ut.insertCol(!ut.selectedTds.length ? cellInfo.colIndex + cellInfo.colSpan:ut.cellsRange.endColIndex +1);\r\n                if (!ut.selectedTds.length) {\r\n                    ut.insertCol(cellInfo.colIndex + cellInfo.colSpan, cell);\r\n                } else {\r\n                    var range = ut.cellsRange;\r\n                    for (var i = 0, len = range.endColIndex - range.beginColIndex + 1; i < len; i++) {\r\n                        ut.insertCol(range.endColIndex + 1, cell);\r\n                    }\r\n                }\r\n                rng.moveToBookmark(bk).select();\r\n            }\r\n        };\r\n\r\n        UE.commands[\"deletecol\"] = {\r\n            queryCommandState: function () {\r\n                var tableItems = getTableItemsByRange(this);\r\n                return tableItems.cell ? 0 : -1;\r\n            },\r\n            execCommand: function () {\r\n                var cell = getTableItemsByRange(this).cell,\r\n                    ut = getUETable(cell),\r\n                    range = ut.cellsRange,\r\n                    cellInfo = ut.getCellInfo(cell),\r\n                    preCell = ut.getHSideCell(cell),\r\n                    nextCell = ut.getHSideCell(cell, true);\r\n                if (utils.isEmptyObject(range)) {\r\n                    ut.deleteCol(cellInfo.colIndex);\r\n                } else {\r\n                    for (var i = range.beginColIndex; i < range.endColIndex + 1; i++) {\r\n                        ut.deleteCol(range.beginColIndex);\r\n                    }\r\n                }\r\n                var table = ut.table,\r\n                    rng = this.selection.getRange();\r\n\r\n                if (!table.getElementsByTagName('td').length) {\r\n                    var nextSibling = table.nextSibling;\r\n                    domUtils.remove(table);\r\n                    if (nextSibling) {\r\n                        rng.setStart(nextSibling, 0).setCursor(false, true);\r\n                    }\r\n                } else {\r\n                    if (domUtils.inDoc(cell, this.document)) {\r\n                        rng.setStart(cell, 0).setCursor(false, true);\r\n                    } else {\r\n                        if (nextCell && domUtils.inDoc(nextCell, this.document)) {\r\n                            rng.selectNodeContents(nextCell).setCursor(false, true);\r\n                        } else {\r\n                            if (preCell && domUtils.inDoc(preCell, this.document)) {\r\n                                rng.selectNodeContents(preCell).setCursor(true, true);\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        UE.commands[\"splittocells\"] = {\r\n            queryCommandState: function () {\r\n                var tableItems = getTableItemsByRange(this),\r\n                    cell = tableItems.cell;\r\n                if (!cell) return -1;\r\n                var ut = getUETable(tableItems.table);\r\n                if (ut.selectedTds.length > 0) return -1;\r\n                return cell && (cell.colSpan > 1 || cell.rowSpan > 1) ? 0 : -1;\r\n            },\r\n            execCommand: function () {\r\n                var rng = this.selection.getRange(),\r\n                    bk = rng.createBookmark(true);\r\n                var cell = getTableItemsByRange(this).cell,\r\n                    ut = getUETable(cell);\r\n                ut.splitToCells(cell);\r\n                rng.moveToBookmark(bk).select();\r\n            }\r\n        };\r\n        UE.commands[\"splittorows\"] = {\r\n            queryCommandState: function () {\r\n                var tableItems = getTableItemsByRange(this),\r\n                    cell = tableItems.cell;\r\n                if (!cell) return -1;\r\n                var ut = getUETable(tableItems.table);\r\n                if (ut.selectedTds.length > 0) return -1;\r\n                return cell && cell.rowSpan > 1 ? 0 : -1;\r\n            },\r\n            execCommand: function () {\r\n                var rng = this.selection.getRange(),\r\n                    bk = rng.createBookmark(true);\r\n                var cell = getTableItemsByRange(this).cell,\r\n                    ut = getUETable(cell);\r\n                ut.splitToRows(cell);\r\n                rng.moveToBookmark(bk).select();\r\n            }\r\n        };\r\n        UE.commands[\"splittocols\"] = {\r\n            queryCommandState: function () {\r\n                var tableItems = getTableItemsByRange(this),\r\n                    cell = tableItems.cell;\r\n                if (!cell) return -1;\r\n                var ut = getUETable(tableItems.table);\r\n                if (ut.selectedTds.length > 0) return -1;\r\n                return cell && cell.colSpan > 1 ? 0 : -1;\r\n            },\r\n            execCommand: function () {\r\n                var rng = this.selection.getRange(),\r\n                    bk = rng.createBookmark(true);\r\n                var cell = getTableItemsByRange(this).cell,\r\n                    ut = getUETable(cell);\r\n                ut.splitToCols(cell);\r\n                rng.moveToBookmark(bk).select();\r\n\r\n            }\r\n        };\r\n\r\n        UE.commands[\"adaptbytext\"] =\r\n            UE.commands[\"adaptbywindow\"] = {\r\n                queryCommandState: function () {\r\n                    return getTableItemsByRange(this).table ? 0 : -1\r\n                },\r\n                execCommand: function (cmd) {\r\n                    var tableItems = getTableItemsByRange(this),\r\n                        table = tableItems.table;\r\n                    if (table) {\r\n                        if (cmd == 'adaptbywindow') {\r\n                            resetTdWidth(table, this);\r\n                        } else {\r\n                            var cells = domUtils.getElementsByTagName(table, \"td th\");\r\n                            utils.each(cells, function (cell) {\r\n                                cell.removeAttribute(\"width\");\r\n                            });\r\n                            table.removeAttribute(\"width\");\r\n                        }\r\n                    }\r\n                }\r\n            };\r\n\r\n        //平均分配各列\r\n        UE.commands['averagedistributecol'] = {\r\n            queryCommandState: function () {\r\n                var ut = getUETableBySelected(this);\r\n                if (!ut) return -1;\r\n                return ut.isFullRow() || ut.isFullCol() ? 0 : -1;\r\n            },\r\n            execCommand: function (cmd) {\r\n                var me = this,\r\n                    ut = getUETableBySelected(me);\r\n\r\n                function getAverageWidth() {\r\n                    var tb = ut.table,\r\n                        averageWidth, sumWidth = 0, colsNum = 0,\r\n                        tbAttr = getDefaultValue(me, tb);\r\n\r\n                    if (ut.isFullRow()) {\r\n                        sumWidth = tb.offsetWidth;\r\n                        colsNum = ut.colsNum;\r\n                    } else {\r\n                        var begin = ut.cellsRange.beginColIndex,\r\n                            end = ut.cellsRange.endColIndex,\r\n                            node;\r\n                        for (var i = begin; i <= end;) {\r\n                            node = ut.selectedTds[i];\r\n                            sumWidth += node.offsetWidth;\r\n                            i += node.colSpan;\r\n                            colsNum += 1;\r\n                        }\r\n                    }\r\n                    averageWidth = Math.ceil(sumWidth / colsNum) - tbAttr.tdBorder * 2 - tbAttr.tdPadding * 2;\r\n                    return averageWidth;\r\n                }\r\n\r\n                function setAverageWidth(averageWidth) {\r\n                    utils.each(domUtils.getElementsByTagName(ut.table, \"th\"), function (node) {\r\n                        node.setAttribute(\"width\", \"\");\r\n                    });\r\n                    var cells = ut.isFullRow() ? domUtils.getElementsByTagName(ut.table, \"td\") : ut.selectedTds;\r\n\r\n                    utils.each(cells, function (node) {\r\n                        if (node.colSpan == 1) {\r\n                            node.setAttribute(\"width\", averageWidth);\r\n                        }\r\n                    });\r\n                }\r\n\r\n                if (ut && ut.selectedTds.length) {\r\n                    setAverageWidth(getAverageWidth());\r\n                }\r\n            }\r\n        };\r\n        //平均分配各行\r\n        UE.commands['averagedistributerow'] = {\r\n            queryCommandState: function () {\r\n                var ut = getUETableBySelected(this);\r\n                if (!ut) return -1;\r\n                if (ut.selectedTds && /th/ig.test(ut.selectedTds[0].tagName)) return -1;\r\n                return ut.isFullRow() || ut.isFullCol() ? 0 : -1;\r\n            },\r\n            execCommand: function (cmd) {\r\n                var me = this,\r\n                    ut = getUETableBySelected(me);\r\n\r\n                function getAverageHeight() {\r\n                    var averageHeight, rowNum, sumHeight = 0,\r\n                        tb = ut.table,\r\n                        tbAttr = getDefaultValue(me, tb),\r\n                        tdpadding = parseInt(domUtils.getComputedStyle(tb.getElementsByTagName('td')[0], \"padding-top\"));\r\n\r\n                    if (ut.isFullCol()) {\r\n                        var captionArr = domUtils.getElementsByTagName(tb, \"caption\"),\r\n                            thArr = domUtils.getElementsByTagName(tb, \"th\"),\r\n                            captionHeight, thHeight;\r\n\r\n                        if (captionArr.length > 0) {\r\n                            captionHeight = captionArr[0].offsetHeight;\r\n                        }\r\n                        if (thArr.length > 0) {\r\n                            thHeight = thArr[0].offsetHeight;\r\n                        }\r\n\r\n                        sumHeight = tb.offsetHeight - (captionHeight || 0) - (thHeight || 0);\r\n                        rowNum = thArr.length == 0 ? ut.rowsNum : (ut.rowsNum - 1);\r\n                    } else {\r\n                        var begin = ut.cellsRange.beginRowIndex,\r\n                            end = ut.cellsRange.endRowIndex,\r\n                            count = 0,\r\n                            trs = domUtils.getElementsByTagName(tb, \"tr\");\r\n                        for (var i = begin; i <= end; i++) {\r\n                            sumHeight += trs[i].offsetHeight;\r\n                            count += 1;\r\n                        }\r\n                        rowNum = count;\r\n                    }\r\n                    //ie8下是混杂模式\r\n                    if (browser.ie && browser.version < 9) {\r\n                        averageHeight = Math.ceil(sumHeight / rowNum);\r\n                    } else {\r\n                        averageHeight = Math.ceil(sumHeight / rowNum) - tbAttr.tdBorder * 2 - tdpadding * 2;\r\n                    }\r\n                    return averageHeight;\r\n                }\r\n\r\n                function setAverageHeight(averageHeight) {\r\n                    var cells = ut.isFullCol() ? domUtils.getElementsByTagName(ut.table, \"td\") : ut.selectedTds;\r\n                    utils.each(cells, function (node) {\r\n                        if (node.rowSpan == 1) {\r\n                            node.setAttribute(\"height\", averageHeight);\r\n                        }\r\n                    });\r\n                }\r\n\r\n                if (ut && ut.selectedTds.length) {\r\n                    setAverageHeight(getAverageHeight());\r\n                }\r\n            }\r\n        };\r\n\r\n        //单元格对齐方式\r\n        UE.commands['cellalignment'] = {\r\n            queryCommandState: function () {\r\n                return getTableItemsByRange(this).table ? 0 : -1\r\n            },\r\n            execCommand: function (cmd, data) {\r\n                var me = this,\r\n                    ut = getUETableBySelected(me);\r\n\r\n                if (!ut) {\r\n                    var start = me.selection.getStart(),\r\n                        cell = start && domUtils.findParentByTagName(start, [\"td\", \"th\", \"caption\"], true);\r\n                    if (!/caption/ig.test(cell.tagName)) {\r\n                        domUtils.setAttributes(cell, data);\r\n                    } else {\r\n                        cell.style.textAlign = data.align;\r\n                        cell.style.verticalAlign = data.vAlign;\r\n                    }\r\n                    me.selection.getRange().setCursor(true);\r\n                } else {\r\n                    utils.each(ut.selectedTds, function (cell) {\r\n                        domUtils.setAttributes(cell, data);\r\n                    });\r\n                }\r\n            },\r\n            /**\r\n             * 查询当前点击的单元格的对齐状态， 如果当前已经选择了多个单元格， 则会返回所有单元格经过统一协调过后的状态\r\n             * @see UE.UETable.getTableCellAlignState\r\n             */\r\n            queryCommandValue: function (cmd) {\r\n\r\n                var activeMenuCell = getTableItemsByRange(this).cell;\r\n\r\n                if (!activeMenuCell) {\r\n                    activeMenuCell = getSelectedArr(this)[0];\r\n                }\r\n\r\n                if (!activeMenuCell) {\r\n\r\n                    return null;\r\n\r\n                } else {\r\n\r\n                    //获取同时选中的其他单元格\r\n                    var cells = UE.UETable.getUETable(activeMenuCell).selectedTds;\r\n\r\n                    !cells.length && (cells = activeMenuCell);\r\n\r\n                    return UE.UETable.getTableCellAlignState(cells);\r\n\r\n                }\r\n\r\n            }\r\n        };\r\n        //表格对齐方式\r\n        UE.commands['tablealignment'] = {\r\n            queryCommandState: function () {\r\n                if (browser.ie && browser.version < 8) {\r\n                    return -1;\r\n                }\r\n                return getTableItemsByRange(this).table ? 0 : -1\r\n            },\r\n            execCommand: function (cmd, value) {\r\n                var me = this,\r\n                    start = me.selection.getStart(),\r\n                    table = start && domUtils.findParentByTagName(start, [\"table\"], true);\r\n\r\n                if (table) {\r\n                    table.setAttribute(\"align\", value);\r\n                }\r\n            }\r\n        };\r\n\r\n        //表格属性\r\n        UE.commands['edittable'] = {\r\n            queryCommandState: function () {\r\n                return getTableItemsByRange(this).table ? 0 : -1\r\n            },\r\n            execCommand: function (cmd, color) {\r\n                var rng = this.selection.getRange(),\r\n                    table = domUtils.findParentByTagName(rng.startContainer, 'table');\r\n                if (table) {\r\n                    var arr = domUtils.getElementsByTagName(table, \"td\").concat(\r\n                        domUtils.getElementsByTagName(table, \"th\"),\r\n                        domUtils.getElementsByTagName(table, \"caption\")\r\n                    );\r\n                    utils.each(arr, function (node) {\r\n                        node.style.borderColor = color;\r\n                    });\r\n                }\r\n            }\r\n        };\r\n        //单元格属性\r\n        UE.commands['edittd'] = {\r\n            queryCommandState: function () {\r\n                return getTableItemsByRange(this).table ? 0 : -1\r\n            },\r\n            execCommand: function (cmd, bkColor) {\r\n                var me = this,\r\n                    ut = getUETableBySelected(me);\r\n\r\n                if (!ut) {\r\n                    var start = me.selection.getStart(),\r\n                        cell = start && domUtils.findParentByTagName(start, [\"td\", \"th\", \"caption\"], true);\r\n                    if (cell) {\r\n                        cell.style.backgroundColor = bkColor;\r\n                    }\r\n                } else {\r\n                    utils.each(ut.selectedTds, function (cell) {\r\n                        cell.style.backgroundColor = bkColor;\r\n                    });\r\n                }\r\n            }\r\n        };\r\n\r\n        UE.commands[\"settablebackground\"] = {\r\n            queryCommandState: function () {\r\n                return getSelectedArr(this).length > 1 ? 0 : -1;\r\n            },\r\n            execCommand: function (cmd, value) {\r\n                var cells, ut;\r\n                cells = getSelectedArr(this);\r\n                ut = getUETable(cells[0]);\r\n                ut.setBackground(cells, value);\r\n            }\r\n        };\r\n\r\n        UE.commands[\"cleartablebackground\"] = {\r\n            queryCommandState: function () {\r\n                var cells = getSelectedArr(this);\r\n                if (!cells.length) return -1;\r\n                for (var i = 0, cell; cell = cells[i++];) {\r\n                    if (cell.style.backgroundColor !== \"\") return 0;\r\n                }\r\n                return -1;\r\n            },\r\n            execCommand: function () {\r\n                var cells = getSelectedArr(this),\r\n                    ut = getUETable(cells[0]);\r\n                ut.removeBackground(cells);\r\n            }\r\n        };\r\n\r\n        UE.commands[\"interlacetable\"] = UE.commands[\"uninterlacetable\"] = {\r\n            queryCommandState: function (cmd) {\r\n                var table = getTableItemsByRange(this).table;\r\n                if (!table) return -1;\r\n                var interlaced = table.getAttribute(\"interlaced\");\r\n                if (cmd == \"interlacetable\") {\r\n                    //TODO 待定\r\n                    //是否需要待定，如果设置，则命令只能单次执行成功，但反射具备toggle效果；否则可以覆盖前次命令，但反射将不存在toggle效果\r\n                    return (interlaced === \"enabled\") ? -1 : 0;\r\n                } else {\r\n                    return (!interlaced || interlaced === \"disabled\") ? -1 : 0;\r\n                }\r\n            },\r\n            execCommand: function (cmd, classList) {\r\n                var table = getTableItemsByRange(this).table;\r\n                if (cmd == \"interlacetable\") {\r\n                    table.setAttribute(\"interlaced\", \"enabled\");\r\n                    this.fireEvent(\"interlacetable\", table, classList);\r\n                } else {\r\n                    table.setAttribute(\"interlaced\", \"disabled\");\r\n                    this.fireEvent(\"uninterlacetable\", table);\r\n                }\r\n            }\r\n        };\r\n        UE.commands[\"setbordervisible\"] = {\r\n            queryCommandState: function (cmd) {\r\n                var table = getTableItemsByRange(this).table;\r\n                if (!table) return -1;\r\n                return 0;\r\n            },\r\n            execCommand: function () {\r\n                var table = getTableItemsByRange(this).table;\r\n                utils.each(domUtils.getElementsByTagName(table, 'td'), function (td) {\r\n                    td.style.borderWidth = '1px';\r\n                    td.style.borderStyle = 'solid';\r\n                })\r\n            }\r\n        };\r\n        function resetTdWidth(table, editor) {\r\n            var tds = domUtils.getElementsByTagName(table, 'td th');\r\n            utils.each(tds, function (td) {\r\n                td.removeAttribute(\"width\");\r\n            });\r\n            table.setAttribute('width', getTableWidth(editor, true, getDefaultValue(editor, table)));\r\n            var tdsWidths = [];\r\n            setTimeout(function () {\r\n                utils.each(tds, function (td) {\r\n                    (td.colSpan == 1) && tdsWidths.push(td.offsetWidth)\r\n                })\r\n                utils.each(tds, function (td, i) {\r\n                    (td.colSpan == 1) && td.setAttribute(\"width\", tdsWidths[i] + \"\");\r\n                })\r\n            }, 0);\r\n        }\r\n\r\n        function getTableWidth(editor, needIEHack, defaultValue) {\r\n            var body = editor.body;\r\n            return body.offsetWidth - (needIEHack ? parseInt(domUtils.getComputedStyle(body, 'margin-left'), 10) * 2 : 0) - defaultValue.tableBorder * 2 - (editor.options.offsetWidth || 0);\r\n        }\r\n\r\n        function getSelectedArr(editor) {\r\n            var cell = getTableItemsByRange(editor).cell;\r\n            if (cell) {\r\n                var ut = getUETable(cell);\r\n                return ut.selectedTds.length ? ut.selectedTds : [cell];\r\n            } else {\r\n                return [];\r\n            }\r\n        }\r\n    })();\r\n\r\n\r\n    // plugins/table.action.js\r\n    /**\r\n     * Created with JetBrains PhpStorm.\r\n     * User: taoqili\r\n     * Date: 12-10-12\r\n     * Time: 上午10:05\r\n     * To change this template use File | Settings | File Templates.\r\n     */\r\n    UE.plugins['table'] = function () {\r\n        var me = this,\r\n            tabTimer = null,\r\n            //拖动计时器\r\n            tableDragTimer = null,\r\n            //双击计时器\r\n            tableResizeTimer = null,\r\n            //单元格最小宽度\r\n            cellMinWidth = 5,\r\n            isInResizeBuffer = false,\r\n            //单元格边框大小\r\n            cellBorderWidth = 5,\r\n            //鼠标偏移距离\r\n            offsetOfTableCell = 10,\r\n            //记录在有限时间内的点击状态， 共有3个取值， 0, 1, 2。 0代表未初始化， 1代表单击了1次，2代表2次\r\n            singleClickState = 0,\r\n            userActionStatus = null,\r\n            //双击允许的时间范围\r\n            dblclickTime = 360,\r\n            UT = UE.UETable,\r\n            getUETable = function (tdOrTable) {\r\n                return UT.getUETable(tdOrTable);\r\n            },\r\n            getUETableBySelected = function (editor) {\r\n                return UT.getUETableBySelected(editor);\r\n            },\r\n            getDefaultValue = function (editor, table) {\r\n                return UT.getDefaultValue(editor, table);\r\n            },\r\n            removeSelectedClass = function (cells) {\r\n                return UT.removeSelectedClass(cells);\r\n            };\r\n\r\n        function showError(e) {\r\n            //        throw e;\r\n        }\r\n        me.ready(function () {\r\n            var me = this;\r\n            var orgGetText = me.selection.getText;\r\n            me.selection.getText = function () {\r\n                var table = getUETableBySelected(me);\r\n                if (table) {\r\n                    var str = '';\r\n                    utils.each(table.selectedTds, function (td) {\r\n                        str += td[browser.ie ? 'innerText' : 'textContent'];\r\n                    })\r\n                    return str;\r\n                } else {\r\n                    return orgGetText.call(me.selection)\r\n                }\r\n\r\n            }\r\n        })\r\n\r\n        //处理拖动及框选相关方法\r\n        var startTd = null, //鼠标按下时的锚点td\r\n            currentTd = null, //当前鼠标经过时的td\r\n            onDrag = \"\", //指示当前拖动状态，其值可为\"\",\"h\",\"v\" ,分别表示未拖动状态，横向拖动状态，纵向拖动状态，用于鼠标移动过程中的判断\r\n            onBorder = false, //检测鼠标按下时是否处在单元格边缘位置\r\n            dragButton = null,\r\n            dragOver = false,\r\n            dragLine = null, //模拟的拖动线\r\n            dragTd = null;    //发生拖动的目标td\r\n\r\n        var mousedown = false,\r\n            //todo 判断混乱模式\r\n            needIEHack = true;\r\n\r\n        me.setOpt({\r\n            'maxColNum': 20,\r\n            'maxRowNum': 100,\r\n            'defaultCols': 5,\r\n            'defaultRows': 5,\r\n            'tdvalign': 'top',\r\n            'cursorpath': me.options.UEDITOR_HOME_URL + \"themes/default/images/cursor_\",\r\n            'tableDragable': false,\r\n            'classList': [\"ue-table-interlace-color-single\", \"ue-table-interlace-color-double\"]\r\n        });\r\n        me.getUETable = getUETable;\r\n        var commands = {\r\n            'deletetable': 1,\r\n            'inserttable': 1,\r\n            'cellvalign': 1,\r\n            'insertcaption': 1,\r\n            'deletecaption': 1,\r\n            'inserttitle': 1,\r\n            'deletetitle': 1,\r\n            \"mergeright\": 1,\r\n            \"mergedown\": 1,\r\n            \"mergecells\": 1,\r\n            \"insertrow\": 1,\r\n            \"insertrownext\": 1,\r\n            \"deleterow\": 1,\r\n            \"insertcol\": 1,\r\n            \"insertcolnext\": 1,\r\n            \"deletecol\": 1,\r\n            \"splittocells\": 1,\r\n            \"splittorows\": 1,\r\n            \"splittocols\": 1,\r\n            \"adaptbytext\": 1,\r\n            \"adaptbywindow\": 1,\r\n            \"adaptbycustomer\": 1,\r\n            \"insertparagraph\": 1,\r\n            \"insertparagraphbeforetable\": 1,\r\n            \"averagedistributecol\": 1,\r\n            \"averagedistributerow\": 1\r\n        };\r\n        me.ready(function () {\r\n            utils.cssRule('table',\r\n                //选中的td上的样式\r\n                '.selectTdClass{background-color:#edf5fa !important}' +\r\n                'table.noBorderTable td,table.noBorderTable th,table.noBorderTable caption{border:1px dashed #ddd !important}' +\r\n                //插入的表格的默认样式\r\n                'table{margin-bottom:10px;border-collapse:collapse;display:table;}' +\r\n                'td,th{padding: 5px 10px;border: 1px solid #DDD;}' +\r\n                'caption{border:1px dashed #DDD;border-bottom:0;padding:3px;text-align:center;}' +\r\n                'th{border-top:1px solid #BBB;background-color:#F7F7F7;}' +\r\n                'table tr.firstRow th{border-top-width:2px;}' +\r\n                '.ue-table-interlace-color-single{ background-color: #fcfcfc; } .ue-table-interlace-color-double{ background-color: #f7faff; }' +\r\n                'td p{margin:0;padding:0;}', me.document);\r\n\r\n            var tableCopyList, isFullCol, isFullRow;\r\n            //注册del/backspace事件\r\n            me.addListener('keydown', function (cmd, evt) {\r\n                var me = this;\r\n                var keyCode = evt.keyCode || evt.which;\r\n\r\n                if (keyCode == 8) {\r\n\r\n                    var ut = getUETableBySelected(me);\r\n                    if (ut && ut.selectedTds.length) {\r\n\r\n                        if (ut.isFullCol()) {\r\n                            me.execCommand('deletecol')\r\n                        } else if (ut.isFullRow()) {\r\n                            me.execCommand('deleterow')\r\n                        } else {\r\n                            me.fireEvent('delcells');\r\n                        }\r\n                        domUtils.preventDefault(evt);\r\n                    }\r\n\r\n                    var caption = domUtils.findParentByTagName(me.selection.getStart(), 'caption', true),\r\n                        range = me.selection.getRange();\r\n                    if (range.collapsed && caption && isEmptyBlock(caption)) {\r\n                        me.fireEvent('saveScene');\r\n                        var table = caption.parentNode;\r\n                        domUtils.remove(caption);\r\n                        if (table) {\r\n                            range.setStart(table.rows[0].cells[0], 0).setCursor(false, true);\r\n                        }\r\n                        me.fireEvent('saveScene');\r\n                    }\r\n\r\n                }\r\n\r\n                if (keyCode == 46) {\r\n\r\n                    ut = getUETableBySelected(me);\r\n                    if (ut) {\r\n                        me.fireEvent('saveScene');\r\n                        for (var i = 0, ci; ci = ut.selectedTds[i++];) {\r\n                            domUtils.fillNode(me.document, ci)\r\n                        }\r\n                        me.fireEvent('saveScene');\r\n                        domUtils.preventDefault(evt);\r\n\r\n                    }\r\n\r\n                }\r\n                if (keyCode == 13) {\r\n\r\n                    var rng = me.selection.getRange(),\r\n                        caption = domUtils.findParentByTagName(rng.startContainer, 'caption', true);\r\n                    if (caption) {\r\n                        var table = domUtils.findParentByTagName(caption, 'table');\r\n                        if (!rng.collapsed) {\r\n\r\n                            rng.deleteContents();\r\n                            me.fireEvent('saveScene');\r\n                        } else {\r\n                            if (caption) {\r\n                                rng.setStart(table.rows[0].cells[0], 0).setCursor(false, true);\r\n                            }\r\n                        }\r\n                        domUtils.preventDefault(evt);\r\n                        return;\r\n                    }\r\n                    if (rng.collapsed) {\r\n                        var table = domUtils.findParentByTagName(rng.startContainer, 'table');\r\n                        if (table) {\r\n                            var cell = table.rows[0].cells[0],\r\n                                start = domUtils.findParentByTagName(me.selection.getStart(), ['td', 'th'], true),\r\n                                preNode = table.previousSibling;\r\n                            if (cell === start && (!preNode || preNode.nodeType == 1 && preNode.tagName == 'TABLE') && domUtils.isStartInblock(rng)) {\r\n                                var first = domUtils.findParent(me.selection.getStart(), function (n) { return domUtils.isBlockElm(n) }, true);\r\n                                if (first && (/t(h|d)/i.test(first.tagName) || first === start.firstChild)) {\r\n                                    me.execCommand('insertparagraphbeforetable');\r\n                                    domUtils.preventDefault(evt);\r\n                                }\r\n\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                if ((evt.ctrlKey || evt.metaKey) && evt.keyCode == '67') {\r\n                    tableCopyList = null;\r\n                    var ut = getUETableBySelected(me);\r\n                    if (ut) {\r\n                        var tds = ut.selectedTds;\r\n                        isFullCol = ut.isFullCol();\r\n                        isFullRow = ut.isFullRow();\r\n                        tableCopyList = [\r\n                            [ut.cloneCell(tds[0], null, true)]\r\n                        ];\r\n                        for (var i = 1, ci; ci = tds[i]; i++) {\r\n                            if (ci.parentNode !== tds[i - 1].parentNode) {\r\n                                tableCopyList.push([ut.cloneCell(ci, null, true)]);\r\n                            } else {\r\n                                tableCopyList[tableCopyList.length - 1].push(ut.cloneCell(ci, null, true));\r\n                            }\r\n\r\n                        }\r\n                    }\r\n                }\r\n            });\r\n            me.addListener(\"tablehasdeleted\", function () {\r\n                toggleDraggableState(this, false, \"\", null);\r\n                if (dragButton) domUtils.remove(dragButton);\r\n            });\r\n\r\n            me.addListener('beforepaste', function (cmd, html) {\r\n                var me = this;\r\n                var rng = me.selection.getRange();\r\n                if (domUtils.findParentByTagName(rng.startContainer, 'caption', true)) {\r\n                    var div = me.document.createElement(\"div\");\r\n                    div.innerHTML = html.html;\r\n                    //trace:3729\r\n                    html.html = div[browser.ie9below ? 'innerText' : 'textContent'];\r\n                    return;\r\n                }\r\n                var table = getUETableBySelected(me);\r\n                if (tableCopyList) {\r\n                    me.fireEvent('saveScene');\r\n                    var rng = me.selection.getRange();\r\n                    var td = domUtils.findParentByTagName(rng.startContainer, ['td', 'th'], true), tmpNode, preNode;\r\n                    if (td) {\r\n                        var ut = getUETable(td);\r\n                        if (isFullRow) {\r\n                            var rowIndex = ut.getCellInfo(td).rowIndex;\r\n                            if (td.tagName == 'TH') {\r\n                                rowIndex++;\r\n                            }\r\n                            for (var i = 0, ci; ci = tableCopyList[i++];) {\r\n                                var tr = ut.insertRow(rowIndex++, \"td\");\r\n                                for (var j = 0, cj; cj = ci[j]; j++) {\r\n                                    var cell = tr.cells[j];\r\n                                    if (!cell) {\r\n                                        cell = tr.insertCell(j)\r\n                                    }\r\n                                    cell.innerHTML = cj.innerHTML;\r\n                                    cj.getAttribute('width') && cell.setAttribute('width', cj.getAttribute('width'));\r\n                                    cj.getAttribute('vAlign') && cell.setAttribute('vAlign', cj.getAttribute('vAlign'));\r\n                                    cj.getAttribute('align') && cell.setAttribute('align', cj.getAttribute('align'));\r\n                                    cj.style.cssText && (cell.style.cssText = cj.style.cssText)\r\n                                }\r\n                                for (var j = 0, cj; cj = tr.cells[j]; j++) {\r\n                                    if (!ci[j])\r\n                                        break;\r\n                                    cj.innerHTML = ci[j].innerHTML;\r\n                                    ci[j].getAttribute('width') && cj.setAttribute('width', ci[j].getAttribute('width'));\r\n                                    ci[j].getAttribute('vAlign') && cj.setAttribute('vAlign', ci[j].getAttribute('vAlign'));\r\n                                    ci[j].getAttribute('align') && cj.setAttribute('align', ci[j].getAttribute('align'));\r\n                                    ci[j].style.cssText && (cj.style.cssText = ci[j].style.cssText)\r\n                                }\r\n                            }\r\n                        } else {\r\n                            if (isFullCol) {\r\n                                cellInfo = ut.getCellInfo(td);\r\n                                var maxColNum = 0;\r\n                                for (var j = 0, ci = tableCopyList[0], cj; cj = ci[j++];) {\r\n                                    maxColNum += cj.colSpan || 1;\r\n                                }\r\n                                me.__hasEnterExecCommand = true;\r\n                                for (i = 0; i < maxColNum; i++) {\r\n                                    me.execCommand('insertcol');\r\n                                }\r\n                                me.__hasEnterExecCommand = false;\r\n                                td = ut.table.rows[0].cells[cellInfo.cellIndex];\r\n                                if (td.tagName == 'TH') {\r\n                                    td = ut.table.rows[1].cells[cellInfo.cellIndex];\r\n                                }\r\n                            }\r\n                            for (var i = 0, ci; ci = tableCopyList[i++];) {\r\n                                tmpNode = td;\r\n                                for (var j = 0, cj; cj = ci[j++];) {\r\n                                    if (td) {\r\n                                        td.innerHTML = cj.innerHTML;\r\n                                        //todo 定制处理\r\n                                        cj.getAttribute('width') && td.setAttribute('width', cj.getAttribute('width'));\r\n                                        cj.getAttribute('vAlign') && td.setAttribute('vAlign', cj.getAttribute('vAlign'));\r\n                                        cj.getAttribute('align') && td.setAttribute('align', cj.getAttribute('align'));\r\n                                        cj.style.cssText && (td.style.cssText = cj.style.cssText);\r\n                                        preNode = td;\r\n                                        td = td.nextSibling;\r\n                                    } else {\r\n                                        var cloneTd = cj.cloneNode(true);\r\n                                        domUtils.removeAttributes(cloneTd, ['class', 'rowSpan', 'colSpan']);\r\n\r\n                                        preNode.parentNode.appendChild(cloneTd)\r\n                                    }\r\n                                }\r\n                                td = ut.getNextCell(tmpNode, true, true);\r\n                                if (!tableCopyList[i])\r\n                                    break;\r\n                                if (!td) {\r\n                                    var cellInfo = ut.getCellInfo(tmpNode);\r\n                                    ut.table.insertRow(ut.table.rows.length);\r\n                                    ut.update();\r\n                                    td = ut.getVSideCell(tmpNode, true);\r\n                                }\r\n                            }\r\n                        }\r\n                        ut.update();\r\n                    } else {\r\n                        table = me.document.createElement('table');\r\n                        for (var i = 0, ci; ci = tableCopyList[i++];) {\r\n                            var tr = table.insertRow(table.rows.length);\r\n                            for (var j = 0, cj; cj = ci[j++];) {\r\n                                cloneTd = UT.cloneCell(cj, null, true);\r\n                                domUtils.removeAttributes(cloneTd, ['class']);\r\n                                tr.appendChild(cloneTd)\r\n                            }\r\n                            if (j == 2 && cloneTd.rowSpan > 1) {\r\n                                cloneTd.rowSpan = 1;\r\n                            }\r\n                        }\r\n\r\n                        var defaultValue = getDefaultValue(me),\r\n                            width = me.body.offsetWidth -\r\n                                (needIEHack ? parseInt(domUtils.getComputedStyle(me.body, 'margin-left'), 10) * 2 : 0) - defaultValue.tableBorder * 2 - (me.options.offsetWidth || 0);\r\n                        me.execCommand('insertHTML', '<table  ' +\r\n                            (isFullCol && isFullRow ? 'width=\"' + width + '\"' : '') +\r\n                            '>' + table.innerHTML.replace(/>\\s*</g, '><').replace(/\\bth\\b/gi, \"td\") + '</table>')\r\n                    }\r\n                    me.fireEvent('contentchange');\r\n                    me.fireEvent('saveScene');\r\n                    html.html = '';\r\n                    return true;\r\n                } else {\r\n                    var div = me.document.createElement(\"div\"), tables;\r\n                    div.innerHTML = html.html;\r\n                    tables = div.getElementsByTagName(\"table\");\r\n                    if (domUtils.findParentByTagName(me.selection.getStart(), 'table')) {\r\n                        utils.each(tables, function (t) {\r\n                            domUtils.remove(t)\r\n                        });\r\n                        if (domUtils.findParentByTagName(me.selection.getStart(), 'caption', true)) {\r\n                            div.innerHTML = div[browser.ie ? 'innerText' : 'textContent'];\r\n                        }\r\n                    } else {\r\n                        utils.each(tables, function (table) {\r\n                            removeStyleSize(table, true);\r\n                            domUtils.removeAttributes(table, ['style', 'border']);\r\n                            utils.each(domUtils.getElementsByTagName(table, \"td\"), function (td) {\r\n                                if (isEmptyBlock(td)) {\r\n                                    domUtils.fillNode(me.document, td);\r\n                                }\r\n                                removeStyleSize(td, true);\r\n                                //                            domUtils.removeAttributes(td, ['style'])\r\n                            });\r\n                        });\r\n                    }\r\n                    html.html = div.innerHTML;\r\n                }\r\n            });\r\n\r\n            me.addListener('afterpaste', function () {\r\n                utils.each(domUtils.getElementsByTagName(me.body, \"table\"), function (table) {\r\n                    if (table.offsetWidth > me.body.offsetWidth) {\r\n                        var defaultValue = getDefaultValue(me, table);\r\n                        table.style.width = me.body.offsetWidth - (needIEHack ? parseInt(domUtils.getComputedStyle(me.body, 'margin-left'), 10) * 2 : 0) - defaultValue.tableBorder * 2 - (me.options.offsetWidth || 0) + 'px'\r\n                    }\r\n                })\r\n            });\r\n            me.addListener('blur', function () {\r\n                tableCopyList = null;\r\n            });\r\n            var timer;\r\n            me.addListener('keydown', function () {\r\n                clearTimeout(timer);\r\n                timer = setTimeout(function () {\r\n                    var rng = me.selection.getRange(),\r\n                        cell = domUtils.findParentByTagName(rng.startContainer, ['th', 'td'], true);\r\n                    if (cell) {\r\n                        var table = cell.parentNode.parentNode.parentNode;\r\n                        if (table.offsetWidth > table.getAttribute(\"width\")) {\r\n                            cell.style.wordBreak = \"break-all\";\r\n                        }\r\n                    }\r\n\r\n                }, 100);\r\n            });\r\n            me.addListener(\"selectionchange\", function () {\r\n                toggleDraggableState(me, false, \"\", null);\r\n            });\r\n\r\n\r\n            //内容变化时触发索引更新\r\n            //todo 可否考虑标记检测，如果不涉及表格的变化就不进行索引重建和更新\r\n            me.addListener(\"contentchange\", function () {\r\n                var me = this;\r\n                //尽可能排除一些不需要更新的状况\r\n                hideDragLine(me);\r\n                if (getUETableBySelected(me)) return;\r\n                var rng = me.selection.getRange();\r\n                var start = rng.startContainer;\r\n                start = domUtils.findParentByTagName(start, ['td', 'th'], true);\r\n                utils.each(domUtils.getElementsByTagName(me.document, 'table'), function (table) {\r\n                    if (me.fireEvent(\"excludetable\", table) === true) return;\r\n                    table.ueTable = new UT(table);\r\n                    //trace:3742\r\n                    //                utils.each(domUtils.getElementsByTagName(me.document, 'td'), function (td) {\r\n                    //\r\n                    //                    if (domUtils.isEmptyBlock(td) && td !== start) {\r\n                    //                        domUtils.fillNode(me.document, td);\r\n                    //                        if (browser.ie && browser.version == 6) {\r\n                    //                            td.innerHTML = '&nbsp;'\r\n                    //                        }\r\n                    //                    }\r\n                    //                });\r\n                    //                utils.each(domUtils.getElementsByTagName(me.document, 'th'), function (th) {\r\n                    //                    if (domUtils.isEmptyBlock(th) && th !== start) {\r\n                    //                        domUtils.fillNode(me.document, th);\r\n                    //                        if (browser.ie && browser.version == 6) {\r\n                    //                            th.innerHTML = '&nbsp;'\r\n                    //                        }\r\n                    //                    }\r\n                    //                });\r\n                    table.onmouseover = function () {\r\n                        me.fireEvent('tablemouseover', table);\r\n                    };\r\n                    table.onmousemove = function () {\r\n                        me.fireEvent('tablemousemove', table);\r\n                        me.options.tableDragable && toggleDragButton(true, this, me);\r\n                        utils.defer(function () {\r\n                            me.fireEvent('contentchange', 50)\r\n                        }, true)\r\n                    };\r\n                    table.onmouseout = function () {\r\n                        me.fireEvent('tablemouseout', table);\r\n                        toggleDraggableState(me, false, \"\", null);\r\n                        hideDragLine(me);\r\n                    };\r\n                    table.onclick = function (evt) {\r\n                        evt = me.window.event || evt;\r\n                        var target = getParentTdOrTh(evt.target || evt.srcElement);\r\n                        if (!target) return;\r\n                        var ut = getUETable(target),\r\n                            table = ut.table,\r\n                            cellInfo = ut.getCellInfo(target),\r\n                            cellsRange,\r\n                            rng = me.selection.getRange();\r\n                        //                    if (\"topLeft\" == inPosition(table, mouseCoords(evt))) {\r\n                        //                        cellsRange = ut.getCellsRange(ut.table.rows[0].cells[0], ut.getLastCell());\r\n                        //                        ut.setSelected(cellsRange);\r\n                        //                        return;\r\n                        //                    }\r\n                        //                    if (\"bottomRight\" == inPosition(table, mouseCoords(evt))) {\r\n                        //\r\n                        //                        return;\r\n                        //                    }\r\n                        if (inTableSide(table, target, evt, true)) {\r\n                            var endTdCol = ut.getCell(ut.indexTable[ut.rowsNum - 1][cellInfo.colIndex].rowIndex, ut.indexTable[ut.rowsNum - 1][cellInfo.colIndex].cellIndex);\r\n                            if (evt.shiftKey && ut.selectedTds.length) {\r\n                                if (ut.selectedTds[0] !== endTdCol) {\r\n                                    cellsRange = ut.getCellsRange(ut.selectedTds[0], endTdCol);\r\n                                    ut.setSelected(cellsRange);\r\n                                } else {\r\n                                    rng && rng.selectNodeContents(endTdCol).select();\r\n                                }\r\n                            } else {\r\n                                if (target !== endTdCol) {\r\n                                    cellsRange = ut.getCellsRange(target, endTdCol);\r\n                                    ut.setSelected(cellsRange);\r\n                                } else {\r\n                                    rng && rng.selectNodeContents(endTdCol).select();\r\n                                }\r\n                            }\r\n                            return;\r\n                        }\r\n                        if (inTableSide(table, target, evt)) {\r\n                            var endTdRow = ut.getCell(ut.indexTable[cellInfo.rowIndex][ut.colsNum - 1].rowIndex, ut.indexTable[cellInfo.rowIndex][ut.colsNum - 1].cellIndex);\r\n                            if (evt.shiftKey && ut.selectedTds.length) {\r\n                                if (ut.selectedTds[0] !== endTdRow) {\r\n                                    cellsRange = ut.getCellsRange(ut.selectedTds[0], endTdRow);\r\n                                    ut.setSelected(cellsRange);\r\n                                } else {\r\n                                    rng && rng.selectNodeContents(endTdRow).select();\r\n                                }\r\n                            } else {\r\n                                if (target !== endTdRow) {\r\n                                    cellsRange = ut.getCellsRange(target, endTdRow);\r\n                                    ut.setSelected(cellsRange);\r\n                                } else {\r\n                                    rng && rng.selectNodeContents(endTdRow).select();\r\n                                }\r\n                            }\r\n                        }\r\n                    };\r\n                });\r\n\r\n                switchBorderColor(me, true);\r\n            });\r\n\r\n            domUtils.on(me.document, \"mousemove\", mouseMoveEvent);\r\n\r\n            domUtils.on(me.document, \"mouseout\", function (evt) {\r\n                var target = evt.target || evt.srcElement;\r\n                if (target.tagName == \"TABLE\") {\r\n                    toggleDraggableState(me, false, \"\", null);\r\n                }\r\n            });\r\n            /**\r\n             * 表格隔行变色\r\n             */\r\n            me.addListener(\"interlacetable\", function (type, table, classList) {\r\n                if (!table) return;\r\n                var me = this,\r\n                    rows = table.rows,\r\n                    len = rows.length,\r\n                    getClass = function (list, index, repeat) {\r\n                        return list[index] ? list[index] : repeat ? list[index % list.length] : \"\";\r\n                    };\r\n                for (var i = 0; i < len; i++) {\r\n                    rows[i].className = getClass(classList || me.options.classList, i, true);\r\n                }\r\n            });\r\n            me.addListener(\"uninterlacetable\", function (type, table) {\r\n                if (!table) return;\r\n                var me = this,\r\n                    rows = table.rows,\r\n                    classList = me.options.classList,\r\n                    len = rows.length;\r\n                for (var i = 0; i < len; i++) {\r\n                    domUtils.removeClasses(rows[i], classList);\r\n                }\r\n            });\r\n\r\n            me.addListener(\"mousedown\", mouseDownEvent);\r\n            me.addListener(\"mouseup\", mouseUpEvent);\r\n            //拖动的时候触发mouseup\r\n            domUtils.on(me.body, 'dragstart', function (evt) {\r\n                mouseUpEvent.call(me, 'dragstart', evt);\r\n            });\r\n            me.addOutputRule(function (root) {\r\n                utils.each(root.getNodesByTagName('div'), function (n) {\r\n                    if (n.getAttr('id') == 'ue_tableDragLine') {\r\n                        n.parentNode.removeChild(n);\r\n                    }\r\n                });\r\n            });\r\n\r\n            var currentRowIndex = 0;\r\n            me.addListener(\"mousedown\", function () {\r\n                currentRowIndex = 0;\r\n            });\r\n            me.addListener('tabkeydown', function () {\r\n                var range = this.selection.getRange(),\r\n                    common = range.getCommonAncestor(true, true),\r\n                    table = domUtils.findParentByTagName(common, 'table');\r\n                if (table) {\r\n                    if (domUtils.findParentByTagName(common, 'caption', true)) {\r\n                        var cell = domUtils.getElementsByTagName(table, 'th td');\r\n                        if (cell && cell.length) {\r\n                            range.setStart(cell[0], 0).setCursor(false, true)\r\n                        }\r\n                    } else {\r\n                        var cell = domUtils.findParentByTagName(common, ['td', 'th'], true),\r\n                            ua = getUETable(cell);\r\n                        currentRowIndex = cell.rowSpan > 1 ? currentRowIndex : ua.getCellInfo(cell).rowIndex;\r\n                        var nextCell = ua.getTabNextCell(cell, currentRowIndex);\r\n                        if (nextCell) {\r\n                            if (isEmptyBlock(nextCell)) {\r\n                                range.setStart(nextCell, 0).setCursor(false, true)\r\n                            } else {\r\n                                range.selectNodeContents(nextCell).select()\r\n                            }\r\n                        } else {\r\n                            me.fireEvent('saveScene');\r\n                            me.__hasEnterExecCommand = true;\r\n                            this.execCommand('insertrownext');\r\n                            me.__hasEnterExecCommand = false;\r\n                            range = this.selection.getRange();\r\n                            range.setStart(table.rows[table.rows.length - 1].cells[0], 0).setCursor();\r\n                            me.fireEvent('saveScene');\r\n                        }\r\n                    }\r\n                    return true;\r\n                }\r\n\r\n            });\r\n            browser.ie && me.addListener('selectionchange', function () {\r\n                toggleDraggableState(this, false, \"\", null);\r\n            });\r\n            me.addListener(\"keydown\", function (type, evt) {\r\n                var me = this;\r\n                //处理在表格的最后一个输入tab产生新的表格\r\n                var keyCode = evt.keyCode || evt.which;\r\n                if (keyCode == 8 || keyCode == 46) {\r\n                    return;\r\n                }\r\n                var notCtrlKey = !evt.ctrlKey && !evt.metaKey && !evt.shiftKey && !evt.altKey;\r\n                notCtrlKey && removeSelectedClass(domUtils.getElementsByTagName(me.body, \"td\"));\r\n                var ut = getUETableBySelected(me);\r\n                if (!ut) return;\r\n                notCtrlKey && ut.clearSelected();\r\n            });\r\n\r\n            me.addListener(\"beforegetcontent\", function () {\r\n                switchBorderColor(this, false);\r\n                browser.ie && utils.each(this.document.getElementsByTagName('caption'), function (ci) {\r\n                    if (domUtils.isEmptyNode(ci)) {\r\n                        ci.innerHTML = '&nbsp;'\r\n                    }\r\n                });\r\n            });\r\n            me.addListener(\"aftergetcontent\", function () {\r\n                switchBorderColor(this, true);\r\n            });\r\n            me.addListener(\"getAllHtml\", function () {\r\n                removeSelectedClass(me.document.getElementsByTagName(\"td\"));\r\n            });\r\n            //修正全屏状态下插入的表格宽度在非全屏状态下撑开编辑器的情况\r\n            me.addListener(\"fullscreenchanged\", function (type, fullscreen) {\r\n                if (!fullscreen) {\r\n                    var ratio = this.body.offsetWidth / document.body.offsetWidth,\r\n                        tables = domUtils.getElementsByTagName(this.body, \"table\");\r\n                    utils.each(tables, function (table) {\r\n                        if (table.offsetWidth < me.body.offsetWidth) return false;\r\n                        var tds = domUtils.getElementsByTagName(table, \"td\"),\r\n                            backWidths = [];\r\n                        utils.each(tds, function (td) {\r\n                            backWidths.push(td.offsetWidth);\r\n                        });\r\n                        for (var i = 0, td; td = tds[i]; i++) {\r\n                            td.setAttribute(\"width\", Math.floor(backWidths[i] * ratio));\r\n                        }\r\n                        table.setAttribute(\"width\", Math.floor(getTableWidth(me, needIEHack, getDefaultValue(me))))\r\n                    });\r\n                }\r\n            });\r\n\r\n            //重写execCommand命令，用于处理框选时的处理\r\n            var oldExecCommand = me.execCommand;\r\n            me.execCommand = function (cmd, datatat) {\r\n\r\n                var me = this,\r\n                    args = arguments;\r\n\r\n                cmd = cmd.toLowerCase();\r\n                var ut = getUETableBySelected(me), tds,\r\n                    range = new dom.Range(me.document),\r\n                    cmdFun = me.commands[cmd] || UE.commands[cmd],\r\n                    result;\r\n                if (!cmdFun) return;\r\n                if (ut && !commands[cmd] && !cmdFun.notNeedUndo && !me.__hasEnterExecCommand) {\r\n                    me.__hasEnterExecCommand = true;\r\n                    me.fireEvent(\"beforeexeccommand\", cmd);\r\n                    tds = ut.selectedTds;\r\n                    var lastState = -2, lastValue = -2, value, state;\r\n                    for (var i = 0, td; td = tds[i]; i++) {\r\n                        if (isEmptyBlock(td)) {\r\n                            range.setStart(td, 0).setCursor(false, true)\r\n                        } else {\r\n                            range.selectNode(td).select(true);\r\n                        }\r\n                        state = me.queryCommandState(cmd);\r\n                        value = me.queryCommandValue(cmd);\r\n                        if (state != -1) {\r\n                            if (lastState !== state || lastValue !== value) {\r\n                                me._ignoreContentChange = true;\r\n                                result = oldExecCommand.apply(me, arguments);\r\n                                me._ignoreContentChange = false;\r\n\r\n                            }\r\n                            lastState = me.queryCommandState(cmd);\r\n                            lastValue = me.queryCommandValue(cmd);\r\n                            if (domUtils.isEmptyBlock(td)) {\r\n                                domUtils.fillNode(me.document, td)\r\n                            }\r\n                        }\r\n                    }\r\n                    range.setStart(tds[0], 0).shrinkBoundary(true).setCursor(false, true);\r\n                    me.fireEvent('contentchange');\r\n                    me.fireEvent(\"afterexeccommand\", cmd);\r\n                    me.__hasEnterExecCommand = false;\r\n                    me._selectionChange();\r\n                } else {\r\n                    result = oldExecCommand.apply(me, arguments);\r\n                }\r\n                return result;\r\n            };\r\n\r\n\r\n        });\r\n        /**\r\n         * 删除obj的宽高style，改成属性宽高\r\n         * @param obj\r\n         * @param replaceToProperty\r\n         */\r\n        function removeStyleSize(obj, replaceToProperty) {\r\n            removeStyle(obj, \"width\", true);\r\n            removeStyle(obj, \"height\", true);\r\n        }\r\n\r\n        function removeStyle(obj, styleName, replaceToProperty) {\r\n            if (obj.style[styleName]) {\r\n                replaceToProperty && obj.setAttribute(styleName, parseInt(obj.style[styleName], 10));\r\n                obj.style[styleName] = \"\";\r\n            }\r\n        }\r\n\r\n        function getParentTdOrTh(ele) {\r\n            if (ele.tagName == \"TD\" || ele.tagName == \"TH\") return ele;\r\n            var td;\r\n            if (td = domUtils.findParentByTagName(ele, \"td\", true) || domUtils.findParentByTagName(ele, \"th\", true)) return td;\r\n            return null;\r\n        }\r\n\r\n        function isEmptyBlock(node) {\r\n            var reg = new RegExp(domUtils.fillChar, 'g');\r\n            if (node[browser.ie ? 'innerText' : 'textContent'].replace(/^\\s*$/, '').replace(reg, '').length > 0) {\r\n                return 0;\r\n            }\r\n            for (var n in dtd.$isNotEmpty) {\r\n                if (node.getElementsByTagName(n).length) {\r\n                    return 0;\r\n                }\r\n            }\r\n            return 1;\r\n        }\r\n\r\n\r\n        function mouseCoords(evt) {\r\n            if (evt.pageX || evt.pageY) {\r\n                return { x: evt.pageX, y: evt.pageY };\r\n            }\r\n            return {\r\n                x: evt.clientX + me.document.body.scrollLeft - me.document.body.clientLeft,\r\n                y: evt.clientY + me.document.body.scrollTop - me.document.body.clientTop\r\n            };\r\n        }\r\n\r\n        function mouseMoveEvent(evt) {\r\n\r\n            if (isEditorDisabled()) {\r\n                return;\r\n            }\r\n\r\n            try {\r\n\r\n                //普通状态下鼠标移动\r\n                var target = getParentTdOrTh(evt.target || evt.srcElement),\r\n                    pos;\r\n\r\n                //区分用户的行为是拖动还是双击\r\n                if (isInResizeBuffer) {\r\n\r\n                    me.body.style.webkitUserSelect = 'none';\r\n\r\n                    if (Math.abs(userActionStatus.x - evt.clientX) > offsetOfTableCell || Math.abs(userActionStatus.y - evt.clientY) > offsetOfTableCell) {\r\n                        clearTableDragTimer();\r\n                        isInResizeBuffer = false;\r\n                        singleClickState = 0;\r\n                        //drag action\r\n                        tableBorderDrag(evt);\r\n                    }\r\n                }\r\n\r\n                //修改单元格大小时的鼠标移动\r\n                if (onDrag && dragTd) {\r\n                    singleClickState = 0;\r\n                    me.body.style.webkitUserSelect = 'none';\r\n                    me.selection.getNative()[browser.ie9below ? 'empty' : 'removeAllRanges']();\r\n                    pos = mouseCoords(evt);\r\n                    toggleDraggableState(me, true, onDrag, pos, target);\r\n                    if (onDrag == \"h\") {\r\n                        dragLine.style.left = getPermissionX(dragTd, evt) + \"px\";\r\n                    } else if (onDrag == \"v\") {\r\n                        dragLine.style.top = getPermissionY(dragTd, evt) + \"px\";\r\n                    }\r\n                    return;\r\n                }\r\n                //当鼠标处于table上时，修改移动过程中的光标状态\r\n                if (target) {\r\n                    //针对使用table作为容器的组件不触发拖拽效果\r\n                    if (me.fireEvent('excludetable', target) === true)\r\n                        return;\r\n                    pos = mouseCoords(evt);\r\n                    var state = getRelation(target, pos),\r\n                        table = domUtils.findParentByTagName(target, \"table\", true);\r\n\r\n                    if (inTableSide(table, target, evt, true)) {\r\n                        if (me.fireEvent(\"excludetable\", table) === true) return;\r\n                        me.body.style.cursor = \"url(\" + me.options.cursorpath + \"h.png),pointer\";\r\n                    } else if (inTableSide(table, target, evt)) {\r\n                        if (me.fireEvent(\"excludetable\", table) === true) return;\r\n                        me.body.style.cursor = \"url(\" + me.options.cursorpath + \"v.png),pointer\";\r\n                    } else {\r\n                        me.body.style.cursor = \"text\";\r\n                        var curCell = target;\r\n                        if (/\\d/.test(state)) {\r\n                            state = state.replace(/\\d/, '');\r\n                            target = getUETable(target).getPreviewCell(target, state == \"v\");\r\n                        }\r\n                        //位于第一行的顶部或者第一列的左边时不可拖动\r\n                        toggleDraggableState(me, target ? !!state : false, target ? state : '', pos, target);\r\n\r\n                    }\r\n                } else {\r\n                    toggleDragButton(false, table, me);\r\n                }\r\n\r\n            } catch (e) {\r\n                showError(e);\r\n            }\r\n        }\r\n\r\n        var dragButtonTimer;\r\n\r\n        function toggleDragButton(show, table, editor) {\r\n            if (!show) {\r\n                if (dragOver) return;\r\n                dragButtonTimer = setTimeout(function () {\r\n                    !dragOver && dragButton && dragButton.parentNode && dragButton.parentNode.removeChild(dragButton);\r\n                }, 2000);\r\n            } else {\r\n                createDragButton(table, editor);\r\n            }\r\n        }\r\n\r\n        function createDragButton(table, editor) {\r\n            var pos = domUtils.getXY(table),\r\n                doc = table.ownerDocument;\r\n            if (dragButton && dragButton.parentNode) return dragButton;\r\n            dragButton = doc.createElement(\"div\");\r\n            dragButton.contentEditable = false;\r\n            dragButton.innerHTML = \"\";\r\n            dragButton.style.cssText = \"width:15px;height:15px;background-image:url(\" + editor.options.UEDITOR_HOME_URL + \"dialogs/table/dragicon.png);position: absolute;cursor:move;top:\" + (pos.y - 15) + \"px;left:\" + (pos.x) + \"px;\";\r\n            domUtils.unSelectable(dragButton);\r\n            dragButton.onmouseover = function (evt) {\r\n                dragOver = true;\r\n            };\r\n            dragButton.onmouseout = function (evt) {\r\n                dragOver = false;\r\n            };\r\n            domUtils.on(dragButton, 'click', function (type, evt) {\r\n                doClick(evt, this);\r\n            });\r\n            domUtils.on(dragButton, 'dblclick', function (type, evt) {\r\n                doDblClick(evt);\r\n            });\r\n            domUtils.on(dragButton, 'dragstart', function (type, evt) {\r\n                domUtils.preventDefault(evt);\r\n            });\r\n            var timer;\r\n\r\n            function doClick(evt, button) {\r\n                // 部分浏览器下需要清理\r\n                clearTimeout(timer);\r\n                timer = setTimeout(function () {\r\n                    editor.fireEvent(\"tableClicked\", table, button);\r\n                }, 300);\r\n            }\r\n\r\n            function doDblClick(evt) {\r\n                clearTimeout(timer);\r\n                var ut = getUETable(table),\r\n                    start = table.rows[0].cells[0],\r\n                    end = ut.getLastCell(),\r\n                    range = ut.getCellsRange(start, end);\r\n                editor.selection.getRange().setStart(start, 0).setCursor(false, true);\r\n                ut.setSelected(range);\r\n            }\r\n\r\n            doc.body.appendChild(dragButton);\r\n        }\r\n\r\n\r\n        //    function inPosition(table, pos) {\r\n        //        var tablePos = domUtils.getXY(table),\r\n        //            width = table.offsetWidth,\r\n        //            height = table.offsetHeight;\r\n        //        if (pos.x - tablePos.x < 5 && pos.y - tablePos.y < 5) {\r\n        //            return \"topLeft\";\r\n        //        } else if (tablePos.x + width - pos.x < 5 && tablePos.y + height - pos.y < 5) {\r\n        //            return \"bottomRight\";\r\n        //        }\r\n        //    }\r\n\r\n        function inTableSide(table, cell, evt, top) {\r\n            var pos = mouseCoords(evt),\r\n                state = getRelation(cell, pos);\r\n\r\n            if (top) {\r\n                var caption = table.getElementsByTagName(\"caption\")[0],\r\n                    capHeight = caption ? caption.offsetHeight : 0;\r\n                return (state == \"v1\") && ((pos.y - domUtils.getXY(table).y - capHeight) < 8);\r\n            } else {\r\n                return (state == \"h1\") && ((pos.x - domUtils.getXY(table).x) < 8);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * 获取拖动时允许的X轴坐标\r\n         * @param dragTd\r\n         * @param evt\r\n         */\r\n        function getPermissionX(dragTd, evt) {\r\n            var ut = getUETable(dragTd);\r\n            if (ut) {\r\n                var preTd = ut.getSameEndPosCells(dragTd, \"x\")[0],\r\n                    nextTd = ut.getSameStartPosXCells(dragTd)[0],\r\n                    mouseX = mouseCoords(evt).x,\r\n                    left = (preTd ? domUtils.getXY(preTd).x : domUtils.getXY(ut.table).x) + 20,\r\n                    right = nextTd ? domUtils.getXY(nextTd).x + nextTd.offsetWidth - 20 : (me.body.offsetWidth + 5 || parseInt(domUtils.getComputedStyle(me.body, \"width\"), 10));\r\n\r\n                left += cellMinWidth;\r\n                right -= cellMinWidth;\r\n\r\n                return mouseX < left ? left : mouseX > right ? right : mouseX;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * 获取拖动时允许的Y轴坐标\r\n         */\r\n        function getPermissionY(dragTd, evt) {\r\n            try {\r\n                var top = domUtils.getXY(dragTd).y,\r\n                    mousePosY = mouseCoords(evt).y;\r\n                return mousePosY < top ? top : mousePosY;\r\n            } catch (e) {\r\n                showError(e);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * 移动状态切换\r\n         */\r\n        function toggleDraggableState(editor, draggable, dir, mousePos, cell) {\r\n            try {\r\n                editor.body.style.cursor = dir == \"h\" ? \"col-resize\" : dir == \"v\" ? \"row-resize\" : \"text\";\r\n                if (browser.ie) {\r\n                    if (dir && !mousedown && !getUETableBySelected(editor)) {\r\n                        getDragLine(editor, editor.document);\r\n                        showDragLineAt(dir, cell);\r\n                    } else {\r\n                        hideDragLine(editor)\r\n                    }\r\n                }\r\n                onBorder = draggable;\r\n            } catch (e) {\r\n                showError(e);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * 获取与UETable相关的resize line\r\n         * @param uetable UETable对象\r\n         */\r\n        function getResizeLineByUETable() {\r\n\r\n            var lineId = '_UETableResizeLine',\r\n                line = this.document.getElementById(lineId);\r\n\r\n            if (!line) {\r\n                line = this.document.createElement(\"div\");\r\n                line.id = lineId;\r\n                line.contnetEditable = false;\r\n                line.setAttribute(\"unselectable\", \"on\");\r\n\r\n                var styles = {\r\n                    width: 2 * cellBorderWidth + 1 + 'px',\r\n                    position: 'absolute',\r\n                    'z-index': 100000,\r\n                    cursor: 'col-resize',\r\n                    background: 'red',\r\n                    display: 'none'\r\n                };\r\n\r\n                //切换状态\r\n                line.onmouseout = function () {\r\n                    this.style.display = 'none';\r\n                };\r\n\r\n                utils.extend(line.style, styles);\r\n\r\n                this.document.body.appendChild(line);\r\n\r\n            }\r\n\r\n            return line;\r\n\r\n        }\r\n\r\n        /**\r\n         * 更新resize-line\r\n         */\r\n        function updateResizeLine(cell, uetable) {\r\n\r\n            var line = getResizeLineByUETable.call(this),\r\n                table = uetable.table,\r\n                styles = {\r\n                    top: domUtils.getXY(table).y + 'px',\r\n                    left: domUtils.getXY(cell).x + cell.offsetWidth - cellBorderWidth + 'px',\r\n                    display: 'block',\r\n                    height: table.offsetHeight + 'px'\r\n                };\r\n\r\n            utils.extend(line.style, styles);\r\n\r\n        }\r\n\r\n        /**\r\n         * 显示resize-line\r\n         */\r\n        function showResizeLine(cell) {\r\n\r\n            var uetable = getUETable(cell);\r\n\r\n            updateResizeLine.call(this, cell, uetable);\r\n\r\n        }\r\n\r\n        /**\r\n         * 获取鼠标与当前单元格的相对位置\r\n         * @param ele\r\n         * @param mousePos\r\n         */\r\n        function getRelation(ele, mousePos) {\r\n            var elePos = domUtils.getXY(ele);\r\n\r\n            if (!elePos) {\r\n                return '';\r\n            }\r\n\r\n            if (elePos.x + ele.offsetWidth - mousePos.x < cellBorderWidth) {\r\n                return \"h\";\r\n            }\r\n            if (mousePos.x - elePos.x < cellBorderWidth) {\r\n                return 'h1'\r\n            }\r\n            if (elePos.y + ele.offsetHeight - mousePos.y < cellBorderWidth) {\r\n                return \"v\";\r\n            }\r\n            if (mousePos.y - elePos.y < cellBorderWidth) {\r\n                return 'v1'\r\n            }\r\n            return '';\r\n        }\r\n\r\n        function mouseDownEvent(type, evt) {\r\n\r\n            if (isEditorDisabled()) {\r\n                return;\r\n            }\r\n\r\n            userActionStatus = {\r\n                x: evt.clientX,\r\n                y: evt.clientY\r\n            };\r\n\r\n            //右键菜单单独处理\r\n            if (evt.button == 2) {\r\n                var ut = getUETableBySelected(me),\r\n                    flag = false;\r\n\r\n                if (ut) {\r\n                    var td = getTargetTd(me, evt);\r\n                    utils.each(ut.selectedTds, function (ti) {\r\n                        if (ti === td) {\r\n                            flag = true;\r\n                        }\r\n                    });\r\n                    if (!flag) {\r\n                        removeSelectedClass(domUtils.getElementsByTagName(me.body, \"th td\"));\r\n                        ut.clearSelected()\r\n                    } else {\r\n                        td = ut.selectedTds[0];\r\n                        setTimeout(function () {\r\n                            me.selection.getRange().setStart(td, 0).setCursor(false, true);\r\n                        }, 0);\r\n\r\n                    }\r\n                }\r\n            } else {\r\n                tableClickHander(evt);\r\n            }\r\n\r\n        }\r\n\r\n        //清除表格的计时器\r\n        function clearTableTimer() {\r\n            tabTimer && clearTimeout(tabTimer);\r\n            tabTimer = null;\r\n        }\r\n\r\n        //双击收缩\r\n        function tableDbclickHandler(evt) {\r\n            singleClickState = 0;\r\n            evt = evt || me.window.event;\r\n            var target = getParentTdOrTh(evt.target || evt.srcElement);\r\n            if (target) {\r\n                var h;\r\n                if (h = getRelation(target, mouseCoords(evt))) {\r\n\r\n                    hideDragLine(me);\r\n\r\n                    if (h == 'h1') {\r\n                        h = 'h';\r\n                        if (inTableSide(domUtils.findParentByTagName(target, \"table\"), target, evt)) {\r\n                            me.execCommand('adaptbywindow');\r\n                        } else {\r\n                            target = getUETable(target).getPreviewCell(target);\r\n                            if (target) {\r\n                                var rng = me.selection.getRange();\r\n                                rng.selectNodeContents(target).setCursor(true, true)\r\n                            }\r\n                        }\r\n                    }\r\n                    if (h == 'h') {\r\n                        var ut = getUETable(target),\r\n                            table = ut.table,\r\n                            cells = getCellsByMoveBorder(target, table, true);\r\n\r\n                        cells = extractArray(cells, 'left');\r\n\r\n                        ut.width = ut.offsetWidth;\r\n\r\n                        var oldWidth = [],\r\n                            newWidth = [];\r\n\r\n                        utils.each(cells, function (cell) {\r\n\r\n                            oldWidth.push(cell.offsetWidth);\r\n\r\n                        });\r\n\r\n                        utils.each(cells, function (cell) {\r\n\r\n                            cell.removeAttribute(\"width\");\r\n\r\n                        });\r\n\r\n                        window.setTimeout(function () {\r\n\r\n                            //是否允许改变\r\n                            var changeable = true;\r\n\r\n                            utils.each(cells, function (cell, index) {\r\n\r\n                                var width = cell.offsetWidth;\r\n\r\n                                if (width > oldWidth[index]) {\r\n                                    changeable = false;\r\n                                    return false;\r\n                                }\r\n\r\n                                newWidth.push(width);\r\n\r\n                            });\r\n\r\n                            var change = changeable ? newWidth : oldWidth;\r\n\r\n                            utils.each(cells, function (cell, index) {\r\n\r\n                                cell.width = change[index] - getTabcellSpace();\r\n\r\n                            });\r\n\r\n\r\n                        }, 0);\r\n\r\n                        //                    minWidth -= cellMinWidth;\r\n                        //\r\n                        //                    table.removeAttribute(\"width\");\r\n                        //                    utils.each(cells, function (cell) {\r\n                        //                        cell.style.width = \"\";\r\n                        //                        cell.width -= minWidth;\r\n                        //                    });\r\n\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        function tableClickHander(evt) {\r\n\r\n            removeSelectedClass(domUtils.getElementsByTagName(me.body, \"td th\"));\r\n            //trace:3113\r\n            //选中单元格，点击table外部，不会清掉table上挂的ueTable,会引起getUETableBySelected方法返回值\r\n            utils.each(me.document.getElementsByTagName('table'), function (t) {\r\n                t.ueTable = null;\r\n            });\r\n            startTd = getTargetTd(me, evt);\r\n            if (!startTd) return;\r\n            var table = domUtils.findParentByTagName(startTd, \"table\", true);\r\n            ut = getUETable(table);\r\n            ut && ut.clearSelected();\r\n\r\n            //判断当前鼠标状态\r\n            if (!onBorder) {\r\n                me.document.body.style.webkitUserSelect = '';\r\n                mousedown = true;\r\n                me.addListener('mouseover', mouseOverEvent);\r\n            } else {\r\n                //边框上的动作处理\r\n                borderActionHandler(evt);\r\n            }\r\n\r\n\r\n        }\r\n\r\n        //处理表格边框上的动作, 这里做延时处理，避免两种动作互相影响\r\n        function borderActionHandler(evt) {\r\n\r\n            if (browser.ie) {\r\n                evt = reconstruct(evt);\r\n            }\r\n\r\n            clearTableDragTimer();\r\n\r\n            //是否正在等待resize的缓冲中\r\n            isInResizeBuffer = true;\r\n\r\n            tableDragTimer = setTimeout(function () {\r\n                tableBorderDrag(evt);\r\n            }, dblclickTime);\r\n\r\n        }\r\n\r\n        function extractArray(originArr, key) {\r\n\r\n            var result = [],\r\n                tmp = null;\r\n\r\n            for (var i = 0, len = originArr.length; i < len; i++) {\r\n\r\n                tmp = originArr[i][key];\r\n\r\n                if (tmp) {\r\n                    result.push(tmp);\r\n                }\r\n\r\n            }\r\n\r\n            return result;\r\n\r\n        }\r\n\r\n        function clearTableDragTimer() {\r\n            tableDragTimer && clearTimeout(tableDragTimer);\r\n            tableDragTimer = null;\r\n        }\r\n\r\n        function reconstruct(obj) {\r\n\r\n            var attrs = ['pageX', 'pageY', 'clientX', 'clientY', 'srcElement', 'target'],\r\n                newObj = {};\r\n\r\n            if (obj) {\r\n\r\n                for (var i = 0, key, val; key = attrs[i]; i++) {\r\n                    val = obj[key];\r\n                    val && (newObj[key] = val);\r\n                }\r\n\r\n            }\r\n\r\n            return newObj;\r\n\r\n        }\r\n\r\n        //边框拖动\r\n        function tableBorderDrag(evt) {\r\n\r\n            isInResizeBuffer = false;\r\n\r\n            startTd = evt.target || evt.srcElement;\r\n            if (!startTd) return;\r\n            var state = getRelation(startTd, mouseCoords(evt));\r\n            if (/\\d/.test(state)) {\r\n                state = state.replace(/\\d/, '');\r\n                startTd = getUETable(startTd).getPreviewCell(startTd, state == 'v');\r\n            }\r\n            hideDragLine(me);\r\n            getDragLine(me, me.document);\r\n            me.fireEvent('saveScene');\r\n            showDragLineAt(state, startTd);\r\n            mousedown = true;\r\n            //拖动开始\r\n            onDrag = state;\r\n            dragTd = startTd;\r\n        }\r\n\r\n        function mouseUpEvent(type, evt) {\r\n\r\n            if (isEditorDisabled()) {\r\n                return;\r\n            }\r\n\r\n            clearTableDragTimer();\r\n\r\n            isInResizeBuffer = false;\r\n\r\n            if (onBorder) {\r\n                singleClickState = ++singleClickState % 3;\r\n\r\n                userActionStatus = {\r\n                    x: evt.clientX,\r\n                    y: evt.clientY\r\n                };\r\n\r\n                tableResizeTimer = setTimeout(function () {\r\n                    singleClickState > 0 && singleClickState--;\r\n                }, dblclickTime);\r\n\r\n                if (singleClickState === 2) {\r\n\r\n                    singleClickState = 0;\r\n                    tableDbclickHandler(evt);\r\n                    return;\r\n\r\n                }\r\n\r\n            }\r\n\r\n            if (evt.button == 2) return;\r\n            var me = this;\r\n            //清除表格上原生跨选问题\r\n            var range = me.selection.getRange(),\r\n                start = domUtils.findParentByTagName(range.startContainer, 'table', true),\r\n                end = domUtils.findParentByTagName(range.endContainer, 'table', true);\r\n\r\n            if (start || end) {\r\n                if (start === end) {\r\n                    start = domUtils.findParentByTagName(range.startContainer, ['td', 'th', 'caption'], true);\r\n                    end = domUtils.findParentByTagName(range.endContainer, ['td', 'th', 'caption'], true);\r\n                    if (start !== end) {\r\n                        me.selection.clearRange()\r\n                    }\r\n                } else {\r\n                    me.selection.clearRange()\r\n                }\r\n            }\r\n            mousedown = false;\r\n            me.document.body.style.webkitUserSelect = '';\r\n            //拖拽状态下的mouseUP\r\n            if (onDrag && dragTd) {\r\n\r\n                me.selection.getNative()[browser.ie9below ? 'empty' : 'removeAllRanges']();\r\n\r\n                singleClickState = 0;\r\n                dragLine = me.document.getElementById('ue_tableDragLine');\r\n\r\n                // trace 3973\r\n                if (dragLine) {\r\n                    var dragTdPos = domUtils.getXY(dragTd),\r\n                        dragLinePos = domUtils.getXY(dragLine);\r\n\r\n                    switch (onDrag) {\r\n                        case \"h\":\r\n                            changeColWidth(dragTd, dragLinePos.x - dragTdPos.x);\r\n                            break;\r\n                        case \"v\":\r\n                            changeRowHeight(dragTd, dragLinePos.y - dragTdPos.y - dragTd.offsetHeight);\r\n                            break;\r\n                        default:\r\n                    }\r\n                    onDrag = \"\";\r\n                    dragTd = null;\r\n\r\n                    hideDragLine(me);\r\n                    me.fireEvent('saveScene');\r\n                    return;\r\n                }\r\n            }\r\n            //正常状态下的mouseup\r\n            if (!startTd) {\r\n                var target = domUtils.findParentByTagName(evt.target || evt.srcElement, \"td\", true);\r\n                if (!target) target = domUtils.findParentByTagName(evt.target || evt.srcElement, \"th\", true);\r\n                if (target && (target.tagName == \"TD\" || target.tagName == \"TH\")) {\r\n                    if (me.fireEvent(\"excludetable\", target) === true) return;\r\n                    range = new dom.Range(me.document);\r\n                    range.setStart(target, 0).setCursor(false, true);\r\n                }\r\n            } else {\r\n                var ut = getUETable(startTd),\r\n                    cell = ut ? ut.selectedTds[0] : null;\r\n                if (cell) {\r\n                    range = new dom.Range(me.document);\r\n                    if (domUtils.isEmptyBlock(cell)) {\r\n                        range.setStart(cell, 0).setCursor(false, true);\r\n                    } else {\r\n                        range.selectNodeContents(cell).shrinkBoundary().setCursor(false, true);\r\n                    }\r\n                } else {\r\n                    range = me.selection.getRange().shrinkBoundary();\r\n                    if (!range.collapsed) {\r\n                        var start = domUtils.findParentByTagName(range.startContainer, ['td', 'th'], true),\r\n                            end = domUtils.findParentByTagName(range.endContainer, ['td', 'th'], true);\r\n                        //在table里边的不能清除\r\n                        if (start && !end || !start && end || start && end && start !== end) {\r\n                            range.setCursor(false, true);\r\n                        }\r\n                    }\r\n                }\r\n                startTd = null;\r\n                me.removeListener('mouseover', mouseOverEvent);\r\n            }\r\n            me._selectionChange(250, evt);\r\n        }\r\n\r\n        function mouseOverEvent(type, evt) {\r\n\r\n            if (isEditorDisabled()) {\r\n                return;\r\n            }\r\n\r\n            var me = this,\r\n                tar = evt.target || evt.srcElement;\r\n            currentTd = domUtils.findParentByTagName(tar, \"td\", true) || domUtils.findParentByTagName(tar, \"th\", true);\r\n            //需要判断两个TD是否位于同一个表格内\r\n            if (startTd && currentTd &&\r\n                ((startTd.tagName == \"TD\" && currentTd.tagName == \"TD\") || (startTd.tagName == \"TH\" && currentTd.tagName == \"TH\")) &&\r\n                domUtils.findParentByTagName(startTd, 'table') == domUtils.findParentByTagName(currentTd, 'table')) {\r\n                var ut = getUETable(currentTd);\r\n                if (startTd != currentTd) {\r\n                    me.document.body.style.webkitUserSelect = 'none';\r\n                    me.selection.getNative()[browser.ie9below ? 'empty' : 'removeAllRanges']();\r\n                    var range = ut.getCellsRange(startTd, currentTd);\r\n                    ut.setSelected(range);\r\n                } else {\r\n                    me.document.body.style.webkitUserSelect = '';\r\n                    ut.clearSelected();\r\n                }\r\n\r\n            }\r\n            evt.preventDefault ? evt.preventDefault() : (evt.returnValue = false);\r\n        }\r\n\r\n        function setCellHeight(cell, height, backHeight) {\r\n            var lineHight = parseInt(domUtils.getComputedStyle(cell, \"line-height\"), 10),\r\n                tmpHeight = backHeight + height;\r\n            height = tmpHeight < lineHight ? lineHight : tmpHeight;\r\n            if (cell.style.height) cell.style.height = \"\";\r\n            cell.rowSpan == 1 ? cell.setAttribute(\"height\", height) : (cell.removeAttribute && cell.removeAttribute(\"height\"));\r\n        }\r\n\r\n        function getWidth(cell) {\r\n            if (!cell) return 0;\r\n            return parseInt(domUtils.getComputedStyle(cell, \"width\"), 10);\r\n        }\r\n\r\n        function changeColWidth(cell, changeValue) {\r\n\r\n            var ut = getUETable(cell);\r\n            if (ut) {\r\n\r\n                //根据当前移动的边框获取相关的单元格\r\n                var table = ut.table,\r\n                    cells = getCellsByMoveBorder(cell, table);\r\n\r\n                table.style.width = \"\";\r\n                table.removeAttribute(\"width\");\r\n\r\n                //修正改变量\r\n                changeValue = correctChangeValue(changeValue, cell, cells);\r\n\r\n                if (cell.nextSibling) {\r\n\r\n                    var i = 0;\r\n\r\n                    utils.each(cells, function (cellGroup) {\r\n\r\n                        cellGroup.left.width = (+cellGroup.left.width) + changeValue;\r\n                        cellGroup.right && (cellGroup.right.width = (+cellGroup.right.width) - changeValue);\r\n\r\n                    });\r\n\r\n                } else {\r\n\r\n                    utils.each(cells, function (cellGroup) {\r\n                        cellGroup.left.width -= -changeValue;\r\n                    });\r\n\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        function isEditorDisabled() {\r\n            return me.body.contentEditable === \"false\";\r\n        }\r\n\r\n        function changeRowHeight(td, changeValue) {\r\n            if (Math.abs(changeValue) < 10) return;\r\n            var ut = getUETable(td);\r\n            if (ut) {\r\n                var cells = ut.getSameEndPosCells(td, \"y\"),\r\n                    //备份需要连带变化的td的原始高度，否则后期无法获取正确的值\r\n                    backHeight = cells[0] ? cells[0].offsetHeight : 0;\r\n                for (var i = 0, cell; cell = cells[i++];) {\r\n                    setCellHeight(cell, changeValue, backHeight);\r\n                }\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * 获取调整单元格大小的相关单元格\r\n         * @isContainMergeCell 返回的结果中是否包含发生合并后的单元格\r\n         */\r\n        function getCellsByMoveBorder(cell, table, isContainMergeCell) {\r\n\r\n            if (!table) {\r\n                table = domUtils.findParentByTagName(cell, 'table');\r\n            }\r\n\r\n            if (!table) {\r\n                return null;\r\n            }\r\n\r\n            //获取到该单元格所在行的序列号\r\n            var index = domUtils.getNodeIndex(cell),\r\n                temp = cell,\r\n                rows = table.rows,\r\n                colIndex = 0;\r\n\r\n            while (temp) {\r\n                //获取到当前单元格在未发生单元格合并时的序列\r\n                if (temp.nodeType === 1) {\r\n                    colIndex += (temp.colSpan || 1);\r\n                }\r\n                temp = temp.previousSibling;\r\n            }\r\n\r\n            temp = null;\r\n\r\n            //记录想关的单元格\r\n            var borderCells = [];\r\n\r\n            utils.each(rows, function (tabRow) {\r\n\r\n                var cells = tabRow.cells,\r\n                    currIndex = 0;\r\n\r\n                utils.each(cells, function (tabCell) {\r\n\r\n                    currIndex += (tabCell.colSpan || 1);\r\n\r\n                    if (currIndex === colIndex) {\r\n\r\n                        borderCells.push({\r\n                            left: tabCell,\r\n                            right: tabCell.nextSibling || null\r\n                        });\r\n\r\n                        return false;\r\n\r\n                    } else if (currIndex > colIndex) {\r\n\r\n                        if (isContainMergeCell) {\r\n                            borderCells.push({\r\n                                left: tabCell\r\n                            });\r\n                        }\r\n\r\n                        return false;\r\n                    }\r\n\r\n\r\n                });\r\n\r\n            });\r\n\r\n            return borderCells;\r\n\r\n        }\r\n\r\n\r\n        /**\r\n         * 通过给定的单元格集合获取最小的单元格width\r\n         */\r\n        function getMinWidthByTableCells(cells) {\r\n\r\n            var minWidth = Number.MAX_VALUE;\r\n\r\n            for (var i = 0, curCell; curCell = cells[i]; i++) {\r\n\r\n                minWidth = Math.min(minWidth, curCell.width || getTableCellWidth(curCell));\r\n\r\n            }\r\n\r\n            return minWidth;\r\n\r\n        }\r\n\r\n        function correctChangeValue(changeValue, relatedCell, cells) {\r\n\r\n            //为单元格的paading预留空间\r\n            changeValue -= getTabcellSpace();\r\n\r\n            if (changeValue < 0) {\r\n                return 0;\r\n            }\r\n\r\n            changeValue -= getTableCellWidth(relatedCell);\r\n\r\n            //确定方向\r\n            var direction = changeValue < 0 ? 'left' : 'right';\r\n\r\n            changeValue = Math.abs(changeValue);\r\n\r\n            //只关心非最后一个单元格就可以\r\n            utils.each(cells, function (cellGroup) {\r\n\r\n                var curCell = cellGroup[direction];\r\n\r\n                //为单元格保留最小空间\r\n                if (curCell) {\r\n                    changeValue = Math.min(changeValue, getTableCellWidth(curCell) - cellMinWidth);\r\n                }\r\n\r\n\r\n            });\r\n\r\n\r\n            //修正越界\r\n            changeValue = changeValue < 0 ? 0 : changeValue;\r\n\r\n            return direction === 'left' ? -changeValue : changeValue;\r\n\r\n        }\r\n\r\n        function getTableCellWidth(cell) {\r\n\r\n            var width = 0,\r\n                //偏移纠正量\r\n                offset = 0,\r\n                width = cell.offsetWidth - getTabcellSpace();\r\n\r\n            //最后一个节点纠正一下\r\n            if (!cell.nextSibling) {\r\n\r\n                width -= getTableCellOffset(cell);\r\n\r\n            }\r\n\r\n            width = width < 0 ? 0 : width;\r\n\r\n            try {\r\n                cell.width = width;\r\n            } catch (e) {\r\n            }\r\n\r\n            return width;\r\n\r\n        }\r\n\r\n        /**\r\n         * 获取单元格所在表格的最末单元格的偏移量\r\n         */\r\n        function getTableCellOffset(cell) {\r\n\r\n            tab = domUtils.findParentByTagName(cell, \"table\", false);\r\n\r\n            if (tab.offsetVal === undefined) {\r\n\r\n                var prev = cell.previousSibling;\r\n\r\n                if (prev) {\r\n\r\n                    //最后一个单元格和前一个单元格的width diff结果 如果恰好为一个border width， 则条件成立\r\n                    tab.offsetVal = cell.offsetWidth - prev.offsetWidth === UT.borderWidth ? UT.borderWidth : 0;\r\n\r\n                } else {\r\n                    tab.offsetVal = 0;\r\n                }\r\n\r\n            }\r\n\r\n            return tab.offsetVal;\r\n\r\n        }\r\n\r\n        function getTabcellSpace() {\r\n\r\n            if (UT.tabcellSpace === undefined) {\r\n\r\n                var cell = null,\r\n                    tab = me.document.createElement(\"table\"),\r\n                    tbody = me.document.createElement(\"tbody\"),\r\n                    trow = me.document.createElement(\"tr\"),\r\n                    tabcell = me.document.createElement(\"td\"),\r\n                    mirror = null;\r\n\r\n                tabcell.style.cssText = 'border: 0;';\r\n                tabcell.width = 1;\r\n\r\n                trow.appendChild(tabcell);\r\n                trow.appendChild(mirror = tabcell.cloneNode(false));\r\n\r\n                tbody.appendChild(trow);\r\n\r\n                tab.appendChild(tbody);\r\n\r\n                tab.style.cssText = \"visibility: hidden;\";\r\n\r\n                me.body.appendChild(tab);\r\n\r\n                UT.paddingSpace = tabcell.offsetWidth - 1;\r\n\r\n                var tmpTabWidth = tab.offsetWidth;\r\n\r\n                tabcell.style.cssText = '';\r\n                mirror.style.cssText = '';\r\n\r\n                UT.borderWidth = (tab.offsetWidth - tmpTabWidth) / 3;\r\n\r\n                UT.tabcellSpace = UT.paddingSpace + UT.borderWidth;\r\n\r\n                me.body.removeChild(tab);\r\n\r\n            }\r\n\r\n            getTabcellSpace = function () { return UT.tabcellSpace; };\r\n\r\n            return UT.tabcellSpace;\r\n\r\n        }\r\n\r\n        function getDragLine(editor, doc) {\r\n            if (mousedown) return;\r\n            dragLine = editor.document.createElement(\"div\");\r\n            domUtils.setAttributes(dragLine, {\r\n                id: \"ue_tableDragLine\",\r\n                unselectable: 'on',\r\n                contenteditable: false,\r\n                'onresizestart': 'return false',\r\n                'ondragstart': 'return false',\r\n                'onselectstart': 'return false',\r\n                style: \"background-color:blue;position:absolute;padding:0;margin:0;background-image:none;border:0px none;opacity:0;filter:alpha(opacity=0)\"\r\n            });\r\n            editor.body.appendChild(dragLine);\r\n        }\r\n\r\n        function hideDragLine(editor) {\r\n            if (mousedown) return;\r\n            var line;\r\n            while (line = editor.document.getElementById('ue_tableDragLine')) {\r\n                domUtils.remove(line)\r\n            }\r\n        }\r\n\r\n        /**\r\n         * 依据state（v|h）在cell位置显示横线\r\n         * @param state\r\n         * @param cell\r\n         */\r\n        function showDragLineAt(state, cell) {\r\n            if (!cell) return;\r\n            var table = domUtils.findParentByTagName(cell, \"table\"),\r\n                caption = table.getElementsByTagName('caption'),\r\n                width = table.offsetWidth,\r\n                height = table.offsetHeight - (caption.length > 0 ? caption[0].offsetHeight : 0),\r\n                tablePos = domUtils.getXY(table),\r\n                cellPos = domUtils.getXY(cell), css;\r\n            switch (state) {\r\n                case \"h\":\r\n                    css = 'height:' + height + 'px;top:' + (tablePos.y + (caption.length > 0 ? caption[0].offsetHeight : 0)) + 'px;left:' + (cellPos.x + cell.offsetWidth);\r\n                    dragLine.style.cssText = css + 'px;position: absolute;display:block;background-color:blue;width:1px;border:0; color:blue;opacity:.3;filter:alpha(opacity=30)';\r\n                    break;\r\n                case \"v\":\r\n                    css = 'width:' + width + 'px;left:' + tablePos.x + 'px;top:' + (cellPos.y + cell.offsetHeight);\r\n                    //必须加上border:0和color:blue，否则低版ie不支持背景色显示\r\n                    dragLine.style.cssText = css + 'px;overflow:hidden;position: absolute;display:block;background-color:blue;height:1px;border:0;color:blue;opacity:.2;filter:alpha(opacity=20)';\r\n                    break;\r\n                default:\r\n            }\r\n        }\r\n\r\n        /**\r\n         * 当表格边框颜色为白色时设置为虚线,true为添加虚线\r\n         * @param editor\r\n         * @param flag\r\n         */\r\n        function switchBorderColor(editor, flag) {\r\n            var tableArr = domUtils.getElementsByTagName(editor.body, \"table\"), color;\r\n            for (var i = 0, node; node = tableArr[i++];) {\r\n                var td = domUtils.getElementsByTagName(node, \"td\");\r\n                if (td[0]) {\r\n                    if (flag) {\r\n                        color = (td[0].style.borderColor).replace(/\\s/g, \"\");\r\n                        if (/(#ffffff)|(rgb\\(255,255,255\\))/ig.test(color))\r\n                            domUtils.addClass(node, \"noBorderTable\")\r\n                    } else {\r\n                        domUtils.removeClasses(node, \"noBorderTable\")\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        function getTableWidth(editor, needIEHack, defaultValue) {\r\n            var body = editor.body;\r\n            return body.offsetWidth - (needIEHack ? parseInt(domUtils.getComputedStyle(body, 'margin-left'), 10) * 2 : 0) - defaultValue.tableBorder * 2 - (editor.options.offsetWidth || 0);\r\n        }\r\n\r\n        /**\r\n         * 获取当前拖动的单元格\r\n         */\r\n        function getTargetTd(editor, evt) {\r\n\r\n            var target = domUtils.findParentByTagName(evt.target || evt.srcElement, [\"td\", \"th\"], true),\r\n                dir = null;\r\n\r\n            if (!target) {\r\n                return null;\r\n            }\r\n\r\n            dir = getRelation(target, mouseCoords(evt));\r\n\r\n            //如果有前一个节点， 需要做一个修正， 否则可能会得到一个错误的td\r\n\r\n            if (!target) {\r\n                return null;\r\n            }\r\n\r\n            if (dir === 'h1' && target.previousSibling) {\r\n\r\n                var position = domUtils.getXY(target),\r\n                    cellWidth = target.offsetWidth;\r\n\r\n                if (Math.abs(position.x + cellWidth - evt.clientX) > cellWidth / 3) {\r\n                    target = target.previousSibling;\r\n                }\r\n\r\n            } else if (dir === 'v1' && target.parentNode.previousSibling) {\r\n\r\n                var position = domUtils.getXY(target),\r\n                    cellHeight = target.offsetHeight;\r\n\r\n                if (Math.abs(position.y + cellHeight - evt.clientY) > cellHeight / 3) {\r\n                    target = target.parentNode.previousSibling.firstChild;\r\n                }\r\n\r\n            }\r\n\r\n\r\n            //排除了非td内部以及用于代码高亮部分的td\r\n            return target && !(editor.fireEvent(\"excludetable\", target) === true) ? target : null;\r\n        }\r\n\r\n    };\r\n\r\n\r\n    // plugins/table.sort.js\r\n    /**\r\n     * Created with JetBrains PhpStorm.\r\n     * User: Jinqn\r\n     * Date: 13-10-12\r\n     * Time: 上午10:20\r\n     * To change this template use File | Settings | File Templates.\r\n     */\r\n\r\n    UE.UETable.prototype.sortTable = function (sortByCellIndex, compareFn) {\r\n        var table = this.table,\r\n            rows = table.rows,\r\n            trArray = [],\r\n            flag = rows[0].cells[0].tagName === \"TH\",\r\n            lastRowIndex = 0;\r\n        if (this.selectedTds.length) {\r\n            var range = this.cellsRange,\r\n                len = range.endRowIndex + 1;\r\n            for (var i = range.beginRowIndex; i < len; i++) {\r\n                trArray[i] = rows[i];\r\n            }\r\n            trArray.splice(0, range.beginRowIndex);\r\n            lastRowIndex = (range.endRowIndex + 1) === this.rowsNum ? 0 : range.endRowIndex + 1;\r\n        } else {\r\n            for (var i = 0, len = rows.length; i < len; i++) {\r\n                trArray[i] = rows[i];\r\n            }\r\n        }\r\n\r\n        var Fn = {\r\n            'reversecurrent': function (td1, td2) {\r\n                return 1;\r\n            },\r\n            'orderbyasc': function (td1, td2) {\r\n                var value1 = td1.innerText || td1.textContent,\r\n                    value2 = td2.innerText || td2.textContent;\r\n                return value1.localeCompare(value2);\r\n            },\r\n            'reversebyasc': function (td1, td2) {\r\n                var value1 = td1.innerHTML,\r\n                    value2 = td2.innerHTML;\r\n                return value2.localeCompare(value1);\r\n            },\r\n            'orderbynum': function (td1, td2) {\r\n                var value1 = td1[browser.ie ? 'innerText' : 'textContent'].match(/\\d+/),\r\n                    value2 = td2[browser.ie ? 'innerText' : 'textContent'].match(/\\d+/);\r\n                if (value1) value1 = +value1[0];\r\n                if (value2) value2 = +value2[0];\r\n                return (value1 || 0) - (value2 || 0);\r\n            },\r\n            'reversebynum': function (td1, td2) {\r\n                var value1 = td1[browser.ie ? 'innerText' : 'textContent'].match(/\\d+/),\r\n                    value2 = td2[browser.ie ? 'innerText' : 'textContent'].match(/\\d+/);\r\n                if (value1) value1 = +value1[0];\r\n                if (value2) value2 = +value2[0];\r\n                return (value2 || 0) - (value1 || 0);\r\n            }\r\n        };\r\n\r\n        //对表格设置排序的标记data-sort-type\r\n        table.setAttribute('data-sort-type', compareFn && typeof compareFn === \"string\" && Fn[compareFn] ? compareFn : '');\r\n\r\n        //th不参与排序\r\n        flag && trArray.splice(0, 1);\r\n        trArray = utils.sort(trArray, function (tr1, tr2) {\r\n            var result;\r\n            if (compareFn && typeof compareFn === \"function\") {\r\n                result = compareFn.call(this, tr1.cells[sortByCellIndex], tr2.cells[sortByCellIndex]);\r\n            } else if (compareFn && typeof compareFn === \"number\") {\r\n                result = 1;\r\n            } else if (compareFn && typeof compareFn === \"string\" && Fn[compareFn]) {\r\n                result = Fn[compareFn].call(this, tr1.cells[sortByCellIndex], tr2.cells[sortByCellIndex]);\r\n            } else {\r\n                result = Fn['orderbyasc'].call(this, tr1.cells[sortByCellIndex], tr2.cells[sortByCellIndex]);\r\n            }\r\n            return result;\r\n        });\r\n        var fragment = table.ownerDocument.createDocumentFragment();\r\n        for (var j = 0, len = trArray.length; j < len; j++) {\r\n            fragment.appendChild(trArray[j]);\r\n        }\r\n        var tbody = table.getElementsByTagName(\"tbody\")[0];\r\n        if (!lastRowIndex) {\r\n            tbody.appendChild(fragment);\r\n        } else {\r\n            tbody.insertBefore(fragment, rows[lastRowIndex - range.endRowIndex + range.beginRowIndex - 1])\r\n        }\r\n    };\r\n\r\n    UE.plugins['tablesort'] = function () {\r\n        var me = this,\r\n            UT = UE.UETable,\r\n            getUETable = function (tdOrTable) {\r\n                return UT.getUETable(tdOrTable);\r\n            },\r\n            getTableItemsByRange = function (editor) {\r\n                return UT.getTableItemsByRange(editor);\r\n            };\r\n\r\n\r\n        me.ready(function () {\r\n            //添加表格可排序的样式\r\n            utils.cssRule('tablesort',\r\n                'table.sortEnabled tr.firstRow th,table.sortEnabled tr.firstRow td{padding-right:20px;background-repeat: no-repeat;background-position: center right;' +\r\n                '   background-image:url(' + me.options.themePath + me.options.theme + '/images/sortable.png);}',\r\n                me.document);\r\n\r\n            //做单元格合并操作时,清除可排序标识\r\n            me.addListener(\"afterexeccommand\", function (type, cmd) {\r\n                if (cmd == 'mergeright' || cmd == 'mergedown' || cmd == 'mergecells') {\r\n                    this.execCommand('disablesort');\r\n                }\r\n            });\r\n        });\r\n\r\n\r\n\r\n        //表格排序\r\n        UE.commands['sorttable'] = {\r\n            queryCommandState: function () {\r\n                var me = this,\r\n                    tableItems = getTableItemsByRange(me);\r\n                if (!tableItems.cell) return -1;\r\n                var table = tableItems.table,\r\n                    cells = table.getElementsByTagName(\"td\");\r\n                for (var i = 0, cell; cell = cells[i++];) {\r\n                    if (cell.rowSpan != 1 || cell.colSpan != 1) return -1;\r\n                }\r\n                return 0;\r\n            },\r\n            execCommand: function (cmd, fn) {\r\n                var me = this,\r\n                    range = me.selection.getRange(),\r\n                    bk = range.createBookmark(true),\r\n                    tableItems = getTableItemsByRange(me),\r\n                    cell = tableItems.cell,\r\n                    ut = getUETable(tableItems.table),\r\n                    cellInfo = ut.getCellInfo(cell);\r\n                ut.sortTable(cellInfo.cellIndex, fn);\r\n                range.moveToBookmark(bk);\r\n                try {\r\n                    range.select();\r\n                } catch (e) { }\r\n            }\r\n        };\r\n\r\n        //设置表格可排序,清除表格可排序\r\n        UE.commands[\"enablesort\"] = UE.commands[\"disablesort\"] = {\r\n            queryCommandState: function (cmd) {\r\n                var table = getTableItemsByRange(this).table;\r\n                if (table && cmd == 'enablesort') {\r\n                    var cells = domUtils.getElementsByTagName(table, 'th td');\r\n                    for (var i = 0; i < cells.length; i++) {\r\n                        if (cells[i].getAttribute('colspan') > 1 || cells[i].getAttribute('rowspan') > 1) return -1;\r\n                    }\r\n                }\r\n\r\n                return !table ? -1 : cmd == 'enablesort' ^ table.getAttribute('data-sort') != 'sortEnabled' ? -1 : 0;\r\n            },\r\n            execCommand: function (cmd) {\r\n                var table = getTableItemsByRange(this).table;\r\n                table.setAttribute(\"data-sort\", cmd == \"enablesort\" ? \"sortEnabled\" : \"sortDisabled\");\r\n                cmd == \"enablesort\" ? domUtils.addClass(table, \"sortEnabled\") : domUtils.removeClasses(table, \"sortEnabled\");\r\n            }\r\n        };\r\n    };\r\n\r\n\r\n    // plugins/contextmenu.js\r\n    ///import core\r\n    ///commands 右键菜单\r\n    ///commandsName  ContextMenu\r\n    ///commandsTitle  右键菜单\r\n    /**\r\n     * 右键菜单\r\n     * @function\r\n     * @name baidu.editor.plugins.contextmenu\r\n     * @author zhanyi\r\n     */\r\n\r\n    UE.plugins['contextmenu'] = function () {\r\n        var me = this;\r\n        me.setOpt('enableContextMenu', true);\r\n        if (me.getOpt('enableContextMenu') === false) {\r\n            return;\r\n        }\r\n        var lang = me.getLang(\"contextMenu\"),\r\n            menu,\r\n            items = me.options.contextMenu || [\r\n                { label: lang['selectall'], cmdName: 'selectall' },\r\n                {\r\n                    label: lang.cleardoc,\r\n                    cmdName: 'cleardoc',\r\n                    exec: function () {\r\n                        if (confirm(lang.confirmclear)) {\r\n                            this.execCommand('cleardoc');\r\n                        }\r\n                    }\r\n                },\r\n                '-',\r\n                {\r\n                    label: lang.unlink,\r\n                    cmdName: 'unlink'\r\n                },\r\n                '-',\r\n                {\r\n                    group: lang.paragraph,\r\n                    icon: 'justifyjustify',\r\n                    subMenu: [\r\n                        {\r\n                            label: lang.justifyleft,\r\n                            cmdName: 'justify',\r\n                            value: 'left'\r\n                        },\r\n                        {\r\n                            label: lang.justifyright,\r\n                            cmdName: 'justify',\r\n                            value: 'right'\r\n                        },\r\n                        {\r\n                            label: lang.justifycenter,\r\n                            cmdName: 'justify',\r\n                            value: 'center'\r\n                        },\r\n                        {\r\n                            label: lang.justifyjustify,\r\n                            cmdName: 'justify',\r\n                            value: 'justify'\r\n                        }\r\n                    ]\r\n                },\r\n                '-',\r\n                {\r\n                    group: lang.table,\r\n                    icon: 'table',\r\n                    subMenu: [\r\n                        {\r\n                            label: lang.inserttable,\r\n                            cmdName: 'inserttable'\r\n                        },\r\n                        {\r\n                            label: lang.deletetable,\r\n                            cmdName: 'deletetable'\r\n                        },\r\n                        '-',\r\n                        {\r\n                            label: lang.deleterow,\r\n                            cmdName: 'deleterow'\r\n                        },\r\n                        {\r\n                            label: lang.deletecol,\r\n                            cmdName: 'deletecol'\r\n                        },\r\n                        {\r\n                            label: lang.insertcol,\r\n                            cmdName: 'insertcol'\r\n                        },\r\n                        {\r\n                            label: lang.insertcolnext,\r\n                            cmdName: 'insertcolnext'\r\n                        },\r\n                        {\r\n                            label: lang.insertrow,\r\n                            cmdName: 'insertrow'\r\n                        },\r\n                        {\r\n                            label: lang.insertrownext,\r\n                            cmdName: 'insertrownext'\r\n                        },\r\n                        '-',\r\n                        {\r\n                            label: lang.insertcaption,\r\n                            cmdName: 'insertcaption'\r\n                        },\r\n                        {\r\n                            label: lang.deletecaption,\r\n                            cmdName: 'deletecaption'\r\n                        },\r\n                        {\r\n                            label: lang.inserttitle,\r\n                            cmdName: 'inserttitle'\r\n                        },\r\n                        {\r\n                            label: lang.deletetitle,\r\n                            cmdName: 'deletetitle'\r\n                        },\r\n                        {\r\n                            label: lang.inserttitlecol,\r\n                            cmdName: 'inserttitlecol'\r\n                        },\r\n                        {\r\n                            label: lang.deletetitlecol,\r\n                            cmdName: 'deletetitlecol'\r\n                        },\r\n                        '-',\r\n                        {\r\n                            label: lang.mergecells,\r\n                            cmdName: 'mergecells'\r\n                        },\r\n                        {\r\n                            label: lang.mergeright,\r\n                            cmdName: 'mergeright'\r\n                        },\r\n                        {\r\n                            label: lang.mergedown,\r\n                            cmdName: 'mergedown'\r\n                        },\r\n                        '-',\r\n                        {\r\n                            label: lang.splittorows,\r\n                            cmdName: 'splittorows'\r\n                        },\r\n                        {\r\n                            label: lang.splittocols,\r\n                            cmdName: 'splittocols'\r\n                        },\r\n                        {\r\n                            label: lang.splittocells,\r\n                            cmdName: 'splittocells'\r\n                        },\r\n                        '-',\r\n                        {\r\n                            label: lang.averageDiseRow,\r\n                            cmdName: 'averagedistributerow'\r\n                        },\r\n                        {\r\n                            label: lang.averageDisCol,\r\n                            cmdName: 'averagedistributecol'\r\n                        },\r\n                        '-',\r\n                        {\r\n                            label: lang.edittd,\r\n                            cmdName: 'edittd',\r\n                            exec: function () {\r\n                                if (UE.ui['edittd']) {\r\n                                    new UE.ui['edittd'](this);\r\n                                }\r\n                                this.getDialog('edittd').open();\r\n                            }\r\n                        },\r\n                        {\r\n                            label: lang.edittable,\r\n                            cmdName: 'edittable',\r\n                            exec: function () {\r\n                                if (UE.ui['edittable']) {\r\n                                    new UE.ui['edittable'](this);\r\n                                }\r\n                                this.getDialog('edittable').open();\r\n                            }\r\n                        },\r\n                        {\r\n                            label: lang.setbordervisible,\r\n                            cmdName: 'setbordervisible'\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    group: lang.tablesort,\r\n                    icon: 'tablesort',\r\n                    subMenu: [\r\n                        {\r\n                            label: lang.enablesort,\r\n                            cmdName: 'enablesort'\r\n                        },\r\n                        {\r\n                            label: lang.disablesort,\r\n                            cmdName: 'disablesort'\r\n                        },\r\n                        '-',\r\n                        {\r\n                            label: lang.reversecurrent,\r\n                            cmdName: 'sorttable',\r\n                            value: 'reversecurrent'\r\n                        },\r\n                        {\r\n                            label: lang.orderbyasc,\r\n                            cmdName: 'sorttable',\r\n                            value: 'orderbyasc'\r\n                        },\r\n                        {\r\n                            label: lang.reversebyasc,\r\n                            cmdName: 'sorttable',\r\n                            value: 'reversebyasc'\r\n                        },\r\n                        {\r\n                            label: lang.orderbynum,\r\n                            cmdName: 'sorttable',\r\n                            value: 'orderbynum'\r\n                        },\r\n                        {\r\n                            label: lang.reversebynum,\r\n                            cmdName: 'sorttable',\r\n                            value: 'reversebynum'\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    group: lang.borderbk,\r\n                    icon: 'borderBack',\r\n                    subMenu: [\r\n                        {\r\n                            label: lang.setcolor,\r\n                            cmdName: \"interlacetable\",\r\n                            exec: function () {\r\n                                this.execCommand(\"interlacetable\");\r\n                            }\r\n                        },\r\n                        {\r\n                            label: lang.unsetcolor,\r\n                            cmdName: \"uninterlacetable\",\r\n                            exec: function () {\r\n                                this.execCommand(\"uninterlacetable\");\r\n                            }\r\n                        },\r\n                        {\r\n                            label: lang.setbackground,\r\n                            cmdName: \"settablebackground\",\r\n                            exec: function () {\r\n                                this.execCommand(\"settablebackground\", { repeat: true, colorList: [\"#bbb\", \"#ccc\"] });\r\n                            }\r\n                        },\r\n                        {\r\n                            label: lang.unsetbackground,\r\n                            cmdName: \"cleartablebackground\",\r\n                            exec: function () {\r\n                                this.execCommand(\"cleartablebackground\");\r\n                            }\r\n                        },\r\n                        {\r\n                            label: lang.redandblue,\r\n                            cmdName: \"settablebackground\",\r\n                            exec: function () {\r\n                                this.execCommand(\"settablebackground\", { repeat: true, colorList: [\"red\", \"blue\"] });\r\n                            }\r\n                        },\r\n                        {\r\n                            label: lang.threecolorgradient,\r\n                            cmdName: \"settablebackground\",\r\n                            exec: function () {\r\n                                this.execCommand(\"settablebackground\", { repeat: true, colorList: [\"#aaa\", \"#bbb\", \"#ccc\"] });\r\n                            }\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    group: lang.aligntd,\r\n                    icon: 'aligntd',\r\n                    subMenu: [\r\n                        {\r\n                            cmdName: 'cellalignment',\r\n                            value: { align: 'left', vAlign: 'top' }\r\n                        },\r\n                        {\r\n                            cmdName: 'cellalignment',\r\n                            value: { align: 'center', vAlign: 'top' }\r\n                        },\r\n                        {\r\n                            cmdName: 'cellalignment',\r\n                            value: { align: 'right', vAlign: 'top' }\r\n                        },\r\n                        {\r\n                            cmdName: 'cellalignment',\r\n                            value: { align: 'left', vAlign: 'middle' }\r\n                        },\r\n                        {\r\n                            cmdName: 'cellalignment',\r\n                            value: { align: 'center', vAlign: 'middle' }\r\n                        },\r\n                        {\r\n                            cmdName: 'cellalignment',\r\n                            value: { align: 'right', vAlign: 'middle' }\r\n                        },\r\n                        {\r\n                            cmdName: 'cellalignment',\r\n                            value: { align: 'left', vAlign: 'bottom' }\r\n                        },\r\n                        {\r\n                            cmdName: 'cellalignment',\r\n                            value: { align: 'center', vAlign: 'bottom' }\r\n                        },\r\n                        {\r\n                            cmdName: 'cellalignment',\r\n                            value: { align: 'right', vAlign: 'bottom' }\r\n                        }\r\n                    ]\r\n                },\r\n                {\r\n                    group: lang.aligntable,\r\n                    icon: 'aligntable',\r\n                    subMenu: [\r\n                        {\r\n                            cmdName: 'tablealignment',\r\n                            className: 'left',\r\n                            label: lang.tableleft,\r\n                            value: \"left\"\r\n                        },\r\n                        {\r\n                            cmdName: 'tablealignment',\r\n                            className: 'center',\r\n                            label: lang.tablecenter,\r\n                            value: \"center\"\r\n                        },\r\n                        {\r\n                            cmdName: 'tablealignment',\r\n                            className: 'right',\r\n                            label: lang.tableright,\r\n                            value: \"right\"\r\n                        }\r\n                    ]\r\n                },\r\n                '-',\r\n                {\r\n                    label: lang.insertparagraphbefore,\r\n                    cmdName: 'insertparagraph',\r\n                    value: true\r\n                },\r\n                {\r\n                    label: lang.insertparagraphafter,\r\n                    cmdName: 'insertparagraph'\r\n                },\r\n                {\r\n                    label: lang['copy'],\r\n                    cmdName: 'copy'\r\n                },\r\n                {\r\n                    label: lang['paste'],\r\n                    cmdName: 'paste'\r\n                }\r\n            ];\r\n        if (!items.length) {\r\n            return;\r\n        }\r\n        var uiUtils = UE.ui.uiUtils;\r\n\r\n        me.addListener('contextmenu', function (type, evt) {\r\n\r\n            var offset = uiUtils.getViewportOffsetByEvent(evt);\r\n            me.fireEvent('beforeselectionchange');\r\n            if (menu) {\r\n                menu.destroy();\r\n            }\r\n            for (var i = 0, ti, contextItems = []; ti = items[i]; i++) {\r\n                var last;\r\n                (function (item) {\r\n                    if (item == '-') {\r\n                        if ((last = contextItems[contextItems.length - 1]) && last !== '-') {\r\n                            contextItems.push('-');\r\n                        }\r\n                    } else if (item.hasOwnProperty(\"group\")) {\r\n                        for (var j = 0, cj, subMenu = []; cj = item.subMenu[j]; j++) {\r\n                            (function (subItem) {\r\n                                if (subItem == '-') {\r\n                                    if ((last = subMenu[subMenu.length - 1]) && last !== '-') {\r\n                                        subMenu.push('-');\r\n                                    } else {\r\n                                        subMenu.splice(subMenu.length - 1);\r\n                                    }\r\n                                } else {\r\n                                    if ((me.commands[subItem.cmdName] || UE.commands[subItem.cmdName] || subItem.query) &&\r\n                                        (subItem.query ? subItem.query() : me.queryCommandState(subItem.cmdName)) > -1) {\r\n                                        subMenu.push({\r\n                                            'label': subItem.label || me.getLang(\"contextMenu.\" + subItem.cmdName + (subItem.value || '')) || \"\",\r\n                                            'className': 'edui-for-' + subItem.cmdName + (subItem.className ? (' edui-for-' + subItem.cmdName + '-' + subItem.className) : ''),\r\n                                            onclick: subItem.exec ? function () {\r\n                                                subItem.exec.call(me);\r\n                                            } : function () {\r\n                                                me.execCommand(subItem.cmdName, subItem.value);\r\n                                            }\r\n                                        });\r\n                                    }\r\n                                }\r\n                            })(cj);\r\n                        }\r\n                        if (subMenu.length) {\r\n                            function getLabel() {\r\n                                switch (item.icon) {\r\n                                    case \"table\":\r\n                                        return me.getLang(\"contextMenu.table\");\r\n                                    case \"justifyjustify\":\r\n                                        return me.getLang(\"contextMenu.paragraph\");\r\n                                    case \"aligntd\":\r\n                                        return me.getLang(\"contextMenu.aligntd\");\r\n                                    case \"aligntable\":\r\n                                        return me.getLang(\"contextMenu.aligntable\");\r\n                                    case \"tablesort\":\r\n                                        return lang.tablesort;\r\n                                    case \"borderBack\":\r\n                                        return lang.borderbk;\r\n                                    default:\r\n                                        return '';\r\n                                }\r\n                            }\r\n                            contextItems.push({\r\n                                //todo 修正成自动获取方式\r\n                                'label': getLabel(),\r\n                                className: 'edui-for-' + item.icon,\r\n                                'subMenu': {\r\n                                    items: subMenu,\r\n                                    editor: me\r\n                                }\r\n                            });\r\n                        }\r\n\r\n                    } else {\r\n                        //有可能commmand没有加载右键不能出来，或者没有command也想能展示出来添加query方法\r\n                        if ((me.commands[item.cmdName] || UE.commands[item.cmdName] || item.query) &&\r\n                            (item.query ? item.query.call(me) : me.queryCommandState(item.cmdName)) > -1) {\r\n\r\n                            contextItems.push({\r\n                                'label': item.label || me.getLang(\"contextMenu.\" + item.cmdName),\r\n                                className: 'edui-for-' + (item.icon ? item.icon : item.cmdName + (item.value || '')),\r\n                                onclick: item.exec ? function () {\r\n                                    item.exec.call(me);\r\n                                } : function () {\r\n                                    me.execCommand(item.cmdName, item.value);\r\n                                }\r\n                            });\r\n                        }\r\n\r\n                    }\r\n\r\n                })(ti);\r\n            }\r\n            if (contextItems[contextItems.length - 1] == '-') {\r\n                contextItems.pop();\r\n            }\r\n\r\n            menu = new UE.ui.Menu({\r\n                items: contextItems,\r\n                className: \"edui-contextmenu\",\r\n                editor: me\r\n            });\r\n            menu.render();\r\n            menu.showAt(offset);\r\n\r\n            me.fireEvent(\"aftershowcontextmenu\", menu);\r\n\r\n            domUtils.preventDefault(evt);\r\n            if (browser.ie) {\r\n                var ieRange;\r\n                try {\r\n                    ieRange = me.selection.getNative().createRange();\r\n                } catch (e) {\r\n                    return;\r\n                }\r\n                if (ieRange.item) {\r\n                    var range = new dom.Range(me.document);\r\n                    range.selectNode(ieRange.item(0)).select(true, true);\r\n                }\r\n            }\r\n        });\r\n\r\n        // 添加复制的flash按钮\r\n        me.addListener('aftershowcontextmenu', function (type, menu) {\r\n            if (me.zeroclipboard) {\r\n                var items = menu.items;\r\n                for (var key in items) {\r\n                    if (items[key].className == 'edui-for-copy') {\r\n                        me.zeroclipboard.clip(items[key].getDom());\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n    };\r\n\r\n\r\n    // plugins/shortcutmenu.js\r\n    ///import core\r\n    ///commands       弹出菜单\r\n    // commandsName  popupmenu\r\n    ///commandsTitle  弹出菜单\r\n    /**\r\n     * 弹出菜单\r\n     * @function\r\n     * @name baidu.editor.plugins.popupmenu\r\n     * @author xuheng\r\n     */\r\n\r\n    UE.plugins['shortcutmenu'] = function () {\r\n        var me = this,\r\n            menu,\r\n            items = me.options.shortcutMenu || [];\r\n\r\n        if (!items.length) {\r\n            return;\r\n        }\r\n\r\n        me.addListener('contextmenu mouseup', function (type, e) {\r\n            var me = this,\r\n                customEvt = {\r\n                    type: type,\r\n                    target: e.target || e.srcElement,\r\n                    screenX: e.screenX,\r\n                    screenY: e.screenY,\r\n                    clientX: e.clientX,\r\n                    clientY: e.clientY\r\n                };\r\n\r\n            setTimeout(function () {\r\n                var rng = me.selection.getRange();\r\n                if (rng.collapsed === false || type == \"contextmenu\") {\r\n\r\n                    if (!menu) {\r\n                        menu = new baidu.editor.ui.ShortCutMenu({\r\n                            editor: me,\r\n                            items: items,\r\n                            theme: me.options.theme,\r\n                            className: 'edui-shortcutmenu'\r\n                        });\r\n\r\n                        menu.render();\r\n                        me.fireEvent(\"afterrendershortcutmenu\", menu);\r\n                    }\r\n\r\n                    menu.show(customEvt, !!UE.plugins['contextmenu']);\r\n                }\r\n            });\r\n\r\n            if (type == 'contextmenu') {\r\n                domUtils.preventDefault(e);\r\n                if (browser.ie9below) {\r\n                    var ieRange;\r\n                    try {\r\n                        ieRange = me.selection.getNative().createRange();\r\n                    } catch (e) {\r\n                        return;\r\n                    }\r\n                    if (ieRange.item) {\r\n                        var range = new dom.Range(me.document);\r\n                        range.selectNode(ieRange.item(0)).select(true, true);\r\n\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n        me.addListener('keydown', function (type) {\r\n            if (type == \"keydown\") {\r\n                menu && !menu.isHidden && menu.hide();\r\n            }\r\n\r\n        });\r\n\r\n    };\r\n\r\n\r\n\r\n\r\n    // plugins/basestyle.js\r\n    /**\r\n     * B、I、sub、super命令支持\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    UE.plugins['basestyle'] = function () {\r\n\r\n        /**\r\n         * 字体加粗\r\n         * @command bold\r\n         * @param { String } cmd 命令字符串\r\n         * @remind 对已加粗的文本内容执行该命令， 将取消加粗\r\n         * @method execCommand\r\n         * @example\r\n         * ```javascript\r\n         * //editor是编辑器实例\r\n         * //对当前选中的文本内容执行加粗操作\r\n         * //第一次执行， 文本内容加粗\r\n         * editor.execCommand( 'bold' );\r\n         *\r\n         * //第二次执行， 文本内容取消加粗\r\n         * editor.execCommand( 'bold' );\r\n         * ```\r\n         */\r\n\r\n\r\n        /**\r\n         * 字体倾斜\r\n         * @command italic\r\n         * @method execCommand\r\n         * @param { String } cmd 命令字符串\r\n         * @remind 对已倾斜的文本内容执行该命令， 将取消倾斜\r\n         * @example\r\n         * ```javascript\r\n         * //editor是编辑器实例\r\n         * //对当前选中的文本内容执行斜体操作\r\n         * //第一次操作， 文本内容将变成斜体\r\n         * editor.execCommand( 'italic' );\r\n         *\r\n         * //再次对同一文本内容执行， 则文本内容将恢复正常\r\n         * editor.execCommand( 'italic' );\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 下标文本，与“superscript”命令互斥\r\n         * @command subscript\r\n         * @method execCommand\r\n         * @remind  把选中的文本内容切换成下标文本， 如果当前选中的文本已经是下标， 则该操作会把文本内容还原成正常文本\r\n         * @param { String } cmd 命令字符串\r\n         * @example\r\n         * ```javascript\r\n         * //editor是编辑器实例\r\n         * //对当前选中的文本内容执行下标操作\r\n         * //第一次操作， 文本内容将变成下标文本\r\n         * editor.execCommand( 'subscript' );\r\n         *\r\n         * //再次对同一文本内容执行， 则文本内容将恢复正常\r\n         * editor.execCommand( 'subscript' );\r\n         * ```\r\n         */\r\n\r\n        /**\r\n         * 上标文本，与“subscript”命令互斥\r\n         * @command superscript\r\n         * @method execCommand\r\n         * @remind 把选中的文本内容切换成上标文本， 如果当前选中的文本已经是上标， 则该操作会把文本内容还原成正常文本\r\n         * @param { String } cmd 命令字符串\r\n         * @example\r\n         * ```javascript\r\n         * //editor是编辑器实例\r\n         * //对当前选中的文本内容执行上标操作\r\n         * //第一次操作， 文本内容将变成上标文本\r\n         * editor.execCommand( 'superscript' );\r\n         *\r\n         * //再次对同一文本内容执行， 则文本内容将恢复正常\r\n         * editor.execCommand( 'superscript' );\r\n         * ```\r\n         */\r\n        var basestyles = {\r\n            'bold': ['strong', 'b'],\r\n            'italic': ['em', 'i'],\r\n            'subscript': ['sub'],\r\n            'superscript': ['sup']\r\n        },\r\n            getObj = function (editor, tagNames) {\r\n                return domUtils.filterNodeList(editor.selection.getStartElementPath(), tagNames);\r\n            },\r\n            me = this;\r\n        //添加快捷键\r\n        me.addshortcutkey({\r\n            \"Bold\": \"ctrl+66\",//^B\r\n            \"Italic\": \"ctrl+73\", //^I\r\n            \"Underline\": \"ctrl+85\"//^U\r\n        });\r\n        me.addInputRule(function (root) {\r\n            utils.each(root.getNodesByTagName('b i'), function (node) {\r\n                switch (node.tagName) {\r\n                    case 'b':\r\n                        node.tagName = 'strong';\r\n                        break;\r\n                    case 'i':\r\n                        node.tagName = 'em';\r\n                }\r\n            });\r\n        });\r\n        for (var style in basestyles) {\r\n            (function (cmd, tagNames) {\r\n                me.commands[cmd] = {\r\n                    execCommand: function (cmdName) {\r\n                        var range = me.selection.getRange(), obj = getObj(this, tagNames);\r\n                        if (range.collapsed) {\r\n                            if (obj) {\r\n                                var tmpText = me.document.createTextNode('');\r\n                                range.insertNode(tmpText).removeInlineStyle(tagNames);\r\n                                range.setStartBefore(tmpText);\r\n                                domUtils.remove(tmpText);\r\n                            } else {\r\n                                var tmpNode = range.document.createElement(tagNames[0]);\r\n                                if (cmdName == 'superscript' || cmdName == 'subscript') {\r\n                                    tmpText = me.document.createTextNode('');\r\n                                    range.insertNode(tmpText)\r\n                                        .removeInlineStyle(['sub', 'sup'])\r\n                                        .setStartBefore(tmpText)\r\n                                        .collapse(true);\r\n                                }\r\n                                range.insertNode(tmpNode).setStart(tmpNode, 0);\r\n                            }\r\n                            range.collapse(true);\r\n                        } else {\r\n                            if (cmdName == 'superscript' || cmdName == 'subscript') {\r\n                                if (!obj || obj.tagName.toLowerCase() != cmdName) {\r\n                                    range.removeInlineStyle(['sub', 'sup']);\r\n                                }\r\n                            }\r\n                            obj ? range.removeInlineStyle(tagNames) : range.applyInlineStyle(tagNames[0]);\r\n                        }\r\n                        range.select();\r\n                    },\r\n                    queryCommandState: function () {\r\n                        return getObj(this, tagNames) ? 1 : 0;\r\n                    }\r\n                };\r\n            })(style, basestyles[style]);\r\n        }\r\n    };\r\n\r\n\r\n\r\n    // plugins/elementpath.js\r\n    /**\r\n     * 选取路径命令\r\n     * @file\r\n     */\r\n    UE.plugins['elementpath'] = function () {\r\n        var currentLevel,\r\n            tagNames,\r\n            me = this;\r\n        me.setOpt('elementPathEnabled', true);\r\n        if (!me.options.elementPathEnabled) {\r\n            return;\r\n        }\r\n        me.commands['elementpath'] = {\r\n            execCommand: function (cmdName, level) {\r\n                var start = tagNames[level],\r\n                    range = me.selection.getRange();\r\n                currentLevel = level * 1;\r\n                range.selectNode(start).select();\r\n            },\r\n            queryCommandValue: function () {\r\n                //产生一个副本，不能修改原来的startElementPath;\r\n                var parents = [].concat(this.selection.getStartElementPath()).reverse(),\r\n                    names = [];\r\n                tagNames = parents;\r\n                for (var i = 0, ci; ci = parents[i]; i++) {\r\n                    if (ci.nodeType == 3) {\r\n                        continue;\r\n                    }\r\n                    var name = ci.tagName.toLowerCase();\r\n                    if (name == 'img' && ci.getAttribute('anchorname')) {\r\n                        name = 'anchor';\r\n                    }\r\n                    names[i] = name;\r\n                    if (currentLevel == i) {\r\n                        currentLevel = -1;\r\n                        break;\r\n                    }\r\n                }\r\n                return names;\r\n            }\r\n        };\r\n    };\r\n\r\n\r\n\r\n    // plugins/formatmatch.js\r\n    /**\r\n     * 格式刷，只格式inline的\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * 格式刷\r\n     * @command formatmatch\r\n     * @method execCommand\r\n     * @remind 该操作不能复制段落格式\r\n     * @param { String } cmd 命令字符串\r\n     * @example\r\n     * ```javascript\r\n     * //editor是编辑器实例\r\n     * //获取格式刷\r\n     * editor.execCommand( 'formatmatch' );\r\n     * ```\r\n     */\r\n    UE.plugins['formatmatch'] = function () {\r\n\r\n        var me = this,\r\n            list = [], img,\r\n            flag = 0;\r\n\r\n        me.addListener('reset', function () {\r\n            list = [];\r\n            flag = 0;\r\n        });\r\n\r\n        function addList(type, evt) {\r\n\r\n            if (browser.webkit) {\r\n                var target = evt.target.tagName == 'IMG' ? evt.target : null;\r\n            }\r\n\r\n            function addFormat(range) {\r\n\r\n                if (text) {\r\n                    range.selectNode(text);\r\n                }\r\n                return range.applyInlineStyle(list[list.length - 1].tagName, null, list);\r\n\r\n            }\r\n\r\n            me.undoManger && me.undoManger.save();\r\n\r\n            var range = me.selection.getRange(),\r\n                imgT = target || range.getClosedNode();\r\n            if (img && imgT && imgT.tagName == 'IMG') {\r\n                //trace:964\r\n\r\n                imgT.style.cssText += ';float:' + (img.style.cssFloat || img.style.styleFloat || 'none') + ';display:' + (img.style.display || 'inline');\r\n\r\n                img = null;\r\n            } else {\r\n                if (!img) {\r\n                    var collapsed = range.collapsed;\r\n                    if (collapsed) {\r\n                        var text = me.document.createTextNode('match');\r\n                        range.insertNode(text).select();\r\n\r\n\r\n                    }\r\n                    me.__hasEnterExecCommand = true;\r\n                    //不能把block上的属性干掉\r\n                    //trace:1553\r\n                    var removeFormatAttributes = me.options.removeFormatAttributes;\r\n                    me.options.removeFormatAttributes = '';\r\n                    me.execCommand('removeformat');\r\n                    me.options.removeFormatAttributes = removeFormatAttributes;\r\n                    me.__hasEnterExecCommand = false;\r\n                    //trace:969\r\n                    range = me.selection.getRange();\r\n                    if (list.length) {\r\n                        addFormat(range);\r\n                    }\r\n                    if (text) {\r\n                        range.setStartBefore(text).collapse(true);\r\n\r\n                    }\r\n                    range.select();\r\n                    text && domUtils.remove(text);\r\n                }\r\n\r\n            }\r\n\r\n\r\n\r\n\r\n            me.undoManger && me.undoManger.save();\r\n            me.removeListener('mouseup', addList);\r\n            flag = 0;\r\n        }\r\n\r\n        me.commands['formatmatch'] = {\r\n            execCommand: function (cmdName) {\r\n\r\n                if (flag) {\r\n                    flag = 0;\r\n                    list = [];\r\n                    me.removeListener('mouseup', addList);\r\n                    return;\r\n                }\r\n\r\n\r\n\r\n                var range = me.selection.getRange();\r\n                img = range.getClosedNode();\r\n                if (!img || img.tagName != 'IMG') {\r\n                    range.collapse(true).shrinkBoundary();\r\n                    var start = range.startContainer;\r\n                    list = domUtils.findParents(start, true, function (node) {\r\n                        return !domUtils.isBlockElm(node) && node.nodeType == 1;\r\n                    });\r\n                    //a不能加入格式刷, 并且克隆节点\r\n                    for (var i = 0, ci; ci = list[i]; i++) {\r\n                        if (ci.tagName == 'A') {\r\n                            list.splice(i, 1);\r\n                            break;\r\n                        }\r\n                    }\r\n\r\n                }\r\n\r\n                me.addListener('mouseup', addList);\r\n                flag = 1;\r\n\r\n\r\n            },\r\n            queryCommandState: function () {\r\n                return flag;\r\n            },\r\n            notNeedUndo: 1\r\n        };\r\n    };\r\n\r\n\r\n\r\n    // plugins/searchreplace.js\r\n    ///import core\r\n    ///commands 查找替换\r\n    ///commandsName  SearchReplace\r\n    ///commandsTitle  查询替换\r\n    ///commandsDialog  dialogs\\searchreplace\r\n    /**\r\n     * @description 查找替换\r\n     * @author zhanyi\r\n     */\r\n\r\n    UE.plugin.register('searchreplace', function () {\r\n        var me = this;\r\n\r\n        var _blockElm = { 'table': 1, 'tbody': 1, 'tr': 1, 'ol': 1, 'ul': 1 };\r\n\r\n        function findTextInString(textContent, opt, currentIndex) {\r\n            var str = opt.searchStr;\r\n            if (opt.dir == -1) {\r\n                textContent = textContent.split('').reverse().join('');\r\n                str = str.split('').reverse().join('');\r\n                currentIndex = textContent.length - currentIndex;\r\n\r\n            }\r\n            var reg = new RegExp(str, 'g' + (opt.casesensitive ? '' : 'i')), match;\r\n\r\n            while (match = reg.exec(textContent)) {\r\n                if (match.index >= currentIndex) {\r\n                    return opt.dir == -1 ? textContent.length - match.index - opt.searchStr.length : match.index;\r\n                }\r\n            }\r\n            return -1\r\n        }\r\n        function findTextBlockElm(node, currentIndex, opt) {\r\n            var textContent, index, methodName = opt.all || opt.dir == 1 ? 'getNextDomNode' : 'getPreDomNode';\r\n            if (domUtils.isBody(node)) {\r\n                node = node.firstChild;\r\n            }\r\n            var first = 1;\r\n            while (node) {\r\n                textContent = node.nodeType == 3 ? node.nodeValue : node[browser.ie ? 'innerText' : 'textContent'];\r\n                index = findTextInString(textContent, opt, currentIndex);\r\n                first = 0;\r\n                if (index != -1) {\r\n                    return {\r\n                        'node': node,\r\n                        'index': index\r\n                    }\r\n                }\r\n                node = domUtils[methodName](node);\r\n                while (node && _blockElm[node.nodeName.toLowerCase()]) {\r\n                    node = domUtils[methodName](node, true);\r\n                }\r\n                if (node) {\r\n                    currentIndex = opt.dir == -1 ? (node.nodeType == 3 ? node.nodeValue : node[browser.ie ? 'innerText' : 'textContent']).length : 0;\r\n                }\r\n\r\n            }\r\n        }\r\n        function findNTextInBlockElm(node, index, str) {\r\n            var currentIndex = 0,\r\n                currentNode = node.firstChild,\r\n                currentNodeLength = 0,\r\n                result;\r\n            while (currentNode) {\r\n                if (currentNode.nodeType == 3) {\r\n                    currentNodeLength = currentNode.nodeValue.replace(/(^[\\t\\r\\n]+)|([\\t\\r\\n]+$)/, '').length;\r\n                    currentIndex += currentNodeLength;\r\n                    if (currentIndex >= index) {\r\n                        return {\r\n                            'node': currentNode,\r\n                            'index': currentNodeLength - (currentIndex - index)\r\n                        }\r\n                    }\r\n                } else if (!dtd.$empty[currentNode.tagName]) {\r\n                    currentNodeLength = currentNode[browser.ie ? 'innerText' : 'textContent'].replace(/(^[\\t\\r\\n]+)|([\\t\\r\\n]+$)/, '').length\r\n                    currentIndex += currentNodeLength;\r\n                    if (currentIndex >= index) {\r\n                        result = findNTextInBlockElm(currentNode, currentNodeLength - (currentIndex - index), str);\r\n                        if (result) {\r\n                            return result;\r\n                        }\r\n                    }\r\n                }\r\n                currentNode = domUtils.getNextDomNode(currentNode);\r\n\r\n            }\r\n        }\r\n\r\n        function searchReplace(me, opt) {\r\n\r\n            var rng = me.selection.getRange(),\r\n                startBlockNode,\r\n                searchStr = opt.searchStr,\r\n                span = me.document.createElement('span');\r\n            span.innerHTML = '$$ueditor_searchreplace_key$$';\r\n\r\n            rng.shrinkBoundary(true);\r\n\r\n            //判断是不是第一次选中\r\n            if (!rng.collapsed) {\r\n                rng.select();\r\n                var rngText = me.selection.getText();\r\n                if (new RegExp('^' + opt.searchStr + '$', (opt.casesensitive ? '' : 'i')).test(rngText)) {\r\n                    if (opt.replaceStr != undefined) {\r\n                        replaceText(rng, opt.replaceStr);\r\n                        rng.select();\r\n                        return true;\r\n                    } else {\r\n                        rng.collapse(opt.dir == -1)\r\n                    }\r\n\r\n                }\r\n            }\r\n\r\n\r\n            rng.insertNode(span);\r\n            rng.enlargeToBlockElm(true);\r\n            startBlockNode = rng.startContainer;\r\n            var currentIndex = startBlockNode[browser.ie ? 'innerText' : 'textContent'].indexOf('$$ueditor_searchreplace_key$$');\r\n            rng.setStartBefore(span);\r\n            domUtils.remove(span);\r\n            var result = findTextBlockElm(startBlockNode, currentIndex, opt);\r\n            if (result) {\r\n                var rngStart = findNTextInBlockElm(result.node, result.index, searchStr);\r\n                var rngEnd = findNTextInBlockElm(result.node, result.index + searchStr.length, searchStr);\r\n                rng.setStart(rngStart.node, rngStart.index).setEnd(rngEnd.node, rngEnd.index);\r\n\r\n                if (opt.replaceStr !== undefined) {\r\n                    replaceText(rng, opt.replaceStr)\r\n                }\r\n                rng.select();\r\n                return true;\r\n            } else {\r\n                rng.setCursor()\r\n            }\r\n\r\n        }\r\n        function replaceText(rng, str) {\r\n\r\n            str = me.document.createTextNode(str);\r\n            rng.deleteContents().insertNode(str);\r\n\r\n        }\r\n        return {\r\n            commands: {\r\n                'searchreplace': {\r\n                    execCommand: function (cmdName, opt) {\r\n                        utils.extend(opt, {\r\n                            all: false,\r\n                            casesensitive: false,\r\n                            dir: 1\r\n                        }, true);\r\n                        var num = 0;\r\n                        if (opt.all) {\r\n\r\n                            var rng = me.selection.getRange(),\r\n                                first = me.body.firstChild;\r\n                            if (first && first.nodeType == 1) {\r\n                                rng.setStart(first, 0);\r\n                                rng.shrinkBoundary(true);\r\n                            } else if (first.nodeType == 3) {\r\n                                rng.setStartBefore(first)\r\n                            }\r\n                            rng.collapse(true).select(true);\r\n                            if (opt.replaceStr !== undefined) {\r\n                                me.fireEvent('saveScene');\r\n                            }\r\n                            while (searchReplace(this, opt)) {\r\n                                num++;\r\n                            }\r\n                            if (num) {\r\n                                me.fireEvent('saveScene');\r\n                            }\r\n                        } else {\r\n                            if (opt.replaceStr !== undefined) {\r\n                                me.fireEvent('saveScene');\r\n                            }\r\n                            if (searchReplace(this, opt)) {\r\n                                num++\r\n                            }\r\n                            if (num) {\r\n                                me.fireEvent('saveScene');\r\n                            }\r\n\r\n                        }\r\n\r\n                        return num;\r\n                    },\r\n                    notNeedUndo: 1\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    // plugins/customstyle.js\r\n    /**\r\n     * 自定义样式\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n    /**\r\n     * 根据config配置文件里“customstyle”选项的值对匹配的标签执行样式替换。\r\n     * @command customstyle\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @example\r\n     * ```javascript\r\n     * editor.execCommand( 'customstyle' );\r\n     * ```\r\n     */\r\n    UE.plugins['customstyle'] = function () {\r\n        var me = this;\r\n        me.setOpt({\r\n            'customstyle': [\r\n                { tag: 'h1', name: 'tc', style: 'font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:center;margin:0 0 20px 0;' },\r\n                { tag: 'h1', name: 'tl', style: 'font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:left;margin:0 0 10px 0;' },\r\n                { tag: 'span', name: 'im', style: 'font-size:16px;font-style:italic;font-weight:bold;line-height:18px;' },\r\n                { tag: 'span', name: 'hi', style: 'font-size:16px;font-style:italic;font-weight:bold;color:rgb(51, 153, 204);line-height:18px;' }\r\n            ]\r\n        });\r\n        me.commands['customstyle'] = {\r\n            execCommand: function (cmdName, obj) {\r\n                var me = this,\r\n                    tagName = obj.tag,\r\n                    node = domUtils.findParent(me.selection.getStart(), function (node) {\r\n                        return node.getAttribute('label');\r\n                    }, true),\r\n                    range, bk, tmpObj = {};\r\n                for (var p in obj) {\r\n                    if (obj[p] !== undefined)\r\n                        tmpObj[p] = obj[p];\r\n                }\r\n                delete tmpObj.tag;\r\n                if (node && node.getAttribute('label') == obj.label) {\r\n                    range = this.selection.getRange();\r\n                    bk = range.createBookmark();\r\n                    if (range.collapsed) {\r\n                        //trace:1732 删掉自定义标签，要有p来回填站位\r\n                        if (dtd.$block[node.tagName]) {\r\n                            var fillNode = me.document.createElement('p');\r\n                            domUtils.moveChild(node, fillNode);\r\n                            node.parentNode.insertBefore(fillNode, node);\r\n                            domUtils.remove(node);\r\n                        } else {\r\n                            domUtils.remove(node, true);\r\n                        }\r\n\r\n                    } else {\r\n\r\n                        var common = domUtils.getCommonAncestor(bk.start, bk.end),\r\n                            nodes = domUtils.getElementsByTagName(common, tagName);\r\n                        if (new RegExp(tagName, 'i').test(common.tagName)) {\r\n                            nodes.push(common);\r\n                        }\r\n                        for (var i = 0, ni; ni = nodes[i++];) {\r\n                            if (ni.getAttribute('label') == obj.label) {\r\n                                var ps = domUtils.getPosition(ni, bk.start), pe = domUtils.getPosition(ni, bk.end);\r\n                                if ((ps & domUtils.POSITION_FOLLOWING || ps & domUtils.POSITION_CONTAINS)\r\n                                    &&\r\n                                    (pe & domUtils.POSITION_PRECEDING || pe & domUtils.POSITION_CONTAINS)\r\n                                )\r\n                                    if (dtd.$block[tagName]) {\r\n                                        var fillNode = me.document.createElement('p');\r\n                                        domUtils.moveChild(ni, fillNode);\r\n                                        ni.parentNode.insertBefore(fillNode, ni);\r\n                                    }\r\n                                domUtils.remove(ni, true);\r\n                            }\r\n                        }\r\n                        node = domUtils.findParent(common, function (node) {\r\n                            return node.getAttribute('label') == obj.label;\r\n                        }, true);\r\n                        if (node) {\r\n\r\n                            domUtils.remove(node, true);\r\n\r\n                        }\r\n\r\n                    }\r\n                    range.moveToBookmark(bk).select();\r\n                } else {\r\n                    if (dtd.$block[tagName]) {\r\n                        this.execCommand('paragraph', tagName, tmpObj, 'customstyle');\r\n                        range = me.selection.getRange();\r\n                        if (!range.collapsed) {\r\n                            range.collapse();\r\n                            node = domUtils.findParent(me.selection.getStart(), function (node) {\r\n                                return node.getAttribute('label') == obj.label;\r\n                            }, true);\r\n                            var pNode = me.document.createElement('p');\r\n                            domUtils.insertAfter(node, pNode);\r\n                            domUtils.fillNode(me.document, pNode);\r\n                            range.setStart(pNode, 0).setCursor();\r\n                        }\r\n                    } else {\r\n\r\n                        range = me.selection.getRange();\r\n                        if (range.collapsed) {\r\n                            node = me.document.createElement(tagName);\r\n                            domUtils.setAttributes(node, tmpObj);\r\n                            range.insertNode(node).setStart(node, 0).setCursor();\r\n\r\n                            return;\r\n                        }\r\n\r\n                        bk = range.createBookmark();\r\n                        range.applyInlineStyle(tagName, tmpObj).moveToBookmark(bk).select();\r\n                    }\r\n                }\r\n\r\n            },\r\n            queryCommandValue: function () {\r\n                var parent = domUtils.filterNodeList(\r\n                    this.selection.getStartElementPath(),\r\n                    function (node) { return node.getAttribute('label') }\r\n                );\r\n                return parent ? parent.getAttribute('label') : '';\r\n            }\r\n        };\r\n        //当去掉customstyle是，如果是块元素，用p代替\r\n        me.addListener('keyup', function (type, evt) {\r\n            var keyCode = evt.keyCode || evt.which;\r\n\r\n            if (keyCode == 32 || keyCode == 13) {\r\n                var range = me.selection.getRange();\r\n                if (range.collapsed) {\r\n                    var node = domUtils.findParent(me.selection.getStart(), function (node) {\r\n                        return node.getAttribute('label');\r\n                    }, true);\r\n                    if (node && dtd.$block[node.tagName] && domUtils.isEmptyNode(node)) {\r\n                        var p = me.document.createElement('p');\r\n                        domUtils.insertAfter(node, p);\r\n                        domUtils.fillNode(me.document, p);\r\n                        domUtils.remove(node);\r\n                        range.setStart(p, 0).setCursor();\r\n\r\n\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    };\r\n\r\n    // plugins/catchremoteimage.js\r\n    ///import core\r\n    ///commands 远程图片抓取\r\n    ///commandsName  catchRemoteImage,catchremoteimageenable\r\n    ///commandsTitle  远程图片抓取\r\n    /**\r\n     * 远程图片抓取,当开启本插件时所有不符合本地域名的图片都将被抓取成为本地服务器上的图片\r\n     */\r\n    UE.plugins['catchremoteimage'] = function () {\r\n        var me = this,\r\n            ajax = UE.ajax;\r\n\r\n        /* 设置默认值 */\r\n        if (me.options.catchRemoteImageEnable === false) return;\r\n        me.setOpt({\r\n            catchRemoteImageEnable: false\r\n        });\r\n\r\n        me.addListener(\"afterpaste\", function () {\r\n            me.fireEvent(\"catchRemoteImage\");\r\n        });\r\n\r\n        me.addListener(\"catchRemoteImage\", function () {\r\n\r\n            var catcherLocalDomain = me.getOpt('catcherLocalDomain'),\r\n                catcherActionUrl = me.getActionUrl(me.getOpt('catcherActionName')),\r\n                catcherUrlPrefix = me.getOpt('catcherUrlPrefix'),\r\n                catcherFieldName = me.getOpt('catcherFieldName');\r\n\r\n            var remoteImages = [],\r\n                imgs = domUtils.getElementsByTagName(me.document, \"img\"),\r\n                test = function (src, urls) {\r\n                    if (src.indexOf(location.host) != -1 || /(^\\.)|(^\\/)/.test(src)) {\r\n                        return true;\r\n                    }\r\n                    if (urls) {\r\n                        for (var j = 0, url; url = urls[j++];) {\r\n                            if (src.indexOf(url) !== -1) {\r\n                                return true;\r\n                            }\r\n                        }\r\n                    }\r\n                    return false;\r\n                };\r\n\r\n            for (var i = 0, ci; ci = imgs[i++];) {\r\n                if (ci.getAttribute(\"word_img\")) {\r\n                    continue;\r\n                }\r\n                var src = ci.getAttribute(\"_src\") || ci.src || \"\";\r\n                if (/^(https?|ftp):/i.test(src) && !test(src, catcherLocalDomain)) {\r\n                    remoteImages.push(src);\r\n                }\r\n            }\r\n\r\n            if (remoteImages.length) {\r\n                catchremoteimage(remoteImages, {\r\n                    //成功抓取\r\n                    success: function (r) {\r\n                        try {\r\n                            var info = r.state !== undefined ? r : eval(\"(\" + r.responseText + \")\");\r\n                        } catch (e) {\r\n                            return;\r\n                        }\r\n\r\n                        /* 获取源路径和新路径 */\r\n                        var i, j, ci, cj, oldSrc, newSrc, list = info.list;\r\n\r\n                        for (i = 0; ci = imgs[i++];) {\r\n                            oldSrc = ci.getAttribute(\"_src\") || ci.src || \"\";\r\n                            for (j = 0; cj = list[j++];) {\r\n                                if (oldSrc == cj.source && cj.state == \"SUCCESS\") {  //抓取失败时不做替换处理\r\n                                    newSrc = catcherUrlPrefix + cj.url;\r\n                                    domUtils.setAttributes(ci, {\r\n                                        \"src\": newSrc,\r\n                                        \"_src\": newSrc\r\n                                    });\r\n                                    break;\r\n                                }\r\n                            }\r\n                        }\r\n                        me.fireEvent('catchremotesuccess')\r\n                    },\r\n                    //回调失败，本次请求超时\r\n                    error: function () {\r\n                        me.fireEvent(\"catchremoteerror\");\r\n                    }\r\n                });\r\n            }\r\n\r\n            function catchremoteimage(imgs, callbacks) {\r\n                var params = utils.serializeParam(me.queryCommandValue('serverparam')) || '',\r\n                    url = utils.formatUrl(catcherActionUrl + (catcherActionUrl.indexOf('?') == -1 ? '?' : '&') + params),\r\n                    isJsonp = utils.isCrossDomainUrl(url),\r\n                    opt = {\r\n                        'method': 'POST',\r\n                        'dataType': isJsonp ? 'jsonp' : '',\r\n                        'timeout': 60000, //单位：毫秒，回调请求超时设置。目标用户如果网速不是很快的话此处建议设置一个较大的数值\r\n                        'onsuccess': callbacks[\"success\"],\r\n                        'onerror': callbacks[\"error\"]\r\n                    };\r\n                opt[catcherFieldName] = imgs;\r\n                ajax.request(url, opt);\r\n            }\r\n\r\n        });\r\n    };\r\n\r\n    // plugins/snapscreen.js\r\n    /**\r\n     * 截屏插件，为UEditor提供插入支持\r\n     * @file\r\n     * @since 1.4.2\r\n     */\r\n    UE.plugin.register('snapscreen', function () {\r\n\r\n        var me = this;\r\n        var snapplugin;\r\n\r\n        function getLocation(url) {\r\n            var search,\r\n                a = document.createElement('a'),\r\n                params = utils.serializeParam(me.queryCommandValue('serverparam')) || '';\r\n\r\n            a.href = url;\r\n            if (browser.ie) {\r\n                a.href = a.href;\r\n            }\r\n\r\n\r\n            search = a.search;\r\n            if (params) {\r\n                search = search + (search.indexOf('?') == -1 ? '?' : '&') + params;\r\n                search = search.replace(/[&]+/ig, '&');\r\n            }\r\n            return {\r\n                'port': a.port,\r\n                'hostname': a.hostname,\r\n                'path': a.pathname + search || + a.hash\r\n            }\r\n        }\r\n\r\n        return {\r\n            commands: {\r\n                /**\r\n                 * 字体背景颜色\r\n                 * @command snapscreen\r\n                 * @method execCommand\r\n                 * @param { String } cmd 命令字符串\r\n                 * @example\r\n                 * ```javascript\r\n                 * editor.execCommand('snapscreen');\r\n                 * ```\r\n                 */\r\n                'snapscreen': {\r\n                    execCommand: function (cmd) {\r\n                        var url, local, res;\r\n                        var lang = me.getLang(\"snapScreen_plugin\");\r\n\r\n                        if (!snapplugin) {\r\n                            var container = me.container;\r\n                            var doc = me.container.ownerDocument || me.container.document;\r\n                            snapplugin = doc.createElement(\"object\");\r\n                            try { snapplugin.type = \"application/x-pluginbaidusnap\"; } catch (e) {\r\n                                return;\r\n                            }\r\n                            snapplugin.style.cssText = \"position:absolute;left:-9999px;width:0;height:0;\";\r\n                            snapplugin.setAttribute(\"width\", \"0\");\r\n                            snapplugin.setAttribute(\"height\", \"0\");\r\n                            container.appendChild(snapplugin);\r\n                        }\r\n\r\n                        function onSuccess(rs) {\r\n                            try {\r\n                                rs = eval(\"(\" + rs + \")\");\r\n                                if (rs.state == 'SUCCESS') {\r\n                                    var opt = me.options;\r\n                                    me.execCommand('insertimage', {\r\n                                        src: opt.snapscreenUrlPrefix + rs.url,\r\n                                        _src: opt.snapscreenUrlPrefix + rs.url,\r\n                                        alt: rs.title || '',\r\n                                        floatStyle: opt.snapscreenImgAlign\r\n                                    });\r\n                                } else {\r\n                                    alert(rs.state);\r\n                                }\r\n                            } catch (e) {\r\n                                alert(lang.callBackErrorMsg);\r\n                            }\r\n                        }\r\n                        url = me.getActionUrl(me.getOpt('snapscreenActionName'));\r\n                        local = getLocation(url);\r\n                        setTimeout(function () {\r\n                            try {\r\n                                res = snapplugin.saveSnapshot(local.hostname, local.path, local.port);\r\n                            } catch (e) {\r\n                                me.ui._dialogs['snapscreenDialog'].open();\r\n                                return;\r\n                            }\r\n\r\n                            onSuccess(res);\r\n                        }, 50);\r\n                    },\r\n                    queryCommandState: function () {\r\n                        return (navigator.userAgent.indexOf(\"Windows\", 0) != -1) ? 0 : -1;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n\r\n    // plugins/insertparagraph.js\r\n    /**\r\n     * 插入段落\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n\r\n    /**\r\n     * 插入段落\r\n     * @command insertparagraph\r\n     * @method execCommand\r\n     * @param { String } cmd 命令字符串\r\n     * @example\r\n     * ```javascript\r\n     * //editor是编辑器实例\r\n     * editor.execCommand( 'insertparagraph' );\r\n     * ```\r\n     */\r\n\r\n    UE.commands['insertparagraph'] = {\r\n        execCommand: function (cmdName, front) {\r\n            var me = this,\r\n                range = me.selection.getRange(),\r\n                start = range.startContainer, tmpNode;\r\n            while (start) {\r\n                if (domUtils.isBody(start)) {\r\n                    break;\r\n                }\r\n                tmpNode = start;\r\n                start = start.parentNode;\r\n            }\r\n            if (tmpNode) {\r\n                var p = me.document.createElement('p');\r\n                if (front) {\r\n                    tmpNode.parentNode.insertBefore(p, tmpNode)\r\n                } else {\r\n                    tmpNode.parentNode.insertBefore(p, tmpNode.nextSibling)\r\n                }\r\n                domUtils.fillNode(me.document, p);\r\n                range.setStart(p, 0).setCursor(false, true);\r\n            }\r\n        }\r\n    };\r\n\r\n\r\n\r\n    // plugins/webapp.js\r\n    /**\r\n     * 百度应用\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n\r\n\r\n    /**\r\n     * 插入百度应用\r\n     * @command webapp\r\n     * @method execCommand\r\n     * @remind 需要百度APPKey\r\n     * @remind 百度应用主页： <a href=\"http://app.baidu.com/\" target=\"_blank\">http://app.baidu.com/</a>\r\n     * @param { Object } appOptions 应用所需的参数项， 支持的key有： title=>应用标题， width=>应用容器宽度，\r\n     * height=>应用容器高度，logo=>应用logo，url=>应用地址\r\n     * @example\r\n     * ```javascript\r\n     * //editor是编辑器实例\r\n     * //在编辑器里插入一个“植物大战僵尸”的APP\r\n     * editor.execCommand( 'webapp' , {\r\n     *     title: '植物大战僵尸',\r\n     *     width: 560,\r\n     *     height: 465,\r\n     *     logo: '应用展示的图片',\r\n     *     url: '百度应用的地址'\r\n     * } );\r\n     * ```\r\n     */\r\n\r\n    //UE.plugins['webapp'] = function () {\r\n    //    var me = this;\r\n    //    function createInsertStr( obj, toIframe, addParagraph ) {\r\n    //        return !toIframe ?\r\n    //                (addParagraph ? '<p>' : '') + '<img title=\"'+obj.title+'\" width=\"' + obj.width + '\" height=\"' + obj.height + '\"' +\r\n    //                        ' src=\"' + me.options.UEDITOR_HOME_URL + 'themes/default/images/spacer.gif\" style=\"background:url(' + obj.logo+') no-repeat center center; border:1px solid gray;\" class=\"edui-faked-webapp\" _url=\"' + obj.url + '\" />' +\r\n    //                        (addParagraph ? '</p>' : '')\r\n    //                :\r\n    //                '<iframe class=\"edui-faked-webapp\" title=\"'+obj.title+'\" width=\"' + obj.width + '\" height=\"' + obj.height + '\"  scrolling=\"no\" frameborder=\"0\" src=\"' + obj.url + '\" logo_url = '+obj.logo+'></iframe>';\r\n    //    }\r\n    //\r\n    //    function switchImgAndIframe( img2frame ) {\r\n    //        var tmpdiv,\r\n    //                nodes = domUtils.getElementsByTagName( me.document, !img2frame ? \"iframe\" : \"img\" );\r\n    //        for ( var i = 0, node; node = nodes[i++]; ) {\r\n    //            if ( node.className != \"edui-faked-webapp\" ){\r\n    //                continue;\r\n    //            }\r\n    //            tmpdiv = me.document.createElement( \"div\" );\r\n    //            tmpdiv.innerHTML = createInsertStr( img2frame ? {url:node.getAttribute( \"_url\" ), width:node.width, height:node.height,title:node.title,logo:node.style.backgroundImage.replace(\"url(\",\"\").replace(\")\",\"\")} : {url:node.getAttribute( \"src\", 2 ),title:node.title, width:node.width, height:node.height,logo:node.getAttribute(\"logo_url\")}, img2frame ? true : false,false );\r\n    //            node.parentNode.replaceChild( tmpdiv.firstChild, node );\r\n    //        }\r\n    //    }\r\n    //\r\n    //    me.addListener( \"beforegetcontent\", function () {\r\n    //        switchImgAndIframe( true );\r\n    //    } );\r\n    //    me.addListener( 'aftersetcontent', function () {\r\n    //        switchImgAndIframe( false );\r\n    //    } );\r\n    //    me.addListener( 'aftergetcontent', function ( cmdName ) {\r\n    //        if ( cmdName == 'aftergetcontent' && me.queryCommandState( 'source' ) ){\r\n    //            return;\r\n    //        }\r\n    //        switchImgAndIframe( false );\r\n    //    } );\r\n    //\r\n    //    me.commands['webapp'] = {\r\n    //        execCommand:function ( cmd, obj ) {\r\n    //            me.execCommand( \"inserthtml\", createInsertStr( obj, false,true ) );\r\n    //        }\r\n    //    };\r\n    //};\r\n\r\n    UE.plugin.register('webapp', function () {\r\n        var me = this;\r\n        function createInsertStr(obj, toEmbed) {\r\n            return !toEmbed ?\r\n                '<img title=\"' + obj.title + '\" width=\"' + obj.width + '\" height=\"' + obj.height + '\"' +\r\n                ' src=\"' + me.options.UEDITOR_HOME_URL + 'themes/default/images/spacer.gif\" _logo_url=\"' + obj.logo + '\" style=\"background:url(' + obj.logo\r\n                + ') no-repeat center center; border:1px solid gray;\" class=\"edui-faked-webapp\" _url=\"' + obj.url + '\" ' +\r\n                (obj.align && !obj.cssfloat ? 'align=\"' + obj.align + '\"' : '') +\r\n                (obj.cssfloat ? 'style=\"float:' + obj.cssfloat + '\"' : '') +\r\n                '/>'\r\n                :\r\n                '<iframe class=\"edui-faked-webapp\" title=\"' + obj.title + '\" ' +\r\n                (obj.align && !obj.cssfloat ? 'align=\"' + obj.align + '\"' : '') +\r\n                (obj.cssfloat ? 'style=\"float:' + obj.cssfloat + '\"' : '') +\r\n                'width=\"' + obj.width + '\" height=\"' + obj.height + '\"  scrolling=\"no\" frameborder=\"0\" src=\"' + obj.url + '\" logo_url = \"' + obj.logo + '\"></iframe>'\r\n\r\n        }\r\n        return {\r\n            outputRule: function (root) {\r\n                utils.each(root.getNodesByTagName('img'), function (node) {\r\n                    var html;\r\n                    if (node.getAttr('class') == 'edui-faked-webapp') {\r\n                        html = createInsertStr({\r\n                            title: node.getAttr('title'),\r\n                            'width': node.getAttr('width'),\r\n                            'height': node.getAttr('height'),\r\n                            'align': node.getAttr('align'),\r\n                            'cssfloat': node.getStyle('float'),\r\n                            'url': node.getAttr(\"_url\"),\r\n                            'logo': node.getAttr('_logo_url')\r\n                        }, true);\r\n                        var embed = UE.uNode.createElement(html);\r\n                        node.parentNode.replaceChild(embed, node);\r\n                    }\r\n                })\r\n            },\r\n            inputRule: function (root) {\r\n                utils.each(root.getNodesByTagName('iframe'), function (node) {\r\n                    if (node.getAttr('class') == 'edui-faked-webapp') {\r\n                        var img = UE.uNode.createElement(createInsertStr({\r\n                            title: node.getAttr('title'),\r\n                            'width': node.getAttr('width'),\r\n                            'height': node.getAttr('height'),\r\n                            'align': node.getAttr('align'),\r\n                            'cssfloat': node.getStyle('float'),\r\n                            'url': node.getAttr(\"src\"),\r\n                            'logo': node.getAttr('logo_url')\r\n                        }));\r\n                        node.parentNode.replaceChild(img, node);\r\n                    }\r\n                })\r\n\r\n            },\r\n            commands: {\r\n                /**\r\n                 * 插入百度应用\r\n                 * @command webapp\r\n                 * @method execCommand\r\n                 * @remind 需要百度APPKey\r\n                 * @remind 百度应用主页： <a href=\"http://app.baidu.com/\" target=\"_blank\">http://app.baidu.com/</a>\r\n                 * @param { Object } appOptions 应用所需的参数项， 支持的key有： title=>应用标题， width=>应用容器宽度，\r\n                 * height=>应用容器高度，logo=>应用logo，url=>应用地址\r\n                 * @example\r\n                 * ```javascript\r\n                 * //editor是编辑器实例\r\n                 * //在编辑器里插入一个“植物大战僵尸”的APP\r\n                 * editor.execCommand( 'webapp' , {\r\n                 *     title: '植物大战僵尸',\r\n                 *     width: 560,\r\n                 *     height: 465,\r\n                 *     logo: '应用展示的图片',\r\n                 *     url: '百度应用的地址'\r\n                 * } );\r\n                 * ```\r\n                 */\r\n                'webapp': {\r\n                    execCommand: function (cmd, obj) {\r\n\r\n                        var me = this,\r\n                            str = createInsertStr(utils.extend(obj, {\r\n                                align: 'none'\r\n                            }), false);\r\n                        me.execCommand(\"inserthtml\", str);\r\n                    },\r\n                    queryCommandState: function () {\r\n                        var me = this,\r\n                            img = me.selection.getRange().getClosedNode(),\r\n                            flag = img && (img.className == \"edui-faked-webapp\");\r\n                        return flag ? 1 : 0;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    // plugins/template.js\r\n    ///import core\r\n    ///import plugins\\inserthtml.js\r\n    ///import plugins\\cleardoc.js\r\n    ///commands 模板\r\n    ///commandsName  template\r\n    ///commandsTitle  模板\r\n    ///commandsDialog  dialogs\\template\r\n    UE.plugins['template'] = function () {\r\n        UE.commands['template'] = {\r\n            execCommand: function (cmd, obj) {\r\n                obj.html && this.execCommand(\"inserthtml\", obj.html);\r\n            }\r\n        };\r\n        this.addListener(\"click\", function (type, evt) {\r\n            var el = evt.target || evt.srcElement,\r\n                range = this.selection.getRange();\r\n            var tnode = domUtils.findParent(el, function (node) {\r\n                if (node.className && domUtils.hasClass(node, \"ue_t\")) {\r\n                    return node;\r\n                }\r\n            }, true);\r\n            tnode && range.selectNode(tnode).shrinkBoundary().select();\r\n        });\r\n        this.addListener(\"keydown\", function (type, evt) {\r\n            var range = this.selection.getRange();\r\n            if (!range.collapsed) {\r\n                if (!evt.ctrlKey && !evt.metaKey && !evt.shiftKey && !evt.altKey) {\r\n                    var tnode = domUtils.findParent(range.startContainer, function (node) {\r\n                        if (node.className && domUtils.hasClass(node, \"ue_t\")) {\r\n                            return node;\r\n                        }\r\n                    }, true);\r\n                    if (tnode) {\r\n                        domUtils.removeClasses(tnode, [\"ue_t\"]);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n    };\r\n\r\n\r\n    // plugins/music.js\r\n    /**\r\n     * 插入音乐命令\r\n     * @file\r\n     */\r\n    UE.plugin.register('music', function () {\r\n        var me = this;\r\n        function creatInsertStr(url, width, height, align, cssfloat, toEmbed) {\r\n            return !toEmbed ?\r\n                '<img ' +\r\n                (align && !cssfloat ? 'align=\"' + align + '\"' : '') +\r\n                (cssfloat ? 'style=\"float:' + cssfloat + '\"' : '') +\r\n                ' width=\"' + width + '\" height=\"' + height + '\" _url=\"' + url + '\" class=\"edui-faked-music\"' +\r\n                ' src=\"' + me.options.langPath + me.options.lang + '/images/music.png\" />'\r\n                :\r\n                '<embed type=\"application/x-shockwave-flash\" class=\"edui-faked-music\" pluginspage=\"http://www.macromedia.com/go/getflashplayer\"' +\r\n                ' src=\"' + url + '\" width=\"' + width + '\" height=\"' + height + '\" ' + (align && !cssfloat ? 'align=\"' + align + '\"' : '') +\r\n                (cssfloat ? 'style=\"float:' + cssfloat + '\"' : '') +\r\n                ' wmode=\"transparent\" play=\"true\" loop=\"false\" menu=\"false\" allowscriptaccess=\"never\" allowfullscreen=\"true\" >';\r\n        }\r\n        return {\r\n            outputRule: function (root) {\r\n                utils.each(root.getNodesByTagName('img'), function (node) {\r\n                    var html;\r\n                    if (node.getAttr('class') == 'edui-faked-music') {\r\n                        var cssfloat = node.getStyle('float');\r\n                        var align = node.getAttr('align');\r\n                        html = creatInsertStr(node.getAttr(\"_url\"), node.getAttr('width'), node.getAttr('height'), align, cssfloat, true);\r\n                        var embed = UE.uNode.createElement(html);\r\n                        node.parentNode.replaceChild(embed, node);\r\n                    }\r\n                })\r\n            },\r\n            inputRule: function (root) {\r\n                utils.each(root.getNodesByTagName('embed'), function (node) {\r\n                    if (node.getAttr('class') == 'edui-faked-music') {\r\n                        var cssfloat = node.getStyle('float');\r\n                        var align = node.getAttr('align');\r\n                        html = creatInsertStr(node.getAttr(\"src\"), node.getAttr('width'), node.getAttr('height'), align, cssfloat, false);\r\n                        var img = UE.uNode.createElement(html);\r\n                        node.parentNode.replaceChild(img, node);\r\n                    }\r\n                })\r\n\r\n            },\r\n            commands: {\r\n                /**\r\n                 * 插入音乐\r\n                 * @command music\r\n                 * @method execCommand\r\n                 * @param { Object } musicOptions 插入音乐的参数项， 支持的key有： url=>音乐地址；\r\n                 * width=>音乐容器宽度；height=>音乐容器高度；align=>音乐文件的对齐方式， 可选值有: left, center, right, none\r\n                 * @example\r\n                 * ```javascript\r\n                 * //editor是编辑器实例\r\n                 * //在编辑器里插入一个“植物大战僵尸”的APP\r\n                 * editor.execCommand( 'music' , {\r\n                 *     width: 400,\r\n                 *     height: 95,\r\n                 *     align: \"center\",\r\n                 *     url: \"音乐地址\"\r\n                 * } );\r\n                 * ```\r\n                 */\r\n                'music': {\r\n                    execCommand: function (cmd, musicObj) {\r\n                        var me = this,\r\n                            str = creatInsertStr(musicObj.url, musicObj.width || 400, musicObj.height || 95, \"none\", false);\r\n                        me.execCommand(\"inserthtml\", str);\r\n                    },\r\n                    queryCommandState: function () {\r\n                        var me = this,\r\n                            img = me.selection.getRange().getClosedNode(),\r\n                            flag = img && (img.className == \"edui-faked-music\");\r\n                        return flag ? 1 : 0;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    // plugins/autoupload.js\r\n    /**\r\n     * @description\r\n     * 1.拖放文件到编辑区域，自动上传并插入到选区\r\n     * 2.插入粘贴板的图片，自动上传并插入到选区\r\n     * @author Jinqn\r\n     * @date 2013-10-14\r\n     */\r\n    UE.plugin.register('autoupload', function () {\r\n\r\n        function sendAndInsertFile(file, editor) {\r\n            var me = editor;\r\n            //模拟数据\r\n            var fieldName, urlPrefix, maxSize, allowFiles, actionUrl,\r\n                loadingHtml, errorHandler, successHandler,\r\n                filetype = /image\\/\\w+/i.test(file.type) ? 'image' : 'file',\r\n                loadingId = 'loading_' + (+new Date()).toString(36);\r\n\r\n            fieldName = me.getOpt(filetype + 'FieldName');\r\n            urlPrefix = me.getOpt(filetype + 'UrlPrefix');\r\n            maxSize = me.getOpt(filetype + 'MaxSize');\r\n            allowFiles = me.getOpt(filetype + 'AllowFiles');\r\n            actionUrl = me.getActionUrl(me.getOpt(filetype + 'ActionName'));\r\n            errorHandler = function (title) {\r\n                var loader = me.document.getElementById(loadingId);\r\n                loader && domUtils.remove(loader);\r\n                me.fireEvent('showmessage', {\r\n                    'id': loadingId,\r\n                    'content': title,\r\n                    'type': 'error',\r\n                    'timeout': 4000\r\n                });\r\n            };\r\n\r\n            if (filetype == 'image') {\r\n                loadingHtml = '<img class=\"loadingclass\" id=\"' + loadingId + '\" src=\"' +\r\n                    me.options.themePath + me.options.theme +\r\n                    '/images/spacer.gif\" title=\"' + (me.getLang('autoupload.loading') || '') + '\" >';\r\n                successHandler = function (data) {\r\n                    var link = urlPrefix + data.url,\r\n                        loader = me.document.getElementById(loadingId);\r\n                    if (loader) {\r\n                        loader.setAttribute('src', link);\r\n                        loader.setAttribute('_src', link);\r\n                        loader.setAttribute('title', data.title || '');\r\n                        loader.setAttribute('alt', data.original || '');\r\n                        loader.removeAttribute('id');\r\n                        domUtils.removeClasses(loader, 'loadingclass');\r\n                    }\r\n                };\r\n            } else {\r\n                loadingHtml = '<p>' +\r\n                    '<img class=\"loadingclass\" id=\"' + loadingId + '\" src=\"' +\r\n                    me.options.themePath + me.options.theme +\r\n                    '/images/spacer.gif\" title=\"' + (me.getLang('autoupload.loading') || '') + '\" >' +\r\n                    '</p>';\r\n                successHandler = function (data) {\r\n                    var link = urlPrefix + data.url,\r\n                        loader = me.document.getElementById(loadingId);\r\n\r\n                    var rng = me.selection.getRange(),\r\n                        bk = rng.createBookmark();\r\n                    rng.selectNode(loader).select();\r\n                    me.execCommand('insertfile', { 'url': link });\r\n                    rng.moveToBookmark(bk).select();\r\n                };\r\n            }\r\n\r\n            /* 插入loading的占位符 */\r\n            me.execCommand('inserthtml', loadingHtml);\r\n\r\n            /* 判断后端配置是否没有加载成功 */\r\n            if (!me.getOpt(filetype + 'ActionName')) {\r\n                errorHandler(me.getLang('autoupload.errorLoadConfig'));\r\n                return;\r\n            }\r\n            /* 判断文件大小是否超出限制 */\r\n            if (file.size > maxSize) {\r\n                errorHandler(me.getLang('autoupload.exceedSizeError'));\r\n                return;\r\n            }\r\n            /* 判断文件格式是否超出允许 */\r\n            var fileext = file.name ? file.name.substr(file.name.lastIndexOf('.')) : '';\r\n            if ((fileext && filetype != 'image') || (allowFiles && (allowFiles.join('') + '.').indexOf(fileext.toLowerCase() + '.') == -1)) {\r\n                errorHandler(me.getLang('autoupload.exceedTypeError'));\r\n                return;\r\n            }\r\n\r\n            /* 创建Ajax并提交 */\r\n            var xhr = new XMLHttpRequest(),\r\n                fd = new FormData(),\r\n                params = utils.serializeParam(me.queryCommandValue('serverparam')) || '',\r\n                url = utils.formatUrl(actionUrl + (actionUrl.indexOf('?') == -1 ? '?' : '&') + params);\r\n\r\n            fd.append(fieldName, file, file.name || ('blob.' + file.type.substr('image/'.length)));\r\n            fd.append('type', 'ajax');\r\n            xhr.open(\"post\", url, true);\r\n            xhr.setRequestHeader(\"X-Requested-With\", \"XMLHttpRequest\");\r\n            xhr.addEventListener('load', function (e) {\r\n                try {\r\n                    var json = (new Function(\"return \" + utils.trim(e.target.response)))();\r\n                    if (json.state == 'SUCCESS' && json.url) {\r\n                        successHandler(json);\r\n                    } else {\r\n                        errorHandler(json.state);\r\n                    }\r\n                } catch (er) {\r\n                    errorHandler(me.getLang('autoupload.loadError'));\r\n                }\r\n            });\r\n            xhr.send(fd);\r\n        }\r\n\r\n        function getPasteImage(e) {\r\n            return e.clipboardData && e.clipboardData.items && e.clipboardData.items.length == 1 && /^image\\//.test(e.clipboardData.items[0].type) ? e.clipboardData.items : null;\r\n        }\r\n        function getDropImage(e) {\r\n            return e.dataTransfer && e.dataTransfer.files ? e.dataTransfer.files : null;\r\n        }\r\n\r\n        return {\r\n            outputRule: function (root) {\r\n                utils.each(root.getNodesByTagName('img'), function (n) {\r\n                    if (/\\b(loaderrorclass)|(bloaderrorclass)\\b/.test(n.getAttr('class'))) {\r\n                        n.parentNode.removeChild(n);\r\n                    }\r\n                });\r\n                utils.each(root.getNodesByTagName('p'), function (n) {\r\n                    if (/\\bloadpara\\b/.test(n.getAttr('class'))) {\r\n                        n.parentNode.removeChild(n);\r\n                    }\r\n                });\r\n            },\r\n            bindEvents: {\r\n                //插入粘贴板的图片，拖放插入图片\r\n                'ready': function (e) {\r\n                    var me = this;\r\n                    if (window.FormData && window.FileReader) {\r\n                        domUtils.on(me.body, 'paste drop', function (e) {\r\n                            var hasImg = false,\r\n                                items;\r\n                            //获取粘贴板文件列表或者拖放文件列表\r\n                            items = e.type == 'paste' ? getPasteImage(e) : getDropImage(e);\r\n                            if (items) {\r\n                                var len = items.length,\r\n                                    file;\r\n                                while (len--) {\r\n                                    file = items[len];\r\n                                    if (file.getAsFile) file = file.getAsFile();\r\n                                    if (file && file.size > 0) {\r\n                                        sendAndInsertFile(file, me);\r\n                                        hasImg = true;\r\n                                    }\r\n                                }\r\n                                hasImg && e.preventDefault();\r\n                            }\r\n\r\n                        });\r\n                        //取消拖放图片时出现的文字光标位置提示\r\n                        domUtils.on(me.body, 'dragover', function (e) {\r\n                            if (e.dataTransfer.types[0] == 'Files') {\r\n                                e.preventDefault();\r\n                            }\r\n                        });\r\n\r\n                        //设置loading的样式\r\n                        utils.cssRule('loading',\r\n                            '.loadingclass{display:inline-block;cursor:default;background: url(\\''\r\n                            + this.options.themePath\r\n                            + this.options.theme + '/images/loading.gif\\') no-repeat center center transparent;border:1px solid #cccccc;margin-left:1px;height: 22px;width: 22px;}\\n' +\r\n                            '.loaderrorclass{display:inline-block;cursor:default;background: url(\\''\r\n                            + this.options.themePath\r\n                            + this.options.theme + '/images/loaderror.png\\') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;' +\r\n                            '}',\r\n                            this.document);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    // plugins/autosave.js\r\n    UE.plugin.register('autosave', function () {\r\n\r\n        var me = this,\r\n            //无限循环保护\r\n            lastSaveTime = new Date(),\r\n            //最小保存间隔时间\r\n            MIN_TIME = 20,\r\n            //auto save key\r\n            saveKey = null;\r\n\r\n        function save(editor) {\r\n\r\n            var saveData;\r\n\r\n            if (new Date() - lastSaveTime < MIN_TIME) {\r\n                return;\r\n            }\r\n\r\n            if (!editor.hasContents()) {\r\n                //这里不能调用命令来删除， 会造成事件死循环\r\n                saveKey && me.removePreferences(saveKey);\r\n                return;\r\n            }\r\n\r\n            lastSaveTime = new Date();\r\n\r\n            editor._saveFlag = null;\r\n\r\n            saveData = me.body.innerHTML;\r\n\r\n            if (editor.fireEvent(\"beforeautosave\", {\r\n                content: saveData\r\n            }) === false) {\r\n                return;\r\n            }\r\n\r\n            me.setPreferences(saveKey, saveData);\r\n\r\n            editor.fireEvent(\"afterautosave\", {\r\n                content: saveData\r\n            });\r\n\r\n        }\r\n\r\n        return {\r\n            defaultOptions: {\r\n                //默认间隔时间\r\n                saveInterval: 500\r\n            },\r\n            bindEvents: {\r\n                'ready': function () {\r\n\r\n                    var _suffix = \"-drafts-data\",\r\n                        key = null;\r\n\r\n                    if (me.key) {\r\n                        key = me.key + _suffix;\r\n                    } else {\r\n                        key = (me.container.parentNode.id || 'ue-common') + _suffix;\r\n                    }\r\n\r\n                    //页面地址+编辑器ID 保持唯一\r\n                    saveKey = (location.protocol + location.host + location.pathname).replace(/[.:\\/]/g, '_') + key;\r\n\r\n                },\r\n\r\n                'contentchange': function () {\r\n\r\n                    if (!saveKey) {\r\n                        return;\r\n                    }\r\n\r\n                    if (me._saveFlag) {\r\n                        window.clearTimeout(me._saveFlag);\r\n                    }\r\n\r\n                    if (me.options.saveInterval > 0) {\r\n\r\n                        me._saveFlag = window.setTimeout(function () {\r\n\r\n                            save(me);\r\n\r\n                        }, me.options.saveInterval);\r\n\r\n                    } else {\r\n\r\n                        save(me);\r\n\r\n                    }\r\n\r\n\r\n                }\r\n            },\r\n            commands: {\r\n                'clearlocaldata': {\r\n                    execCommand: function (cmd, name) {\r\n                        if (saveKey && me.getPreferences(saveKey)) {\r\n                            me.removePreferences(saveKey)\r\n                        }\r\n                    },\r\n                    notNeedUndo: true,\r\n                    ignoreContentChange: true\r\n                },\r\n\r\n                'getlocaldata': {\r\n                    execCommand: function (cmd, name) {\r\n                        return saveKey ? me.getPreferences(saveKey) || '' : '';\r\n                    },\r\n                    notNeedUndo: true,\r\n                    ignoreContentChange: true\r\n                },\r\n\r\n                'drafts': {\r\n                    execCommand: function (cmd, name) {\r\n                        if (saveKey) {\r\n                            me.body.innerHTML = me.getPreferences(saveKey) || '<p>' + domUtils.fillHtml + '</p>';\r\n                            me.focus(true);\r\n                        }\r\n                    },\r\n                    queryCommandState: function () {\r\n                        return saveKey ? (me.getPreferences(saveKey) === null ? -1 : 0) : -1;\r\n                    },\r\n                    notNeedUndo: true,\r\n                    ignoreContentChange: true\r\n                }\r\n            }\r\n        }\r\n\r\n    });\r\n\r\n    // plugins/charts.js\r\n    UE.plugin.register('charts', function () {\r\n\r\n        var me = this;\r\n\r\n        return {\r\n            bindEvents: {\r\n                'chartserror': function () {\r\n                }\r\n            },\r\n            commands: {\r\n                'charts': {\r\n                    execCommand: function (cmd, data) {\r\n\r\n                        var tableNode = domUtils.findParentByTagName(this.selection.getRange().startContainer, 'table', true),\r\n                            flagText = [],\r\n                            config = {};\r\n\r\n                        if (!tableNode) {\r\n                            return false;\r\n                        }\r\n\r\n                        if (!validData(tableNode)) {\r\n                            me.fireEvent(\"chartserror\");\r\n                            return false;\r\n                        }\r\n\r\n                        config.title = data.title || '';\r\n                        config.subTitle = data.subTitle || '';\r\n                        config.xTitle = data.xTitle || '';\r\n                        config.yTitle = data.yTitle || '';\r\n                        config.suffix = data.suffix || '';\r\n                        config.tip = data.tip || '';\r\n                        //数据对齐方式\r\n                        config.dataFormat = data.tableDataFormat || '';\r\n                        //图表类型\r\n                        config.chartType = data.chartType || 0;\r\n\r\n                        for (var key in config) {\r\n\r\n                            if (!config.hasOwnProperty(key)) {\r\n                                continue;\r\n                            }\r\n\r\n                            flagText.push(key + \":\" + config[key]);\r\n\r\n                        }\r\n\r\n                        tableNode.setAttribute(\"data-chart\", flagText.join(\";\"));\r\n                        domUtils.addClass(tableNode, \"edui-charts-table\");\r\n\r\n\r\n\r\n                    },\r\n                    queryCommandState: function (cmd, name) {\r\n\r\n                        var tableNode = domUtils.findParentByTagName(this.selection.getRange().startContainer, 'table', true);\r\n                        return tableNode && validData(tableNode) ? 0 : -1;\r\n\r\n                    }\r\n                }\r\n            },\r\n            inputRule: function (root) {\r\n                utils.each(root.getNodesByTagName('table'), function (tableNode) {\r\n\r\n                    if (tableNode.getAttr(\"data-chart\") !== undefined) {\r\n                        tableNode.setAttr(\"style\");\r\n                    }\r\n\r\n                })\r\n\r\n            },\r\n            outputRule: function (root) {\r\n                utils.each(root.getNodesByTagName('table'), function (tableNode) {\r\n\r\n                    if (tableNode.getAttr(\"data-chart\") !== undefined) {\r\n                        tableNode.setAttr(\"style\", \"display: none;\");\r\n                    }\r\n\r\n                })\r\n\r\n            }\r\n        }\r\n\r\n        function validData(table) {\r\n\r\n            var firstRows = null,\r\n                cellCount = 0;\r\n\r\n            //行数不够\r\n            if (table.rows.length < 2) {\r\n                return false;\r\n            }\r\n\r\n            //列数不够\r\n            if (table.rows[0].cells.length < 2) {\r\n                return false;\r\n            }\r\n\r\n            //第一行所有cell必须是th\r\n            firstRows = table.rows[0].cells;\r\n            cellCount = firstRows.length;\r\n\r\n            for (var i = 0, cell; cell = firstRows[i]; i++) {\r\n\r\n                if (cell.tagName.toLowerCase() !== 'th') {\r\n                    return false;\r\n                }\r\n\r\n            }\r\n\r\n            for (var i = 1, row; row = table.rows[i]; i++) {\r\n\r\n                //每行单元格数不匹配， 返回false\r\n                if (row.cells.length != cellCount) {\r\n                    return false;\r\n                }\r\n\r\n                //第一列不是th也返回false\r\n                if (row.cells[0].tagName.toLowerCase() !== 'th') {\r\n                    return false;\r\n                }\r\n\r\n                for (var j = 1, cell; cell = row.cells[j]; j++) {\r\n\r\n                    var value = utils.trim((cell.innerText || cell.textContent || ''));\r\n\r\n                    value = value.replace(new RegExp(UE.dom.domUtils.fillChar, 'g'), '').replace(/^\\s+|\\s+$/g, '');\r\n\r\n                    //必须是数字\r\n                    if (!/^\\d*\\.?\\d+$/.test(value)) {\r\n                        return false;\r\n                    }\r\n\r\n                }\r\n\r\n            }\r\n\r\n            return true;\r\n\r\n        }\r\n\r\n    });\r\n\r\n    // plugins/section.js\r\n    /**\r\n     * 目录大纲支持插件\r\n     * @file\r\n     * @since 1.3.0\r\n     */\r\n    UE.plugin.register('section', function () {\r\n        /* 目录节点对象 */\r\n        function Section(option) {\r\n            this.tag = '';\r\n            this.level = -1,\r\n                this.dom = null;\r\n            this.nextSection = null;\r\n            this.previousSection = null;\r\n            this.parentSection = null;\r\n            this.startAddress = [];\r\n            this.endAddress = [];\r\n            this.children = [];\r\n        }\r\n        function getSection(option) {\r\n            var section = new Section();\r\n            return utils.extend(section, option);\r\n        }\r\n        function getNodeFromAddress(startAddress, root) {\r\n            var current = root;\r\n            for (var i = 0; i < startAddress.length; i++) {\r\n                if (!current.childNodes) return null;\r\n                current = current.childNodes[startAddress[i]];\r\n            }\r\n            return current;\r\n        }\r\n\r\n        var me = this;\r\n\r\n        return {\r\n            bindMultiEvents: {\r\n                type: 'aftersetcontent afterscencerestore',\r\n                handler: function () {\r\n                    me.fireEvent('updateSections');\r\n                }\r\n            },\r\n            bindEvents: {\r\n                /* 初始化、拖拽、粘贴、执行setcontent之后 */\r\n                'ready': function () {\r\n                    me.fireEvent('updateSections');\r\n                    domUtils.on(me.body, 'drop paste', function () {\r\n                        me.fireEvent('updateSections');\r\n                    });\r\n                },\r\n                /* 执行paragraph命令之后 */\r\n                'afterexeccommand': function (type, cmd) {\r\n                    if (cmd == 'paragraph') {\r\n                        me.fireEvent('updateSections');\r\n                    }\r\n                },\r\n                /* 部分键盘操作，触发updateSections事件 */\r\n                'keyup': function (type, e) {\r\n                    var me = this,\r\n                        range = me.selection.getRange();\r\n                    if (range.collapsed != true) {\r\n                        me.fireEvent('updateSections');\r\n                    } else {\r\n                        var keyCode = e.keyCode || e.which;\r\n                        if (keyCode == 13 || keyCode == 8 || keyCode == 46) {\r\n                            me.fireEvent('updateSections');\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            commands: {\r\n                'getsections': {\r\n                    execCommand: function (cmd, levels) {\r\n                        var levelFn = levels || ['h1', 'h2', 'h3', 'h4', 'h5', 'h6'];\r\n\r\n                        for (var i = 0; i < levelFn.length; i++) {\r\n                            if (typeof levelFn[i] == 'string') {\r\n                                levelFn[i] = function (fn) {\r\n                                    return function (node) {\r\n                                        return node.tagName == fn.toUpperCase()\r\n                                    };\r\n                                }(levelFn[i]);\r\n                            } else if (typeof levelFn[i] != 'function') {\r\n                                levelFn[i] = function (node) {\r\n                                    return null;\r\n                                }\r\n                            }\r\n                        }\r\n                        function getSectionLevel(node) {\r\n                            for (var i = 0; i < levelFn.length; i++) {\r\n                                if (levelFn[i](node)) return i;\r\n                            }\r\n                            return -1;\r\n                        }\r\n\r\n                        var me = this,\r\n                            Directory = getSection({ 'level': -1, 'title': 'root' }),\r\n                            previous = Directory;\r\n\r\n                        function traversal(node, Directory) {\r\n                            var level,\r\n                                tmpSection = null,\r\n                                parent,\r\n                                child,\r\n                                children = node.childNodes;\r\n                            for (var i = 0, len = children.length; i < len; i++) {\r\n                                child = children[i];\r\n                                level = getSectionLevel(child);\r\n                                if (level >= 0) {\r\n                                    var address = me.selection.getRange().selectNode(child).createAddress(true).startAddress,\r\n                                        current = getSection({\r\n                                            'tag': child.tagName,\r\n                                            'title': child.innerText || child.textContent || '',\r\n                                            'level': level,\r\n                                            'dom': child,\r\n                                            'startAddress': utils.clone(address, []),\r\n                                            'endAddress': utils.clone(address, []),\r\n                                            'children': []\r\n                                        });\r\n                                    previous.nextSection = current;\r\n                                    current.previousSection = previous;\r\n                                    parent = previous;\r\n                                    while (level <= parent.level) {\r\n                                        parent = parent.parentSection;\r\n                                    }\r\n                                    current.parentSection = parent;\r\n                                    parent.children.push(current);\r\n                                    tmpSection = previous = current;\r\n                                } else {\r\n                                    child.nodeType === 1 && traversal(child, Directory);\r\n                                    tmpSection && tmpSection.endAddress[tmpSection.endAddress.length - 1]++;\r\n                                }\r\n                            }\r\n                        }\r\n                        traversal(me.body, Directory);\r\n                        return Directory;\r\n                    },\r\n                    notNeedUndo: true\r\n                },\r\n                'movesection': {\r\n                    execCommand: function (cmd, sourceSection, targetSection, isAfter) {\r\n\r\n                        var me = this,\r\n                            targetAddress,\r\n                            target;\r\n\r\n                        if (!sourceSection || !targetSection || targetSection.level == -1) return;\r\n\r\n                        targetAddress = isAfter ? targetSection.endAddress : targetSection.startAddress;\r\n                        target = getNodeFromAddress(targetAddress, me.body);\r\n\r\n                        /* 判断目标地址是否被源章节包含 */\r\n                        if (!targetAddress || !target || isContainsAddress(sourceSection.startAddress, sourceSection.endAddress, targetAddress)) return;\r\n\r\n                        var startNode = getNodeFromAddress(sourceSection.startAddress, me.body),\r\n                            endNode = getNodeFromAddress(sourceSection.endAddress, me.body),\r\n                            current,\r\n                            nextNode;\r\n\r\n                        if (isAfter) {\r\n                            current = endNode;\r\n                            while (current && !(domUtils.getPosition(startNode, current) & domUtils.POSITION_FOLLOWING)) {\r\n                                nextNode = current.previousSibling;\r\n                                domUtils.insertAfter(target, current);\r\n                                if (current == startNode) break;\r\n                                current = nextNode;\r\n                            }\r\n                        } else {\r\n                            current = startNode;\r\n                            while (current && !(domUtils.getPosition(current, endNode) & domUtils.POSITION_FOLLOWING)) {\r\n                                nextNode = current.nextSibling;\r\n                                target.parentNode.insertBefore(current, target);\r\n                                if (current == endNode) break;\r\n                                current = nextNode;\r\n                            }\r\n                        }\r\n\r\n                        me.fireEvent('updateSections');\r\n\r\n                        /* 获取地址的包含关系 */\r\n                        function isContainsAddress(startAddress, endAddress, addressTarget) {\r\n                            var isAfterStartAddress = false,\r\n                                isBeforeEndAddress = false;\r\n                            for (var i = 0; i < startAddress.length; i++) {\r\n                                if (i >= addressTarget.length) break;\r\n                                if (addressTarget[i] > startAddress[i]) {\r\n                                    isAfterStartAddress = true;\r\n                                    break;\r\n                                } else if (addressTarget[i] < startAddress[i]) {\r\n                                    break;\r\n                                }\r\n                            }\r\n                            for (var i = 0; i < endAddress.length; i++) {\r\n                                if (i >= addressTarget.length) break;\r\n                                if (addressTarget[i] < startAddress[i]) {\r\n                                    isBeforeEndAddress = true;\r\n                                    break;\r\n                                } else if (addressTarget[i] > startAddress[i]) {\r\n                                    break;\r\n                                }\r\n                            }\r\n                            return isAfterStartAddress && isBeforeEndAddress;\r\n                        }\r\n                    }\r\n                },\r\n                'deletesection': {\r\n                    execCommand: function (cmd, section, keepChildren) {\r\n                        var me = this;\r\n\r\n                        if (!section) return;\r\n\r\n                        function getNodeFromAddress(startAddress) {\r\n                            var current = me.body;\r\n                            for (var i = 0; i < startAddress.length; i++) {\r\n                                if (!current.childNodes) return null;\r\n                                current = current.childNodes[startAddress[i]];\r\n                            }\r\n                            return current;\r\n                        }\r\n\r\n                        var startNode = getNodeFromAddress(section.startAddress),\r\n                            endNode = getNodeFromAddress(section.endAddress),\r\n                            current = startNode,\r\n                            nextNode;\r\n\r\n                        if (!keepChildren) {\r\n                            while (current && domUtils.inDoc(endNode, me.document) && !(domUtils.getPosition(current, endNode) & domUtils.POSITION_FOLLOWING)) {\r\n                                nextNode = current.nextSibling;\r\n                                domUtils.remove(current);\r\n                                current = nextNode;\r\n                            }\r\n                        } else {\r\n                            domUtils.remove(current);\r\n                        }\r\n\r\n                        me.fireEvent('updateSections');\r\n                    }\r\n                },\r\n                'selectsection': {\r\n                    execCommand: function (cmd, section) {\r\n                        if (!section && !section.dom) return false;\r\n                        var me = this,\r\n                            range = me.selection.getRange(),\r\n                            address = {\r\n                                'startAddress': utils.clone(section.startAddress, []),\r\n                                'endAddress': utils.clone(section.endAddress, [])\r\n                            };\r\n                        address.endAddress[address.endAddress.length - 1]++;\r\n                        range.moveToAddress(address).select().scrollToView();\r\n                        return true;\r\n                    },\r\n                    notNeedUndo: true\r\n                },\r\n                'scrolltosection': {\r\n                    execCommand: function (cmd, section) {\r\n                        if (!section && !section.dom) return false;\r\n                        var me = this,\r\n                            range = me.selection.getRange(),\r\n                            address = {\r\n                                'startAddress': section.startAddress,\r\n                                'endAddress': section.endAddress\r\n                            };\r\n                        address.endAddress[address.endAddress.length - 1]++;\r\n                        range.moveToAddress(address).scrollToView();\r\n                        return true;\r\n                    },\r\n                    notNeedUndo: true\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    // plugins/simpleupload.js\r\n    /**\r\n     * @description\r\n     * 简单上传:点击按钮,直接选择文件上传\r\n     * @author Jinqn\r\n     * @date 2014-03-31\r\n     */\r\n    UE.plugin.register('simpleupload', function () {\r\n        var me = this,\r\n            isLoaded = false,\r\n            containerBtn;\r\n\r\n        function initUploadBtn() {\r\n            var w = containerBtn.offsetWidth || 20,\r\n                h = containerBtn.offsetHeight || 20,\r\n                btnIframe = document.createElement('iframe'),\r\n                btnStyle = 'display:block;width:' + w + 'px;height:' + h + 'px;overflow:hidden;border:0;margin:0;padding:0;position:absolute;top:0;left:0;filter:alpha(opacity=0);-moz-opacity:0;-khtml-opacity: 0;opacity: 0;cursor:pointer;';\r\n\r\n            domUtils.on(btnIframe, 'load', function () {\r\n\r\n                var timestrap = (+new Date()).toString(36),\r\n                    wrapper,\r\n                    btnIframeDoc,\r\n                    btnIframeBody;\r\n\r\n                btnIframeDoc = (btnIframe.contentDocument || btnIframe.contentWindow.document);\r\n                btnIframeBody = btnIframeDoc.body;\r\n                wrapper = btnIframeDoc.createElement('div');\r\n\r\n                wrapper.innerHTML = '<form id=\"edui_form_' + timestrap + '\" target=\"edui_iframe_' + timestrap + '\" method=\"POST\" enctype=\"multipart/form-data\" action=\"' + me.getOpt('serverUrl') + '\" ' +\r\n                    'style=\"' + btnStyle + '\">' +\r\n                    '<input id=\"edui_input_' + timestrap + '\" type=\"file\" accept=\"image/*\" name=\"' + me.options.imageFieldName + '\" ' +\r\n                    'style=\"' + btnStyle + '\">' +\r\n                    '</form>' +\r\n                    '<iframe id=\"edui_iframe_' + timestrap + '\" name=\"edui_iframe_' + timestrap + '\" style=\"display:none;width:0;height:0;border:0;margin:0;padding:0;position:absolute;\"></iframe>';\r\n\r\n                wrapper.className = 'edui-' + me.options.theme;\r\n                wrapper.id = me.ui.id + '_iframeupload';\r\n                btnIframeBody.style.cssText = btnStyle;\r\n                btnIframeBody.style.width = w + 'px';\r\n                btnIframeBody.style.height = h + 'px';\r\n                btnIframeBody.appendChild(wrapper);\r\n\r\n                if (btnIframeBody.parentNode) {\r\n                    btnIframeBody.parentNode.style.width = w + 'px';\r\n                    btnIframeBody.parentNode.style.height = w + 'px';\r\n                }\r\n\r\n                var form = btnIframeDoc.getElementById('edui_form_' + timestrap);\r\n                var input = btnIframeDoc.getElementById('edui_input_' + timestrap);\r\n                var iframe = btnIframeDoc.getElementById('edui_iframe_' + timestrap);\r\n\r\n                domUtils.on(input, 'change', function () {\r\n                    if (!input.value) return;\r\n                    var loadingId = 'loading_' + (+new Date()).toString(36);\r\n                    var params = utils.serializeParam(me.queryCommandValue('serverparam')) || '';\r\n\r\n                    var imageActionUrl = me.getActionUrl(me.getOpt('imageActionName'));\r\n                    var allowFiles = me.getOpt('imageAllowFiles');\r\n\r\n                    me.focus();\r\n                    me.execCommand('inserthtml', '<img class=\"loadingclass\" id=\"' + loadingId + '\" src=\"' + me.options.themePath + me.options.theme + '/images/spacer.gif\" title=\"' + (me.getLang('simpleupload.loading') || '') + '\" >');\r\n\r\n                    function callback() {\r\n                        try {\r\n                            var link, json, loader,\r\n                                body = (iframe.contentDocument || iframe.contentWindow.document).body,\r\n                                result = body.innerText || body.textContent || '';\r\n                            json = (new Function(\"return \" + result))();\r\n                            // console.log(json,result,33333333333333);\r\n                            json.url = json.data[0].imageurl;\r\n                            json.state = json.result;\r\n                            link = me.options.imageUrlPrefix + json.url;\r\n                            if ((json.state == 'SUCCESS' || json.state == 'success') && json.url) {\r\n                                loader = me.document.getElementById(loadingId);\r\n                                loader.setAttribute('src', link);\r\n                                loader.setAttribute('_src', link);\r\n                                loader.setAttribute('title', json.title || '');\r\n                                loader.setAttribute('alt', json.original || '');\r\n                                loader.removeAttribute('id');\r\n                                domUtils.removeClasses(loader, 'loadingclass');\r\n                            } else {\r\n                                showErrorLoader && showErrorLoader(json.state);\r\n                            }\r\n                        } catch (er) {\r\n                            showErrorLoader && showErrorLoader(me.getLang('simpleupload.loadError'));\r\n                        }\r\n                        form.reset();\r\n                        domUtils.un(iframe, 'load', callback);\r\n                    }\r\n                    function showErrorLoader(title) {\r\n                        if (loadingId) {\r\n                            var loader = me.document.getElementById(loadingId);\r\n                            loader && domUtils.remove(loader);\r\n                            me.fireEvent('showmessage', {\r\n                                'id': loadingId,\r\n                                'content': title,\r\n                                'type': 'error',\r\n                                'timeout': 4000\r\n                            });\r\n                        }\r\n                    }\r\n\r\n                    /* 判断后端配置是否没有加载成功 */\r\n                    if (!me.getOpt('imageActionName')) {\r\n                        errorHandler(me.getLang('autoupload.errorLoadConfig'));\r\n                        return;\r\n                    }\r\n                    // 判断文件格式是否错误\r\n                    var filename = input.value,\r\n                        fileext = filename ? filename.substr(filename.lastIndexOf('.')) : '';\r\n                    if (!fileext || (allowFiles && (allowFiles.join('') + '.').indexOf(fileext.toLowerCase() + '.') == -1)) {\r\n                        showErrorLoader(me.getLang('simpleupload.exceedTypeError'));\r\n                        return;\r\n                    }\r\n\r\n                    domUtils.on(iframe, 'load', callback);\r\n                    form.action = utils.formatUrl(imageActionUrl + (imageActionUrl.indexOf('?') == -1 ? '?' : '&') + params);\r\n                    form.submit();\r\n                });\r\n\r\n                var stateTimer;\r\n                me.addListener('selectionchange', function () {\r\n                    clearTimeout(stateTimer);\r\n                    stateTimer = setTimeout(function () {\r\n                        var state = me.queryCommandState('simpleupload');\r\n                        if (state == -1) {\r\n                            input.disabled = 'disabled';\r\n                        } else {\r\n                            input.disabled = false;\r\n                        }\r\n                    }, 400);\r\n                });\r\n                isLoaded = true;\r\n            });\r\n\r\n            btnIframe.style.cssText = btnStyle;\r\n            containerBtn.appendChild(btnIframe);\r\n        }\r\n\r\n        return {\r\n            bindEvents: {\r\n                'ready': function () {\r\n                    //设置loading的样式\r\n                    utils.cssRule('loading',\r\n                        '.loadingclass{display:inline-block;cursor:default;background: url(\\''\r\n                        + this.options.themePath\r\n                        + this.options.theme + '/images/loading.gif\\') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}\\n' +\r\n                        '.loaderrorclass{display:inline-block;cursor:default;background: url(\\''\r\n                        + this.options.themePath\r\n                        + this.options.theme + '/images/loaderror.png\\') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;' +\r\n                        '}',\r\n                        this.document);\r\n                },\r\n                /* 初始化简单上传按钮 */\r\n                'simpleuploadbtnready': function (type, container) {\r\n                    containerBtn = container;\r\n                    me.afterConfigReady(initUploadBtn);\r\n                }\r\n            },\r\n            outputRule: function (root) {\r\n                utils.each(root.getNodesByTagName('img'), function (n) {\r\n                    if (/\\b(loaderrorclass)|(bloaderrorclass)\\b/.test(n.getAttr('class'))) {\r\n                        n.parentNode.removeChild(n);\r\n                    }\r\n                });\r\n            },\r\n            commands: {\r\n                'simpleupload': {\r\n                    queryCommandState: function () {\r\n                        return isLoaded ? 0 : -1;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n    // plugins/serverparam.js\r\n    /**\r\n     * 服务器提交的额外参数列表设置插件\r\n     * @file\r\n     * @since 1.2.6.1\r\n     */\r\n    UE.plugin.register('serverparam', function () {\r\n\r\n        var me = this,\r\n            serverParam = {};\r\n\r\n        return {\r\n            commands: {\r\n                /**\r\n                 * 修改服务器提交的额外参数列表,清除所有项\r\n                 * @command serverparam\r\n                 * @method execCommand\r\n                 * @param { String } cmd 命令字符串\r\n                 * @example\r\n                 * ```javascript\r\n                 * editor.execCommand('serverparam');\r\n                 * editor.queryCommandValue('serverparam'); //返回空\r\n                 * ```\r\n                 */\r\n                /**\r\n                 * 修改服务器提交的额外参数列表,删除指定项\r\n                 * @command serverparam\r\n                 * @method execCommand\r\n                 * @param { String } cmd 命令字符串\r\n                 * @param { String } key 要清除的属性\r\n                 * @example\r\n                 * ```javascript\r\n                 * editor.execCommand('serverparam', 'name'); //删除属性name\r\n                 * ```\r\n                 */\r\n                /**\r\n                 * 修改服务器提交的额外参数列表,使用键值添加项\r\n                 * @command serverparam\r\n                 * @method execCommand\r\n                 * @param { String } cmd 命令字符串\r\n                 * @param { String } key 要添加的属性\r\n                 * @param { String } value 要添加属性的值\r\n                 * @example\r\n                 * ```javascript\r\n                 * editor.execCommand('serverparam', 'name', 'hello');\r\n                 * editor.queryCommandValue('serverparam'); //返回对象 {'name': 'hello'}\r\n                 * ```\r\n                 */\r\n                /**\r\n                 * 修改服务器提交的额外参数列表,传入键值对对象添加多项\r\n                 * @command serverparam\r\n                 * @method execCommand\r\n                 * @param { String } cmd 命令字符串\r\n                 * @param { Object } key 传入的键值对对象\r\n                 * @example\r\n                 * ```javascript\r\n                 * editor.execCommand('serverparam', {'name': 'hello'});\r\n                 * editor.queryCommandValue('serverparam'); //返回对象 {'name': 'hello'}\r\n                 * ```\r\n                 */\r\n                /**\r\n                 * 修改服务器提交的额外参数列表,使用自定义函数添加多项\r\n                 * @command serverparam\r\n                 * @method execCommand\r\n                 * @param { String } cmd 命令字符串\r\n                 * @param { Function } key 自定义获取参数的函数\r\n                 * @example\r\n                 * ```javascript\r\n                 * editor.execCommand('serverparam', function(editor){\r\n                 *     return {'key': 'value'};\r\n                 * });\r\n                 * editor.queryCommandValue('serverparam'); //返回对象 {'key': 'value'}\r\n                 * ```\r\n                 */\r\n\r\n                /**\r\n                 * 获取服务器提交的额外参数列表\r\n                 * @command serverparam\r\n                 * @method queryCommandValue\r\n                 * @param { String } cmd 命令字符串\r\n                 * @example\r\n                 * ```javascript\r\n                 * editor.queryCommandValue( 'serverparam' ); //返回对象 {'key': 'value'}\r\n                 * ```\r\n                 */\r\n                'serverparam': {\r\n                    execCommand: function (cmd, key, value) {\r\n                        if (key === undefined || key === null) { //不传参数,清空列表\r\n                            serverParam = {};\r\n                        } else if (utils.isString(key)) { //传入键值\r\n                            if (value === undefined || value === null) {\r\n                                delete serverParam[key];\r\n                            } else {\r\n                                serverParam[key] = value;\r\n                            }\r\n                        } else if (utils.isObject(key)) { //传入对象,覆盖列表项\r\n                            utils.extend(serverParam, key, true);\r\n                        } else if (utils.isFunction(key)) { //传入函数,添加列表项\r\n                            utils.extend(serverParam, key(), true);\r\n                        }\r\n                    },\r\n                    queryCommandValue: function () {\r\n                        return serverParam || {};\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n\r\n    // plugins/insertfile.js\r\n    /**\r\n     * 插入附件\r\n     */\r\n    UE.plugin.register('insertfile', function () {\r\n\r\n        var me = this;\r\n\r\n        function getFileIcon(url) {\r\n            var ext = url.substr(url.lastIndexOf('.') + 1).toLowerCase(),\r\n                maps = {\r\n                    \"rar\": \"icon_rar.gif\",\r\n                    \"zip\": \"icon_rar.gif\",\r\n                    \"tar\": \"icon_rar.gif\",\r\n                    \"gz\": \"icon_rar.gif\",\r\n                    \"bz2\": \"icon_rar.gif\",\r\n                    \"doc\": \"icon_doc.gif\",\r\n                    \"docx\": \"icon_doc.gif\",\r\n                    \"pdf\": \"icon_pdf.gif\",\r\n                    \"mp3\": \"icon_mp3.gif\",\r\n                    \"xls\": \"icon_xls.gif\",\r\n                    \"chm\": \"icon_chm.gif\",\r\n                    \"ppt\": \"icon_ppt.gif\",\r\n                    \"pptx\": \"icon_ppt.gif\",\r\n                    \"avi\": \"icon_mv.gif\",\r\n                    \"rmvb\": \"icon_mv.gif\",\r\n                    \"wmv\": \"icon_mv.gif\",\r\n                    \"flv\": \"icon_mv.gif\",\r\n                    \"swf\": \"icon_mv.gif\",\r\n                    \"rm\": \"icon_mv.gif\",\r\n                    \"exe\": \"icon_exe.gif\",\r\n                    \"psd\": \"icon_psd.gif\",\r\n                    \"txt\": \"icon_txt.gif\",\r\n                    \"jpg\": \"icon_jpg.gif\",\r\n                    \"png\": \"icon_jpg.gif\",\r\n                    \"jpeg\": \"icon_jpg.gif\",\r\n                    \"gif\": \"icon_jpg.gif\",\r\n                    \"ico\": \"icon_jpg.gif\",\r\n                    \"bmp\": \"icon_jpg.gif\"\r\n                };\r\n            return maps[ext] ? maps[ext] : maps['txt'];\r\n        }\r\n\r\n        return {\r\n            commands: {\r\n                'insertfile': {\r\n                    execCommand: function (command, filelist) {\r\n                        filelist = utils.isArray(filelist) ? filelist : [filelist];\r\n                        // console.log(filelist,3333333333);\r\n                        var i, item, icon, title,\r\n                            html = '',\r\n                            URL = me.getOpt('UEDITOR_HOME_URL'),\r\n                            iconDir = URL + (URL.substr(URL.length - 1) == '/' ? '' : '/') + 'dialogs/attachment/fileTypeImages/';\r\n                        for (i = 0; i < filelist.length; i++) {\r\n                            item = filelist[i];\r\n                            icon = iconDir + getFileIcon(item.url);\r\n                            title = item.title || item.url.substr(item.url.lastIndexOf('/') + 1);\r\n                            html += '<p style=\"line-height: 16px;\">' +\r\n                                '<img style=\"vertical-align: middle; margin-right: 2px;\" src=\"' + icon + '\" _src=\"' + icon + '\" />' +\r\n                                '<a style=\"font-size:12px; color:#0066cc;\" href=\"' + item.url + '\" title=\"' + title + '\">' + title + '</a>' +\r\n                                '</p>';\r\n                        }\r\n                        me.execCommand('insertHtml', html);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n    });\r\n\r\n\r\n\r\n\r\n    // plugins/xssFilter.js\r\n    /**\r\n     * @file xssFilter.js\r\n     * @desc xss过滤器\r\n     * @author robbenmu\r\n     */\r\n\r\n    UE.plugins.xssFilter = function () {\r\n\r\n        var config = UEDITOR_CONFIG;\r\n        var whitList = config.whitList;\r\n\r\n        function filter(node) {\r\n\r\n            var tagName = node.tagName;\r\n            var attrs = node.attrs;\r\n\r\n            if (!whitList.hasOwnProperty(tagName)) {\r\n                node.parentNode.removeChild(node);\r\n                return false;\r\n            }\r\n\r\n            UE.utils.each(attrs, function (val, key) {\r\n\r\n                if (whitList[tagName].indexOf(key) === -1) {\r\n                    node.setAttr(key);\r\n                }\r\n            });\r\n        }\r\n\r\n        // 添加inserthtml\\paste等操作用的过滤规则\r\n        if (whitList && config.xssFilterRules) {\r\n            this.options.filterRules = function () {\r\n\r\n                var result = {};\r\n\r\n                UE.utils.each(whitList, function (val, key) {\r\n                    result[key] = function (node) {\r\n                        return filter(node);\r\n                    };\r\n                });\r\n\r\n                return result;\r\n            }();\r\n        }\r\n\r\n        var tagList = [];\r\n\r\n        UE.utils.each(whitList, function (val, key) {\r\n            tagList.push(key);\r\n        });\r\n\r\n        // 添加input过滤规则\r\n        //\r\n        if (whitList && config.inputXssFilter) {\r\n            this.addInputRule(function (root) {\r\n\r\n                root.traversal(function (node) {\r\n                    if (node.type !== 'element') {\r\n                        return false;\r\n                    }\r\n                    filter(node);\r\n                });\r\n            });\r\n        }\r\n        // 添加output过滤规则\r\n        //\r\n        if (whitList && config.outputXssFilter) {\r\n            this.addOutputRule(function (root) {\r\n\r\n                root.traversal(function (node) {\r\n                    if (node.type !== 'element') {\r\n                        return false;\r\n                    }\r\n                    filter(node);\r\n                });\r\n            });\r\n        }\r\n\r\n    };\r\n\r\n\r\n    // ui/ui.js\r\n    var baidu = baidu || {};\r\n    baidu.editor = baidu.editor || {};\r\n    UE.ui = baidu.editor.ui = {};\r\n\r\n    // ui/uiutils.js\r\n    (function () {\r\n        var browser = baidu.editor.browser,\r\n            domUtils = baidu.editor.dom.domUtils;\r\n\r\n        var magic = '$EDITORUI';\r\n        var root = window[magic] = {};\r\n        var uidMagic = 'ID' + magic;\r\n        var uidCount = 0;\r\n\r\n        var uiUtils = baidu.editor.ui.uiUtils = {\r\n            uid: function (obj) {\r\n                return (obj ? obj[uidMagic] || (obj[uidMagic] = ++uidCount) : ++uidCount);\r\n            },\r\n            hook: function (fn, callback) {\r\n                var dg;\r\n                if (fn && fn._callbacks) {\r\n                    dg = fn;\r\n                } else {\r\n                    dg = function () {\r\n                        var q;\r\n                        if (fn) {\r\n                            q = fn.apply(this, arguments);\r\n                        }\r\n                        var callbacks = dg._callbacks;\r\n                        var k = callbacks.length;\r\n                        while (k--) {\r\n                            var r = callbacks[k].apply(this, arguments);\r\n                            if (q === undefined) {\r\n                                q = r;\r\n                            }\r\n                        }\r\n                        return q;\r\n                    };\r\n                    dg._callbacks = [];\r\n                }\r\n                dg._callbacks.push(callback);\r\n                return dg;\r\n            },\r\n            createElementByHtml: function (html) {\r\n                var el = document.createElement('div');\r\n                el.innerHTML = html;\r\n                el = el.firstChild;\r\n                el.parentNode.removeChild(el);\r\n                return el;\r\n            },\r\n            getViewportElement: function () {\r\n                return (browser.ie && browser.quirks) ?\r\n                    document.body : document.documentElement;\r\n            },\r\n            getClientRect: function (element) {\r\n                var bcr;\r\n                //trace  IE6下在控制编辑器显隐时可能会报错，catch一下\r\n                try {\r\n                    bcr = element.getBoundingClientRect();\r\n                } catch (e) {\r\n                    bcr = { left: 0, top: 0, height: 0, width: 0 }\r\n                }\r\n                var rect = {\r\n                    left: Math.round(bcr.left),\r\n                    top: Math.round(bcr.top),\r\n                    height: Math.round(bcr.bottom - bcr.top),\r\n                    width: Math.round(bcr.right - bcr.left)\r\n                };\r\n                var doc;\r\n                while ((doc = element.ownerDocument) !== document &&\r\n                    (element = domUtils.getWindow(doc).frameElement)) {\r\n                    bcr = element.getBoundingClientRect();\r\n                    rect.left += bcr.left;\r\n                    rect.top += bcr.top;\r\n                }\r\n                rect.bottom = rect.top + rect.height;\r\n                rect.right = rect.left + rect.width;\r\n                return rect;\r\n            },\r\n            getViewportRect: function () {\r\n                var viewportEl = uiUtils.getViewportElement();\r\n                var width = (window.innerWidth || viewportEl.clientWidth) | 0;\r\n                var height = (window.innerHeight || viewportEl.clientHeight) | 0;\r\n                return {\r\n                    left: 0,\r\n                    top: 0,\r\n                    height: height,\r\n                    width: width,\r\n                    bottom: height,\r\n                    right: width\r\n                };\r\n            },\r\n            setViewportOffset: function (element, offset) {\r\n                var rect;\r\n                var fixedLayer = uiUtils.getFixedLayer();\r\n                if (element.parentNode === fixedLayer) {\r\n                    element.style.left = offset.left + 'px';\r\n                    element.style.top = offset.top + 'px';\r\n                } else {\r\n                    domUtils.setViewportOffset(element, offset);\r\n                }\r\n            },\r\n            getEventOffset: function (evt) {\r\n                var el = evt.target || evt.srcElement;\r\n                var rect = uiUtils.getClientRect(el);\r\n                var offset = uiUtils.getViewportOffsetByEvent(evt);\r\n                return {\r\n                    left: offset.left - rect.left,\r\n                    top: offset.top - rect.top\r\n                };\r\n            },\r\n            getViewportOffsetByEvent: function (evt) {\r\n                var el = evt.target || evt.srcElement;\r\n                var frameEl = domUtils.getWindow(el).frameElement;\r\n                var offset = {\r\n                    left: evt.clientX,\r\n                    top: evt.clientY\r\n                };\r\n                if (frameEl && el.ownerDocument !== document) {\r\n                    var rect = uiUtils.getClientRect(frameEl);\r\n                    offset.left += rect.left;\r\n                    offset.top += rect.top;\r\n                }\r\n                return offset;\r\n            },\r\n            setGlobal: function (id, obj) {\r\n                root[id] = obj;\r\n                return magic + '[\"' + id + '\"]';\r\n            },\r\n            unsetGlobal: function (id) {\r\n                delete root[id];\r\n            },\r\n            copyAttributes: function (tgt, src) {\r\n                var attributes = src.attributes;\r\n                var k = attributes.length;\r\n                while (k--) {\r\n                    var attrNode = attributes[k];\r\n                    if (attrNode.nodeName != 'style' && attrNode.nodeName != 'class' && (!browser.ie || attrNode.specified)) {\r\n                        tgt.setAttribute(attrNode.nodeName, attrNode.nodeValue);\r\n                    }\r\n                }\r\n                if (src.className) {\r\n                    domUtils.addClass(tgt, src.className);\r\n                }\r\n                if (src.style.cssText) {\r\n                    tgt.style.cssText += ';' + src.style.cssText;\r\n                }\r\n            },\r\n            removeStyle: function (el, styleName) {\r\n                if (el.style.removeProperty) {\r\n                    el.style.removeProperty(styleName);\r\n                } else if (el.style.removeAttribute) {\r\n                    el.style.removeAttribute(styleName);\r\n                } else throw '';\r\n            },\r\n            contains: function (elA, elB) {\r\n                return elA && elB && (elA === elB ? false : (\r\n                    elA.contains ? elA.contains(elB) :\r\n                        elA.compareDocumentPosition(elB) & 16\r\n                ));\r\n            },\r\n            startDrag: function (evt, callbacks, doc) {\r\n                var doc = doc || document;\r\n                var startX = evt.clientX;\r\n                var startY = evt.clientY;\r\n                function handleMouseMove(evt) {\r\n                    var x = evt.clientX - startX;\r\n                    var y = evt.clientY - startY;\r\n                    callbacks.ondragmove(x, y, evt);\r\n                    if (evt.stopPropagation) {\r\n                        evt.stopPropagation();\r\n                    } else {\r\n                        evt.cancelBubble = true;\r\n                    }\r\n                }\r\n                if (doc.addEventListener) {\r\n                    function handleMouseUp(evt) {\r\n                        doc.removeEventListener('mousemove', handleMouseMove, true);\r\n                        doc.removeEventListener('mouseup', handleMouseUp, true);\r\n                        window.removeEventListener('mouseup', handleMouseUp, true);\r\n                        callbacks.ondragstop();\r\n                    }\r\n                    doc.addEventListener('mousemove', handleMouseMove, true);\r\n                    doc.addEventListener('mouseup', handleMouseUp, true);\r\n                    window.addEventListener('mouseup', handleMouseUp, true);\r\n\r\n                    evt.preventDefault();\r\n                } else {\r\n                    var elm = evt.srcElement;\r\n                    elm.setCapture();\r\n                    function releaseCaptrue() {\r\n                        elm.releaseCapture();\r\n                        elm.detachEvent('onmousemove', handleMouseMove);\r\n                        elm.detachEvent('onmouseup', releaseCaptrue);\r\n                        elm.detachEvent('onlosecaptrue', releaseCaptrue);\r\n                        callbacks.ondragstop();\r\n                    }\r\n                    elm.attachEvent('onmousemove', handleMouseMove);\r\n                    elm.attachEvent('onmouseup', releaseCaptrue);\r\n                    elm.attachEvent('onlosecaptrue', releaseCaptrue);\r\n                    evt.returnValue = false;\r\n                }\r\n                callbacks.ondragstart();\r\n            },\r\n            getFixedLayer: function () {\r\n                var layer = document.getElementById('edui_fixedlayer');\r\n                if (layer == null) {\r\n                    layer = document.createElement('div');\r\n                    layer.id = 'edui_fixedlayer';\r\n                    document.body.appendChild(layer);\r\n                    if (browser.ie && browser.version <= 8) {\r\n                        layer.style.position = 'absolute';\r\n                        bindFixedLayer();\r\n                        setTimeout(updateFixedOffset);\r\n                    } else {\r\n                        layer.style.position = 'fixed';\r\n                    }\r\n                    layer.style.left = '0';\r\n                    layer.style.top = '0';\r\n                    layer.style.width = '0';\r\n                    layer.style.height = '0';\r\n                }\r\n                return layer;\r\n            },\r\n            makeUnselectable: function (element) {\r\n                if (browser.opera || (browser.ie && browser.version < 9)) {\r\n                    element.unselectable = 'on';\r\n                    if (element.hasChildNodes()) {\r\n                        for (var i = 0; i < element.childNodes.length; i++) {\r\n                            if (element.childNodes[i].nodeType == 1) {\r\n                                uiUtils.makeUnselectable(element.childNodes[i]);\r\n                            }\r\n                        }\r\n                    }\r\n                } else {\r\n                    if (element.style.MozUserSelect !== undefined) {\r\n                        element.style.MozUserSelect = 'none';\r\n                    } else if (element.style.WebkitUserSelect !== undefined) {\r\n                        element.style.WebkitUserSelect = 'none';\r\n                    } else if (element.style.KhtmlUserSelect !== undefined) {\r\n                        element.style.KhtmlUserSelect = 'none';\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        function updateFixedOffset() {\r\n            var layer = document.getElementById('edui_fixedlayer');\r\n            uiUtils.setViewportOffset(layer, {\r\n                left: 0,\r\n                top: 0\r\n            });\r\n            //        layer.style.display = 'none';\r\n            //        layer.style.display = 'block';\r\n\r\n            //#trace: 1354\r\n            //        setTimeout(updateFixedOffset);\r\n        }\r\n        function bindFixedLayer(adjOffset) {\r\n            domUtils.on(window, 'scroll', updateFixedOffset);\r\n            domUtils.on(window, 'resize', baidu.editor.utils.defer(updateFixedOffset, 0, true));\r\n        }\r\n    })();\r\n\r\n\r\n    // ui/uibase.js\r\n    (function () {\r\n        var utils = baidu.editor.utils,\r\n            uiUtils = baidu.editor.ui.uiUtils,\r\n            EventBase = baidu.editor.EventBase,\r\n            UIBase = baidu.editor.ui.UIBase = function () {\r\n            };\r\n\r\n        UIBase.prototype = {\r\n            className: '',\r\n            uiName: '',\r\n            initOptions: function (options) {\r\n                var me = this;\r\n                for (var k in options) {\r\n                    me[k] = options[k];\r\n                }\r\n                this.id = this.id || 'edui' + uiUtils.uid();\r\n            },\r\n            initUIBase: function () {\r\n                this._globalKey = utils.unhtml(uiUtils.setGlobal(this.id, this));\r\n            },\r\n            render: function (holder) {\r\n                var html = this.renderHtml();\r\n                var el = uiUtils.createElementByHtml(html);\r\n\r\n                //by xuheng 给每个node添加class\r\n                var list = domUtils.getElementsByTagName(el, \"*\");\r\n                var theme = \"edui-\" + (this.theme || this.editor.options.theme);\r\n                var layer = document.getElementById('edui_fixedlayer');\r\n                for (var i = 0, node; node = list[i++];) {\r\n                    domUtils.addClass(node, theme);\r\n                }\r\n                domUtils.addClass(el, theme);\r\n                if (layer) {\r\n                    layer.className = \"\";\r\n                    domUtils.addClass(layer, theme);\r\n                }\r\n\r\n                var seatEl = this.getDom();\r\n                if (seatEl != null) {\r\n                    seatEl.parentNode.replaceChild(el, seatEl);\r\n                    uiUtils.copyAttributes(el, seatEl);\r\n                } else {\r\n                    if (typeof holder == 'string') {\r\n                        holder = document.getElementById(holder);\r\n                    }\r\n                    holder = holder || uiUtils.getFixedLayer();\r\n                    domUtils.addClass(holder, theme);\r\n                    holder.appendChild(el);\r\n                }\r\n                this.postRender();\r\n            },\r\n            getDom: function (name) {\r\n                if (!name) {\r\n                    return document.getElementById(this.id);\r\n                } else {\r\n                    return document.getElementById(this.id + '_' + name);\r\n                }\r\n            },\r\n            postRender: function () {\r\n                this.fireEvent('postrender');\r\n            },\r\n            getHtmlTpl: function () {\r\n                return '';\r\n            },\r\n            formatHtml: function (tpl) {\r\n                var prefix = 'edui-' + this.uiName;\r\n                return (tpl\r\n                    .replace(/##/g, this.id)\r\n                    .replace(/%%-/g, this.uiName ? prefix + '-' : '')\r\n                    .replace(/%%/g, (this.uiName ? prefix : '') + ' ' + this.className)\r\n                    .replace(/\\$\\$/g, this._globalKey));\r\n            },\r\n            renderHtml: function () {\r\n                return this.formatHtml(this.getHtmlTpl());\r\n            },\r\n            dispose: function () {\r\n                var box = this.getDom();\r\n                if (box) baidu.editor.dom.domUtils.remove(box);\r\n                uiUtils.unsetGlobal(this.id);\r\n            }\r\n        };\r\n        utils.inherits(UIBase, EventBase);\r\n    })();\r\n\r\n\r\n    // ui/separator.js\r\n    (function () {\r\n        var utils = baidu.editor.utils,\r\n            UIBase = baidu.editor.ui.UIBase,\r\n            Separator = baidu.editor.ui.Separator = function (options) {\r\n                this.initOptions(options);\r\n                this.initSeparator();\r\n            };\r\n        Separator.prototype = {\r\n            uiName: 'separator',\r\n            initSeparator: function () {\r\n                this.initUIBase();\r\n            },\r\n            getHtmlTpl: function () {\r\n                return '<div id=\"##\" class=\"edui-box %%\"></div>';\r\n            }\r\n        };\r\n        utils.inherits(Separator, UIBase);\r\n\r\n    })();\r\n\r\n\r\n    // ui/mask.js\r\n    ///import core\r\n    ///import uicore\r\n    (function () {\r\n        var utils = baidu.editor.utils,\r\n            domUtils = baidu.editor.dom.domUtils,\r\n            UIBase = baidu.editor.ui.UIBase,\r\n            uiUtils = baidu.editor.ui.uiUtils;\r\n\r\n        var Mask = baidu.editor.ui.Mask = function (options) {\r\n            this.initOptions(options);\r\n            this.initUIBase();\r\n        };\r\n        Mask.prototype = {\r\n            getHtmlTpl: function () {\r\n                return '<div id=\"##\" class=\"edui-mask %%\" onclick=\"return $$._onClick(event, this);\" onmousedown=\"return $$._onMouseDown(event, this);\"></div>';\r\n            },\r\n            postRender: function () {\r\n                var me = this;\r\n                domUtils.on(window, 'resize', function () {\r\n                    setTimeout(function () {\r\n                        if (!me.isHidden()) {\r\n                            me._fill();\r\n                        }\r\n                    });\r\n                });\r\n            },\r\n            show: function (zIndex) {\r\n                this._fill();\r\n                this.getDom().style.display = '';\r\n                this.getDom().style.zIndex = zIndex;\r\n            },\r\n            hide: function () {\r\n                this.getDom().style.display = 'none';\r\n                this.getDom().style.zIndex = '';\r\n            },\r\n            isHidden: function () {\r\n                return this.getDom().style.display == 'none';\r\n            },\r\n            _onMouseDown: function () {\r\n                return false;\r\n            },\r\n            _onClick: function (e, target) {\r\n                this.fireEvent('click', e, target);\r\n            },\r\n            _fill: function () {\r\n                var el = this.getDom();\r\n                var vpRect = uiUtils.getViewportRect();\r\n                el.style.width = vpRect.width + 'px';\r\n                el.style.height = vpRect.height + 'px';\r\n            }\r\n        };\r\n        utils.inherits(Mask, UIBase);\r\n    })();\r\n\r\n\r\n    // ui/popup.js\r\n    ///import core\r\n    ///import uicore\r\n    (function () {\r\n        var utils = baidu.editor.utils,\r\n            uiUtils = baidu.editor.ui.uiUtils,\r\n            domUtils = baidu.editor.dom.domUtils,\r\n            UIBase = baidu.editor.ui.UIBase,\r\n            Popup = baidu.editor.ui.Popup = function (options) {\r\n                this.initOptions(options);\r\n                this.initPopup();\r\n            };\r\n\r\n        var allPopups = [];\r\n        function closeAllPopup(evt, el) {\r\n            for (var i = 0; i < allPopups.length; i++) {\r\n                var pop = allPopups[i];\r\n                if (!pop.isHidden()) {\r\n                    if (pop.queryAutoHide(el) !== false) {\r\n                        if (evt && /scroll/ig.test(evt.type) && pop.className == \"edui-wordpastepop\") return;\r\n                        pop.hide();\r\n                    }\r\n                }\r\n            }\r\n\r\n            if (allPopups.length)\r\n                pop.editor.fireEvent(\"afterhidepop\");\r\n        }\r\n\r\n        Popup.postHide = closeAllPopup;\r\n\r\n        var ANCHOR_CLASSES = ['edui-anchor-topleft', 'edui-anchor-topright',\r\n            'edui-anchor-bottomleft', 'edui-anchor-bottomright'];\r\n        Popup.prototype = {\r\n            SHADOW_RADIUS: 5,\r\n            content: null,\r\n            _hidden: false,\r\n            autoRender: true,\r\n            canSideLeft: true,\r\n            canSideUp: true,\r\n            initPopup: function () {\r\n                this.initUIBase();\r\n                allPopups.push(this);\r\n            },\r\n            getHtmlTpl: function () {\r\n                return '<div id=\"##\" class=\"edui-popup %%\" onmousedown=\"return false;\">' +\r\n                    ' <div id=\"##_body\" class=\"edui-popup-body\">' +\r\n                    ' <iframe style=\"position:absolute;z-index:-1;left:0;top:0;background-color: transparent;\" frameborder=\"0\" width=\"100%\" height=\"100%\" src=\"about:blank\"></iframe>' +\r\n                    ' <div class=\"edui-shadow\"></div>' +\r\n                    ' <div id=\"##_content\" class=\"edui-popup-content\">' +\r\n                    this.getContentHtmlTpl() +\r\n                    '  </div>' +\r\n                    ' </div>' +\r\n                    '</div>';\r\n            },\r\n            getContentHtmlTpl: function () {\r\n                if (this.content) {\r\n                    if (typeof this.content == 'string') {\r\n                        return this.content;\r\n                    }\r\n                    return this.content.renderHtml();\r\n                } else {\r\n                    return ''\r\n                }\r\n\r\n            },\r\n            _UIBase_postRender: UIBase.prototype.postRender,\r\n            postRender: function () {\r\n\r\n\r\n                if (this.content instanceof UIBase) {\r\n                    this.content.postRender();\r\n                }\r\n\r\n                //捕获鼠标滚轮\r\n                if (this.captureWheel && !this.captured) {\r\n\r\n                    this.captured = true;\r\n\r\n                    var winHeight = (document.documentElement.clientHeight || document.body.clientHeight) - 80,\r\n                        _height = this.getDom().offsetHeight,\r\n                        _top = uiUtils.getClientRect(this.combox.getDom()).top,\r\n                        content = this.getDom('content'),\r\n                        ifr = this.getDom('body').getElementsByTagName('iframe'),\r\n                        me = this;\r\n\r\n                    ifr.length && (ifr = ifr[0]);\r\n\r\n                    while (_top + _height > winHeight) {\r\n                        _height -= 30;\r\n                    }\r\n                    content.style.height = _height + 'px';\r\n                    //同步更改iframe高度\r\n                    ifr && (ifr.style.height = _height + 'px');\r\n\r\n                    //阻止在combox上的鼠标滚轮事件, 防止用户的正常操作被误解\r\n                    if (window.XMLHttpRequest) {\r\n\r\n                        domUtils.on(content, ('onmousewheel' in document.body) ? 'mousewheel' : 'DOMMouseScroll', function (e) {\r\n\r\n                            if (e.preventDefault) {\r\n                                e.preventDefault();\r\n                            } else {\r\n                                e.returnValue = false;\r\n                            }\r\n\r\n                            if (e.wheelDelta) {\r\n\r\n                                content.scrollTop -= (e.wheelDelta / 120) * 60;\r\n\r\n                            } else {\r\n\r\n                                content.scrollTop -= (e.detail / -3) * 60;\r\n\r\n                            }\r\n\r\n                        });\r\n\r\n                    } else {\r\n\r\n                        //ie6\r\n                        domUtils.on(this.getDom(), 'mousewheel', function (e) {\r\n\r\n                            e.returnValue = false;\r\n\r\n                            me.getDom('content').scrollTop -= (e.wheelDelta / 120) * 60;\r\n\r\n                        });\r\n\r\n                    }\r\n\r\n                }\r\n                this.fireEvent('postRenderAfter');\r\n                this.hide(true);\r\n                this._UIBase_postRender();\r\n            },\r\n            _doAutoRender: function () {\r\n                if (!this.getDom() && this.autoRender) {\r\n                    this.render();\r\n                }\r\n            },\r\n            mesureSize: function () {\r\n                var box = this.getDom('content');\r\n                return uiUtils.getClientRect(box);\r\n            },\r\n            fitSize: function () {\r\n                if (this.captureWheel && this.sized) {\r\n                    return this.__size;\r\n                }\r\n                this.sized = true;\r\n                var popBodyEl = this.getDom('body');\r\n                popBodyEl.style.width = '';\r\n                popBodyEl.style.height = '';\r\n                var size = this.mesureSize();\r\n                if (this.captureWheel) {\r\n                    popBodyEl.style.width = -(-20 - size.width) + 'px';\r\n                    var height = parseInt(this.getDom('content').style.height, 10);\r\n                    !window.isNaN(height) && (size.height = height);\r\n                } else {\r\n                    popBodyEl.style.width = size.width + 'px';\r\n                }\r\n                popBodyEl.style.height = size.height + 'px';\r\n                this.__size = size;\r\n                this.captureWheel && (this.getDom('content').style.overflow = 'auto');\r\n                return size;\r\n            },\r\n            showAnchor: function (element, hoz) {\r\n                this.showAnchorRect(uiUtils.getClientRect(element), hoz);\r\n            },\r\n            showAnchorRect: function (rect, hoz, adj) {\r\n                this._doAutoRender();\r\n                var vpRect = uiUtils.getViewportRect();\r\n                this.getDom().style.visibility = 'hidden';\r\n                this._show();\r\n                var popSize = this.fitSize();\r\n\r\n                var sideLeft, sideUp, left, top;\r\n                if (hoz) {\r\n                    sideLeft = this.canSideLeft && (rect.right + popSize.width > vpRect.right && rect.left > popSize.width);\r\n                    sideUp = this.canSideUp && (rect.top + popSize.height > vpRect.bottom && rect.bottom > popSize.height);\r\n                    left = (sideLeft ? rect.left - popSize.width : rect.right);\r\n                    top = (sideUp ? rect.bottom - popSize.height : rect.top);\r\n                } else {\r\n                    sideLeft = this.canSideLeft && (rect.right + popSize.width > vpRect.right && rect.left > popSize.width);\r\n                    sideUp = this.canSideUp && (rect.top + popSize.height > vpRect.bottom && rect.bottom > popSize.height);\r\n                    left = (sideLeft ? rect.right - popSize.width : rect.left);\r\n                    top = (sideUp ? rect.top - popSize.height : rect.bottom);\r\n                }\r\n\r\n                var popEl = this.getDom();\r\n                uiUtils.setViewportOffset(popEl, {\r\n                    left: left,\r\n                    top: top\r\n                });\r\n                domUtils.removeClasses(popEl, ANCHOR_CLASSES);\r\n                popEl.className += ' ' + ANCHOR_CLASSES[(sideUp ? 1 : 0) * 2 + (sideLeft ? 1 : 0)];\r\n                if (this.editor) {\r\n                    popEl.style.zIndex = this.editor.container.style.zIndex * 1 + 10;\r\n                    baidu.editor.ui.uiUtils.getFixedLayer().style.zIndex = popEl.style.zIndex - 1;\r\n                }\r\n                this.getDom().style.visibility = 'visible';\r\n\r\n            },\r\n            showAt: function (offset) {\r\n                var left = offset.left;\r\n                var top = offset.top;\r\n                var rect = {\r\n                    left: left,\r\n                    top: top,\r\n                    right: left,\r\n                    bottom: top,\r\n                    height: 0,\r\n                    width: 0\r\n                };\r\n                this.showAnchorRect(rect, false, true);\r\n            },\r\n            _show: function () {\r\n                if (this._hidden) {\r\n                    var box = this.getDom();\r\n                    box.style.display = '';\r\n                    this._hidden = false;\r\n                    //                if (box.setActive) {\r\n                    //                    box.setActive();\r\n                    //                }\r\n                    this.fireEvent('show');\r\n                }\r\n            },\r\n            isHidden: function () {\r\n                return this._hidden;\r\n            },\r\n            show: function () {\r\n                this._doAutoRender();\r\n                this._show();\r\n            },\r\n            hide: function (notNofity) {\r\n                if (!this._hidden && this.getDom()) {\r\n                    this.getDom().style.display = 'none';\r\n                    this._hidden = true;\r\n                    if (!notNofity) {\r\n                        this.fireEvent('hide');\r\n                    }\r\n                }\r\n            },\r\n            queryAutoHide: function (el) {\r\n                return !el || !uiUtils.contains(this.getDom(), el);\r\n            }\r\n        };\r\n        utils.inherits(Popup, UIBase);\r\n\r\n        domUtils.on(document, 'mousedown', function (evt) {\r\n            var el = evt.target || evt.srcElement;\r\n            closeAllPopup(evt, el);\r\n        });\r\n        domUtils.on(window, 'scroll', function (evt, el) {\r\n            closeAllPopup(evt, el);\r\n        });\r\n\r\n    })();\r\n\r\n\r\n    // ui/colorpicker.js\r\n    ///import core\r\n    ///import uicore\r\n    (function () {\r\n        var utils = baidu.editor.utils,\r\n            UIBase = baidu.editor.ui.UIBase,\r\n            ColorPicker = baidu.editor.ui.ColorPicker = function (options) {\r\n                this.initOptions(options);\r\n                this.noColorText = this.noColorText || this.editor.getLang(\"clearColor\");\r\n                this.initUIBase();\r\n            };\r\n\r\n        ColorPicker.prototype = {\r\n            getHtmlTpl: function () {\r\n                return genColorPicker(this.noColorText, this.editor);\r\n            },\r\n            _onTableClick: function (evt) {\r\n                var tgt = evt.target || evt.srcElement;\r\n                var color = tgt.getAttribute('data-color');\r\n                if (color) {\r\n                    this.fireEvent('pickcolor', color);\r\n                }\r\n            },\r\n            _onTableOver: function (evt) {\r\n                var tgt = evt.target || evt.srcElement;\r\n                var color = tgt.getAttribute('data-color');\r\n                if (color) {\r\n                    this.getDom('preview').style.backgroundColor = color;\r\n                }\r\n            },\r\n            _onTableOut: function () {\r\n                this.getDom('preview').style.backgroundColor = '';\r\n            },\r\n            _onPickNoColor: function () {\r\n                this.fireEvent('picknocolor');\r\n            }\r\n        };\r\n        utils.inherits(ColorPicker, UIBase);\r\n\r\n        var COLORS = (\r\n            'ffffff,000000,eeece1,1f497d,4f81bd,c0504d,9bbb59,8064a2,4bacc6,f79646,' +\r\n            'f2f2f2,7f7f7f,ddd9c3,c6d9f0,dbe5f1,f2dcdb,ebf1dd,e5e0ec,dbeef3,fdeada,' +\r\n            'd8d8d8,595959,c4bd97,8db3e2,b8cce4,e5b9b7,d7e3bc,ccc1d9,b7dde8,fbd5b5,' +\r\n            'bfbfbf,3f3f3f,938953,548dd4,95b3d7,d99694,c3d69b,b2a2c7,92cddc,fac08f,' +\r\n            'a5a5a5,262626,494429,17365d,366092,953734,76923c,5f497a,31859b,e36c09,' +\r\n            '7f7f7f,0c0c0c,1d1b10,0f243e,244061,632423,4f6128,3f3151,205867,974806,' +\r\n            'c00000,ff0000,ffc000,ffff00,92d050,00b050,00b0f0,0070c0,002060,7030a0,').split(',');\r\n\r\n        function genColorPicker(noColorText, editor) {\r\n            var html = '<div id=\"##\" class=\"edui-colorpicker %%\">' +\r\n                '<div class=\"edui-colorpicker-topbar edui-clearfix\">' +\r\n                '<div unselectable=\"on\" id=\"##_preview\" class=\"edui-colorpicker-preview\"></div>' +\r\n                '<div unselectable=\"on\" class=\"edui-colorpicker-nocolor\" onclick=\"$$._onPickNoColor(event, this);\">' + noColorText + '</div>' +\r\n                '</div>' +\r\n                '<table  class=\"edui-box\" style=\"border-collapse: collapse;\" onmouseover=\"$$._onTableOver(event, this);\" onmouseout=\"$$._onTableOut(event, this);\" onclick=\"return $$._onTableClick(event, this);\" cellspacing=\"0\" cellpadding=\"0\">' +\r\n                '<tr style=\"border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;padding-top: 2px\"><td colspan=\"10\">' + editor.getLang(\"themeColor\") + '</td> </tr>' +\r\n                '<tr class=\"edui-colorpicker-tablefirstrow\" >';\r\n            for (var i = 0; i < COLORS.length; i++) {\r\n                if (i && i % 10 === 0) {\r\n                    html += '</tr>' + (i == 60 ? '<tr style=\"border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;\"><td colspan=\"10\">' + editor.getLang(\"standardColor\") + '</td></tr>' : '') + '<tr' + (i == 60 ? ' class=\"edui-colorpicker-tablefirstrow\"' : '') + '>';\r\n                }\r\n                html += i < 70 ? '<td style=\"padding: 0 2px;\"><a hidefocus title=\"' + COLORS[i] + '\" onclick=\"return false;\" href=\"javascript:\" unselectable=\"on\" class=\"edui-box edui-colorpicker-colorcell\"' +\r\n                    ' data-color=\"#' + COLORS[i] + '\"' +\r\n                    ' style=\"background-color:#' + COLORS[i] + ';border:solid #ccc;' +\r\n                    (i < 10 || i >= 60 ? 'border-width:1px;' :\r\n                        i >= 10 && i < 20 ? 'border-width:1px 1px 0 1px;' :\r\n\r\n                            'border-width:0 1px 0 1px;') +\r\n                    '\"' +\r\n                    '></a></td>' : '';\r\n            }\r\n            html += '</tr></table></div>';\r\n            return html;\r\n        }\r\n    })();\r\n\r\n\r\n    // ui/tablepicker.js\r\n    ///import core\r\n    ///import uicore\r\n    (function () {\r\n        var utils = baidu.editor.utils,\r\n            uiUtils = baidu.editor.ui.uiUtils,\r\n            UIBase = baidu.editor.ui.UIBase;\r\n\r\n        var TablePicker = baidu.editor.ui.TablePicker = function (options) {\r\n            this.initOptions(options);\r\n            this.initTablePicker();\r\n        };\r\n        TablePicker.prototype = {\r\n            defaultNumRows: 10,\r\n            defaultNumCols: 10,\r\n            maxNumRows: 20,\r\n            maxNumCols: 20,\r\n            numRows: 10,\r\n            numCols: 10,\r\n            lengthOfCellSide: 22,\r\n            initTablePicker: function () {\r\n                this.initUIBase();\r\n            },\r\n            getHtmlTpl: function () {\r\n                var me = this;\r\n                return '<div id=\"##\" class=\"edui-tablepicker %%\">' +\r\n                    '<div class=\"edui-tablepicker-body\">' +\r\n                    '<div class=\"edui-infoarea\">' +\r\n                    '<span id=\"##_label\" class=\"edui-label\"></span>' +\r\n                    '</div>' +\r\n                    '<div class=\"edui-pickarea\"' +\r\n                    ' onmousemove=\"$$._onMouseMove(event, this);\"' +\r\n                    ' onmouseover=\"$$._onMouseOver(event, this);\"' +\r\n                    ' onmouseout=\"$$._onMouseOut(event, this);\"' +\r\n                    ' onclick=\"$$._onClick(event, this);\"' +\r\n                    '>' +\r\n                    '<div id=\"##_overlay\" class=\"edui-overlay\"></div>' +\r\n                    '</div>' +\r\n                    '</div>' +\r\n                    '</div>';\r\n            },\r\n            _UIBase_render: UIBase.prototype.render,\r\n            render: function (holder) {\r\n                this._UIBase_render(holder);\r\n                this.getDom('label').innerHTML = '0' + this.editor.getLang(\"t_row\") + ' x 0' + this.editor.getLang(\"t_col\");\r\n            },\r\n            _track: function (numCols, numRows) {\r\n                var style = this.getDom('overlay').style;\r\n                var sideLen = this.lengthOfCellSide;\r\n                style.width = numCols * sideLen + 'px';\r\n                style.height = numRows * sideLen + 'px';\r\n                var label = this.getDom('label');\r\n                label.innerHTML = numCols + this.editor.getLang(\"t_col\") + ' x ' + numRows + this.editor.getLang(\"t_row\");\r\n                this.numCols = numCols;\r\n                this.numRows = numRows;\r\n            },\r\n            _onMouseOver: function (evt, el) {\r\n                var rel = evt.relatedTarget || evt.fromElement;\r\n                if (!uiUtils.contains(el, rel) && el !== rel) {\r\n                    this.getDom('label').innerHTML = '0' + this.editor.getLang(\"t_col\") + ' x 0' + this.editor.getLang(\"t_row\");\r\n                    this.getDom('overlay').style.visibility = '';\r\n                }\r\n            },\r\n            _onMouseOut: function (evt, el) {\r\n                var rel = evt.relatedTarget || evt.toElement;\r\n                if (!uiUtils.contains(el, rel) && el !== rel) {\r\n                    this.getDom('label').innerHTML = '0' + this.editor.getLang(\"t_col\") + ' x 0' + this.editor.getLang(\"t_row\");\r\n                    this.getDom('overlay').style.visibility = 'hidden';\r\n                }\r\n            },\r\n            _onMouseMove: function (evt, el) {\r\n                var style = this.getDom('overlay').style;\r\n                var offset = uiUtils.getEventOffset(evt);\r\n                var sideLen = this.lengthOfCellSide;\r\n                var numCols = Math.ceil(offset.left / sideLen);\r\n                var numRows = Math.ceil(offset.top / sideLen);\r\n                this._track(numCols, numRows);\r\n            },\r\n            _onClick: function () {\r\n                this.fireEvent('picktable', this.numCols, this.numRows);\r\n            }\r\n        };\r\n        utils.inherits(TablePicker, UIBase);\r\n    })();\r\n\r\n\r\n    // ui/stateful.js\r\n    (function () {\r\n        var browser = baidu.editor.browser,\r\n            domUtils = baidu.editor.dom.domUtils,\r\n            uiUtils = baidu.editor.ui.uiUtils;\r\n\r\n        var TPL_STATEFUL = 'onmousedown=\"$$.Stateful_onMouseDown(event, this);\"' +\r\n            ' onmouseup=\"$$.Stateful_onMouseUp(event, this);\"' +\r\n            (browser.ie ? (\r\n                ' onmouseenter=\"$$.Stateful_onMouseEnter(event, this);\"' +\r\n                ' onmouseleave=\"$$.Stateful_onMouseLeave(event, this);\"')\r\n                : (\r\n                    ' onmouseover=\"$$.Stateful_onMouseOver(event, this);\"' +\r\n                    ' onmouseout=\"$$.Stateful_onMouseOut(event, this);\"'));\r\n\r\n        baidu.editor.ui.Stateful = {\r\n            alwalysHoverable: false,\r\n            target: null,//目标元素和this指向dom不一样\r\n            Stateful_init: function () {\r\n                this._Stateful_dGetHtmlTpl = this.getHtmlTpl;\r\n                this.getHtmlTpl = this.Stateful_getHtmlTpl;\r\n            },\r\n            Stateful_getHtmlTpl: function () {\r\n                var tpl = this._Stateful_dGetHtmlTpl();\r\n                // 使用function避免$转义\r\n                return tpl.replace(/stateful/g, function () { return TPL_STATEFUL; });\r\n            },\r\n            Stateful_onMouseEnter: function (evt, el) {\r\n                this.target = el;\r\n                if (!this.isDisabled() || this.alwalysHoverable) {\r\n                    this.addState('hover');\r\n                    this.fireEvent('over');\r\n                }\r\n            },\r\n            Stateful_onMouseLeave: function (evt, el) {\r\n                if (!this.isDisabled() || this.alwalysHoverable) {\r\n                    this.removeState('hover');\r\n                    this.removeState('active');\r\n                    this.fireEvent('out');\r\n                }\r\n            },\r\n            Stateful_onMouseOver: function (evt, el) {\r\n                var rel = evt.relatedTarget;\r\n                if (!uiUtils.contains(el, rel) && el !== rel) {\r\n                    this.Stateful_onMouseEnter(evt, el);\r\n                }\r\n            },\r\n            Stateful_onMouseOut: function (evt, el) {\r\n                var rel = evt.relatedTarget;\r\n                if (!uiUtils.contains(el, rel) && el !== rel) {\r\n                    this.Stateful_onMouseLeave(evt, el);\r\n                }\r\n            },\r\n            Stateful_onMouseDown: function (evt, el) {\r\n                if (!this.isDisabled()) {\r\n                    this.addState('active');\r\n                }\r\n            },\r\n            Stateful_onMouseUp: function (evt, el) {\r\n                if (!this.isDisabled()) {\r\n                    this.removeState('active');\r\n                }\r\n            },\r\n            Stateful_postRender: function () {\r\n                if (this.disabled && !this.hasState('disabled')) {\r\n                    this.addState('disabled');\r\n                }\r\n            },\r\n            hasState: function (state) {\r\n                return domUtils.hasClass(this.getStateDom(), 'edui-state-' + state);\r\n            },\r\n            addState: function (state) {\r\n                if (!this.hasState(state)) {\r\n                    this.getStateDom().className += ' edui-state-' + state;\r\n                }\r\n            },\r\n            removeState: function (state) {\r\n                if (this.hasState(state)) {\r\n                    domUtils.removeClasses(this.getStateDom(), ['edui-state-' + state]);\r\n                }\r\n            },\r\n            getStateDom: function () {\r\n                return this.getDom('state');\r\n            },\r\n            isChecked: function () {\r\n                return this.hasState('checked');\r\n            },\r\n            setChecked: function (checked) {\r\n                if (!this.isDisabled() && checked) {\r\n                    this.addState('checked');\r\n                } else {\r\n                    this.removeState('checked');\r\n                }\r\n            },\r\n            isDisabled: function () {\r\n                return this.hasState('disabled');\r\n            },\r\n            setDisabled: function (disabled) {\r\n                if (disabled) {\r\n                    this.removeState('hover');\r\n                    this.removeState('checked');\r\n                    this.removeState('active');\r\n                    this.addState('disabled');\r\n                } else {\r\n                    this.removeState('disabled');\r\n                }\r\n            }\r\n        };\r\n    })();\r\n\r\n\r\n    // ui/button.js\r\n    ///import core\r\n    ///import uicore\r\n    ///import ui/stateful.js\r\n    (function () {\r\n        var utils = baidu.editor.utils,\r\n            UIBase = baidu.editor.ui.UIBase,\r\n            Stateful = baidu.editor.ui.Stateful,\r\n            Button = baidu.editor.ui.Button = function (options) {\r\n                if (options.name) {\r\n                    var btnName = options.name;\r\n                    var cssRules = options.cssRules;\r\n                    if (!options.className) {\r\n                        options.className = 'edui-for-' + btnName;\r\n                    }\r\n                    options.cssRules = '.edui-default  .edui-for-' + btnName + ' .edui-icon {' + cssRules + '}'\r\n                }\r\n                this.initOptions(options);\r\n                this.initButton();\r\n            };\r\n        Button.prototype = {\r\n            uiName: 'button',\r\n            label: '',\r\n            title: '',\r\n            showIcon: true,\r\n            showText: true,\r\n            cssRules: '',\r\n            initButton: function () {\r\n                this.initUIBase();\r\n                this.Stateful_init();\r\n                if (this.cssRules) {\r\n                    utils.cssRule('edui-customize-' + this.name + '-style', this.cssRules);\r\n                }\r\n            },\r\n            getHtmlTpl: function () {\r\n                return '<div id=\"##\" class=\"edui-box %%\">' +\r\n                    '<div id=\"##_state\" stateful>' +\r\n                    '<div class=\"%%-wrap\"><div id=\"##_body\" unselectable=\"on\" ' + (this.title ? 'title=\"' + this.title + '\"' : '') +\r\n                    ' class=\"%%-body\" onmousedown=\"return $$._onMouseDown(event, this);\" onclick=\"return $$._onClick(event, this);\">' +\r\n                    (this.showIcon ? '<div class=\"edui-box edui-icon\"></div>' : '') +\r\n                    (this.showText ? '<div class=\"edui-box edui-label\">' + this.label + '</div>' : '') +\r\n                    '</div>' +\r\n                    '</div>' +\r\n                    '</div></div>';\r\n            },\r\n            postRender: function () {\r\n                this.Stateful_postRender();\r\n                this.setDisabled(this.disabled)\r\n            },\r\n            _onMouseDown: function (e) {\r\n                var target = e.target || e.srcElement,\r\n                    tagName = target && target.tagName && target.tagName.toLowerCase();\r\n                if (tagName == 'input' || tagName == 'object' || tagName == 'object') {\r\n                    return false;\r\n                }\r\n            },\r\n            _onClick: function () {\r\n                if (!this.isDisabled()) {\r\n                    this.fireEvent('click');\r\n                }\r\n            },\r\n            setTitle: function (text) {\r\n                var label = this.getDom('label');\r\n                label.innerHTML = text;\r\n            }\r\n        };\r\n        utils.inherits(Button, UIBase);\r\n        utils.extend(Button.prototype, Stateful);\r\n\r\n    })();\r\n\r\n\r\n    // ui/splitbutton.js\r\n    ///import core\r\n    ///import uicore\r\n    ///import ui/stateful.js\r\n    (function () {\r\n        var utils = baidu.editor.utils,\r\n            uiUtils = baidu.editor.ui.uiUtils,\r\n            domUtils = baidu.editor.dom.domUtils,\r\n            UIBase = baidu.editor.ui.UIBase,\r\n            Stateful = baidu.editor.ui.Stateful,\r\n            SplitButton = baidu.editor.ui.SplitButton = function (options) {\r\n                this.initOptions(options);\r\n                this.initSplitButton();\r\n            };\r\n        SplitButton.prototype = {\r\n            popup: null,\r\n            uiName: 'splitbutton',\r\n            title: '',\r\n            initSplitButton: function () {\r\n                this.initUIBase();\r\n                this.Stateful_init();\r\n                var me = this;\r\n                if (this.popup != null) {\r\n                    var popup = this.popup;\r\n                    this.popup = null;\r\n                    this.setPopup(popup);\r\n                }\r\n            },\r\n            _UIBase_postRender: UIBase.prototype.postRender,\r\n            postRender: function () {\r\n                this.Stateful_postRender();\r\n                this._UIBase_postRender();\r\n            },\r\n            setPopup: function (popup) {\r\n                if (this.popup === popup) return;\r\n                if (this.popup != null) {\r\n                    this.popup.dispose();\r\n                }\r\n                popup.addListener('show', utils.bind(this._onPopupShow, this));\r\n                popup.addListener('hide', utils.bind(this._onPopupHide, this));\r\n                popup.addListener('postrender', utils.bind(function () {\r\n                    popup.getDom('body').appendChild(\r\n                        uiUtils.createElementByHtml('<div id=\"' +\r\n                            this.popup.id + '_bordereraser\" class=\"edui-bordereraser edui-background\" style=\"width:' +\r\n                            (uiUtils.getClientRect(this.getDom()).width + 20) + 'px\"></div>')\r\n                    );\r\n                    popup.getDom().className += ' ' + this.className;\r\n                }, this));\r\n                this.popup = popup;\r\n            },\r\n            _onPopupShow: function () {\r\n                this.addState('opened');\r\n            },\r\n            _onPopupHide: function () {\r\n                this.removeState('opened');\r\n            },\r\n            getHtmlTpl: function () {\r\n                return '<div id=\"##\" class=\"edui-box %%\">' +\r\n                    '<div ' + (this.title ? 'title=\"' + this.title + '\"' : '') + ' id=\"##_state\" stateful><div class=\"%%-body\">' +\r\n                    '<div id=\"##_button_body\" class=\"edui-box edui-button-body\" onclick=\"$$._onButtonClick(event, this);\">' +\r\n                    '<div class=\"edui-box edui-icon\"></div>' +\r\n                    '</div>' +\r\n                    '<div class=\"edui-box edui-splitborder\"></div>' +\r\n                    '<div class=\"edui-box edui-arrow\" onclick=\"$$._onArrowClick();\"></div>' +\r\n                    '</div></div></div>';\r\n            },\r\n            showPopup: function () {\r\n                // 当popup往上弹出的时候，做特殊处理\r\n                var rect = uiUtils.getClientRect(this.getDom());\r\n                rect.top -= this.popup.SHADOW_RADIUS;\r\n                rect.height += this.popup.SHADOW_RADIUS;\r\n                this.popup.showAnchorRect(rect);\r\n            },\r\n            _onArrowClick: function (event, el) {\r\n                if (!this.isDisabled()) {\r\n                    this.showPopup();\r\n                }\r\n            },\r\n            _onButtonClick: function () {\r\n                if (!this.isDisabled()) {\r\n                    this.fireEvent('buttonclick');\r\n                }\r\n            }\r\n        };\r\n        utils.inherits(SplitButton, UIBase);\r\n        utils.extend(SplitButton.prototype, Stateful, true);\r\n\r\n    })();\r\n\r\n\r\n    // ui/colorbutton.js\r\n    ///import core\r\n    ///import uicore\r\n    ///import ui/colorpicker.js\r\n    ///import ui/popup.js\r\n    ///import ui/splitbutton.js\r\n    (function () {\r\n        var utils = baidu.editor.utils,\r\n            uiUtils = baidu.editor.ui.uiUtils,\r\n            ColorPicker = baidu.editor.ui.ColorPicker,\r\n            Popup = baidu.editor.ui.Popup,\r\n            SplitButton = baidu.editor.ui.SplitButton,\r\n            ColorButton = baidu.editor.ui.ColorButton = function (options) {\r\n                this.initOptions(options);\r\n                this.initColorButton();\r\n            };\r\n        ColorButton.prototype = {\r\n            initColorButton: function () {\r\n                var me = this;\r\n                this.popup = new Popup({\r\n                    content: new ColorPicker({\r\n                        noColorText: me.editor.getLang(\"clearColor\"),\r\n                        editor: me.editor,\r\n                        onpickcolor: function (t, color) {\r\n                            me._onPickColor(color);\r\n                        },\r\n                        onpicknocolor: function (t, color) {\r\n                            me._onPickNoColor(color);\r\n                        }\r\n                    }),\r\n                    editor: me.editor\r\n                });\r\n                this.initSplitButton();\r\n            },\r\n            _SplitButton_postRender: SplitButton.prototype.postRender,\r\n            postRender: function () {\r\n                this._SplitButton_postRender();\r\n                this.getDom('button_body').appendChild(\r\n                    uiUtils.createElementByHtml('<div id=\"' + this.id + '_colorlump\" class=\"edui-colorlump\"></div>')\r\n                );\r\n                this.getDom().className += ' edui-colorbutton';\r\n            },\r\n            setColor: function (color) {\r\n                this.getDom('colorlump').style.backgroundColor = color;\r\n                this.color = color;\r\n            },\r\n            _onPickColor: function (color) {\r\n                if (this.fireEvent('pickcolor', color) !== false) {\r\n                    this.setColor(color);\r\n                    this.popup.hide();\r\n                }\r\n            },\r\n            _onPickNoColor: function (color) {\r\n                if (this.fireEvent('picknocolor') !== false) {\r\n                    this.popup.hide();\r\n                }\r\n            }\r\n        };\r\n        utils.inherits(ColorButton, SplitButton);\r\n\r\n    })();\r\n\r\n\r\n    // ui/tablebutton.js\r\n    ///import core\r\n    ///import uicore\r\n    ///import ui/popup.js\r\n    ///import ui/tablepicker.js\r\n    ///import ui/splitbutton.js\r\n    (function () {\r\n        var utils = baidu.editor.utils,\r\n            Popup = baidu.editor.ui.Popup,\r\n            TablePicker = baidu.editor.ui.TablePicker,\r\n            SplitButton = baidu.editor.ui.SplitButton,\r\n            TableButton = baidu.editor.ui.TableButton = function (options) {\r\n                this.initOptions(options);\r\n                this.initTableButton();\r\n            };\r\n        TableButton.prototype = {\r\n            initTableButton: function () {\r\n                var me = this;\r\n                this.popup = new Popup({\r\n                    content: new TablePicker({\r\n                        editor: me.editor,\r\n                        onpicktable: function (t, numCols, numRows) {\r\n                            me._onPickTable(numCols, numRows);\r\n                        }\r\n                    }),\r\n                    'editor': me.editor\r\n                });\r\n                this.initSplitButton();\r\n            },\r\n            _onPickTable: function (numCols, numRows) {\r\n                if (this.fireEvent('picktable', numCols, numRows) !== false) {\r\n                    this.popup.hide();\r\n                }\r\n            }\r\n        };\r\n        utils.inherits(TableButton, SplitButton);\r\n\r\n    })();\r\n\r\n\r\n    // ui/autotypesetpicker.js\r\n    ///import core\r\n    ///import uicore\r\n    (function () {\r\n        var utils = baidu.editor.utils,\r\n            UIBase = baidu.editor.ui.UIBase;\r\n\r\n        var AutoTypeSetPicker = baidu.editor.ui.AutoTypeSetPicker = function (options) {\r\n            this.initOptions(options);\r\n            this.initAutoTypeSetPicker();\r\n        };\r\n        AutoTypeSetPicker.prototype = {\r\n            initAutoTypeSetPicker: function () {\r\n                this.initUIBase();\r\n            },\r\n            getHtmlTpl: function () {\r\n                var me = this.editor,\r\n                    opt = me.options.autotypeset,\r\n                    lang = me.getLang(\"autoTypeSet\");\r\n\r\n                var textAlignInputName = 'textAlignValue' + me.uid,\r\n                    imageBlockInputName = 'imageBlockLineValue' + me.uid,\r\n                    symbolConverInputName = 'symbolConverValue' + me.uid;\r\n\r\n                return '<div id=\"##\" class=\"edui-autotypesetpicker %%\">' +\r\n                    '<div class=\"edui-autotypesetpicker-body\">' +\r\n                    '<table >' +\r\n                    '<tr><td nowrap><input type=\"checkbox\" name=\"mergeEmptyline\" ' + (opt[\"mergeEmptyline\"] ? \"checked\" : \"\") + '>' + lang.mergeLine + '</td><td colspan=\"2\"><input type=\"checkbox\" name=\"removeEmptyline\" ' + (opt[\"removeEmptyline\"] ? \"checked\" : \"\") + '>' + lang.delLine + '</td></tr>' +\r\n                    '<tr><td nowrap><input type=\"checkbox\" name=\"removeClass\" ' + (opt[\"removeClass\"] ? \"checked\" : \"\") + '>' + lang.removeFormat + '</td><td colspan=\"2\"><input type=\"checkbox\" name=\"indent\" ' + (opt[\"indent\"] ? \"checked\" : \"\") + '>' + lang.indent + '</td></tr>' +\r\n                    '<tr>' +\r\n                    '<td nowrap><input type=\"checkbox\" name=\"textAlign\" ' + (opt[\"textAlign\"] ? \"checked\" : \"\") + '>' + lang.alignment + '</td>' +\r\n                    '<td colspan=\"2\" id=\"' + textAlignInputName + '\">' +\r\n                    '<input type=\"radio\" name=\"' + textAlignInputName + '\" value=\"left\" ' + ((opt[\"textAlign\"] && opt[\"textAlign\"] == \"left\") ? \"checked\" : \"\") + '>' + me.getLang(\"justifyleft\") +\r\n                    '<input type=\"radio\" name=\"' + textAlignInputName + '\" value=\"center\" ' + ((opt[\"textAlign\"] && opt[\"textAlign\"] == \"center\") ? \"checked\" : \"\") + '>' + me.getLang(\"justifycenter\") +\r\n                    '<input type=\"radio\" name=\"' + textAlignInputName + '\" value=\"right\" ' + ((opt[\"textAlign\"] && opt[\"textAlign\"] == \"right\") ? \"checked\" : \"\") + '>' + me.getLang(\"justifyright\") +\r\n                    '</td>' +\r\n                    '</tr>' +\r\n                    '<tr>' +\r\n                    '<td nowrap><input type=\"checkbox\" name=\"imageBlockLine\" ' + (opt[\"imageBlockLine\"] ? \"checked\" : \"\") + '>' + lang.imageFloat + '</td>' +\r\n                    '<td nowrap id=\"' + imageBlockInputName + '\">' +\r\n                    '<input type=\"radio\" name=\"' + imageBlockInputName + '\" value=\"none\" ' + ((opt[\"imageBlockLine\"] && opt[\"imageBlockLine\"] == \"none\") ? \"checked\" : \"\") + '>' + me.getLang(\"default\") +\r\n                    '<input type=\"radio\" name=\"' + imageBlockInputName + '\" value=\"left\" ' + ((opt[\"imageBlockLine\"] && opt[\"imageBlockLine\"] == \"left\") ? \"checked\" : \"\") + '>' + me.getLang(\"justifyleft\") +\r\n                    '<input type=\"radio\" name=\"' + imageBlockInputName + '\" value=\"center\" ' + ((opt[\"imageBlockLine\"] && opt[\"imageBlockLine\"] == \"center\") ? \"checked\" : \"\") + '>' + me.getLang(\"justifycenter\") +\r\n                    '<input type=\"radio\" name=\"' + imageBlockInputName + '\" value=\"right\" ' + ((opt[\"imageBlockLine\"] && opt[\"imageBlockLine\"] == \"right\") ? \"checked\" : \"\") + '>' + me.getLang(\"justifyright\") +\r\n                    '</td>' +\r\n                    '</tr>' +\r\n                    '<tr><td nowrap><input type=\"checkbox\" name=\"clearFontSize\" ' + (opt[\"clearFontSize\"] ? \"checked\" : \"\") + '>' + lang.removeFontsize + '</td><td colspan=\"2\"><input type=\"checkbox\" name=\"clearFontFamily\" ' + (opt[\"clearFontFamily\"] ? \"checked\" : \"\") + '>' + lang.removeFontFamily + '</td></tr>' +\r\n                    '<tr><td nowrap colspan=\"3\"><input type=\"checkbox\" name=\"removeEmptyNode\" ' + (opt[\"removeEmptyNode\"] ? \"checked\" : \"\") + '>' + lang.removeHtml + '</td></tr>' +\r\n                    '<tr><td nowrap colspan=\"3\"><input type=\"checkbox\" name=\"pasteFilter\" ' + (opt[\"pasteFilter\"] ? \"checked\" : \"\") + '>' + lang.pasteFilter + '</td></tr>' +\r\n                    '<tr>' +\r\n                    '<td nowrap><input type=\"checkbox\" name=\"symbolConver\" ' + (opt[\"bdc2sb\"] || opt[\"tobdc\"] ? \"checked\" : \"\") + '>' + lang.symbol + '</td>' +\r\n                    '<td id=\"' + symbolConverInputName + '\">' +\r\n                    '<input type=\"radio\" name=\"bdc\" value=\"bdc2sb\" ' + (opt[\"bdc2sb\"] ? \"checked\" : \"\") + '>' + lang.bdc2sb +\r\n                    '<input type=\"radio\" name=\"bdc\" value=\"tobdc\" ' + (opt[\"tobdc\"] ? \"checked\" : \"\") + '>' + lang.tobdc + '' +\r\n                    '</td>' +\r\n                    '<td nowrap align=\"right\"><button >' + lang.run + '</button></td>' +\r\n                    '</tr>' +\r\n                    '</table>' +\r\n                    '</div>' +\r\n                    '</div>';\r\n\r\n\r\n            },\r\n            _UIBase_render: UIBase.prototype.render\r\n        };\r\n        utils.inherits(AutoTypeSetPicker, UIBase);\r\n    })();\r\n\r\n\r\n    // ui/autotypesetbutton.js\r\n    ///import core\r\n    ///import uicore\r\n    ///import ui/popup.js\r\n    ///import ui/autotypesetpicker.js\r\n    ///import ui/splitbutton.js\r\n    (function () {\r\n        var utils = baidu.editor.utils,\r\n            Popup = baidu.editor.ui.Popup,\r\n            AutoTypeSetPicker = baidu.editor.ui.AutoTypeSetPicker,\r\n            SplitButton = baidu.editor.ui.SplitButton,\r\n            AutoTypeSetButton = baidu.editor.ui.AutoTypeSetButton = function (options) {\r\n                this.initOptions(options);\r\n                this.initAutoTypeSetButton();\r\n            };\r\n        function getPara(me) {\r\n\r\n            var opt = {},\r\n                cont = me.getDom(),\r\n                editorId = me.editor.uid,\r\n                inputType = null,\r\n                attrName = null,\r\n                ipts = domUtils.getElementsByTagName(cont, \"input\");\r\n            for (var i = ipts.length - 1, ipt; ipt = ipts[i--];) {\r\n                inputType = ipt.getAttribute(\"type\");\r\n                if (inputType == \"checkbox\") {\r\n                    attrName = ipt.getAttribute(\"name\");\r\n                    opt[attrName] && delete opt[attrName];\r\n                    if (ipt.checked) {\r\n                        var attrValue = document.getElementById(attrName + \"Value\" + editorId);\r\n                        if (attrValue) {\r\n                            if (/input/ig.test(attrValue.tagName)) {\r\n                                opt[attrName] = attrValue.value;\r\n                            } else {\r\n                                var iptChilds = attrValue.getElementsByTagName(\"input\");\r\n                                for (var j = iptChilds.length - 1, iptchild; iptchild = iptChilds[j--];) {\r\n                                    if (iptchild.checked) {\r\n                                        opt[attrName] = iptchild.value;\r\n                                        break;\r\n                                    }\r\n                                }\r\n                            }\r\n                        } else {\r\n                            opt[attrName] = true;\r\n                        }\r\n                    } else {\r\n                        opt[attrName] = false;\r\n                    }\r\n                } else {\r\n                    opt[ipt.getAttribute(\"value\")] = ipt.checked;\r\n                }\r\n\r\n            }\r\n\r\n            var selects = domUtils.getElementsByTagName(cont, \"select\");\r\n            for (var i = 0, si; si = selects[i++];) {\r\n                var attr = si.getAttribute('name');\r\n                opt[attr] = opt[attr] ? si.value : '';\r\n            }\r\n\r\n            utils.extend(me.editor.options.autotypeset, opt);\r\n\r\n            me.editor.setPreferences('autotypeset', opt);\r\n        }\r\n\r\n        AutoTypeSetButton.prototype = {\r\n            initAutoTypeSetButton: function () {\r\n\r\n                var me = this;\r\n                this.popup = new Popup({\r\n                    //传入配置参数\r\n                    content: new AutoTypeSetPicker({ editor: me.editor }),\r\n                    'editor': me.editor,\r\n                    hide: function () {\r\n                        if (!this._hidden && this.getDom()) {\r\n                            getPara(this);\r\n                            this.getDom().style.display = 'none';\r\n                            this._hidden = true;\r\n                            this.fireEvent('hide');\r\n                        }\r\n                    }\r\n                });\r\n                var flag = 0;\r\n                this.popup.addListener('postRenderAfter', function () {\r\n                    var popupUI = this;\r\n                    if (flag) return;\r\n                    var cont = this.getDom(),\r\n                        btn = cont.getElementsByTagName('button')[0];\r\n\r\n                    btn.onclick = function () {\r\n                        getPara(popupUI);\r\n                        me.editor.execCommand('autotypeset');\r\n                        popupUI.hide()\r\n                    };\r\n\r\n                    domUtils.on(cont, 'click', function (e) {\r\n                        var target = e.target || e.srcElement,\r\n                            editorId = me.editor.uid;\r\n                        if (target && target.tagName == 'INPUT') {\r\n\r\n                            // 点击图片浮动的checkbox,去除对应的radio\r\n                            if (target.name == 'imageBlockLine' || target.name == 'textAlign' || target.name == 'symbolConver') {\r\n                                var checked = target.checked,\r\n                                    radioTd = document.getElementById(target.name + 'Value' + editorId),\r\n                                    radios = radioTd.getElementsByTagName('input'),\r\n                                    defalutSelect = {\r\n                                        'imageBlockLine': 'none',\r\n                                        'textAlign': 'left',\r\n                                        'symbolConver': 'tobdc'\r\n                                    };\r\n\r\n                                for (var i = 0; i < radios.length; i++) {\r\n                                    if (checked) {\r\n                                        if (radios[i].value == defalutSelect[target.name]) {\r\n                                            radios[i].checked = 'checked';\r\n                                        }\r\n                                    } else {\r\n                                        radios[i].checked = false;\r\n                                    }\r\n                                }\r\n                            }\r\n                            // 点击radio,选中对应的checkbox\r\n                            if (target.name == ('imageBlockLineValue' + editorId) || target.name == ('textAlignValue' + editorId) || target.name == 'bdc') {\r\n                                var checkboxs = target.parentNode.previousSibling.getElementsByTagName('input');\r\n                                checkboxs && (checkboxs[0].checked = true);\r\n                            }\r\n\r\n                            getPara(popupUI);\r\n                        }\r\n                    });\r\n\r\n                    flag = 1;\r\n                });\r\n                this.initSplitButton();\r\n            }\r\n        };\r\n        utils.inherits(AutoTypeSetButton, SplitButton);\r\n\r\n    })();\r\n\r\n\r\n    // ui/cellalignpicker.js\r\n    ///import core\r\n    ///import uicore\r\n    (function () {\r\n        var utils = baidu.editor.utils,\r\n            Popup = baidu.editor.ui.Popup,\r\n            Stateful = baidu.editor.ui.Stateful,\r\n            UIBase = baidu.editor.ui.UIBase;\r\n\r\n        /**\r\n         * 该参数将新增一个参数： selected， 参数类型为一个Object， 形如{ 'align': 'center', 'valign': 'top' }， 表示单元格的初始\r\n         * 对齐状态为： 竖直居上，水平居中; 其中 align的取值为：'center', 'left', 'right'; valign的取值为: 'top', 'middle', 'bottom'\r\n         * @update 2013/4/2 hancong03@baidu.com\r\n         */\r\n        var CellAlignPicker = baidu.editor.ui.CellAlignPicker = function (options) {\r\n            this.initOptions(options);\r\n            this.initSelected();\r\n            this.initCellAlignPicker();\r\n        };\r\n        CellAlignPicker.prototype = {\r\n            //初始化选中状态， 该方法将根据传递进来的参数获取到应该选中的对齐方式图标的索引\r\n            initSelected: function () {\r\n\r\n                var status = {\r\n\r\n                    valign: {\r\n                        top: 0,\r\n                        middle: 1,\r\n                        bottom: 2\r\n                    },\r\n                    align: {\r\n                        left: 0,\r\n                        center: 1,\r\n                        right: 2\r\n                    },\r\n                    count: 3\r\n\r\n                },\r\n                    result = -1;\r\n\r\n                if (this.selected) {\r\n                    this.selectedIndex = status.valign[this.selected.valign] * status.count + status.align[this.selected.align];\r\n                }\r\n\r\n            },\r\n            initCellAlignPicker: function () {\r\n                this.initUIBase();\r\n                this.Stateful_init();\r\n            },\r\n            getHtmlTpl: function () {\r\n\r\n                var alignType = ['left', 'center', 'right'],\r\n                    COUNT = 9,\r\n                    tempClassName = null,\r\n                    tempIndex = -1,\r\n                    tmpl = [];\r\n\r\n\r\n                for (var i = 0; i < COUNT; i++) {\r\n\r\n                    tempClassName = this.selectedIndex === i ? ' class=\"edui-cellalign-selected\" ' : '';\r\n                    tempIndex = i % 3;\r\n\r\n                    tempIndex === 0 && tmpl.push('<tr>');\r\n\r\n                    tmpl.push('<td index=\"' + i + '\" ' + tempClassName + ' stateful><div class=\"edui-icon edui-' + alignType[tempIndex] + '\"></div></td>');\r\n\r\n                    tempIndex === 2 && tmpl.push('</tr>');\r\n\r\n                }\r\n\r\n                return '<div id=\"##\" class=\"edui-cellalignpicker %%\">' +\r\n                    '<div class=\"edui-cellalignpicker-body\">' +\r\n                    '<table onclick=\"$$._onClick(event);\">' +\r\n                    tmpl.join('') +\r\n                    '</table>' +\r\n                    '</div>' +\r\n                    '</div>';\r\n            },\r\n            getStateDom: function () {\r\n                return this.target;\r\n            },\r\n            _onClick: function (evt) {\r\n                var target = evt.target || evt.srcElement;\r\n                if (/icon/.test(target.className)) {\r\n                    this.items[target.parentNode.getAttribute(\"index\")].onclick();\r\n                    Popup.postHide(evt);\r\n                }\r\n            },\r\n            _UIBase_render: UIBase.prototype.render\r\n        };\r\n        utils.inherits(CellAlignPicker, UIBase);\r\n        utils.extend(CellAlignPicker.prototype, Stateful, true);\r\n    })();\r\n\r\n\r\n\r\n\r\n\r\n    // ui/pastepicker.js\r\n    ///import core\r\n    ///import uicore\r\n    (function () {\r\n        var utils = baidu.editor.utils,\r\n            Stateful = baidu.editor.ui.Stateful,\r\n            uiUtils = baidu.editor.ui.uiUtils,\r\n            UIBase = baidu.editor.ui.UIBase;\r\n\r\n        var PastePicker = baidu.editor.ui.PastePicker = function (options) {\r\n            this.initOptions(options);\r\n            this.initPastePicker();\r\n        };\r\n        PastePicker.prototype = {\r\n            initPastePicker: function () {\r\n                this.initUIBase();\r\n                this.Stateful_init();\r\n            },\r\n            getHtmlTpl: function () {\r\n                return '<div class=\"edui-pasteicon\" onclick=\"$$._onClick(this)\"></div>' +\r\n                    '<div class=\"edui-pastecontainer\">' +\r\n                    '<div class=\"edui-title\">' + this.editor.getLang(\"pasteOpt\") + '</div>' +\r\n                    '<div class=\"edui-button\">' +\r\n                    '<div title=\"' + this.editor.getLang(\"pasteSourceFormat\") + '\" onclick=\"$$.format(false)\" stateful>' +\r\n                    '<div class=\"edui-richtxticon\"></div></div>' +\r\n                    '<div title=\"' + this.editor.getLang(\"tagFormat\") + '\" onclick=\"$$.format(2)\" stateful>' +\r\n                    '<div class=\"edui-tagicon\"></div></div>' +\r\n                    '<div title=\"' + this.editor.getLang(\"pasteTextFormat\") + '\" onclick=\"$$.format(true)\" stateful>' +\r\n                    '<div class=\"edui-plaintxticon\"></div></div>' +\r\n                    '</div>' +\r\n                    '</div>' +\r\n                    '</div>'\r\n            },\r\n            getStateDom: function () {\r\n                return this.target;\r\n            },\r\n            format: function (param) {\r\n                this.editor.ui._isTransfer = true;\r\n                this.editor.fireEvent('pasteTransfer', param);\r\n            },\r\n            _onClick: function (cur) {\r\n                var node = domUtils.getNextDomNode(cur),\r\n                    screenHt = uiUtils.getViewportRect().height,\r\n                    subPop = uiUtils.getClientRect(node);\r\n\r\n                if ((subPop.top + subPop.height) > screenHt)\r\n                    node.style.top = (-subPop.height - cur.offsetHeight) + \"px\";\r\n                else\r\n                    node.style.top = \"\";\r\n\r\n                if (/hidden/ig.test(domUtils.getComputedStyle(node, \"visibility\"))) {\r\n                    node.style.visibility = \"visible\";\r\n                    domUtils.addClass(cur, \"edui-state-opened\");\r\n                } else {\r\n                    node.style.visibility = \"hidden\";\r\n                    domUtils.removeClasses(cur, \"edui-state-opened\")\r\n                }\r\n            },\r\n            _UIBase_render: UIBase.prototype.render\r\n        };\r\n        utils.inherits(PastePicker, UIBase);\r\n        utils.extend(PastePicker.prototype, Stateful, true);\r\n    })();\r\n\r\n\r\n\r\n\r\n\r\n\r\n    // ui/toolbar.js\r\n    (function () {\r\n        var utils = baidu.editor.utils,\r\n            uiUtils = baidu.editor.ui.uiUtils,\r\n            UIBase = baidu.editor.ui.UIBase,\r\n            Toolbar = baidu.editor.ui.Toolbar = function (options) {\r\n                this.initOptions(options);\r\n                this.initToolbar();\r\n            };\r\n        Toolbar.prototype = {\r\n            items: null,\r\n            initToolbar: function () {\r\n                this.items = this.items || [];\r\n                this.initUIBase();\r\n            },\r\n            add: function (item, index) {\r\n                if (index === undefined) {\r\n                    this.items.push(item);\r\n                } else {\r\n                    this.items.splice(index, 0, item)\r\n                }\r\n\r\n            },\r\n            getHtmlTpl: function () {\r\n                var buff = [];\r\n                for (var i = 0; i < this.items.length; i++) {\r\n                    buff[i] = this.items[i].renderHtml();\r\n                }\r\n                return '<div id=\"##\" class=\"edui-toolbar %%\" onselectstart=\"return false;\" onmousedown=\"return $$._onMouseDown(event, this);\">' +\r\n                    buff.join('') +\r\n                    '</div>'\r\n            },\r\n            postRender: function () {\r\n                var box = this.getDom();\r\n                for (var i = 0; i < this.items.length; i++) {\r\n                    this.items[i].postRender();\r\n                }\r\n                uiUtils.makeUnselectable(box);\r\n            },\r\n            _onMouseDown: function (e) {\r\n                var target = e.target || e.srcElement,\r\n                    tagName = target && target.tagName && target.tagName.toLowerCase();\r\n                if (tagName == 'input' || tagName == 'object' || tagName == 'object') {\r\n                    return false;\r\n                }\r\n            }\r\n        };\r\n        utils.inherits(Toolbar, UIBase);\r\n\r\n    })();\r\n\r\n\r\n    // ui/menu.js\r\n    ///import core\r\n    ///import uicore\r\n    ///import ui\\popup.js\r\n    ///import ui\\stateful.js\r\n    (function () {\r\n        var utils = baidu.editor.utils,\r\n            domUtils = baidu.editor.dom.domUtils,\r\n            uiUtils = baidu.editor.ui.uiUtils,\r\n            UIBase = baidu.editor.ui.UIBase,\r\n            Popup = baidu.editor.ui.Popup,\r\n            Stateful = baidu.editor.ui.Stateful,\r\n            CellAlignPicker = baidu.editor.ui.CellAlignPicker,\r\n\r\n            Menu = baidu.editor.ui.Menu = function (options) {\r\n                this.initOptions(options);\r\n                this.initMenu();\r\n            };\r\n\r\n        var menuSeparator = {\r\n            renderHtml: function () {\r\n                return '<div class=\"edui-menuitem edui-menuseparator\"><div class=\"edui-menuseparator-inner\"></div></div>';\r\n            },\r\n            postRender: function () {\r\n            },\r\n            queryAutoHide: function () {\r\n                return true;\r\n            }\r\n        };\r\n        Menu.prototype = {\r\n            items: null,\r\n            uiName: 'menu',\r\n            initMenu: function () {\r\n                this.items = this.items || [];\r\n                this.initPopup();\r\n                this.initItems();\r\n            },\r\n            initItems: function () {\r\n                for (var i = 0; i < this.items.length; i++) {\r\n                    var item = this.items[i];\r\n                    if (item == '-') {\r\n                        this.items[i] = this.getSeparator();\r\n                    } else if (!(item instanceof MenuItem)) {\r\n                        item.editor = this.editor;\r\n                        item.theme = this.editor.options.theme;\r\n                        this.items[i] = this.createItem(item);\r\n                    }\r\n                }\r\n            },\r\n            getSeparator: function () {\r\n                return menuSeparator;\r\n            },\r\n            createItem: function (item) {\r\n                //新增一个参数menu, 该参数存储了menuItem所对应的menu引用\r\n                item.menu = this;\r\n                return new MenuItem(item);\r\n            },\r\n            _Popup_getContentHtmlTpl: Popup.prototype.getContentHtmlTpl,\r\n            getContentHtmlTpl: function () {\r\n                if (this.items.length == 0) {\r\n                    return this._Popup_getContentHtmlTpl();\r\n                }\r\n                var buff = [];\r\n                for (var i = 0; i < this.items.length; i++) {\r\n                    var item = this.items[i];\r\n                    buff[i] = item.renderHtml();\r\n                }\r\n                return ('<div class=\"%%-body\">' + buff.join('') + '</div>');\r\n            },\r\n            _Popup_postRender: Popup.prototype.postRender,\r\n            postRender: function () {\r\n                var me = this;\r\n                for (var i = 0; i < this.items.length; i++) {\r\n                    var item = this.items[i];\r\n                    item.ownerMenu = this;\r\n                    item.postRender();\r\n                }\r\n                domUtils.on(this.getDom(), 'mouseover', function (evt) {\r\n                    evt = evt || event;\r\n                    var rel = evt.relatedTarget || evt.fromElement;\r\n                    var el = me.getDom();\r\n                    if (!uiUtils.contains(el, rel) && el !== rel) {\r\n                        me.fireEvent('over');\r\n                    }\r\n                });\r\n                this._Popup_postRender();\r\n            },\r\n            queryAutoHide: function (el) {\r\n                if (el) {\r\n                    if (uiUtils.contains(this.getDom(), el)) {\r\n                        return false;\r\n                    }\r\n                    for (var i = 0; i < this.items.length; i++) {\r\n                        var item = this.items[i];\r\n                        if (item.queryAutoHide(el) === false) {\r\n                            return false;\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            clearItems: function () {\r\n                for (var i = 0; i < this.items.length; i++) {\r\n                    var item = this.items[i];\r\n                    clearTimeout(item._showingTimer);\r\n                    clearTimeout(item._closingTimer);\r\n                    if (item.subMenu) {\r\n                        item.subMenu.destroy();\r\n                    }\r\n                }\r\n                this.items = [];\r\n            },\r\n            destroy: function () {\r\n                if (this.getDom()) {\r\n                    domUtils.remove(this.getDom());\r\n                }\r\n                this.clearItems();\r\n            },\r\n            dispose: function () {\r\n                this.destroy();\r\n            }\r\n        };\r\n        utils.inherits(Menu, Popup);\r\n\r\n        /**\r\n         * @update 2013/04/03 hancong03 新增一个参数menu, 该参数存储了menuItem所对应的menu引用\r\n         * @type {Function}\r\n         */\r\n        var MenuItem = baidu.editor.ui.MenuItem = function (options) {\r\n            this.initOptions(options);\r\n            this.initUIBase();\r\n            this.Stateful_init();\r\n            if (this.subMenu && !(this.subMenu instanceof Menu)) {\r\n                if (options.className && options.className.indexOf(\"aligntd\") != -1) {\r\n                    var me = this;\r\n\r\n                    //获取单元格对齐初始状态\r\n                    this.subMenu.selected = this.editor.queryCommandValue('cellalignment');\r\n\r\n                    this.subMenu = new Popup({\r\n                        content: new CellAlignPicker(this.subMenu),\r\n                        parentMenu: me,\r\n                        editor: me.editor,\r\n                        destroy: function () {\r\n                            if (this.getDom()) {\r\n                                domUtils.remove(this.getDom());\r\n                            }\r\n                        }\r\n                    });\r\n                    this.subMenu.addListener(\"postRenderAfter\", function () {\r\n                        domUtils.on(this.getDom(), \"mouseover\", function () {\r\n                            me.addState('opened');\r\n                        });\r\n                    });\r\n                } else {\r\n                    this.subMenu = new Menu(this.subMenu);\r\n                }\r\n            }\r\n        };\r\n        MenuItem.prototype = {\r\n            label: '',\r\n            subMenu: null,\r\n            ownerMenu: null,\r\n            uiName: 'menuitem',\r\n            alwalysHoverable: true,\r\n            getHtmlTpl: function () {\r\n                return '<div id=\"##\" class=\"%%\" stateful onclick=\"$$._onClick(event, this);\">' +\r\n                    '<div class=\"%%-body\">' +\r\n                    this.renderLabelHtml() +\r\n                    '</div>' +\r\n                    '</div>';\r\n            },\r\n            postRender: function () {\r\n                var me = this;\r\n                this.addListener('over', function () {\r\n                    me.ownerMenu.fireEvent('submenuover', me);\r\n                    if (me.subMenu) {\r\n                        me.delayShowSubMenu();\r\n                    }\r\n                });\r\n                if (this.subMenu) {\r\n                    this.getDom().className += ' edui-hassubmenu';\r\n                    this.subMenu.render();\r\n                    this.addListener('out', function () {\r\n                        me.delayHideSubMenu();\r\n                    });\r\n                    this.subMenu.addListener('over', function () {\r\n                        clearTimeout(me._closingTimer);\r\n                        me._closingTimer = null;\r\n                        me.addState('opened');\r\n                    });\r\n                    this.ownerMenu.addListener('hide', function () {\r\n                        me.hideSubMenu();\r\n                    });\r\n                    this.ownerMenu.addListener('submenuover', function (t, subMenu) {\r\n                        if (subMenu !== me) {\r\n                            me.delayHideSubMenu();\r\n                        }\r\n                    });\r\n                    this.subMenu._bakQueryAutoHide = this.subMenu.queryAutoHide;\r\n                    this.subMenu.queryAutoHide = function (el) {\r\n                        if (el && uiUtils.contains(me.getDom(), el)) {\r\n                            return false;\r\n                        }\r\n                        return this._bakQueryAutoHide(el);\r\n                    };\r\n                }\r\n                this.getDom().style.tabIndex = '-1';\r\n                uiUtils.makeUnselectable(this.getDom());\r\n                this.Stateful_postRender();\r\n            },\r\n            delayShowSubMenu: function () {\r\n                var me = this;\r\n                if (!me.isDisabled()) {\r\n                    me.addState('opened');\r\n                    clearTimeout(me._showingTimer);\r\n                    clearTimeout(me._closingTimer);\r\n                    me._closingTimer = null;\r\n                    me._showingTimer = setTimeout(function () {\r\n                        me.showSubMenu();\r\n                    }, 250);\r\n                }\r\n            },\r\n            delayHideSubMenu: function () {\r\n                var me = this;\r\n                if (!me.isDisabled()) {\r\n                    me.removeState('opened');\r\n                    clearTimeout(me._showingTimer);\r\n                    if (!me._closingTimer) {\r\n                        me._closingTimer = setTimeout(function () {\r\n                            if (!me.hasState('opened')) {\r\n                                me.hideSubMenu();\r\n                            }\r\n                            me._closingTimer = null;\r\n                        }, 400);\r\n                    }\r\n                }\r\n            },\r\n            renderLabelHtml: function () {\r\n                return '<div class=\"edui-arrow\"></div>' +\r\n                    '<div class=\"edui-box edui-icon\"></div>' +\r\n                    '<div class=\"edui-box edui-label %%-label\">' + (this.label || '') + '</div>';\r\n            },\r\n            getStateDom: function () {\r\n                return this.getDom();\r\n            },\r\n            queryAutoHide: function (el) {\r\n                if (this.subMenu && this.hasState('opened')) {\r\n                    return this.subMenu.queryAutoHide(el);\r\n                }\r\n            },\r\n            _onClick: function (event, this_) {\r\n                if (this.hasState('disabled')) return;\r\n                if (this.fireEvent('click', event, this_) !== false) {\r\n                    if (this.subMenu) {\r\n                        this.showSubMenu();\r\n                    } else {\r\n                        Popup.postHide(event);\r\n                    }\r\n                }\r\n            },\r\n            showSubMenu: function () {\r\n                var rect = uiUtils.getClientRect(this.getDom());\r\n                rect.right -= 5;\r\n                rect.left += 2;\r\n                rect.width -= 7;\r\n                rect.top -= 4;\r\n                rect.bottom += 4;\r\n                rect.height += 8;\r\n                this.subMenu.showAnchorRect(rect, true, true);\r\n            },\r\n            hideSubMenu: function () {\r\n                this.subMenu.hide();\r\n            }\r\n        };\r\n        utils.inherits(MenuItem, UIBase);\r\n        utils.extend(MenuItem.prototype, Stateful, true);\r\n    })();\r\n\r\n\r\n    // ui/combox.js\r\n    ///import core\r\n    ///import uicore\r\n    ///import ui/menu.js\r\n    ///import ui/splitbutton.js\r\n    (function () {\r\n        // todo: menu和item提成通用list\r\n        var utils = baidu.editor.utils,\r\n            uiUtils = baidu.editor.ui.uiUtils,\r\n            Menu = baidu.editor.ui.Menu,\r\n            SplitButton = baidu.editor.ui.SplitButton,\r\n            Combox = baidu.editor.ui.Combox = function (options) {\r\n                this.initOptions(options);\r\n                this.initCombox();\r\n            };\r\n        Combox.prototype = {\r\n            uiName: 'combox',\r\n            onbuttonclick: function () {\r\n                this.showPopup();\r\n            },\r\n            initCombox: function () {\r\n                var me = this;\r\n                this.items = this.items || [];\r\n                for (var i = 0; i < this.items.length; i++) {\r\n                    var item = this.items[i];\r\n                    item.uiName = 'listitem';\r\n                    item.index = i;\r\n                    item.onclick = function () {\r\n                        me.selectByIndex(this.index);\r\n                    };\r\n                }\r\n                this.popup = new Menu({\r\n                    items: this.items,\r\n                    uiName: 'list',\r\n                    editor: this.editor,\r\n                    captureWheel: true,\r\n                    combox: this\r\n                });\r\n\r\n                this.initSplitButton();\r\n            },\r\n            _SplitButton_postRender: SplitButton.prototype.postRender,\r\n            postRender: function () {\r\n                this._SplitButton_postRender();\r\n                this.setLabel(this.label || '');\r\n                this.setValue(this.initValue || '');\r\n            },\r\n            showPopup: function () {\r\n                var rect = uiUtils.getClientRect(this.getDom());\r\n                rect.top += 1;\r\n                rect.bottom -= 1;\r\n                rect.height -= 2;\r\n                this.popup.showAnchorRect(rect);\r\n            },\r\n            getValue: function () {\r\n                return this.value;\r\n            },\r\n            setValue: function (value) {\r\n                var index = this.indexByValue(value);\r\n                if (index != -1) {\r\n                    this.selectedIndex = index;\r\n                    this.setLabel(this.items[index].label);\r\n                    this.value = this.items[index].value;\r\n                } else {\r\n                    this.selectedIndex = -1;\r\n                    this.setLabel(this.getLabelForUnknowValue(value));\r\n                    this.value = value;\r\n                }\r\n            },\r\n            setLabel: function (label) {\r\n                this.getDom('button_body').innerHTML = label;\r\n                this.label = label;\r\n            },\r\n            getLabelForUnknowValue: function (value) {\r\n                return value;\r\n            },\r\n            indexByValue: function (value) {\r\n                for (var i = 0; i < this.items.length; i++) {\r\n                    if (value == this.items[i].value) {\r\n                        return i;\r\n                    }\r\n                }\r\n                return -1;\r\n            },\r\n            getItem: function (index) {\r\n                return this.items[index];\r\n            },\r\n            selectByIndex: function (index) {\r\n                if (index < this.items.length && this.fireEvent('select', index) !== false) {\r\n                    this.selectedIndex = index;\r\n                    this.value = this.items[index].value;\r\n                    this.setLabel(this.items[index].label);\r\n                }\r\n            }\r\n        };\r\n        utils.inherits(Combox, SplitButton);\r\n    })();\r\n\r\n\r\n    // ui/dialog.js\r\n    ///import core\r\n    ///import uicore\r\n    ///import ui/mask.js\r\n    ///import ui/button.js\r\n    (function () {\r\n        var utils = baidu.editor.utils,\r\n            domUtils = baidu.editor.dom.domUtils,\r\n            uiUtils = baidu.editor.ui.uiUtils,\r\n            Mask = baidu.editor.ui.Mask,\r\n            UIBase = baidu.editor.ui.UIBase,\r\n            Button = baidu.editor.ui.Button,\r\n            Dialog = baidu.editor.ui.Dialog = function (options) {\r\n                if (options.name) {\r\n                    var name = options.name;\r\n                    var cssRules = options.cssRules;\r\n                    if (!options.className) {\r\n                        options.className = 'edui-for-' + name;\r\n                    }\r\n                    if (cssRules) {\r\n                        options.cssRules = '.edui-default .edui-for-' + name + ' .edui-dialog-content  {' + cssRules + '}'\r\n                    }\r\n                }\r\n                this.initOptions(utils.extend({\r\n                    autoReset: true,\r\n                    draggable: true,\r\n                    onok: function () { },\r\n                    oncancel: function () { },\r\n                    onclose: function (t, ok) {\r\n                        return ok ? this.onok() : this.oncancel();\r\n                    },\r\n                    //是否控制dialog中的scroll事件， 默认为不阻止\r\n                    holdScroll: false\r\n                }, options));\r\n                this.initDialog();\r\n            };\r\n        var modalMask;\r\n        var dragMask;\r\n        var activeDialog;\r\n        Dialog.prototype = {\r\n            draggable: false,\r\n            uiName: 'dialog',\r\n            initDialog: function () {\r\n                var me = this,\r\n                    theme = this.editor.options.theme;\r\n                if (this.cssRules) {\r\n                    utils.cssRule('edui-customize-' + this.name + '-style', this.cssRules);\r\n                }\r\n                this.initUIBase();\r\n                this.modalMask = (modalMask || (modalMask = new Mask({\r\n                    className: 'edui-dialog-modalmask',\r\n                    theme: theme,\r\n                    onclick: function () {\r\n                        activeDialog && activeDialog.close(false);\r\n                    }\r\n                })));\r\n                this.dragMask = (dragMask || (dragMask = new Mask({\r\n                    className: 'edui-dialog-dragmask',\r\n                    theme: theme\r\n                })));\r\n                this.closeButton = new Button({\r\n                    className: 'edui-dialog-closebutton',\r\n                    title: me.closeDialog,\r\n                    theme: theme,\r\n                    onclick: function () {\r\n                        me.close(false);\r\n                    }\r\n                });\r\n\r\n                this.fullscreen && this.initResizeEvent();\r\n\r\n                if (this.buttons) {\r\n                    for (var i = 0; i < this.buttons.length; i++) {\r\n                        if (!(this.buttons[i] instanceof Button)) {\r\n                            this.buttons[i] = new Button(utils.extend(this.buttons[i], {\r\n                                editor: this.editor\r\n                            }, true));\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            initResizeEvent: function () {\r\n\r\n                var me = this;\r\n\r\n                domUtils.on(window, \"resize\", function () {\r\n\r\n                    if (me._hidden || me._hidden === undefined) {\r\n                        return;\r\n                    }\r\n\r\n                    if (me.__resizeTimer) {\r\n                        window.clearTimeout(me.__resizeTimer);\r\n                    }\r\n\r\n                    me.__resizeTimer = window.setTimeout(function () {\r\n\r\n                        me.__resizeTimer = null;\r\n\r\n                        var dialogWrapNode = me.getDom(),\r\n                            contentNode = me.getDom('content'),\r\n                            wrapRect = UE.ui.uiUtils.getClientRect(dialogWrapNode),\r\n                            contentRect = UE.ui.uiUtils.getClientRect(contentNode),\r\n                            vpRect = uiUtils.getViewportRect();\r\n\r\n                        contentNode.style.width = (vpRect.width - wrapRect.width + contentRect.width) + \"px\";\r\n                        contentNode.style.height = (vpRect.height - wrapRect.height + contentRect.height) + \"px\";\r\n\r\n                        dialogWrapNode.style.width = vpRect.width + \"px\";\r\n                        dialogWrapNode.style.height = vpRect.height + \"px\";\r\n\r\n                        me.fireEvent(\"resize\");\r\n\r\n                    }, 100);\r\n\r\n                });\r\n\r\n            },\r\n            fitSize: function () {\r\n                var popBodyEl = this.getDom('body');\r\n                //            if (!(baidu.editor.browser.ie && baidu.editor.browser.version == 7)) {\r\n                //                uiUtils.removeStyle(popBodyEl, 'width');\r\n                //                uiUtils.removeStyle(popBodyEl, 'height');\r\n                //            }\r\n                var size = this.mesureSize();\r\n                popBodyEl.style.width = size.width + 'px';\r\n                popBodyEl.style.height = size.height + 'px';\r\n                return size;\r\n            },\r\n            safeSetOffset: function (offset) {\r\n                var me = this;\r\n                var el = me.getDom();\r\n                var vpRect = uiUtils.getViewportRect();\r\n                var rect = uiUtils.getClientRect(el);\r\n                var left = offset.left;\r\n                if (left + rect.width > vpRect.right) {\r\n                    left = vpRect.right - rect.width;\r\n                }\r\n                var top = offset.top;\r\n                if (top + rect.height > vpRect.bottom) {\r\n                    top = vpRect.bottom - rect.height;\r\n                }\r\n                el.style.left = Math.max(left, 0) + 'px';\r\n                el.style.top = Math.max(top, 0) + 'px';\r\n            },\r\n            showAtCenter: function () {\r\n\r\n                var vpRect = uiUtils.getViewportRect();\r\n\r\n                if (!this.fullscreen) {\r\n                    this.getDom().style.display = '';\r\n                    var popSize = this.fitSize();\r\n                    var titleHeight = this.getDom('titlebar').offsetHeight | 0;\r\n                    var left = vpRect.width / 2 - popSize.width / 2;\r\n                    var top = vpRect.height / 2 - (popSize.height - titleHeight) / 2 - titleHeight;\r\n                    var popEl = this.getDom();\r\n                    this.safeSetOffset({\r\n                        left: Math.max(left | 0, 0),\r\n                        top: Math.max(top | 0, 0)\r\n                    });\r\n                    if (!domUtils.hasClass(popEl, 'edui-state-centered')) {\r\n                        popEl.className += ' edui-state-centered';\r\n                    }\r\n                } else {\r\n                    var dialogWrapNode = this.getDom(),\r\n                        contentNode = this.getDom('content');\r\n\r\n                    dialogWrapNode.style.display = \"block\";\r\n\r\n                    var wrapRect = UE.ui.uiUtils.getClientRect(dialogWrapNode),\r\n                        contentRect = UE.ui.uiUtils.getClientRect(contentNode);\r\n                    dialogWrapNode.style.left = \"-100000px\";\r\n\r\n                    contentNode.style.width = (vpRect.width - wrapRect.width + contentRect.width) + \"px\";\r\n                    contentNode.style.height = (vpRect.height - wrapRect.height + contentRect.height) + \"px\";\r\n\r\n                    dialogWrapNode.style.width = vpRect.width + \"px\";\r\n                    dialogWrapNode.style.height = vpRect.height + \"px\";\r\n                    dialogWrapNode.style.left = 0;\r\n\r\n                    //保存环境的overflow值\r\n                    this._originalContext = {\r\n                        html: {\r\n                            overflowX: document.documentElement.style.overflowX,\r\n                            overflowY: document.documentElement.style.overflowY\r\n                        },\r\n                        body: {\r\n                            overflowX: document.body.style.overflowX,\r\n                            overflowY: document.body.style.overflowY\r\n                        }\r\n                    };\r\n\r\n                    document.documentElement.style.overflowX = 'hidden';\r\n                    document.documentElement.style.overflowY = 'hidden';\r\n                    document.body.style.overflowX = 'hidden';\r\n                    document.body.style.overflowY = 'hidden';\r\n\r\n                }\r\n\r\n                this._show();\r\n            },\r\n            getContentHtml: function () {\r\n                var contentHtml = '';\r\n                if (typeof this.content == 'string') {\r\n                    contentHtml = this.content;\r\n                } else if (this.iframeUrl) {\r\n                    contentHtml = '<span id=\"' + this.id + '_contmask\" class=\"dialogcontmask\"></span><iframe id=\"' + this.id +\r\n                        '_iframe\" class=\"%%-iframe\" height=\"100%\" width=\"100%\" frameborder=\"0\" src=\"' + this.iframeUrl + '\"></iframe>';\r\n                }\r\n                return contentHtml;\r\n            },\r\n            getHtmlTpl: function () {\r\n                var footHtml = '';\r\n\r\n                if (this.buttons) {\r\n                    var buff = [];\r\n                    for (var i = 0; i < this.buttons.length; i++) {\r\n                        buff[i] = this.buttons[i].renderHtml();\r\n                    }\r\n                    footHtml = '<div class=\"%%-foot\">' +\r\n                        '<div id=\"##_buttons\" class=\"%%-buttons\">' + buff.join('') + '</div>' +\r\n                        '</div>';\r\n                }\r\n\r\n                return '<div id=\"##\" class=\"%%\"><div ' + (!this.fullscreen ? 'class=\"%%\"' : 'class=\"%%-wrap edui-dialog-fullscreen-flag\"') + '><div id=\"##_body\" class=\"%%-body\">' +\r\n                    '<div class=\"%%-shadow\"></div>' +\r\n                    '<div id=\"##_titlebar\" class=\"%%-titlebar\">' +\r\n                    '<div class=\"%%-draghandle\" onmousedown=\"$$._onTitlebarMouseDown(event, this);\">' +\r\n                    '<span class=\"%%-caption\">' + (this.title || '') + '</span>' +\r\n                    '</div>' +\r\n                    this.closeButton.renderHtml() +\r\n                    '</div>' +\r\n                    '<div id=\"##_content\" class=\"%%-content\">' + (this.autoReset ? '' : this.getContentHtml()) + '</div>' +\r\n                    footHtml +\r\n                    '</div></div></div>';\r\n            },\r\n            postRender: function () {\r\n                // todo: 保持居中/记住上次关闭位置选项\r\n                if (!this.modalMask.getDom()) {\r\n                    this.modalMask.render();\r\n                    this.modalMask.hide();\r\n                }\r\n                if (!this.dragMask.getDom()) {\r\n                    this.dragMask.render();\r\n                    this.dragMask.hide();\r\n                }\r\n                var me = this;\r\n                this.addListener('show', function () {\r\n                    me.modalMask.show(this.getDom().style.zIndex - 2);\r\n                });\r\n                this.addListener('hide', function () {\r\n                    me.modalMask.hide();\r\n                });\r\n                if (this.buttons) {\r\n                    for (var i = 0; i < this.buttons.length; i++) {\r\n                        this.buttons[i].postRender();\r\n                    }\r\n                }\r\n                domUtils.on(window, 'resize', function () {\r\n                    setTimeout(function () {\r\n                        if (!me.isHidden()) {\r\n                            me.safeSetOffset(uiUtils.getClientRect(me.getDom()));\r\n                        }\r\n                    });\r\n                });\r\n\r\n                //hold住scroll事件，防止dialog的滚动影响页面\r\n                //            if( this.holdScroll ) {\r\n                //\r\n                //                if( !me.iframeUrl ) {\r\n                //                    domUtils.on( document.getElementById( me.id + \"_iframe\"), !browser.gecko ? \"mousewheel\" : \"DOMMouseScroll\", function(e){\r\n                //                        domUtils.preventDefault(e);\r\n                //                    } );\r\n                //                } else {\r\n                //                    me.addListener('dialogafterreset', function(){\r\n                //                        window.setTimeout(function(){\r\n                //                            var iframeWindow = document.getElementById( me.id + \"_iframe\").contentWindow;\r\n                //\r\n                //                            if( browser.ie ) {\r\n                //\r\n                //                                var timer = window.setInterval(function(){\r\n                //\r\n                //                                    if( iframeWindow.document && iframeWindow.document.body ) {\r\n                //                                        window.clearInterval( timer );\r\n                //                                        timer = null;\r\n                //                                        domUtils.on( iframeWindow.document.body, !browser.gecko ? \"mousewheel\" : \"DOMMouseScroll\", function(e){\r\n                //                                            domUtils.preventDefault(e);\r\n                //                                        } );\r\n                //                                    }\r\n                //\r\n                //                                }, 100);\r\n                //\r\n                //                            } else {\r\n                //                                domUtils.on( iframeWindow, !browser.gecko ? \"mousewheel\" : \"DOMMouseScroll\", function(e){\r\n                //                                    domUtils.preventDefault(e);\r\n                //                                } );\r\n                //                            }\r\n                //\r\n                //                        }, 1);\r\n                //                    });\r\n                //                }\r\n                //\r\n                //            }\r\n                this._hide();\r\n            },\r\n            mesureSize: function () {\r\n                var body = this.getDom('body');\r\n                var width = uiUtils.getClientRect(this.getDom('content')).width;\r\n                var dialogBodyStyle = body.style;\r\n                dialogBodyStyle.width = width;\r\n                return uiUtils.getClientRect(body);\r\n            },\r\n            _onTitlebarMouseDown: function (evt, el) {\r\n                if (this.draggable) {\r\n                    var rect;\r\n                    var vpRect = uiUtils.getViewportRect();\r\n                    var me = this;\r\n                    uiUtils.startDrag(evt, {\r\n                        ondragstart: function () {\r\n                            rect = uiUtils.getClientRect(me.getDom());\r\n                            me.getDom('contmask').style.visibility = 'visible';\r\n                            me.dragMask.show(me.getDom().style.zIndex - 1);\r\n                        },\r\n                        ondragmove: function (x, y) {\r\n                            var left = rect.left + x;\r\n                            var top = rect.top + y;\r\n                            me.safeSetOffset({\r\n                                left: left,\r\n                                top: top\r\n                            });\r\n                        },\r\n                        ondragstop: function () {\r\n                            me.getDom('contmask').style.visibility = 'hidden';\r\n                            domUtils.removeClasses(me.getDom(), ['edui-state-centered']);\r\n                            me.dragMask.hide();\r\n                        }\r\n                    });\r\n                }\r\n            },\r\n            reset: function () {\r\n                this.getDom('content').innerHTML = this.getContentHtml();\r\n                this.fireEvent('dialogafterreset');\r\n            },\r\n            _show: function () {\r\n                if (this._hidden) {\r\n                    this.getDom().style.display = '';\r\n\r\n                    //要高过编辑器的zindxe\r\n                    this.editor.container.style.zIndex && (this.getDom().style.zIndex = this.editor.container.style.zIndex * 1 + 10);\r\n                    this._hidden = false;\r\n                    this.fireEvent('show');\r\n                    baidu.editor.ui.uiUtils.getFixedLayer().style.zIndex = this.getDom().style.zIndex - 4;\r\n                }\r\n            },\r\n            isHidden: function () {\r\n                return this._hidden;\r\n            },\r\n            _hide: function () {\r\n                if (!this._hidden) {\r\n                    var wrapNode = this.getDom();\r\n                    wrapNode.style.display = 'none';\r\n                    wrapNode.style.zIndex = '';\r\n                    wrapNode.style.width = '';\r\n                    wrapNode.style.height = '';\r\n                    this._hidden = true;\r\n                    this.fireEvent('hide');\r\n                }\r\n            },\r\n            open: function () {\r\n                if (this.autoReset) {\r\n                    //有可能还没有渲染\r\n                    try {\r\n                        this.reset();\r\n                    } catch (e) {\r\n                        this.render();\r\n                        this.open()\r\n                    }\r\n                }\r\n                this.showAtCenter();\r\n                if (this.iframeUrl) {\r\n                    try {\r\n                        this.getDom('iframe').focus();\r\n                    } catch (ex) { }\r\n                }\r\n                activeDialog = this;\r\n            },\r\n            _onCloseButtonClick: function (evt, el) {\r\n                this.close(false);\r\n            },\r\n            close: function (ok) {\r\n                if (this.fireEvent('close', ok) !== false) {\r\n                    //还原环境\r\n                    if (this.fullscreen) {\r\n\r\n                        document.documentElement.style.overflowX = this._originalContext.html.overflowX;\r\n                        document.documentElement.style.overflowY = this._originalContext.html.overflowY;\r\n                        document.body.style.overflowX = this._originalContext.body.overflowX;\r\n                        document.body.style.overflowY = this._originalContext.body.overflowY;\r\n                        delete this._originalContext;\r\n\r\n                    }\r\n                    this._hide();\r\n\r\n                    //销毁content\r\n                    var content = this.getDom('content');\r\n                    var iframe = this.getDom('iframe');\r\n                    if (content && iframe) {\r\n                        var doc = iframe.contentDocument || iframe.contentWindow.document;\r\n                        doc && (doc.body.innerHTML = '');\r\n                        domUtils.remove(content);\r\n                    }\r\n                }\r\n            }\r\n        };\r\n        utils.inherits(Dialog, UIBase);\r\n    })();\r\n\r\n\r\n    // ui/menubutton.js\r\n    ///import core\r\n    ///import uicore\r\n    ///import ui/menu.js\r\n    ///import ui/splitbutton.js\r\n    (function () {\r\n        var utils = baidu.editor.utils,\r\n            Menu = baidu.editor.ui.Menu,\r\n            SplitButton = baidu.editor.ui.SplitButton,\r\n            MenuButton = baidu.editor.ui.MenuButton = function (options) {\r\n                this.initOptions(options);\r\n                this.initMenuButton();\r\n            };\r\n        MenuButton.prototype = {\r\n            initMenuButton: function () {\r\n                var me = this;\r\n                this.uiName = \"menubutton\";\r\n                this.popup = new Menu({\r\n                    items: me.items,\r\n                    className: me.className,\r\n                    editor: me.editor\r\n                });\r\n                this.popup.addListener('show', function () {\r\n                    var list = this;\r\n                    for (var i = 0; i < list.items.length; i++) {\r\n                        list.items[i].removeState('checked');\r\n                        if (list.items[i].value == me._value) {\r\n                            list.items[i].addState('checked');\r\n                            this.value = me._value;\r\n                        }\r\n                    }\r\n                });\r\n                this.initSplitButton();\r\n            },\r\n            setValue: function (value) {\r\n                this._value = value;\r\n            }\r\n\r\n        };\r\n        utils.inherits(MenuButton, SplitButton);\r\n    })();\r\n\r\n    // ui/multiMenu.js\r\n    ///import core\r\n    ///import uicore\r\n    ///commands 表情\r\n    (function () {\r\n        var utils = baidu.editor.utils,\r\n            Popup = baidu.editor.ui.Popup,\r\n            SplitButton = baidu.editor.ui.SplitButton,\r\n            MultiMenuPop = baidu.editor.ui.MultiMenuPop = function (options) {\r\n                this.initOptions(options);\r\n                this.initMultiMenu();\r\n            };\r\n\r\n        MultiMenuPop.prototype = {\r\n            initMultiMenu: function () {\r\n                var me = this;\r\n                this.popup = new Popup({\r\n                    content: '',\r\n                    editor: me.editor,\r\n                    iframe_rendered: false,\r\n                    onshow: function () {\r\n                        if (!this.iframe_rendered) {\r\n                            this.iframe_rendered = true;\r\n                            this.getDom('content').innerHTML = '<iframe id=\"' + me.id + '_iframe\" src=\"' + me.iframeUrl + '\" frameborder=\"0\"></iframe>';\r\n                            me.editor.container.style.zIndex && (this.getDom().style.zIndex = me.editor.container.style.zIndex * 1 + 1);\r\n                        }\r\n                    }\r\n                    // canSideUp:false,\r\n                    // canSideLeft:false\r\n                });\r\n                this.onbuttonclick = function () {\r\n                    this.showPopup();\r\n                };\r\n                this.initSplitButton();\r\n            }\r\n\r\n        };\r\n\r\n        utils.inherits(MultiMenuPop, SplitButton);\r\n    })();\r\n\r\n\r\n    // ui/shortcutmenu.js\r\n    (function () {\r\n        var UI = baidu.editor.ui,\r\n            UIBase = UI.UIBase,\r\n            uiUtils = UI.uiUtils,\r\n            utils = baidu.editor.utils,\r\n            domUtils = baidu.editor.dom.domUtils;\r\n\r\n        var allMenus = [],//存储所有快捷菜单\r\n            timeID,\r\n            isSubMenuShow = false;//是否有子pop显示\r\n\r\n        var ShortCutMenu = UI.ShortCutMenu = function (options) {\r\n            this.initOptions(options);\r\n            this.initShortCutMenu();\r\n        };\r\n\r\n        ShortCutMenu.postHide = hideAllMenu;\r\n\r\n        ShortCutMenu.prototype = {\r\n            isHidden: true,\r\n            SPACE: 5,\r\n            initShortCutMenu: function () {\r\n                this.items = this.items || [];\r\n                this.initUIBase();\r\n                this.initItems();\r\n                this.initEvent();\r\n                allMenus.push(this);\r\n            },\r\n            initEvent: function () {\r\n                var me = this,\r\n                    doc = me.editor.document;\r\n\r\n                domUtils.on(doc, \"mousemove\", function (e) {\r\n                    if (me.isHidden === false) {\r\n                        //有pop显示就不隐藏快捷菜单\r\n                        if (me.getSubMenuMark() || me.eventType == \"contextmenu\") return;\r\n\r\n\r\n                        var flag = true,\r\n                            el = me.getDom(),\r\n                            wt = el.offsetWidth,\r\n                            ht = el.offsetHeight,\r\n                            distanceX = wt / 2 + me.SPACE,//距离中心X标准\r\n                            distanceY = ht / 2,//距离中心Y标准\r\n                            x = Math.abs(e.screenX - me.left),//离中心距离横坐标\r\n                            y = Math.abs(e.screenY - me.top);//离中心距离纵坐标\r\n\r\n                        clearTimeout(timeID);\r\n                        timeID = setTimeout(function () {\r\n                            if (y > 0 && y < distanceY) {\r\n                                me.setOpacity(el, \"1\");\r\n                            } else if (y > distanceY && y < distanceY + 70) {\r\n                                me.setOpacity(el, \"0.5\");\r\n                                flag = false;\r\n                            } else if (y > distanceY + 70 && y < distanceY + 140) {\r\n                                me.hide();\r\n                            }\r\n\r\n                            if (flag && x > 0 && x < distanceX) {\r\n                                me.setOpacity(el, \"1\")\r\n                            } else if (x > distanceX && x < distanceX + 70) {\r\n                                me.setOpacity(el, \"0.5\")\r\n                            } else if (x > distanceX + 70 && x < distanceX + 140) {\r\n                                me.hide();\r\n                            }\r\n                        });\r\n                    }\r\n                });\r\n\r\n                //ie\\ff下 mouseout不准\r\n                if (browser.chrome) {\r\n                    domUtils.on(doc, \"mouseout\", function (e) {\r\n                        var relatedTgt = e.relatedTarget || e.toElement;\r\n\r\n                        if (relatedTgt == null || relatedTgt.tagName == \"HTML\") {\r\n                            me.hide();\r\n                        }\r\n                    });\r\n                }\r\n\r\n                me.editor.addListener(\"afterhidepop\", function () {\r\n                    if (!me.isHidden) {\r\n                        isSubMenuShow = true;\r\n                    }\r\n                });\r\n\r\n            },\r\n            initItems: function () {\r\n                if (utils.isArray(this.items)) {\r\n                    for (var i = 0, len = this.items.length; i < len; i++) {\r\n                        var item = this.items[i].toLowerCase();\r\n\r\n                        if (UI[item]) {\r\n                            this.items[i] = new UI[item](this.editor);\r\n                            this.items[i].className += \" edui-shortcutsubmenu \";\r\n                        }\r\n                    }\r\n                }\r\n            },\r\n            setOpacity: function (el, value) {\r\n                if (browser.ie && browser.version < 9) {\r\n                    el.style.filter = \"alpha(opacity = \" + parseFloat(value) * 100 + \");\"\r\n                } else {\r\n                    el.style.opacity = value;\r\n                }\r\n            },\r\n            getSubMenuMark: function () {\r\n                isSubMenuShow = false;\r\n                var layerEle = uiUtils.getFixedLayer();\r\n                var list = domUtils.getElementsByTagName(layerEle, \"div\", function (node) {\r\n                    return domUtils.hasClass(node, \"edui-shortcutsubmenu edui-popup\")\r\n                });\r\n\r\n                for (var i = 0, node; node = list[i++];) {\r\n                    if (node.style.display != \"none\") {\r\n                        isSubMenuShow = true;\r\n                    }\r\n                }\r\n                return isSubMenuShow;\r\n            },\r\n            show: function (e, hasContextmenu) {\r\n                var me = this,\r\n                    offset = {},\r\n                    el = this.getDom(),\r\n                    fixedlayer = uiUtils.getFixedLayer();\r\n\r\n                function setPos(offset) {\r\n                    if (offset.left < 0) {\r\n                        offset.left = 0;\r\n                    }\r\n                    if (offset.top < 0) {\r\n                        offset.top = 0;\r\n                    }\r\n                    el.style.cssText = \"position:absolute;left:\" + offset.left + \"px;top:\" + offset.top + \"px;\";\r\n                }\r\n\r\n                function setPosByCxtMenu(menu) {\r\n                    if (!menu.tagName) {\r\n                        menu = menu.getDom();\r\n                    }\r\n                    offset.left = parseInt(menu.style.left);\r\n                    offset.top = parseInt(menu.style.top);\r\n                    offset.top -= el.offsetHeight + 15;\r\n                    setPos(offset);\r\n                }\r\n\r\n\r\n                me.eventType = e.type;\r\n                el.style.cssText = \"display:block;left:-9999px\";\r\n\r\n                if (e.type == \"contextmenu\" && hasContextmenu) {\r\n                    var menu = domUtils.getElementsByTagName(fixedlayer, \"div\", \"edui-contextmenu\")[0];\r\n                    if (menu) {\r\n                        setPosByCxtMenu(menu)\r\n                    } else {\r\n                        me.editor.addListener(\"aftershowcontextmenu\", function (type, menu) {\r\n                            setPosByCxtMenu(menu);\r\n                        });\r\n                    }\r\n                } else {\r\n                    offset = uiUtils.getViewportOffsetByEvent(e);\r\n                    offset.top -= el.offsetHeight + me.SPACE;\r\n                    offset.left += me.SPACE + 20;\r\n                    setPos(offset);\r\n                    me.setOpacity(el, 0.2);\r\n                }\r\n\r\n\r\n                me.isHidden = false;\r\n                me.left = e.screenX + el.offsetWidth / 2 - me.SPACE;\r\n                me.top = e.screenY - (el.offsetHeight / 2) - me.SPACE;\r\n\r\n                if (me.editor) {\r\n                    el.style.zIndex = me.editor.container.style.zIndex * 1 + 10;\r\n                    fixedlayer.style.zIndex = el.style.zIndex - 1;\r\n                }\r\n            },\r\n            hide: function () {\r\n                if (this.getDom()) {\r\n                    this.getDom().style.display = \"none\";\r\n                }\r\n                this.isHidden = true;\r\n            },\r\n            postRender: function () {\r\n                if (utils.isArray(this.items)) {\r\n                    for (var i = 0, item; item = this.items[i++];) {\r\n                        item.postRender();\r\n                    }\r\n                }\r\n            },\r\n            getHtmlTpl: function () {\r\n                var buff;\r\n                if (utils.isArray(this.items)) {\r\n                    buff = [];\r\n                    for (var i = 0; i < this.items.length; i++) {\r\n                        buff[i] = this.items[i].renderHtml();\r\n                    }\r\n                    buff = buff.join(\"\");\r\n                } else {\r\n                    buff = this.items;\r\n                }\r\n\r\n                return '<div id=\"##\" class=\"%% edui-toolbar\" data-src=\"shortcutmenu\" onmousedown=\"return false;\" onselectstart=\"return false;\" >' +\r\n                    buff +\r\n                    '</div>';\r\n            }\r\n        };\r\n\r\n        utils.inherits(ShortCutMenu, UIBase);\r\n\r\n        function hideAllMenu(e) {\r\n            var tgt = e.target || e.srcElement,\r\n                cur = domUtils.findParent(tgt, function (node) {\r\n                    return domUtils.hasClass(node, \"edui-shortcutmenu\") || domUtils.hasClass(node, \"edui-popup\");\r\n                }, true);\r\n\r\n            if (!cur) {\r\n                for (var i = 0, menu; menu = allMenus[i++];) {\r\n                    menu.hide()\r\n                }\r\n            }\r\n        }\r\n\r\n        domUtils.on(document, 'mousedown', function (e) {\r\n            hideAllMenu(e);\r\n        });\r\n\r\n        domUtils.on(window, 'scroll', function (e) {\r\n            hideAllMenu(e);\r\n        });\r\n\r\n    })();\r\n\r\n\r\n    // ui/breakline.js\r\n    (function () {\r\n        var utils = baidu.editor.utils,\r\n            UIBase = baidu.editor.ui.UIBase,\r\n            Breakline = baidu.editor.ui.Breakline = function (options) {\r\n                this.initOptions(options);\r\n                this.initSeparator();\r\n            };\r\n        Breakline.prototype = {\r\n            uiName: 'Breakline',\r\n            initSeparator: function () {\r\n                this.initUIBase();\r\n            },\r\n            getHtmlTpl: function () {\r\n                return '<br/>';\r\n            }\r\n        };\r\n        utils.inherits(Breakline, UIBase);\r\n\r\n    })();\r\n\r\n\r\n    // ui/message.js\r\n    ///import core\r\n    ///import uicore\r\n    (function () {\r\n        var utils = baidu.editor.utils,\r\n            domUtils = baidu.editor.dom.domUtils,\r\n            UIBase = baidu.editor.ui.UIBase,\r\n            Message = baidu.editor.ui.Message = function (options) {\r\n                this.initOptions(options);\r\n                this.initMessage();\r\n            };\r\n\r\n        Message.prototype = {\r\n            initMessage: function () {\r\n                this.initUIBase();\r\n            },\r\n            getHtmlTpl: function () {\r\n                return '<div id=\"##\" class=\"edui-message %%\">' +\r\n                    ' <div id=\"##_closer\" class=\"edui-message-closer\">×</div>' +\r\n                    ' <div id=\"##_body\" class=\"edui-message-body edui-message-type-info\">' +\r\n                    ' <iframe style=\"position:absolute;z-index:-1;left:0;top:0;background-color: transparent;\" frameborder=\"0\" width=\"100%\" height=\"100%\" src=\"about:blank\"></iframe>' +\r\n                    ' <div class=\"edui-shadow\"></div>' +\r\n                    ' <div id=\"##_content\" class=\"edui-message-content\">' +\r\n                    '  </div>' +\r\n                    ' </div>' +\r\n                    '</div>';\r\n            },\r\n            reset: function (opt) {\r\n                var me = this;\r\n                if (!opt.keepshow) {\r\n                    clearTimeout(this.timer);\r\n                    me.timer = setTimeout(function () {\r\n                        me.hide();\r\n                    }, opt.timeout || 4000);\r\n                }\r\n\r\n                opt.content !== undefined && me.setContent(opt.content);\r\n                opt.type !== undefined && me.setType(opt.type);\r\n\r\n                me.show();\r\n            },\r\n            postRender: function () {\r\n                var me = this,\r\n                    closer = this.getDom('closer');\r\n                closer && domUtils.on(closer, 'click', function () {\r\n                    me.hide();\r\n                });\r\n            },\r\n            setContent: function (content) {\r\n                if (this.getDom('content')) {\r\n                    this.getDom('content').innerHTML = content;\r\n                }\r\n            },\r\n            setType: function (type) {\r\n                type = type || 'info';\r\n                var body = this.getDom('body');\r\n                body.className = body.className.replace(/edui-message-type-[\\w-]+/, 'edui-message-type-' + type);\r\n            },\r\n            getContent: function () {\r\n                return this.getDom('content').innerHTML;\r\n            },\r\n            getType: function () {\r\n                var arr = this.getDom('body').match(/edui-message-type-([\\w-]+)/);\r\n                return arr ? arr[1] : '';\r\n            },\r\n            show: function () {\r\n                this.getDom().style.display = 'block';\r\n            },\r\n            hide: function () {\r\n                var dom = this.getDom();\r\n                if (dom) {\r\n                    dom.style.display = 'none';\r\n                    dom.parentNode && dom.parentNode.removeChild(dom);\r\n                }\r\n            }\r\n        };\r\n\r\n        utils.inherits(Message, UIBase);\r\n\r\n    })();\r\n\r\n\r\n    // adapter/editorui.js\r\n    //ui跟编辑器的适配層\r\n    //那个按钮弹出是dialog，是下拉筐等都是在这个js中配置\r\n    //自己写的ui也要在这里配置，放到baidu.editor.ui下边，当编辑器实例化的时候会根据ueditor.config中的toolbars找到相应的进行实例化\r\n    (function () {\r\n        var utils = baidu.editor.utils;\r\n        var editorui = baidu.editor.ui;\r\n        var _Dialog = editorui.Dialog;\r\n        editorui.buttons = {};\r\n\r\n        editorui.Dialog = function (options) {\r\n            var dialog = new _Dialog(options);\r\n            dialog.addListener('hide', function () {\r\n\r\n                if (dialog.editor) {\r\n                    var editor = dialog.editor;\r\n                    try {\r\n                        if (browser.gecko) {\r\n                            var y = editor.window.scrollY,\r\n                                x = editor.window.scrollX;\r\n                            editor.body.focus();\r\n                            editor.window.scrollTo(x, y);\r\n                        } else {\r\n                            editor.focus();\r\n                        }\r\n\r\n\r\n                    } catch (ex) {\r\n                    }\r\n                }\r\n            });\r\n            return dialog;\r\n        };\r\n\r\n        var iframeUrlMap = {\r\n            'anchor': '~/dialogs/anchor/anchor.html',\r\n            'insertimage': '~/dialogs/image/image.html',\r\n            'link': '~/dialogs/link/link.html',\r\n            'spechars': '~/dialogs/spechars/spechars.html',\r\n            'searchreplace': '~/dialogs/searchreplace/searchreplace.html',\r\n            'map': '~/dialogs/map/map.html',\r\n            'gmap': '~/dialogs/gmap/gmap.html',\r\n            'insertvideo': '~/dialogs/video/video.html',\r\n            'help': '~/dialogs/help/help.html',\r\n            'preview': '~/dialogs/preview/preview.html',\r\n            'emotion': '~/dialogs/emotion/emotion.html',\r\n            'wordimage': '~/dialogs/wordimage/wordimage.html',\r\n            'attachment': '~/dialogs/attachment/attachment.html',\r\n            'insertframe': '~/dialogs/insertframe/insertframe.html',\r\n            'edittip': '~/dialogs/table/edittip.html',\r\n            'edittable': '~/dialogs/table/edittable.html',\r\n            'edittd': '~/dialogs/table/edittd.html',\r\n            'webapp': '~/dialogs/webapp/webapp.html',\r\n            'snapscreen': '~/dialogs/snapscreen/snapscreen.html',\r\n            'scrawl': '~/dialogs/scrawl/scrawl.html',\r\n            'music': '~/dialogs/music/music.html',\r\n            'template': '~/dialogs/template/template.html',\r\n            'background': '~/dialogs/background/background.html',\r\n            'charts': '~/dialogs/charts/charts.html'\r\n        };\r\n        //为工具栏添加按钮，以下都是统一的按钮触发命令，所以写在一起\r\n        var btnCmds = ['undo', 'redo', 'formatmatch',\r\n            'bold', 'italic', 'underline', 'fontborder', 'touppercase', 'tolowercase',\r\n            'strikethrough', 'subscript', 'superscript', 'source', 'indent', 'outdent',\r\n            'blockquote', 'pasteplain', 'pagebreak',\r\n            'selectall', 'print', 'horizontal', 'removeformat', 'time', 'date', 'unlink',\r\n            'insertparagraphbeforetable', 'insertrow', 'insertcol', 'mergeright', 'mergedown', 'deleterow',\r\n            'deletecol', 'splittorows', 'splittocols', 'splittocells', 'mergecells', 'deletetable', 'drafts'];\r\n\r\n        for (var i = 0, ci; ci = btnCmds[i++];) {\r\n            ci = ci.toLowerCase();\r\n            editorui[ci] = function (cmd) {\r\n                return function (editor) {\r\n                    var ui = new editorui.Button({\r\n                        className: 'edui-for-' + cmd,\r\n                        title: editor.options.labelMap[cmd] || editor.getLang(\"labelMap.\" + cmd) || '',\r\n                        onclick: function () {\r\n                            editor.execCommand(cmd);\r\n                        },\r\n                        theme: editor.options.theme,\r\n                        showText: false\r\n                    });\r\n                    editorui.buttons[cmd] = ui;\r\n                    editor.addListener('selectionchange', function (type, causeByUi, uiReady) {\r\n                        var state = editor.queryCommandState(cmd);\r\n                        if (state == -1) {\r\n                            ui.setDisabled(true);\r\n                            ui.setChecked(false);\r\n                        } else {\r\n                            if (!uiReady) {\r\n                                ui.setDisabled(false);\r\n                                ui.setChecked(state);\r\n                            }\r\n                        }\r\n                    });\r\n                    return ui;\r\n                };\r\n            }(ci);\r\n        }\r\n\r\n        //清除文档\r\n        editorui.cleardoc = function (editor) {\r\n            var ui = new editorui.Button({\r\n                className: 'edui-for-cleardoc',\r\n                title: editor.options.labelMap.cleardoc || editor.getLang(\"labelMap.cleardoc\") || '',\r\n                theme: editor.options.theme,\r\n                onclick: function () {\r\n                    if (confirm(editor.getLang(\"confirmClear\"))) {\r\n                        editor.execCommand('cleardoc');\r\n                    }\r\n                }\r\n            });\r\n            editorui.buttons[\"cleardoc\"] = ui;\r\n            editor.addListener('selectionchange', function () {\r\n                ui.setDisabled(editor.queryCommandState('cleardoc') == -1);\r\n            });\r\n            return ui;\r\n        };\r\n\r\n        //排版，图片排版，文字方向\r\n        var typeset = {\r\n            'justify': ['left', 'right', 'center', 'justify'],\r\n            'imagefloat': ['none', 'left', 'center', 'right'],\r\n            'directionality': ['ltr', 'rtl']\r\n        };\r\n\r\n        for (var p in typeset) {\r\n\r\n            (function (cmd, val) {\r\n                for (var i = 0, ci; ci = val[i++];) {\r\n                    (function (cmd2) {\r\n                        editorui[cmd.replace('float', '') + cmd2] = function (editor) {\r\n                            var ui = new editorui.Button({\r\n                                className: 'edui-for-' + cmd.replace('float', '') + cmd2,\r\n                                title: editor.options.labelMap[cmd.replace('float', '') + cmd2] || editor.getLang(\"labelMap.\" + cmd.replace('float', '') + cmd2) || '',\r\n                                theme: editor.options.theme,\r\n                                onclick: function () {\r\n                                    editor.execCommand(cmd, cmd2);\r\n                                }\r\n                            });\r\n                            editorui.buttons[cmd] = ui;\r\n                            editor.addListener('selectionchange', function (type, causeByUi, uiReady) {\r\n                                ui.setDisabled(editor.queryCommandState(cmd) == -1);\r\n                                ui.setChecked(editor.queryCommandValue(cmd) == cmd2 && !uiReady);\r\n                            });\r\n                            return ui;\r\n                        };\r\n                    })(ci)\r\n                }\r\n            })(p, typeset[p])\r\n        }\r\n\r\n        //字体颜色和背景颜色\r\n        for (var i = 0, ci; ci = ['backcolor', 'forecolor'][i++];) {\r\n            editorui[ci] = function (cmd) {\r\n                return function (editor) {\r\n                    var ui = new editorui.ColorButton({\r\n                        className: 'edui-for-' + cmd,\r\n                        color: 'default',\r\n                        title: editor.options.labelMap[cmd] || editor.getLang(\"labelMap.\" + cmd) || '',\r\n                        editor: editor,\r\n                        onpickcolor: function (t, color) {\r\n                            editor.execCommand(cmd, color);\r\n                        },\r\n                        onpicknocolor: function () {\r\n                            editor.execCommand(cmd, 'default');\r\n                            this.setColor('transparent');\r\n                            this.color = 'default';\r\n                        },\r\n                        onbuttonclick: function () {\r\n                            editor.execCommand(cmd, this.color);\r\n                        }\r\n                    });\r\n                    editorui.buttons[cmd] = ui;\r\n                    editor.addListener('selectionchange', function () {\r\n                        ui.setDisabled(editor.queryCommandState(cmd) == -1);\r\n                    });\r\n                    return ui;\r\n                };\r\n            }(ci);\r\n        }\r\n\r\n\r\n        var dialogBtns = {\r\n            noOk: ['searchreplace', 'help', 'spechars', 'webapp', 'preview'],\r\n            ok: ['attachment', 'anchor', 'link', 'insertimage', 'map', 'gmap', 'insertframe', 'wordimage',\r\n                'insertvideo', 'insertframe', 'edittip', 'edittable', 'edittd', 'scrawl', 'template', 'music', 'background', 'charts']\r\n        };\r\n\r\n        for (var p in dialogBtns) {\r\n            (function (type, vals) {\r\n                for (var i = 0, ci; ci = vals[i++];) {\r\n                    //todo opera下存在问题\r\n                    if (browser.opera && ci === \"searchreplace\") {\r\n                        continue;\r\n                    }\r\n                    (function (cmd) {\r\n                        editorui[cmd] = function (editor, iframeUrl, title) {\r\n                            iframeUrl = iframeUrl || (editor.options.iframeUrlMap || {})[cmd] || iframeUrlMap[cmd];\r\n                            title = editor.options.labelMap[cmd] || editor.getLang(\"labelMap.\" + cmd) || '';\r\n\r\n                            var dialog;\r\n                            //没有iframeUrl不创建dialog\r\n                            if (iframeUrl) {\r\n                                dialog = new editorui.Dialog(utils.extend({\r\n                                    iframeUrl: editor.ui.mapUrl(iframeUrl),\r\n                                    editor: editor,\r\n                                    className: 'edui-for-' + cmd,\r\n                                    title: title,\r\n                                    holdScroll: cmd === 'insertimage',\r\n                                    fullscreen: /charts|preview/.test(cmd),\r\n                                    closeDialog: editor.getLang(\"closeDialog\")\r\n                                }, type == 'ok' ? {\r\n                                    buttons: [\r\n                                        {\r\n                                            className: 'edui-okbutton',\r\n                                            label: editor.getLang(\"ok\"),\r\n                                            editor: editor,\r\n                                            onclick: function () {\r\n                                                dialog.close(true);\r\n                                            }\r\n                                        },\r\n                                        {\r\n                                            className: 'edui-cancelbutton',\r\n                                            label: editor.getLang(\"cancel\"),\r\n                                            editor: editor,\r\n                                            onclick: function () {\r\n                                                dialog.close(false);\r\n                                            }\r\n                                        }\r\n                                    ]\r\n                                } : {}));\r\n\r\n                                editor.ui._dialogs[cmd + \"Dialog\"] = dialog;\r\n                            }\r\n\r\n                            var ui = new editorui.Button({\r\n                                className: 'edui-for-' + cmd,\r\n                                title: title,\r\n                                onclick: function () {\r\n                                    if (dialog) {\r\n                                        switch (cmd) {\r\n                                            case \"wordimage\":\r\n                                                var images = editor.execCommand(\"wordimage\");\r\n                                                if (images && images.length) {\r\n                                                    dialog.render();\r\n                                                    dialog.open();\r\n                                                }\r\n                                                break;\r\n                                            case \"scrawl\":\r\n                                                if (editor.queryCommandState(\"scrawl\") != -1) {\r\n                                                    dialog.render();\r\n                                                    dialog.open();\r\n                                                }\r\n\r\n                                                break;\r\n                                            default:\r\n                                                dialog.render();\r\n                                                dialog.open();\r\n                                        }\r\n                                    }\r\n                                },\r\n                                theme: editor.options.theme,\r\n                                disabled: (cmd == 'scrawl' && editor.queryCommandState(\"scrawl\") == -1) || (cmd == 'charts')\r\n                            });\r\n                            editorui.buttons[cmd] = ui;\r\n                            editor.addListener('selectionchange', function () {\r\n                                //只存在于右键菜单而无工具栏按钮的ui不需要检测状态\r\n                                var unNeedCheckState = { 'edittable': 1 };\r\n                                if (cmd in unNeedCheckState) return;\r\n\r\n                                var state = editor.queryCommandState(cmd);\r\n                                if (ui.getDom()) {\r\n                                    ui.setDisabled(state == -1);\r\n                                    ui.setChecked(state);\r\n                                }\r\n\r\n                            });\r\n\r\n                            return ui;\r\n                        };\r\n                    })(ci.toLowerCase())\r\n                }\r\n            })(p, dialogBtns[p]);\r\n        }\r\n\r\n        editorui.snapscreen = function (editor, iframeUrl, title) {\r\n            title = editor.options.labelMap['snapscreen'] || editor.getLang(\"labelMap.snapscreen\") || '';\r\n            var ui = new editorui.Button({\r\n                className: 'edui-for-snapscreen',\r\n                title: title,\r\n                onclick: function () {\r\n                    editor.execCommand(\"snapscreen\");\r\n                },\r\n                theme: editor.options.theme\r\n\r\n            });\r\n            editorui.buttons['snapscreen'] = ui;\r\n            iframeUrl = iframeUrl || (editor.options.iframeUrlMap || {})[\"snapscreen\"] || iframeUrlMap[\"snapscreen\"];\r\n            if (iframeUrl) {\r\n                var dialog = new editorui.Dialog({\r\n                    iframeUrl: editor.ui.mapUrl(iframeUrl),\r\n                    editor: editor,\r\n                    className: 'edui-for-snapscreen',\r\n                    title: title,\r\n                    buttons: [\r\n                        {\r\n                            className: 'edui-okbutton',\r\n                            label: editor.getLang(\"ok\"),\r\n                            editor: editor,\r\n                            onclick: function () {\r\n                                dialog.close(true);\r\n                            }\r\n                        },\r\n                        {\r\n                            className: 'edui-cancelbutton',\r\n                            label: editor.getLang(\"cancel\"),\r\n                            editor: editor,\r\n                            onclick: function () {\r\n                                dialog.close(false);\r\n                            }\r\n                        }\r\n                    ]\r\n\r\n                });\r\n                dialog.render();\r\n                editor.ui._dialogs[\"snapscreenDialog\"] = dialog;\r\n            }\r\n            editor.addListener('selectionchange', function () {\r\n                ui.setDisabled(editor.queryCommandState('snapscreen') == -1);\r\n            });\r\n            return ui;\r\n        };\r\n\r\n        editorui.insertcode = function (editor, list, title) {\r\n            list = editor.options['insertcode'] || [];\r\n            title = editor.options.labelMap['insertcode'] || editor.getLang(\"labelMap.insertcode\") || '';\r\n            // if (!list.length) return;\r\n            var items = [];\r\n            utils.each(list, function (key, val) {\r\n                items.push({\r\n                    label: key,\r\n                    value: val,\r\n                    theme: editor.options.theme,\r\n                    renderLabelHtml: function () {\r\n                        return '<div class=\"edui-label %%-label\" >' + (this.label || '') + '</div>';\r\n                    }\r\n                });\r\n            });\r\n\r\n            var ui = new editorui.Combox({\r\n                editor: editor,\r\n                items: items,\r\n                onselect: function (t, index) {\r\n                    editor.execCommand('insertcode', this.items[index].value);\r\n                },\r\n                onbuttonclick: function () {\r\n                    this.showPopup();\r\n                },\r\n                title: title,\r\n                initValue: title,\r\n                className: 'edui-for-insertcode',\r\n                indexByValue: function (value) {\r\n                    if (value) {\r\n                        for (var i = 0, ci; ci = this.items[i]; i++) {\r\n                            if (ci.value.indexOf(value) != -1)\r\n                                return i;\r\n                        }\r\n                    }\r\n\r\n                    return -1;\r\n                }\r\n            });\r\n            editorui.buttons['insertcode'] = ui;\r\n            editor.addListener('selectionchange', function (type, causeByUi, uiReady) {\r\n                if (!uiReady) {\r\n                    var state = editor.queryCommandState('insertcode');\r\n                    if (state == -1) {\r\n                        ui.setDisabled(true);\r\n                    } else {\r\n                        ui.setDisabled(false);\r\n                        var value = editor.queryCommandValue('insertcode');\r\n                        if (!value) {\r\n                            ui.setValue(title);\r\n                            return;\r\n                        }\r\n                        //trace:1871 ie下从源码模式切换回来时，字体会带单引号，而且会有逗号\r\n                        value && (value = value.replace(/['\"]/g, '').split(',')[0]);\r\n                        ui.setValue(value);\r\n\r\n                    }\r\n                }\r\n\r\n            });\r\n            return ui;\r\n        };\r\n        editorui.fontfamily = function (editor, list, title) {\r\n\r\n            list = editor.options['fontfamily'] || [];\r\n            title = editor.options.labelMap['fontfamily'] || editor.getLang(\"labelMap.fontfamily\") || '';\r\n            if (!list.length) return;\r\n            for (var i = 0, ci, items = []; ci = list[i]; i++) {\r\n                var langLabel = editor.getLang('fontfamily')[ci.name] || \"\";\r\n                (function (key, val) {\r\n                    items.push({\r\n                        label: key,\r\n                        value: val,\r\n                        theme: editor.options.theme,\r\n                        renderLabelHtml: function () {\r\n                            return '<div class=\"edui-label %%-label\" style=\"font-family:' +\r\n                                utils.unhtml(this.value) + '\">' + (this.label || '') + '</div>';\r\n                        }\r\n                    });\r\n                })(ci.label || langLabel, ci.val)\r\n            }\r\n            var ui = new editorui.Combox({\r\n                editor: editor,\r\n                items: items,\r\n                onselect: function (t, index) {\r\n                    editor.execCommand('FontFamily', this.items[index].value);\r\n                },\r\n                onbuttonclick: function () {\r\n                    this.showPopup();\r\n                },\r\n                title: title,\r\n                initValue: title,\r\n                className: 'edui-for-fontfamily',\r\n                indexByValue: function (value) {\r\n                    if (value) {\r\n                        for (var i = 0, ci; ci = this.items[i]; i++) {\r\n                            if (ci.value.indexOf(value) != -1)\r\n                                return i;\r\n                        }\r\n                    }\r\n\r\n                    return -1;\r\n                }\r\n            });\r\n            editorui.buttons['fontfamily'] = ui;\r\n            editor.addListener('selectionchange', function (type, causeByUi, uiReady) {\r\n                if (!uiReady) {\r\n                    var state = editor.queryCommandState('FontFamily');\r\n                    if (state == -1) {\r\n                        ui.setDisabled(true);\r\n                    } else {\r\n                        ui.setDisabled(false);\r\n                        var value = editor.queryCommandValue('FontFamily');\r\n                        //trace:1871 ie下从源码模式切换回来时，字体会带单引号，而且会有逗号\r\n                        value && (value = value.replace(/['\"]/g, '').split(',')[0]);\r\n                        ui.setValue(value);\r\n\r\n                    }\r\n                }\r\n\r\n            });\r\n            return ui;\r\n        };\r\n\r\n        editorui.fontsize = function (editor, list, title) {\r\n            title = editor.options.labelMap['fontsize'] || editor.getLang(\"labelMap.fontsize\") || '';\r\n            list = list || editor.options['fontsize'] || [];\r\n            if (!list.length) return;\r\n            var items = [];\r\n            for (var i = 0; i < list.length; i++) {\r\n                var size = list[i] + 'px';\r\n                items.push({\r\n                    label: size,\r\n                    value: size,\r\n                    theme: editor.options.theme,\r\n                    renderLabelHtml: function () {\r\n                        return '<div class=\"edui-label %%-label\" style=\"line-height:1;font-size:' +\r\n                            this.value + '\">' + (this.label || '') + '</div>';\r\n                    }\r\n                });\r\n            }\r\n            var ui = new editorui.Combox({\r\n                editor: editor,\r\n                items: items,\r\n                title: title,\r\n                initValue: title,\r\n                onselect: function (t, index) {\r\n                    editor.execCommand('FontSize', this.items[index].value);\r\n                },\r\n                onbuttonclick: function () {\r\n                    this.showPopup();\r\n                },\r\n                className: 'edui-for-fontsize'\r\n            });\r\n            editorui.buttons['fontsize'] = ui;\r\n            editor.addListener('selectionchange', function (type, causeByUi, uiReady) {\r\n                if (!uiReady) {\r\n                    var state = editor.queryCommandState('FontSize');\r\n                    if (state == -1) {\r\n                        ui.setDisabled(true);\r\n                    } else {\r\n                        ui.setDisabled(false);\r\n                        ui.setValue(editor.queryCommandValue('FontSize'));\r\n                    }\r\n                }\r\n\r\n            });\r\n            return ui;\r\n        };\r\n\r\n        editorui.paragraph = function (editor, list, title) {\r\n            title = editor.options.labelMap['paragraph'] || editor.getLang(\"labelMap.paragraph\") || '';\r\n            list = editor.options['paragraph'] || [];\r\n            if (utils.isEmptyObject(list)) return;\r\n            var items = [];\r\n            for (var i in list) {\r\n                items.push({\r\n                    value: i,\r\n                    label: list[i] || editor.getLang(\"paragraph\")[i],\r\n                    theme: editor.options.theme,\r\n                    renderLabelHtml: function () {\r\n                        return '<div class=\"edui-label %%-label\"><span class=\"edui-for-' + this.value + '\">' + (this.label || '') + '</span></div>';\r\n                    }\r\n                })\r\n            }\r\n            var ui = new editorui.Combox({\r\n                editor: editor,\r\n                items: items,\r\n                title: title,\r\n                initValue: title,\r\n                className: 'edui-for-paragraph',\r\n                onselect: function (t, index) {\r\n                    editor.execCommand('Paragraph', this.items[index].value);\r\n                },\r\n                onbuttonclick: function () {\r\n                    this.showPopup();\r\n                }\r\n            });\r\n            editorui.buttons['paragraph'] = ui;\r\n            editor.addListener('selectionchange', function (type, causeByUi, uiReady) {\r\n                if (!uiReady) {\r\n                    var state = editor.queryCommandState('Paragraph');\r\n                    if (state == -1) {\r\n                        ui.setDisabled(true);\r\n                    } else {\r\n                        ui.setDisabled(false);\r\n                        var value = editor.queryCommandValue('Paragraph');\r\n                        var index = ui.indexByValue(value);\r\n                        if (index != -1) {\r\n                            ui.setValue(value);\r\n                        } else {\r\n                            ui.setValue(ui.initValue);\r\n                        }\r\n                    }\r\n                }\r\n\r\n            });\r\n            return ui;\r\n        };\r\n\r\n\r\n        //自定义标题\r\n        editorui.customstyle = function (editor) {\r\n            var list = editor.options['customstyle'] || [],\r\n                title = editor.options.labelMap['customstyle'] || editor.getLang(\"labelMap.customstyle\") || '';\r\n            if (!list.length) return;\r\n            var langCs = editor.getLang('customstyle');\r\n            for (var i = 0, items = [], t; t = list[i++];) {\r\n                (function (t) {\r\n                    var ck = {};\r\n                    ck.label = t.label ? t.label : langCs[t.name];\r\n                    ck.style = t.style;\r\n                    ck.className = t.className;\r\n                    ck.tag = t.tag;\r\n                    items.push({\r\n                        label: ck.label,\r\n                        value: ck,\r\n                        theme: editor.options.theme,\r\n                        renderLabelHtml: function () {\r\n                            return '<div class=\"edui-label %%-label\">' + '<' + ck.tag + ' ' + (ck.className ? ' class=\"' + ck.className + '\"' : \"\")\r\n                                + (ck.style ? ' style=\"' + ck.style + '\"' : \"\") + '>' + ck.label + \"<\\/\" + ck.tag + \">\"\r\n                                + '</div>';\r\n                        }\r\n                    });\r\n                })(t);\r\n            }\r\n\r\n            var ui = new editorui.Combox({\r\n                editor: editor,\r\n                items: items,\r\n                title: title,\r\n                initValue: title,\r\n                className: 'edui-for-customstyle',\r\n                onselect: function (t, index) {\r\n                    editor.execCommand('customstyle', this.items[index].value);\r\n                },\r\n                onbuttonclick: function () {\r\n                    this.showPopup();\r\n                },\r\n                indexByValue: function (value) {\r\n                    for (var i = 0, ti; ti = this.items[i++];) {\r\n                        if (ti.label == value) {\r\n                            return i - 1\r\n                        }\r\n                    }\r\n                    return -1;\r\n                }\r\n            });\r\n            editorui.buttons['customstyle'] = ui;\r\n            editor.addListener('selectionchange', function (type, causeByUi, uiReady) {\r\n                if (!uiReady) {\r\n                    var state = editor.queryCommandState('customstyle');\r\n                    if (state == -1) {\r\n                        ui.setDisabled(true);\r\n                    } else {\r\n                        ui.setDisabled(false);\r\n                        var value = editor.queryCommandValue('customstyle');\r\n                        var index = ui.indexByValue(value);\r\n                        if (index != -1) {\r\n                            ui.setValue(value);\r\n                        } else {\r\n                            ui.setValue(ui.initValue);\r\n                        }\r\n                    }\r\n                }\r\n\r\n            });\r\n            return ui;\r\n        };\r\n        editorui.inserttable = function (editor, iframeUrl, title) {\r\n            title = editor.options.labelMap['inserttable'] || editor.getLang(\"labelMap.inserttable\") || '';\r\n            var ui = new editorui.TableButton({\r\n                editor: editor,\r\n                title: title,\r\n                className: 'edui-for-inserttable',\r\n                onpicktable: function (t, numCols, numRows) {\r\n                    editor.execCommand('InsertTable', { numRows: numRows, numCols: numCols, border: 1 });\r\n                },\r\n                onbuttonclick: function () {\r\n                    this.showPopup();\r\n                }\r\n            });\r\n            editorui.buttons['inserttable'] = ui;\r\n            editor.addListener('selectionchange', function () {\r\n                ui.setDisabled(editor.queryCommandState('inserttable') == -1);\r\n            });\r\n            return ui;\r\n        };\r\n\r\n        editorui.lineheight = function (editor) {\r\n            var val = editor.options.lineheight || [];\r\n            if (!val.length) return;\r\n            for (var i = 0, ci, items = []; ci = val[i++];) {\r\n                items.push({\r\n                    //todo:写死了\r\n                    label: ci,\r\n                    value: ci,\r\n                    theme: editor.options.theme,\r\n                    onclick: function () {\r\n                        editor.execCommand(\"lineheight\", this.value);\r\n                    }\r\n                })\r\n            }\r\n            var ui = new editorui.MenuButton({\r\n                editor: editor,\r\n                className: 'edui-for-lineheight',\r\n                title: editor.options.labelMap['lineheight'] || editor.getLang(\"labelMap.lineheight\") || '',\r\n                items: items,\r\n                onbuttonclick: function () {\r\n                    var value = editor.queryCommandValue('LineHeight') || this.value;\r\n                    editor.execCommand(\"LineHeight\", value);\r\n                }\r\n            });\r\n            editorui.buttons['lineheight'] = ui;\r\n            editor.addListener('selectionchange', function () {\r\n                var state = editor.queryCommandState('LineHeight');\r\n                if (state == -1) {\r\n                    ui.setDisabled(true);\r\n                } else {\r\n                    ui.setDisabled(false);\r\n                    var value = editor.queryCommandValue('LineHeight');\r\n                    value && ui.setValue((value + '').replace(/cm/, ''));\r\n                    ui.setChecked(state)\r\n                }\r\n            });\r\n            return ui;\r\n        };\r\n\r\n        var rowspacings = ['top', 'bottom'];\r\n        for (var r = 0, ri; ri = rowspacings[r++];) {\r\n            (function (cmd) {\r\n                editorui['rowspacing' + cmd] = function (editor) {\r\n                    var val = editor.options['rowspacing' + cmd] || [];\r\n                    if (!val.length) return null;\r\n                    for (var i = 0, ci, items = []; ci = val[i++];) {\r\n                        items.push({\r\n                            label: ci,\r\n                            value: ci,\r\n                            theme: editor.options.theme,\r\n                            onclick: function () {\r\n                                editor.execCommand(\"rowspacing\", this.value, cmd);\r\n                            }\r\n                        })\r\n                    }\r\n                    var ui = new editorui.MenuButton({\r\n                        editor: editor,\r\n                        className: 'edui-for-rowspacing' + cmd,\r\n                        title: editor.options.labelMap['rowspacing' + cmd] || editor.getLang(\"labelMap.rowspacing\" + cmd) || '',\r\n                        items: items,\r\n                        onbuttonclick: function () {\r\n                            var value = editor.queryCommandValue('rowspacing', cmd) || this.value;\r\n                            editor.execCommand(\"rowspacing\", value, cmd);\r\n                        }\r\n                    });\r\n                    editorui.buttons[cmd] = ui;\r\n                    editor.addListener('selectionchange', function () {\r\n                        var state = editor.queryCommandState('rowspacing', cmd);\r\n                        if (state == -1) {\r\n                            ui.setDisabled(true);\r\n                        } else {\r\n                            ui.setDisabled(false);\r\n                            var value = editor.queryCommandValue('rowspacing', cmd);\r\n                            value && ui.setValue((value + '').replace(/%/, ''));\r\n                            ui.setChecked(state)\r\n                        }\r\n                    });\r\n                    return ui;\r\n                }\r\n            })(ri)\r\n        }\r\n        //有序，无序列表\r\n        var lists = ['insertorderedlist', 'insertunorderedlist'];\r\n        for (var l = 0, cl; cl = lists[l++];) {\r\n            (function (cmd) {\r\n                editorui[cmd] = function (editor) {\r\n                    var vals = editor.options[cmd],\r\n                        _onMenuClick = function () {\r\n                            editor.execCommand(cmd, this.value);\r\n                        }, items = [];\r\n                    for (var i in vals) {\r\n                        items.push({\r\n                            label: vals[i] || editor.getLang()[cmd][i] || \"\",\r\n                            value: i,\r\n                            theme: editor.options.theme,\r\n                            onclick: _onMenuClick\r\n                        })\r\n                    }\r\n                    var ui = new editorui.MenuButton({\r\n                        editor: editor,\r\n                        className: 'edui-for-' + cmd,\r\n                        title: editor.getLang(\"labelMap.\" + cmd) || '',\r\n                        'items': items,\r\n                        onbuttonclick: function () {\r\n                            var value = editor.queryCommandValue(cmd) || this.value;\r\n                            editor.execCommand(cmd, value);\r\n                        }\r\n                    });\r\n                    editorui.buttons[cmd] = ui;\r\n                    editor.addListener('selectionchange', function () {\r\n                        var state = editor.queryCommandState(cmd);\r\n                        if (state == -1) {\r\n                            ui.setDisabled(true);\r\n                        } else {\r\n                            ui.setDisabled(false);\r\n                            var value = editor.queryCommandValue(cmd);\r\n                            ui.setValue(value);\r\n                            ui.setChecked(state)\r\n                        }\r\n                    });\r\n                    return ui;\r\n                };\r\n            })(cl)\r\n        }\r\n\r\n        editorui.fullscreen = function (editor, title) {\r\n            title = editor.options.labelMap['fullscreen'] || editor.getLang(\"labelMap.fullscreen\") || '';\r\n            var ui = new editorui.Button({\r\n                className: 'edui-for-fullscreen',\r\n                title: title,\r\n                theme: editor.options.theme,\r\n                onclick: function () {\r\n                    if (editor.ui) {\r\n                        editor.ui.setFullScreen(!editor.ui.isFullScreen());\r\n                    }\r\n                    this.setChecked(editor.ui.isFullScreen());\r\n                }\r\n            });\r\n            editorui.buttons['fullscreen'] = ui;\r\n            editor.addListener('selectionchange', function () {\r\n                var state = editor.queryCommandState('fullscreen');\r\n                ui.setDisabled(state == -1);\r\n                ui.setChecked(editor.ui.isFullScreen());\r\n            });\r\n            return ui;\r\n        };\r\n\r\n        // 表情\r\n        editorui[\"emotion\"] = function (editor, iframeUrl) {\r\n            var cmd = \"emotion\";\r\n            var ui = new editorui.MultiMenuPop({\r\n                title: editor.options.labelMap[cmd] || editor.getLang(\"labelMap.\" + cmd + \"\") || '',\r\n                editor: editor,\r\n                className: 'edui-for-' + cmd,\r\n                iframeUrl: editor.ui.mapUrl(iframeUrl || (editor.options.iframeUrlMap || {})[cmd] || iframeUrlMap[cmd])\r\n            });\r\n            editorui.buttons[cmd] = ui;\r\n\r\n            editor.addListener('selectionchange', function () {\r\n                ui.setDisabled(editor.queryCommandState(cmd) == -1)\r\n            });\r\n            return ui;\r\n        };\r\n\r\n        editorui.autotypeset = function (editor) {\r\n            var ui = new editorui.AutoTypeSetButton({\r\n                editor: editor,\r\n                title: editor.options.labelMap['autotypeset'] || editor.getLang(\"labelMap.autotypeset\") || '',\r\n                className: 'edui-for-autotypeset',\r\n                onbuttonclick: function () {\r\n                    editor.execCommand('autotypeset')\r\n                }\r\n            });\r\n            editorui.buttons['autotypeset'] = ui;\r\n            editor.addListener('selectionchange', function () {\r\n                ui.setDisabled(editor.queryCommandState('autotypeset') == -1);\r\n            });\r\n            return ui;\r\n        };\r\n\r\n        /* 简单上传插件 */\r\n        editorui[\"simpleupload\"] = function (editor) {\r\n            var name = 'simpleupload',\r\n                ui = new editorui.Button({\r\n                    className: 'edui-for-' + name,\r\n                    title: editor.options.labelMap[name] || editor.getLang(\"labelMap.\" + name) || '',\r\n                    onclick: function () { },\r\n                    theme: editor.options.theme,\r\n                    showText: false\r\n                });\r\n            editorui.buttons[name] = ui;\r\n            editor.addListener('ready', function () {\r\n                var b = ui.getDom('body'),\r\n                    iconSpan = b.children[0];\r\n                editor.fireEvent('simpleuploadbtnready', iconSpan);\r\n            });\r\n            editor.addListener('selectionchange', function (type, causeByUi, uiReady) {\r\n                var state = editor.queryCommandState(name);\r\n                if (state == -1) {\r\n                    ui.setDisabled(true);\r\n                    ui.setChecked(false);\r\n                } else {\r\n                    if (!uiReady) {\r\n                        ui.setDisabled(false);\r\n                        ui.setChecked(state);\r\n                    }\r\n                }\r\n            });\r\n            return ui;\r\n        };\r\n\r\n    })();\r\n\r\n\r\n    // adapter/editor.js\r\n    ///import core\r\n    ///commands 全屏\r\n    ///commandsName FullScreen\r\n    ///commandsTitle  全屏\r\n    (function () {\r\n        var utils = baidu.editor.utils,\r\n            uiUtils = baidu.editor.ui.uiUtils,\r\n            UIBase = baidu.editor.ui.UIBase,\r\n            domUtils = baidu.editor.dom.domUtils;\r\n        var nodeStack = [];\r\n\r\n        function EditorUI(options) {\r\n            this.initOptions(options);\r\n            this.initEditorUI();\r\n        }\r\n\r\n        EditorUI.prototype = {\r\n            uiName: 'editor',\r\n            initEditorUI: function () {\r\n                this.editor.ui = this;\r\n                this._dialogs = {};\r\n                this.initUIBase();\r\n                this._initToolbars();\r\n                var editor = this.editor,\r\n                    me = this;\r\n\r\n                editor.addListener('ready', function () {\r\n                    //提供getDialog方法\r\n                    editor.getDialog = function (name) {\r\n                        return editor.ui._dialogs[name + \"Dialog\"];\r\n                    };\r\n                    domUtils.on(editor.window, 'scroll', function (evt) {\r\n                        baidu.editor.ui.Popup.postHide(evt);\r\n                    });\r\n                    //提供编辑器实时宽高(全屏时宽高不变化)\r\n                    editor.ui._actualFrameWidth = editor.options.initialFrameWidth;\r\n\r\n                    UE.browser.ie && UE.browser.version === 6 && editor.container.ownerDocument.execCommand(\"BackgroundImageCache\", false, true);\r\n\r\n                    //display bottom-bar label based on config\r\n                    if (editor.options.elementPathEnabled) {\r\n                        editor.ui.getDom('elementpath').innerHTML = '<div class=\"edui-editor-breadcrumb\">' + editor.getLang(\"elementPathTip\") + ':</div>';\r\n                    }\r\n                    if (editor.options.wordCount) {\r\n                        function countFn() {\r\n                            setCount(editor, me);\r\n                            domUtils.un(editor.document, \"click\", arguments.callee);\r\n                        }\r\n                        domUtils.on(editor.document, \"click\", countFn);\r\n                        editor.ui.getDom('wordcount').innerHTML = editor.getLang(\"wordCountTip\");\r\n                    }\r\n                    editor.ui._scale();\r\n                    if (editor.options.scaleEnabled) {\r\n                        if (editor.autoHeightEnabled) {\r\n                            editor.disableAutoHeight();\r\n                        }\r\n                        me.enableScale();\r\n                    } else {\r\n                        me.disableScale();\r\n                    }\r\n                    if (!editor.options.elementPathEnabled && !editor.options.wordCount && !editor.options.scaleEnabled) {\r\n                        editor.ui.getDom('elementpath').style.display = \"none\";\r\n                        editor.ui.getDom('wordcount').style.display = \"none\";\r\n                        editor.ui.getDom('scale').style.display = \"none\";\r\n                    }\r\n\r\n                    if (!editor.selection.isFocus()) return;\r\n                    editor.fireEvent('selectionchange', false, true);\r\n\r\n\r\n                });\r\n\r\n                editor.addListener('mousedown', function (t, evt) {\r\n                    var el = evt.target || evt.srcElement;\r\n                    baidu.editor.ui.Popup.postHide(evt, el);\r\n                    baidu.editor.ui.ShortCutMenu.postHide(evt);\r\n\r\n                });\r\n                editor.addListener(\"delcells\", function () {\r\n                    if (UE.ui['edittip']) {\r\n                        new UE.ui['edittip'](editor);\r\n                    }\r\n                    editor.getDialog('edittip').open();\r\n                });\r\n\r\n                var pastePop, isPaste = false, timer;\r\n                editor.addListener(\"afterpaste\", function () {\r\n                    if (editor.queryCommandState('pasteplain'))\r\n                        return;\r\n                    if (baidu.editor.ui.PastePicker) {\r\n                        pastePop = new baidu.editor.ui.Popup({\r\n                            content: new baidu.editor.ui.PastePicker({ editor: editor }),\r\n                            editor: editor,\r\n                            className: 'edui-wordpastepop'\r\n                        });\r\n                        pastePop.render();\r\n                    }\r\n                    isPaste = true;\r\n                });\r\n\r\n                editor.addListener(\"afterinserthtml\", function () {\r\n                    clearTimeout(timer);\r\n                    timer = setTimeout(function () {\r\n                        if (pastePop && (isPaste || editor.ui._isTransfer)) {\r\n                            if (pastePop.isHidden()) {\r\n                                var span = domUtils.createElement(editor.document, 'span', {\r\n                                    'style': \"line-height:0px;\",\r\n                                    'innerHTML': '\\ufeff'\r\n                                }),\r\n                                    range = editor.selection.getRange();\r\n                                range.insertNode(span);\r\n                                var tmp = getDomNode(span, 'firstChild', 'previousSibling');\r\n                                tmp && pastePop.showAnchor(tmp.nodeType == 3 ? tmp.parentNode : tmp);\r\n                                domUtils.remove(span);\r\n                            } else {\r\n                                pastePop.show();\r\n                            }\r\n                            delete editor.ui._isTransfer;\r\n                            isPaste = false;\r\n                        }\r\n                    }, 200)\r\n                });\r\n                editor.addListener('contextmenu', function (t, evt) {\r\n                    baidu.editor.ui.Popup.postHide(evt);\r\n                });\r\n                editor.addListener('keydown', function (t, evt) {\r\n                    if (pastePop) pastePop.dispose(evt);\r\n                    var keyCode = evt.keyCode || evt.which;\r\n                    if (evt.altKey && keyCode == 90) {\r\n                        UE.ui.buttons['fullscreen'].onclick();\r\n                    }\r\n                });\r\n                editor.addListener('wordcount', function (type) {\r\n                    setCount(this, me);\r\n                });\r\n                function setCount(editor, ui) {\r\n                    editor.setOpt({\r\n                        wordCount: true,\r\n                        maximumWords: 10000,\r\n                        wordCountMsg: editor.options.wordCountMsg || editor.getLang(\"wordCountMsg\"),\r\n                        wordOverFlowMsg: editor.options.wordOverFlowMsg || editor.getLang(\"wordOverFlowMsg\")\r\n                    });\r\n                    var opt = editor.options,\r\n                        max = opt.maximumWords,\r\n                        msg = opt.wordCountMsg,\r\n                        errMsg = opt.wordOverFlowMsg,\r\n                        countDom = ui.getDom('wordcount');\r\n                    if (!opt.wordCount) {\r\n                        return;\r\n                    }\r\n                    var count = editor.getContentLength(true);\r\n                    // console.log(countDom,'ccccccccc');\r\n                    if (count > max) {\r\n                        countDom.innerHTML = errMsg;\r\n                        editor.fireEvent(\"wordcountoverflow\");\r\n                    } else {\r\n                        countDom.innerHTML = msg.replace(\"{#leave}\", max - count).replace(\"{#count}\", count);\r\n                    }\r\n                }\r\n\r\n                editor.addListener('selectionchange', function () {\r\n                    if (editor.options.elementPathEnabled) {\r\n                        me[(editor.queryCommandState('elementpath') == -1 ? 'dis' : 'en') + 'ableElementPath']()\r\n                    }\r\n                    if (editor.options.scaleEnabled) {\r\n                        me[(editor.queryCommandState('scale') == -1 ? 'dis' : 'en') + 'ableScale']();\r\n\r\n                    }\r\n                });\r\n                var popup = new baidu.editor.ui.Popup({\r\n                    editor: editor,\r\n                    content: '',\r\n                    className: 'edui-bubble',\r\n                    _onEditButtonClick: function () {\r\n                        this.hide();\r\n                        editor.ui._dialogs.linkDialog.open();\r\n                    },\r\n                    _onImgEditButtonClick: function (name) {\r\n                        this.hide();\r\n                        editor.ui._dialogs[name] && editor.ui._dialogs[name].open();\r\n\r\n                    },\r\n                    _onImgSetFloat: function (value) {\r\n                        this.hide();\r\n                        editor.execCommand(\"imagefloat\", value);\r\n\r\n                    },\r\n                    _setIframeAlign: function (value) {\r\n                        var frame = popup.anchorEl;\r\n                        var newFrame = frame.cloneNode(true);\r\n                        switch (value) {\r\n                            case -2:\r\n                                newFrame.setAttribute(\"align\", \"\");\r\n                                break;\r\n                            case -1:\r\n                                newFrame.setAttribute(\"align\", \"left\");\r\n                                break;\r\n                            case 1:\r\n                                newFrame.setAttribute(\"align\", \"right\");\r\n                                break;\r\n                        }\r\n                        frame.parentNode.insertBefore(newFrame, frame);\r\n                        domUtils.remove(frame);\r\n                        popup.anchorEl = newFrame;\r\n                        popup.showAnchor(popup.anchorEl);\r\n                    },\r\n                    _updateIframe: function () {\r\n                        var frame = editor._iframe = popup.anchorEl;\r\n                        if (domUtils.hasClass(frame, 'ueditor_baidumap')) {\r\n                            editor.selection.getRange().selectNode(frame).select();\r\n                            editor.ui._dialogs.mapDialog.open();\r\n                            popup.hide();\r\n                        } else {\r\n                            editor.ui._dialogs.insertframeDialog.open();\r\n                            popup.hide();\r\n                        }\r\n                    },\r\n                    _onRemoveButtonClick: function (cmdName) {\r\n                        editor.execCommand(cmdName);\r\n                        this.hide();\r\n                    },\r\n                    queryAutoHide: function (el) {\r\n                        if (el && el.ownerDocument == editor.document) {\r\n                            if (el.tagName.toLowerCase() == 'img' || domUtils.findParentByTagName(el, 'a', true)) {\r\n                                return el !== popup.anchorEl;\r\n                            }\r\n                        }\r\n                        return baidu.editor.ui.Popup.prototype.queryAutoHide.call(this, el);\r\n                    }\r\n                });\r\n                popup.render();\r\n                if (editor.options.imagePopup) {\r\n                    editor.addListener('mouseover', function (t, evt) {\r\n                        evt = evt || window.event;\r\n                        var el = evt.target || evt.srcElement;\r\n                        if (editor.ui._dialogs.insertframeDialog && /iframe/ig.test(el.tagName)) {\r\n                            var html = popup.formatHtml(\r\n                                '<nobr>' + editor.getLang(\"property\") + ': <span onclick=$$._setIframeAlign(-2) class=\"edui-clickable\">' + editor.getLang(\"default\") + '</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(-1) class=\"edui-clickable\">' + editor.getLang(\"justifyleft\") + '</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(1) class=\"edui-clickable\">' + editor.getLang(\"justifyright\") + '</span>&nbsp;&nbsp;' +\r\n                                ' <span onclick=\"$$._updateIframe( this);\" class=\"edui-clickable\">' + editor.getLang(\"modify\") + '</span></nobr>');\r\n                            if (html) {\r\n                                popup.getDom('content').innerHTML = html;\r\n                                popup.anchorEl = el;\r\n                                popup.showAnchor(popup.anchorEl);\r\n                            } else {\r\n                                popup.hide();\r\n                            }\r\n                        }\r\n                    });\r\n                    editor.addListener('selectionchange', function (t, causeByUi) {\r\n                        if (!causeByUi) return;\r\n                        var html = '', str = \"\",\r\n                            img = editor.selection.getRange().getClosedNode(),\r\n                            dialogs = editor.ui._dialogs;\r\n                        if (img && img.tagName == 'IMG') {\r\n                            var dialogName = 'insertimageDialog';\r\n                            if (img.className.indexOf(\"edui-faked-video\") != -1 || img.className.indexOf(\"edui-upload-video\") != -1) {\r\n                                dialogName = \"insertvideoDialog\"\r\n                            }\r\n                            if (img.className.indexOf(\"edui-faked-webapp\") != -1) {\r\n                                dialogName = \"webappDialog\"\r\n                            }\r\n                            if (img.src.indexOf(\"http://api.map.baidu.com\") != -1) {\r\n                                dialogName = \"mapDialog\"\r\n                            }\r\n                            if (img.className.indexOf(\"edui-faked-music\") != -1) {\r\n                                dialogName = \"musicDialog\"\r\n                            }\r\n                            if (img.src.indexOf(\"http://maps.google.com/maps/api/staticmap\") != -1) {\r\n                                dialogName = \"gmapDialog\"\r\n                            }\r\n                            if (img.getAttribute(\"anchorname\")) {\r\n                                dialogName = \"anchorDialog\";\r\n                                html = popup.formatHtml(\r\n                                    '<nobr>' + editor.getLang(\"property\") + ': <span onclick=$$._onImgEditButtonClick(\"anchorDialog\") class=\"edui-clickable\">' + editor.getLang(\"modify\") + '</span>&nbsp;&nbsp;' +\r\n                                    '<span onclick=$$._onRemoveButtonClick(\\'anchor\\') class=\"edui-clickable\">' + editor.getLang(\"delete\") + '</span></nobr>');\r\n                            }\r\n                            if (img.getAttribute(\"word_img\")) {\r\n                                //todo 放到dialog去做查询\r\n                                editor.word_img = [img.getAttribute(\"word_img\")];\r\n                                dialogName = \"wordimageDialog\"\r\n                            }\r\n                            if (domUtils.hasClass(img, 'loadingclass') || domUtils.hasClass(img, 'loaderrorclass')) {\r\n                                dialogName = \"\";\r\n                            }\r\n                            if (!dialogs[dialogName]) {\r\n                                return;\r\n                            }\r\n                            str = '<nobr>' + editor.getLang(\"property\") + ': ' +\r\n                                '<span onclick=$$._onImgSetFloat(\"none\") class=\"edui-clickable\">' + editor.getLang(\"default\") + '</span>&nbsp;&nbsp;' +\r\n                                '<span onclick=$$._onImgSetFloat(\"left\") class=\"edui-clickable\">' + editor.getLang(\"justifyleft\") + '</span>&nbsp;&nbsp;' +\r\n                                '<span onclick=$$._onImgSetFloat(\"right\") class=\"edui-clickable\">' + editor.getLang(\"justifyright\") + '</span>&nbsp;&nbsp;' +\r\n                                '<span onclick=$$._onImgSetFloat(\"center\") class=\"edui-clickable\">' + editor.getLang(\"justifycenter\") + '</span>&nbsp;&nbsp;' +\r\n                                '<span onclick=\"$$._onImgEditButtonClick(\\'' + dialogName + '\\');\" class=\"edui-clickable\">' + editor.getLang(\"modify\") + '</span></nobr>';\r\n\r\n                            !html && (html = popup.formatHtml(str))\r\n\r\n                        }\r\n                        if (editor.ui._dialogs.linkDialog) {\r\n                            var link = editor.queryCommandValue('link');\r\n                            var url;\r\n                            if (link && (url = (link.getAttribute('_href') || link.getAttribute('href', 2)))) {\r\n                                var txt = url;\r\n                                if (url.length > 30) {\r\n                                    txt = url.substring(0, 20) + \"...\";\r\n                                }\r\n                                if (html) {\r\n                                    html += '<div style=\"height:5px;\"></div>'\r\n                                }\r\n                                html += popup.formatHtml(\r\n                                    '<nobr>' + editor.getLang(\"anthorMsg\") + ': <a target=\"_blank\" href=\"' + url + '\" title=\"' + url + '\" >' + txt + '</a>' +\r\n                                    ' <span class=\"edui-clickable\" onclick=\"$$._onEditButtonClick();\">' + editor.getLang(\"modify\") + '</span>' +\r\n                                    ' <span class=\"edui-clickable\" onclick=\"$$._onRemoveButtonClick(\\'unlink\\');\"> ' + editor.getLang(\"clear\") + '</span></nobr>');\r\n                                popup.showAnchor(link);\r\n                            }\r\n                        }\r\n\r\n                        if (html) {\r\n                            popup.getDom('content').innerHTML = html;\r\n                            popup.anchorEl = img || link;\r\n                            popup.showAnchor(popup.anchorEl);\r\n                        } else {\r\n                            popup.hide();\r\n                        }\r\n                    });\r\n                }\r\n\r\n            },\r\n            _initToolbars: function () {\r\n                var editor = this.editor;\r\n                var toolbars = this.toolbars || [];\r\n                var toolbarUis = [];\r\n                for (var i = 0; i < toolbars.length; i++) {\r\n                    var toolbar = toolbars[i];\r\n                    var toolbarUi = new baidu.editor.ui.Toolbar({ theme: editor.options.theme });\r\n                    for (var j = 0; j < toolbar.length; j++) {\r\n                        var toolbarItem = toolbar[j];\r\n                        var toolbarItemUi = null;\r\n                        if (typeof toolbarItem == 'string') {\r\n                            toolbarItem = toolbarItem.toLowerCase();\r\n                            if (toolbarItem == '|') {\r\n                                toolbarItem = 'Separator';\r\n                            }\r\n                            if (toolbarItem == '||') {\r\n                                toolbarItem = 'Breakline';\r\n                            }\r\n                            if (baidu.editor.ui[toolbarItem]) {\r\n                                toolbarItemUi = new baidu.editor.ui[toolbarItem](editor);\r\n                            }\r\n\r\n                            //fullscreen这里单独处理一下，放到首行去\r\n                            if (toolbarItem == 'fullscreen') {\r\n                                if (toolbarUis && toolbarUis[0]) {\r\n                                    toolbarUis[0].items.splice(0, 0, toolbarItemUi);\r\n                                } else {\r\n                                    toolbarItemUi && toolbarUi.items.splice(0, 0, toolbarItemUi);\r\n                                }\r\n\r\n                                continue;\r\n\r\n\r\n                            }\r\n                        } else {\r\n                            toolbarItemUi = toolbarItem;\r\n                        }\r\n                        if (toolbarItemUi && toolbarItemUi.id) {\r\n\r\n                            toolbarUi.add(toolbarItemUi);\r\n                        }\r\n                    }\r\n                    toolbarUis[i] = toolbarUi;\r\n                }\r\n\r\n                //接受外部定制的UI\r\n\r\n                utils.each(UE._customizeUI, function (obj, key) {\r\n                    var itemUI, index;\r\n                    if (obj.id && obj.id != editor.key) {\r\n                        return false;\r\n                    }\r\n                    itemUI = obj.execFn.call(editor, editor, key);\r\n                    if (itemUI) {\r\n                        index = obj.index;\r\n                        if (index === undefined) {\r\n                            index = toolbarUi.items.length;\r\n                        }\r\n                        toolbarUi.add(itemUI, index)\r\n                    }\r\n                });\r\n\r\n                this.toolbars = toolbarUis;\r\n            },\r\n            getHtmlTpl: function () {\r\n                return '<div id=\"##\" class=\"%%\">' +\r\n                    '<div id=\"##_toolbarbox\" class=\"%%-toolbarbox\">' +\r\n                    (this.toolbars.length ?\r\n                        '<div id=\"##_toolbarboxouter\" class=\"%%-toolbarboxouter\"><div class=\"%%-toolbarboxinner\">' +\r\n                        this.renderToolbarBoxHtml() +\r\n                        '</div></div>' : '') +\r\n                    '<div id=\"##_toolbarmsg\" class=\"%%-toolbarmsg\" style=\"display:none;\">' +\r\n                    '<div id = \"##_upload_dialog\" class=\"%%-toolbarmsg-upload\" onclick=\"$$.showWordImageDialog();\">' + this.editor.getLang(\"clickToUpload\") + '</div>' +\r\n                    '<div class=\"%%-toolbarmsg-close\" onclick=\"$$.hideToolbarMsg();\">x</div>' +\r\n                    '<div id=\"##_toolbarmsg_label\" class=\"%%-toolbarmsg-label\"></div>' +\r\n                    '<div style=\"height:0;overflow:hidden;clear:both;\"></div>' +\r\n                    '</div>' +\r\n                    '<div id=\"##_message_holder\" class=\"%%-messageholder\"></div>' +\r\n                    '</div>' +\r\n                    '<div id=\"##_iframeholder\" class=\"%%-iframeholder\">' +\r\n                    '</div>' +\r\n                    //modify wdcount by matao\r\n                    '<div id=\"##_bottombar\" class=\"%%-bottomContainer\"><table><tr>' +\r\n                    '<td id=\"##_elementpath\" class=\"%%-bottombar\"></td>' +\r\n                    '<td id=\"##_wordcount\" class=\"%%-wordcount\"></td>' +\r\n                    '<td id=\"##_scale\" class=\"%%-scale\"><div class=\"%%-icon\"></div></td>' +\r\n                    '</tr></table></div>' +\r\n                    '<div id=\"##_scalelayer\"></div>' +\r\n                    '</div>';\r\n            },\r\n            showWordImageDialog: function () {\r\n                this._dialogs['wordimageDialog'].open();\r\n            },\r\n            renderToolbarBoxHtml: function () {\r\n                var buff = [];\r\n                for (var i = 0; i < this.toolbars.length; i++) {\r\n                    buff.push(this.toolbars[i].renderHtml());\r\n                }\r\n                return buff.join('');\r\n            },\r\n            setFullScreen: function (fullscreen) {\r\n\r\n                var editor = this.editor,\r\n                    container = editor.container.parentNode.parentNode;\r\n                if (this._fullscreen != fullscreen) {\r\n                    this._fullscreen = fullscreen;\r\n                    this.editor.fireEvent('beforefullscreenchange', fullscreen);\r\n                    if (baidu.editor.browser.gecko) {\r\n                        var bk = editor.selection.getRange().createBookmark();\r\n                    }\r\n                    if (fullscreen) {\r\n                        while (container.tagName != \"BODY\") {\r\n                            var position = baidu.editor.dom.domUtils.getComputedStyle(container, \"position\");\r\n                            nodeStack.push(position);\r\n                            container.style.position = \"static\";\r\n                            container = container.parentNode;\r\n                        }\r\n                        this._bakHtmlOverflow = document.documentElement.style.overflow;\r\n                        this._bakBodyOverflow = document.body.style.overflow;\r\n                        this._bakAutoHeight = this.editor.autoHeightEnabled;\r\n                        this._bakScrollTop = Math.max(document.documentElement.scrollTop, document.body.scrollTop);\r\n\r\n                        this._bakEditorContaninerWidth = editor.iframe.parentNode.offsetWidth;\r\n                        if (this._bakAutoHeight) {\r\n                            //当全屏时不能执行自动长高\r\n                            editor.autoHeightEnabled = false;\r\n                            this.editor.disableAutoHeight();\r\n                        }\r\n\r\n                        document.documentElement.style.overflow = 'hidden';\r\n                        //修复，滚动条不收起的问题\r\n\r\n                        window.scrollTo(0, window.scrollY);\r\n                        this._bakCssText = this.getDom().style.cssText;\r\n                        this._bakCssText1 = this.getDom('iframeholder').style.cssText;\r\n                        editor.iframe.parentNode.style.width = '';\r\n                        this._updateFullScreen();\r\n                    } else {\r\n                        while (container.tagName != \"BODY\") {\r\n                            container.style.position = nodeStack.shift();\r\n                            container = container.parentNode;\r\n                        }\r\n                        this.getDom().style.cssText = this._bakCssText;\r\n                        this.getDom('iframeholder').style.cssText = this._bakCssText1;\r\n                        if (this._bakAutoHeight) {\r\n                            editor.autoHeightEnabled = true;\r\n                            this.editor.enableAutoHeight();\r\n                        }\r\n\r\n                        document.documentElement.style.overflow = this._bakHtmlOverflow;\r\n                        document.body.style.overflow = this._bakBodyOverflow;\r\n                        editor.iframe.parentNode.style.width = this._bakEditorContaninerWidth + 'px';\r\n                        window.scrollTo(0, this._bakScrollTop);\r\n                    }\r\n                    if (browser.gecko && editor.body.contentEditable === 'true') {\r\n                        var input = document.createElement('input');\r\n                        document.body.appendChild(input);\r\n                        editor.body.contentEditable = false;\r\n                        setTimeout(function () {\r\n                            input.focus();\r\n                            setTimeout(function () {\r\n                                editor.body.contentEditable = true;\r\n                                editor.fireEvent('fullscreenchanged', fullscreen);\r\n                                editor.selection.getRange().moveToBookmark(bk).select(true);\r\n                                baidu.editor.dom.domUtils.remove(input);\r\n                                fullscreen && window.scroll(0, 0);\r\n                            }, 0)\r\n                        }, 0)\r\n                    }\r\n\r\n                    if (editor.body.contentEditable === 'true') {\r\n                        this.editor.fireEvent('fullscreenchanged', fullscreen);\r\n                        this.triggerLayout();\r\n                    }\r\n\r\n                }\r\n            },\r\n            _updateFullScreen: function () {\r\n                if (this._fullscreen) {\r\n                    var vpRect = uiUtils.getViewportRect();\r\n                    this.getDom().style.cssText = 'border:0;position:absolute;left:0;top:' + (this.editor.options.topOffset || 0) + 'px;width:' + vpRect.width + 'px;height:' + vpRect.height + 'px;z-index:' + (this.getDom().style.zIndex * 1 + 100);\r\n                    uiUtils.setViewportOffset(this.getDom(), { left: 0, top: this.editor.options.topOffset || 0 });\r\n                    this.editor.setHeight(vpRect.height - this.getDom('toolbarbox').offsetHeight - this.getDom('bottombar').offsetHeight - (this.editor.options.topOffset || 0), true);\r\n                    //不手动调一下，会导致全屏失效\r\n                    if (browser.gecko) {\r\n                        try {\r\n                            window.onresize();\r\n                        } catch (e) {\r\n\r\n                        }\r\n\r\n                    }\r\n                }\r\n            },\r\n            _updateElementPath: function () {\r\n                var bottom = this.getDom('elementpath'), list;\r\n                if (this.elementPathEnabled && (list = this.editor.queryCommandValue('elementpath'))) {\r\n\r\n                    var buff = [];\r\n                    for (var i = 0, ci; ci = list[i]; i++) {\r\n                        buff[i] = this.formatHtml('<span unselectable=\"on\" onclick=\"$$.editor.execCommand(&quot;elementpath&quot;, &quot;' + i + '&quot;);\">' + ci + '</span>');\r\n                    }\r\n                    bottom.innerHTML = '<div class=\"edui-editor-breadcrumb\" onmousedown=\"return false;\">' + this.editor.getLang(\"elementPathTip\") + ': ' + buff.join(' &gt; ') + '</div>';\r\n\r\n                } else {\r\n                    bottom.style.display = 'none'\r\n                }\r\n            },\r\n            disableElementPath: function () {\r\n                var bottom = this.getDom('elementpath');\r\n                bottom.innerHTML = '';\r\n                bottom.style.display = 'none';\r\n                this.elementPathEnabled = false;\r\n\r\n            },\r\n            enableElementPath: function () {\r\n                var bottom = this.getDom('elementpath');\r\n                bottom.style.display = '';\r\n                this.elementPathEnabled = true;\r\n                this._updateElementPath();\r\n            },\r\n            _scale: function () {\r\n                var doc = document,\r\n                    editor = this.editor,\r\n                    editorHolder = editor.container,\r\n                    editorDocument = editor.document,\r\n                    toolbarBox = this.getDom(\"toolbarbox\"),\r\n                    bottombar = this.getDom(\"bottombar\"),\r\n                    scale = this.getDom(\"scale\"),\r\n                    scalelayer = this.getDom(\"scalelayer\");\r\n\r\n                var isMouseMove = false,\r\n                    position = null,\r\n                    minEditorHeight = 0,\r\n                    minEditorWidth = editor.options.minFrameWidth,\r\n                    pageX = 0,\r\n                    pageY = 0,\r\n                    scaleWidth = 0,\r\n                    scaleHeight = 0;\r\n\r\n                function down() {\r\n                    position = domUtils.getXY(editorHolder);\r\n\r\n                    if (!minEditorHeight) {\r\n                        minEditorHeight = editor.options.minFrameHeight + toolbarBox.offsetHeight + bottombar.offsetHeight;\r\n                    }\r\n\r\n                    scalelayer.style.cssText = \"position:absolute;left:0;display:;top:0;background-color:#41ABFF;opacity:0.4;filter: Alpha(opacity=40);width:\" + editorHolder.offsetWidth + \"px;height:\"\r\n                        + editorHolder.offsetHeight + \"px;z-index:\" + (editor.options.zIndex + 1);\r\n\r\n                    domUtils.on(doc, \"mousemove\", move);\r\n                    domUtils.on(editorDocument, \"mouseup\", up);\r\n                    domUtils.on(doc, \"mouseup\", up);\r\n                }\r\n\r\n                var me = this;\r\n                //by xuheng 全屏时关掉缩放\r\n                this.editor.addListener('fullscreenchanged', function (e, fullScreen) {\r\n                    if (fullScreen) {\r\n                        me.disableScale();\r\n\r\n                    } else {\r\n                        if (me.editor.options.scaleEnabled) {\r\n                            me.enableScale();\r\n                            var tmpNode = me.editor.document.createElement('span');\r\n                            me.editor.body.appendChild(tmpNode);\r\n                            me.editor.body.style.height = Math.max(domUtils.getXY(tmpNode).y, me.editor.iframe.offsetHeight - 20) + 'px';\r\n                            domUtils.remove(tmpNode)\r\n                        }\r\n                    }\r\n                });\r\n                function move(event) {\r\n                    clearSelection();\r\n                    var e = event || window.event;\r\n                    pageX = e.pageX || (doc.documentElement.scrollLeft + e.clientX);\r\n                    pageY = e.pageY || (doc.documentElement.scrollTop + e.clientY);\r\n                    scaleWidth = pageX - position.x;\r\n                    scaleHeight = pageY - position.y;\r\n\r\n                    if (scaleWidth >= minEditorWidth) {\r\n                        isMouseMove = true;\r\n                        scalelayer.style.width = scaleWidth + 'px';\r\n                    }\r\n                    if (scaleHeight >= minEditorHeight) {\r\n                        isMouseMove = true;\r\n                        scalelayer.style.height = scaleHeight + \"px\";\r\n                    }\r\n                }\r\n\r\n                function up() {\r\n                    if (isMouseMove) {\r\n                        isMouseMove = false;\r\n                        editor.ui._actualFrameWidth = scalelayer.offsetWidth - 2;\r\n                        editorHolder.style.width = editor.ui._actualFrameWidth + 'px';\r\n\r\n                        editor.setHeight(scalelayer.offsetHeight - bottombar.offsetHeight - toolbarBox.offsetHeight - 2, true);\r\n                    }\r\n                    if (scalelayer) {\r\n                        scalelayer.style.display = \"none\";\r\n                    }\r\n                    clearSelection();\r\n                    domUtils.un(doc, \"mousemove\", move);\r\n                    domUtils.un(editorDocument, \"mouseup\", up);\r\n                    domUtils.un(doc, \"mouseup\", up);\r\n                }\r\n\r\n                function clearSelection() {\r\n                    if (browser.ie)\r\n                        doc.selection.clear();\r\n                    else\r\n                        window.getSelection().removeAllRanges();\r\n                }\r\n\r\n                this.enableScale = function () {\r\n                    //trace:2868\r\n                    if (editor.queryCommandState(\"source\") == 1) return;\r\n                    scale.style.display = \"\";\r\n                    this.scaleEnabled = true;\r\n                    domUtils.on(scale, \"mousedown\", down);\r\n                };\r\n                this.disableScale = function () {\r\n                    scale.style.display = \"none\";\r\n                    this.scaleEnabled = false;\r\n                    domUtils.un(scale, \"mousedown\", down);\r\n                };\r\n            },\r\n            isFullScreen: function () {\r\n                return this._fullscreen;\r\n            },\r\n            postRender: function () {\r\n                UIBase.prototype.postRender.call(this);\r\n                for (var i = 0; i < this.toolbars.length; i++) {\r\n                    this.toolbars[i].postRender();\r\n                }\r\n                var me = this;\r\n                var timerId,\r\n                    domUtils = baidu.editor.dom.domUtils,\r\n                    updateFullScreenTime = function () {\r\n                        clearTimeout(timerId);\r\n                        timerId = setTimeout(function () {\r\n                            me._updateFullScreen();\r\n                        });\r\n                    };\r\n                domUtils.on(window, 'resize', updateFullScreenTime);\r\n\r\n                me.addListener('destroy', function () {\r\n                    domUtils.un(window, 'resize', updateFullScreenTime);\r\n                    clearTimeout(timerId);\r\n                })\r\n            },\r\n            showToolbarMsg: function (msg, flag) {\r\n                this.getDom('toolbarmsg_label').innerHTML = msg;\r\n                this.getDom('toolbarmsg').style.display = '';\r\n                //\r\n                if (!flag) {\r\n                    var w = this.getDom('upload_dialog');\r\n                    w.style.display = 'none';\r\n                }\r\n            },\r\n            hideToolbarMsg: function () {\r\n                this.getDom('toolbarmsg').style.display = 'none';\r\n            },\r\n            mapUrl: function (url) {\r\n                return url ? url.replace('~/', this.editor.options.UEDITOR_HOME_URL || '') : ''\r\n            },\r\n            triggerLayout: function () {\r\n                var dom = this.getDom();\r\n                if (dom.style.zoom == '1') {\r\n                    dom.style.zoom = '100%';\r\n                } else {\r\n                    dom.style.zoom = '1';\r\n                }\r\n            }\r\n        };\r\n        utils.inherits(EditorUI, baidu.editor.ui.UIBase);\r\n\r\n\r\n        var instances = {};\r\n\r\n\r\n        UE.ui.Editor = function (options) {\r\n            // console.log(options,'eeeeeee');\r\n            var editor = new UE.Editor(options);\r\n            editor.options.editor = editor;\r\n            // utils.loadFile(document, {\r\n            //     href: editor.options.themePath + editor.options.theme + \"/css/ueditor.css\",\r\n            //     tag: \"link\",\r\n            //     type: \"text/css\",\r\n            //     rel: \"stylesheet\"\r\n            // });\r\n\r\n            var oldRender = editor.render;\r\n\r\n            editor.render = function (holder) {\r\n                // console.log(holder,'rrrrrrrr');\r\n                if (holder.constructor === String) {\r\n                    editor.key = holder;\r\n                    instances[holder] = editor;\r\n                }\r\n                utils.domReady(function () {\r\n                    editor.langIsReady ? renderUI() : editor.addListener(\"langReady\", renderUI);\r\n                    function renderUI() {\r\n                        editor.setOpt({\r\n                            labelMap: editor.options.labelMap || editor.getLang('labelMap')\r\n                        });\r\n                        new EditorUI(editor.options);\r\n                        if (holder) {\r\n                            if (holder.constructor === String) {\r\n                                holder = document.getElementById(holder);\r\n                            }\r\n                            holder && holder.getAttribute('name') && (editor.options.textarea = holder.getAttribute('name'));\r\n                            if (holder && /script|textarea/ig.test(holder.tagName)) {\r\n                                var newDiv = document.createElement('div');\r\n                                holder.parentNode.insertBefore(newDiv, holder);\r\n                                var cont = holder.value || holder.innerHTML;\r\n                                editor.options.initialContent = /^[\\t\\r\\n ]*$/.test(cont) ? editor.options.initialContent :\r\n                                    cont.replace(/>[\\n\\r\\t]+([ ]{4})+/g, '>')\r\n                                        .replace(/[\\n\\r\\t]+([ ]{4})+</g, '<')\r\n                                        .replace(/>[\\n\\r\\t]+</g, '><');\r\n                                holder.className && (newDiv.className = holder.className);\r\n                                holder.style.cssText && (newDiv.style.cssText = holder.style.cssText);\r\n                                if (/textarea/i.test(holder.tagName)) {\r\n                                    editor.textarea = holder;\r\n                                    editor.textarea.style.display = 'none';\r\n\r\n\r\n                                } else {\r\n                                    holder.parentNode.removeChild(holder);\r\n\r\n\r\n                                }\r\n                                if (holder.id) {\r\n                                    newDiv.id = holder.id;\r\n                                    domUtils.removeAttributes(holder, 'id');\r\n                                }\r\n                                holder = newDiv;\r\n                                holder.innerHTML = '';\r\n                            }\r\n\r\n                        }\r\n                        domUtils.addClass(holder, \"edui-\" + editor.options.theme);\r\n                        editor.ui.render(holder);\r\n                        var opt = editor.options;\r\n                        //给实例添加一个编辑器的容器引用\r\n                        editor.container = editor.ui.getDom();\r\n                        var parents = domUtils.findParents(holder, true);\r\n                        var displays = [];\r\n                        for (var i = 0, ci; ci = parents[i]; i++) {\r\n                            displays[i] = ci.style.display;\r\n                            ci.style.display = 'block'\r\n                        }\r\n                        if (opt.initialFrameWidth) {\r\n                            opt.minFrameWidth = opt.initialFrameWidth;\r\n                        } else {\r\n                            opt.minFrameWidth = opt.initialFrameWidth = holder.offsetWidth;\r\n                            var styleWidth = holder.style.width;\r\n                            if (/%$/.test(styleWidth)) {\r\n                                opt.initialFrameWidth = styleWidth;\r\n                            }\r\n                        }\r\n                        if (opt.initialFrameHeight) {\r\n                            opt.minFrameHeight = opt.initialFrameHeight;\r\n                        } else {\r\n                            opt.initialFrameHeight = opt.minFrameHeight = holder.offsetHeight;\r\n                        }\r\n                        for (var i = 0, ci; ci = parents[i]; i++) {\r\n                            ci.style.display = displays[i]\r\n                        }\r\n                        //编辑器最外容器设置了高度，会导致，编辑器不占位\r\n                        //todo 先去掉，没有找到原因\r\n                        if (holder.style.height) {\r\n                            holder.style.height = ''\r\n                        }\r\n                        editor.container.style.width = opt.initialFrameWidth + (/%$/.test(opt.initialFrameWidth) ? '' : 'px');\r\n                        editor.container.style.zIndex = opt.zIndex;\r\n                        oldRender.call(editor, editor.ui.getDom('iframeholder'));\r\n                        editor.fireEvent(\"afteruiready\");\r\n                    }\r\n                })\r\n            };\r\n            return editor;\r\n        };\r\n\r\n\r\n        /**\r\n         * @file\r\n         * @name UE\r\n         * @short UE\r\n         * @desc UEditor的顶部命名空间\r\n         */\r\n        /**\r\n         * @name getEditor\r\n         * @since 1.2.4+\r\n         * @grammar UE.getEditor(id,[opt])  =>  Editor实例\r\n         * @desc 提供一个全局的方法得到编辑器实例\r\n         *\r\n         * * ''id''  放置编辑器的容器id, 如果容器下的编辑器已经存在，就直接返回\r\n         * * ''opt'' 编辑器的可选参数\r\n         * @example\r\n         *  UE.getEditor('containerId',{onready:function(){//创建一个编辑器实例\r\n         *      this.setContent('hello')\r\n         *  }});\r\n         *  UE.getEditor('containerId'); //返回刚创建的实例\r\n         *\r\n         */\r\n        UE.getEditor = function (id, opt) {\r\n            // console.log(instances,111111);\r\n            var editor = instances[id];\r\n            // console.log(editor,111111111);\r\n            if (!editor) {\r\n                editor = instances[id] = new UE.ui.Editor(opt);\r\n                editor.render(id);\r\n            }\r\n            return editor;\r\n        };\r\n\r\n\r\n        UE.delEditor = function (id) {\r\n            var editor;\r\n            if (editor = instances[id]) {\r\n                editor.key && editor.destroy();\r\n                delete instances[id]\r\n            }\r\n        };\r\n\r\n        UE.registerUI = function (uiName, fn, index, editorId) {\r\n            utils.each(uiName.split(/\\s+/), function (name) {\r\n                UE._customizeUI[name] = {\r\n                    id: editorId,\r\n                    execFn: fn,\r\n                    index: index\r\n                };\r\n            })\r\n\r\n        }\r\n\r\n    })();\r\n\r\n    // adapter/message.js\r\n    UE.registerUI('message', function (editor) {\r\n\r\n        var editorui = baidu.editor.ui;\r\n        var Message = editorui.Message;\r\n        var holder;\r\n        var _messageItems = [];\r\n        var me = editor;\r\n\r\n        me.addListener('ready', function () {\r\n            holder = document.getElementById(me.ui.id + '_message_holder');\r\n            updateHolderPos();\r\n            setTimeout(function () {\r\n                updateHolderPos();\r\n            }, 500);\r\n        });\r\n\r\n        me.addListener('showmessage', function (type, opt) {\r\n            opt = utils.isString(opt) ? {\r\n                'content': opt\r\n            } : opt;\r\n            var message = new Message({\r\n                'timeout': opt.timeout,\r\n                'type': opt.type,\r\n                'content': opt.content,\r\n                'keepshow': opt.keepshow,\r\n                'editor': me\r\n            }),\r\n                mid = opt.id || ('msg_' + (+new Date()).toString(36));\r\n            message.render(holder);\r\n            _messageItems[mid] = message;\r\n            message.reset(opt);\r\n            updateHolderPos();\r\n            return mid;\r\n        });\r\n\r\n        me.addListener('updatemessage', function (type, id, opt) {\r\n            opt = utils.isString(opt) ? {\r\n                'content': opt\r\n            } : opt;\r\n            var message = _messageItems[id];\r\n            message.render(holder);\r\n            message && message.reset(opt);\r\n        });\r\n\r\n        me.addListener('hidemessage', function (type, id) {\r\n            var message = _messageItems[id];\r\n            message && message.hide();\r\n        });\r\n\r\n        function updateHolderPos() {\r\n            var toolbarbox = me.ui.getDom('toolbarbox');\r\n            if (toolbarbox) {\r\n                holder.style.top = toolbarbox.offsetHeight + 3 + 'px';\r\n            }\r\n            holder.style.zIndex = Math.max(me.options.zIndex, me.iframe.style.zIndex) + 1;\r\n        }\r\n\r\n    });\r\n\r\n\r\n    // adapter/autosave.js\r\n    UE.registerUI('autosave', function (editor) {\r\n        var timer = null, uid = null;\r\n        editor.on('afterautosave', function () {\r\n            clearTimeout(timer);\r\n\r\n            timer = setTimeout(function () {\r\n                if (uid) {\r\n                    editor.trigger('hidemessage', uid);\r\n                }\r\n                uid = editor.trigger('showmessage', {\r\n                    content: editor.getLang('autosave.success'),\r\n                    timeout: 2000\r\n                });\r\n\r\n            }, 2000)\r\n        })\r\n\r\n    });\n\n\n// WEBPACK FOOTER //\n// ./../ehuodiManagement/scms/trunk/src/libs/ueditor/ueditor.all.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../../../angular-ui-webpack/node_modules/._css-loader@0.28.7@css-loader/index.js!../../../../../../../../../angular-ui-webpack/node_modules/._postcss-loader@2.0.9@postcss-loader/lib/index.js??postcss!./ueditor.css\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../../../../../../angular-ui-webpack/node_modules/._style-loader@0.19.1@style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../../../../../angular-ui-webpack/node_modules/._css-loader@0.28.7@css-loader/index.js!../../../../../../../../../angular-ui-webpack/node_modules/._postcss-loader@2.0.9@postcss-loader/lib/index.js??postcss!./ueditor.css\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../../../../../angular-ui-webpack/node_modules/._css-loader@0.28.7@css-loader/index.js!../../../../../../../../../angular-ui-webpack/node_modules/._postcss-loader@2.0.9@postcss-loader/lib/index.js??postcss!./ueditor.css\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/css/ueditor.css\n// module id = 130\n// module chunks = 0","exports = module.exports = require(\"../../../../../../../../../angular-ui-webpack/node_modules/._css-loader@0.28.7@css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"/*基础UI构建\\r\\n*/\\r\\n/* common layer */\\r\\n.edui-default .edui-box {\\r\\n    border: none;\\r\\n    padding: 0;\\r\\n    margin: 0;\\r\\n    overflow: hidden;\\r\\n}\\r\\n\\r\\n.edui-default a.edui-box {\\r\\n    display: block;\\r\\n    text-decoration: none;\\r\\n    color: black;\\r\\n}\\r\\n\\r\\n.edui-default a.edui-box:hover {\\r\\n    text-decoration: none;\\r\\n}\\r\\n\\r\\n.edui-default a.edui-box:active {\\r\\n    text-decoration: none;\\r\\n}\\r\\n\\r\\n.edui-default table.edui-box {\\r\\n    border-collapse: collapse;\\r\\n}\\r\\n\\r\\n.edui-default ul.edui-box {\\r\\n    list-style-type: none;\\r\\n}\\r\\n\\r\\ndiv.edui-box {\\r\\n    position: relative;\\r\\n    display: inline-block !important;\\r\\n    vertical-align: top;\\r\\n}\\r\\n\\r\\n.edui-default .edui-clearfix {\\r\\n    zoom: 1\\r\\n}\\r\\n\\r\\n.edui-default .edui-clearfix:after {\\r\\n    content: ' ';\\r\\n    display: block;\\r\\n    clear: both;\\r\\n}\\r\\n\\r\\n * html div.edui-box {\\r\\n    display: inline !important;\\r\\n}\\r\\n\\r\\n*:first-child+html div.edui-box {\\r\\n    display: inline !important;\\r\\n}\\r\\n\\r\\n/* control layout */\\r\\n.edui-default .edui-button-body, .edui-splitbutton-body, .edui-menubutton-body, .edui-combox-body {\\r\\n    position: relative;\\r\\n}\\r\\n\\r\\n.edui-default .edui-popup {\\r\\n    position: absolute;\\r\\n    -webkit-user-select: none;\\r\\n    -moz-user-select: none;\\r\\n}\\r\\n\\r\\n.edui-default .edui-popup .edui-shadow {\\r\\n    position: absolute;\\r\\n    z-index: -1;\\r\\n}\\r\\n\\r\\n.edui-default .edui-popup .edui-bordereraser {\\r\\n    position: absolute;\\r\\n    overflow: hidden;\\r\\n}\\r\\n\\r\\n.edui-default .edui-tablepicker .edui-canvas {\\r\\n    position: relative;\\r\\n}\\r\\n\\r\\n.edui-default .edui-tablepicker .edui-canvas .edui-overlay {\\r\\n    position: absolute;\\r\\n}\\r\\n\\r\\n.edui-default .edui-dialog-modalmask, .edui-dialog-dragmask {\\r\\n    position: absolute;\\r\\n    left: 0;\\r\\n    top: 0;\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n}\\r\\n\\r\\n.edui-default .edui-toolbar {\\r\\n    position: relative;\\r\\n}\\r\\n\\r\\n/*\\r\\n * default theme\\r\\n */\\r\\n.edui-default .edui-label {\\r\\n    cursor: default;\\r\\n}\\r\\n\\r\\n.edui-default span.edui-clickable {\\r\\n    color: blue;\\r\\n    cursor: pointer;\\r\\n    text-decoration: underline;\\r\\n}\\r\\n\\r\\n.edui-default span.edui-unclickable {\\r\\n    color: gray;\\r\\n    cursor: default;\\r\\n}\\r\\n/* 工具栏 */\\r\\n.edui-default .edui-toolbar {\\r\\n    cursor: default;\\r\\n    -webkit-user-select: none;\\r\\n    -moz-user-select: none;\\r\\n    padding: 1px;\\r\\n    overflow: hidden; /*全屏下单独一行不占位*/\\r\\n    zoom: 1;\\r\\n    width:auto;\\r\\n    height:auto;\\r\\n}\\r\\n\\r\\n.edui-default .edui-toolbar .edui-button,\\r\\n.edui-default .edui-toolbar .edui-splitbutton,\\r\\n.edui-default .edui-toolbar .edui-menubutton,\\r\\n.edui-default .edui-toolbar .edui-combox {\\r\\n    margin: 1px;\\r\\n}\\r\\n/*UI工具栏、编辑区域、底部*/\\r\\n.edui-default .edui-editor {\\r\\n    border: 1px solid #d4d4d4;\\r\\n    background-color: white;\\r\\n    position: relative;\\r\\n    overflow: visible;\\r\\n    border-radius: 4px;\\r\\n}\\r\\n.edui-editor div{\\r\\n    width:auto;\\r\\n    height:auto;\\r\\n}\\r\\n.edui-default .edui-editor-toolbarbox {\\r\\n    position: relative;\\r\\n    zoom: 1;\\r\\n    -webkit-box-shadow:0 1px 4px rgba(204, 204, 204, 0.6);\\r\\n            box-shadow:0 1px 4px rgba(204, 204, 204, 0.6);\\r\\n    border-top-left-radius:2px;\\r\\n    border-top-right-radius:2px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-editor-toolbarboxouter {\\r\\n    border-bottom: 1px solid #d4d4d4;\\r\\n    background-color: #fafafa;\\r\\n    background-image: -webkit-gradient(linear, left top, left bottom, from(#ffffff), to(#f2f2f2));\\r\\n    background-image: linear-gradient(to bottom, #ffffff, #f2f2f2);\\r\\n    background-repeat: repeat-x;\\r\\n    /*border: 1px solid #d4d4d4;*/\\r\\n    border-radius: 4px 4px 0 0;\\r\\n    -webkit-box-shadow: 0 1px 4px rgba(0, 0, 0, 0.065);\\r\\n            box-shadow: 0 1px 4px rgba(0, 0, 0, 0.065);\\r\\n}\\r\\n\\r\\n.edui-default .edui-editor-toolbarboxinner {\\r\\n    padding: 2px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-editor-iframeholder {\\r\\n    position: relative;\\r\\n    /*for fix ie6 toolbarmsg under iframe bug. relative -> static */\\r\\n    /*_position: static !important;*\\r\\n}\\r\\n\\r\\n.edui-default .edui-editor-iframeholder textarea {\\r\\n    font-family: consolas, \\\"Courier New\\\", \\\"lucida console\\\", monospace;\\r\\n    font-size: 12px;\\r\\n    line-height: 18px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-editor-bottombar {\\r\\n    /*border-top: 1px solid #ccc;*/\\r\\n    /*height: 20px;*/\\r\\n    /*width: 40%;*/\\r\\n    /*float: left;*/\\r\\n    /*overflow: hidden;*/\\r\\n}\\r\\n\\r\\n.edui-default .edui-editor-bottomContainer {\\r\\n    overflow: hidden;\\r\\n}\\r\\n\\r\\n.edui-default .edui-editor-bottomContainer table {\\r\\n    width: 100%;\\r\\n    height: 0;\\r\\n    overflow: hidden;\\r\\n    border-spacing: 0;\\r\\n}\\r\\n\\r\\n.edui-default .edui-editor-bottomContainer td {\\r\\n    white-space: nowrap;\\r\\n    border-top: 1px solid #ccc;\\r\\n    line-height: 20px;\\r\\n    font-size: 12px;\\r\\n    font-family: Arial, Helvetica, Tahoma, Verdana, Sans-Serif;\\r\\n}\\r\\n\\r\\n.edui-default .edui-editor-wordcount {\\r\\n    text-align: right;\\r\\n    margin-right: 5px;\\r\\n    color: #aaa;\\r\\n}\\r\\n.edui-default .edui-editor-scale {\\r\\n    width: 12px;\\r\\n}\\r\\n.edui-default .edui-editor-scale .edui-editor-icon {\\r\\n    float: right;\\r\\n    width: 100%;\\r\\n    height: 12px;\\r\\n    margin-top: 10px;\\r\\n    background: url(\" + require(\"../images/scale.png\") + \") no-repeat;\\r\\n    cursor: se-resize;\\r\\n}\\r\\n.edui-default .edui-editor-breadcrumb {\\r\\n    margin: 2px 0 0 3px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-editor-breadcrumb span {\\r\\n    cursor: pointer;\\r\\n    text-decoration: underline;\\r\\n    color: blue;\\r\\n}\\r\\n\\r\\n.edui-default .edui-toolbar .edui-for-fullscreen {\\r\\n    float: right;\\r\\n}\\r\\n\\r\\n.edui-default .edui-bubble .edui-popup-content {\\r\\n    border: 1px solid #DCAC6C;\\r\\n    background-color: #fff6d9;\\r\\n    padding: 5px;\\r\\n    font-size: 10pt;\\r\\n    font-family: \\\"\\\\5B8B\\\\4F53\\\";\\r\\n}\\r\\n\\r\\n.edui-default .edui-bubble .edui-shadow {\\r\\n    /*box-shadow: 1px 1px 3px #818181;*/\\r\\n    /*filter: progid:DXImageTransform.Microsoft.Blur(PixelRadius = '2', MakeShadow = 'true', ShadowOpacity = '0.5');*/\\r\\n}\\r\\n\\r\\n.edui-default .edui-editor-toolbarmsg {\\r\\n    background-color: #FFF6D9;\\r\\n    border-bottom: 1px solid #ccc;\\r\\n    position: absolute;\\r\\n    bottom: -25px;\\r\\n    left: 0;\\r\\n    z-index: 1009;\\r\\n    width: 99.9%;\\r\\n}\\r\\n\\r\\n.edui-default .edui-editor-toolbarmsg-upload {\\r\\n    font-size: 14px;\\r\\n    color: blue;\\r\\n    width: 100px;\\r\\n    height: 16px;\\r\\n    line-height: 16px;\\r\\n    cursor: pointer;\\r\\n    position: absolute;\\r\\n    top: 5px;\\r\\n    left: 350px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-editor-toolbarmsg-label {\\r\\n    font-size: 12px;\\r\\n    line-height: 16px;\\r\\n    padding: 4px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-editor-toolbarmsg-close {\\r\\n    float: right;\\r\\n    width: 20px;\\r\\n    height: 16px;\\r\\n    line-height: 16px;\\r\\n    cursor: pointer;\\r\\n    color: red;\\r\\n}\\r\\n/*可选中菜单按钮*/\\r\\n.edui-default .edui-list .edui-bordereraser {\\r\\n    display: none;\\r\\n}\\r\\n\\r\\n.edui-default .edui-listitem {\\r\\n    padding: 1px;\\r\\n    white-space: nowrap;\\r\\n}\\r\\n\\r\\n.edui-default .edui-list .edui-state-hover {\\r\\n    position: relative;\\r\\n    background-color: #fff5d4;\\r\\n    border: 1px solid #dcac6c;\\r\\n    padding: 0;\\r\\n}\\r\\n\\r\\n.edui-default .edui-for-fontfamily .edui-listitem-label {\\r\\n    min-width: 130px;\\r\\n    font-size: 12px;\\r\\n    height: 22px;\\r\\n    line-height: 22px;\\r\\n    padding-left: 5px;\\r\\n}\\r\\n.edui-default .edui-for-insertcode .edui-listitem-label {\\r\\n    min-width: 120px;\\r\\n    font-size: 12px;\\r\\n    height: 22px;\\r\\n    line-height: 22px;\\r\\n    padding-left: 5px;\\r\\n}\\r\\n.edui-default .edui-for-underline .edui-listitem-label {\\r\\n    min-width: 120px;\\r\\n    padding: 3px 5px;\\r\\n    font-size: 12px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-for-fontsize .edui-listitem-label {\\r\\n    min-width: 120px;\\r\\n    padding: 3px 5px;\\r\\n\\r\\n}\\r\\n\\r\\n.edui-default .edui-for-paragraph .edui-listitem-label {\\r\\n    min-width: 200px;\\r\\n    padding: 2px 5px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-for-rowspacingtop .edui-listitem-label,\\r\\n.edui-default .edui-for-rowspacingbottom .edui-listitem-label {\\r\\n    min-width: 53px;\\r\\n    padding: 2px 5px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-for-lineheight .edui-listitem-label {\\r\\n    min-width: 53px;\\r\\n    padding: 2px 5px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-for-customstyle .edui-listitem-label {\\r\\n    min-width: 200px;\\r\\n    width: 200px !important;\\r\\n    padding: 2px 5px;\\r\\n}\\r\\n/* 可选中按钮弹出菜单*/\\r\\n.edui-default .edui-menu {\\r\\n    z-index: 3000;\\r\\n}\\r\\n\\r\\n.edui-default .edui-menu .edui-popup-content {\\r\\n    padding: 3px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-menu-body {\\r\\n    min-width: 170px;\\r\\n    background: url(\" + require(\"../images/sparator_v.png\") + \") repeat-y 25px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-menuitem-body {\\r\\n}\\r\\n\\r\\n.edui-default .edui-menuitem {\\r\\n    height: 20px;\\r\\n    cursor: default;\\r\\n    vertical-align: top;\\r\\n}\\r\\n\\r\\n.edui-default .edui-menuitem .edui-icon {\\r\\n    width: 20px !important;\\r\\n    height: 20px !important;\\r\\n    background: url(\" + require(\"../images/icons.png\") + \") 0 -4000px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-menuitem .edui-label {\\r\\n    font-size: 12px;\\r\\n    line-height: 20px;\\r\\n    height: 20px;\\r\\n    padding-left: 10px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-state-checked .edui-menuitem-body {\\r\\n    background: url(\" + require(\"../images/icons-all.gif\") + \") no-repeat 6px -205px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-state-disabled .edui-menuitem-label {\\r\\n    color: gray;\\r\\n}\\r\\n\\r\\n\\r\\n/*不可选中菜单按钮 */\\r\\n.edui-default .edui-toolbar .edui-combox-body .edui-button-body {\\r\\n    width: 60px;\\r\\n    font-size: 12px;\\r\\n    height: 20px;\\r\\n    line-height: 20px;\\r\\n    padding-left: 5px;\\r\\n    white-space: nowrap;\\r\\n    margin: 0 3px 0 0;\\r\\n}\\r\\n\\r\\n.edui-default .edui-toolbar .edui-combox-body .edui-arrow {\\r\\n    background: url(\" + require(\"../images/icons.png\") + \") -741px 0;\\r\\n    height: 20px;\\r\\n    width: 9px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-toolbar .edui-combox .edui-combox-body {\\r\\n    border: 1px solid #CCC;\\r\\n    background-color: white;\\r\\n    border-radius: 2px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-toolbar .edui-combox-body .edui-splitborder {\\r\\n    display: none;\\r\\n}\\r\\n\\r\\n.edui-default .edui-toolbar .edui-combox-body .edui-arrow {\\r\\n    border-left: 1px solid #CCC;\\r\\n}\\r\\n\\r\\n.edui-default .edui-toolbar .edui-state-hover .edui-combox-body {\\r\\n    background-color: #fff5d4;\\r\\n    border: 1px solid #dcac6c;\\r\\n}\\r\\n\\r\\n.edui-default .edui-toolbar .edui-state-hover .edui-combox-body .edui-arrow {\\r\\n    border-left: 1px solid #dcac6c;\\r\\n}\\r\\n\\r\\n.edui-default .edui-toolbar .edui-state-checked .edui-combox-body {\\r\\n    background-color: #FFE69F;\\r\\n    border: 1px solid #DCAC6C;\\r\\n}\\r\\n\\r\\n.edui-toolbar .edui-state-checked .edui-combox-body .edui-arrow {\\r\\n    border-left: 1px solid #DCAC6C;\\r\\n}\\r\\n\\r\\n.edui-toolbar .edui-state-disabled .edui-combox-body {\\r\\n    background-color: #F0F0EE;\\r\\n    opacity: 0.3;\\r\\n}\\r\\n\\r\\n.edui-toolbar .edui-state-opened .edui-combox-body {\\r\\n    background-color: white;\\r\\n    border: 1px solid gray;\\r\\n}\\r\\n/*普通按钮样式及状态*/\\r\\n.edui-default .edui-toolbar .edui-button .edui-icon,\\r\\n.edui-default .edui-toolbar .edui-menubutton .edui-icon,\\r\\n.edui-default .edui-toolbar .edui-splitbutton .edui-icon {\\r\\n    height: 20px !important;\\r\\n    width: 20px !important;\\r\\n    background-image: url(\" + require(\"../images/icons.png\") + \");\\r\\n}\\r\\n\\r\\n.edui-default .edui-toolbar .edui-button .edui-button-wrap {\\r\\n    padding: 1px;\\r\\n    position: relative;\\r\\n}\\r\\n\\r\\n.edui-default .edui-toolbar .edui-button .edui-state-hover .edui-button-wrap {\\r\\n    background-color: #fff5d4;\\r\\n    padding: 0;\\r\\n    border: 1px solid #dcac6c;\\r\\n}\\r\\n\\r\\n.edui-default .edui-toolbar .edui-button .edui-state-checked .edui-button-wrap {\\r\\n    background-color: #ffe69f;\\r\\n    padding: 0;\\r\\n    border: 1px solid #dcac6c;\\r\\n    border-radius: 2px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-toolbar .edui-button .edui-state-active .edui-button-wrap {\\r\\n    background-color: #ffffff;\\r\\n    padding: 0;\\r\\n    border: 1px solid gray;\\r\\n}\\r\\n.edui-default .edui-toolbar .edui-state-disabled .edui-label {\\r\\n    color: #ccc;\\r\\n}\\r\\n.edui-default .edui-toolbar .edui-state-disabled .edui-icon {\\r\\n    opacity: 0.3;\\r\\n}\\r\\n\\r\\n/* toolbar icons */\\r\\n.edui-default .edui-for-undo .edui-icon {\\r\\n    background-position: -160px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-redo .edui-icon {\\r\\n    background-position: -100px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-bold .edui-icon {\\r\\n    background-position: 0 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-italic .edui-icon {\\r\\n    background-position: -60px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-fontborder .edui-icon {\\r\\n    background-position:-160px -40px;\\r\\n}\\r\\n.edui-default  .edui-for-underline .edui-icon {\\r\\n    background-position: -140px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-strikethrough .edui-icon {\\r\\n    background-position: -120px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-subscript .edui-icon {\\r\\n    background-position: -600px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-superscript .edui-icon {\\r\\n    background-position: -620px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-blockquote .edui-icon {\\r\\n    background-position: -220px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-forecolor .edui-icon {\\r\\n    background-position: -720px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-backcolor .edui-icon {\\r\\n    background-position: -760px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-inserttable .edui-icon {\\r\\n    background-position: -580px -20px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-autotypeset .edui-icon {\\r\\n    background-position: -640px -40px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-justifyleft .edui-icon {\\r\\n    background-position: -460px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-justifycenter .edui-icon {\\r\\n    background-position: -420px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-justifyright .edui-icon {\\r\\n    background-position: -480px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-justifyjustify .edui-icon {\\r\\n    background-position: -440px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-insertorderedlist .edui-icon {\\r\\n    background-position: -80px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-insertunorderedlist .edui-icon {\\r\\n    background-position: -20px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-lineheight .edui-icon {\\r\\n    background-position: -725px -40px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-rowspacingbottom .edui-icon {\\r\\n    background-position: -745px -40px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-rowspacingtop .edui-icon {\\r\\n    background-position: -765px -40px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-horizontal .edui-icon {\\r\\n    background-position: -360px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-link .edui-icon {\\r\\n    background-position: -500px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-code .edui-icon {\\r\\n    background-position: -440px -40px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-insertimage .edui-icon {\\r\\n    background-position: -726px -77px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-insertframe .edui-icon {\\r\\n    background-position: -240px -40px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-emoticon .edui-icon {\\r\\n    background-position: -60px -20px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-spechars .edui-icon {\\r\\n    background-position: -240px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-help .edui-icon {\\r\\n    background-position: -340px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-print .edui-icon {\\r\\n    background-position: -440px -20px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-preview .edui-icon {\\r\\n    background-position: -420px -20px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-selectall .edui-icon {\\r\\n    background-position: -400px -20px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-searchreplace .edui-icon {\\r\\n    background-position: -520px -20px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-map .edui-icon {\\r\\n    background-position: -40px -40px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-gmap .edui-icon {\\r\\n    background-position: -260px -40px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-insertvideo .edui-icon {\\r\\n    background-position: -320px -20px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-time .edui-icon {\\r\\n    background-position: -160px -20px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-date .edui-icon {\\r\\n    background-position: -140px -20px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-cut .edui-icon {\\r\\n    background-position: -680px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-copy .edui-icon {\\r\\n    background-position: -700px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-paste .edui-icon {\\r\\n    background-position: -560px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-formatmatch .edui-icon {\\r\\n    background-position: -40px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-pasteplain .edui-icon {\\r\\n    background-position: -360px -20px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-directionalityltr .edui-icon {\\r\\n    background-position: -20px -20px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-directionalityrtl .edui-icon {\\r\\n    background-position: -40px -20px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-source .edui-icon {\\r\\n    background-position: -261px -0px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-removeformat .edui-icon {\\r\\n    background-position: -580px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-unlink .edui-icon {\\r\\n    background-position: -640px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-touppercase .edui-icon {\\r\\n    background-position: -786px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-tolowercase .edui-icon {\\r\\n    background-position: -806px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-insertrow .edui-icon {\\r\\n    background-position: -478px -76px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-insertrownext .edui-icon {\\r\\n    background-position: -498px -76px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-insertcol .edui-icon {\\r\\n    background-position: -455px -76px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-insertcolnext  .edui-icon {\\r\\n    background-position: -429px -76px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-mergeright .edui-icon {\\r\\n    background-position: -60px -40px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-mergedown .edui-icon {\\r\\n    background-position: -80px -40px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-splittorows .edui-icon {\\r\\n    background-position: -100px -40px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-splittocols .edui-icon {\\r\\n    background-position: -120px -40px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-insertparagraphbeforetable .edui-icon {\\r\\n    background-position: -140px -40px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-deleterow .edui-icon {\\r\\n    background-position: -660px -20px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-deletecol .edui-icon {\\r\\n    background-position: -640px -20px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-splittocells .edui-icon {\\r\\n    background-position: -800px -20px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-mergecells .edui-icon {\\r\\n    background-position: -760px -20px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-deletetable .edui-icon {\\r\\n    background-position: -620px -20px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-cleardoc .edui-icon {\\r\\n    background-position: -520px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-fullscreen .edui-icon {\\r\\n    background-position: -100px -20px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-anchor .edui-icon {\\r\\n    background-position: -200px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-pagebreak .edui-icon {\\r\\n    background-position: -460px -40px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-imagenone .edui-icon {\\r\\n    background-position: -480px -40px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-imageleft .edui-icon {\\r\\n    background-position: -500px -40px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-wordimage .edui-icon {\\r\\n    background-position: -660px -40px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-imageright .edui-icon {\\r\\n    background-position: -520px -40px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-imagecenter .edui-icon {\\r\\n    background-position: -540px -40px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-indent .edui-icon {\\r\\n    background-position: -400px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-outdent .edui-icon {\\r\\n    background-position: -540px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-webapp .edui-icon {\\r\\n    background-position: -601px -40px\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-table .edui-icon {\\r\\n    background-position: -580px -20px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-edittable .edui-icon {\\r\\n    background-position: -420px -40px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-template .edui-icon {\\r\\n    background-position: -339px -40px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-delete .edui-icon {\\r\\n    background-position: -360px -40px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-attachment .edui-icon {\\r\\n    background-position: -620px -40px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-edittd .edui-icon {\\r\\n    background-position: -700px -40px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-snapscreen .edui-icon {\\r\\n    background-position: -581px -40px\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-scrawl .edui-icon {\\r\\n    background-position: -801px -41px\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-background .edui-icon {\\r\\n    background-position: -680px -40px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-music .edui-icon {\\r\\n    background-position: -18px -40px\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-formula .edui-icon {\\r\\n    background-position: -200px -40px\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-aligntd  .edui-icon {\\r\\n    background-position: -236px -76px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-insertparagraphtrue  .edui-icon {\\r\\n    background-position: -625px -76px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-insertparagraph  .edui-icon {\\r\\n    background-position: -602px -76px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-insertcaption  .edui-icon {\\r\\n    background-position: -336px -76px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-deletecaption  .edui-icon {\\r\\n    background-position: -362px -76px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-inserttitle  .edui-icon {\\r\\n    background-position: -286px -76px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-deletetitle  .edui-icon {\\r\\n    background-position: -311px -76px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-aligntable  .edui-icon {\\r\\n    background-position: -440px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-tablealignment-left  .edui-icon {\\r\\n    background-position: -460px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-tablealignment-center  .edui-icon {\\r\\n    background-position: -420px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-tablealignment-right  .edui-icon {\\r\\n    background-position: -480px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-drafts  .edui-icon {\\r\\n    background-position: -560px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-charts  .edui-icon {\\r\\n    background: url(\" + require(\"../images/charts.png\") + \") no-repeat 2px 3px!important;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-inserttitlecol  .edui-icon {\\r\\n    background-position: -673px -76px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-deletetitlecol  .edui-icon {\\r\\n    background-position: -698px -76px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-for-simpleupload  .edui-icon {\\r\\n    background-position: -380px 0px;\\r\\n}\\r\\n/*splitbutton*/\\r\\n.edui-default .edui-toolbar .edui-splitbutton-body .edui-arrow,\\r\\n.edui-default .edui-toolbar .edui-menubutton-body .edui-arrow {\\r\\n    background: url(\" + require(\"../images/icons.png\") + \") -741px 0;\\r\\n    height: 20px;\\r\\n    width: 9px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-toolbar .edui-splitbutton .edui-splitbutton-body,\\r\\n.edui-default .edui-toolbar .edui-menubutton .edui-menubutton-body {\\r\\n    padding: 1px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-toolbar .edui-splitborder {\\r\\n    width: 1px;\\r\\n    height: 20px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-toolbar .edui-state-hover .edui-splitborder {\\r\\n    width: 1px;\\r\\n    border-left: 0px solid #dcac6c;\\r\\n}\\r\\n\\r\\n.edui-default .edui-toolbar .edui-state-active .edui-splitborder {\\r\\n    width: 0;\\r\\n    border-left: 1px solid gray;\\r\\n}\\r\\n\\r\\n.edui-default .edui-toolbar .edui-state-opened .edui-splitborder {\\r\\n    width: 1px;\\r\\n    border: 0;\\r\\n}\\r\\n\\r\\n.edui-default .edui-toolbar .edui-splitbutton .edui-state-hover .edui-splitbutton-body,\\r\\n.edui-default .edui-toolbar .edui-menubutton .edui-state-hover .edui-menubutton-body {\\r\\n    background-color: #fff5d4;\\r\\n    border: 1px solid #dcac6c;\\r\\n    padding: 0;\\r\\n}\\r\\n\\r\\n.edui-default .edui-toolbar .edui-splitbutton .edui-state-checked .edui-splitbutton-body,\\r\\n.edui-default .edui-toolbar .edui-menubutton .edui-state-checked .edui-menubutton-body {\\r\\n    background-color: #FFE69F;\\r\\n    border: 1px solid #DCAC6C;\\r\\n    padding: 0;\\r\\n}\\r\\n\\r\\n.edui-default .edui-toolbar .edui-splitbutton .edui-state-active .edui-splitbutton-body,\\r\\n.edui-default .edui-toolbar .edui-menubutton .edui-state-active .edui-menubutton-body {\\r\\n    background-color: #ffffff;\\r\\n    border: 1px solid gray;\\r\\n    padding: 0;\\r\\n}\\r\\n\\r\\n.edui-default .edui-state-disabled .edui-arrow {\\r\\n    opacity: 0.3;\\r\\n}\\r\\n\\r\\n.edui-default .edui-toolbar .edui-splitbutton .edui-state-opened .edui-splitbutton-body,\\r\\n.edui-default .edui-toolbar .edui-menubutton .edui-state-opened .edui-menubutton-body {\\r\\n    background-color: white;\\r\\n    border: 1px solid gray;\\r\\n    padding: 0;\\r\\n}\\r\\n\\r\\n.edui-default .edui-for-insertorderedlist .edui-bordereraser,\\r\\n.edui-default .edui-for-lineheight .edui-bordereraser,\\r\\n.edui-default .edui-for-rowspacingtop .edui-bordereraser,\\r\\n.edui-default .edui-for-rowspacingbottom .edui-bordereraser,\\r\\n.edui-default .edui-for-insertunorderedlist .edui-bordereraser {\\r\\n    background-color: white;\\r\\n}\\r\\n\\r\\n/* 解决嵌套导致的图标问题 */\\r\\n.edui-default .edui-for-insertorderedlist .edui-popup-body .edui-icon,\\r\\n.edui-default .edui-for-lineheight .edui-popup-body .edui-icon,\\r\\n.edui-default .edui-for-rowspacingtop .edui-popup-body .edui-icon,\\r\\n.edui-default .edui-for-rowspacingbottom .edui-popup-body .edui-icon,\\r\\n.edui-default .edui-for-insertunorderedlist .edui-popup-body .edui-icon {\\r\\n    /*background-position: 0 -40px;*/\\r\\n    background-image: none  ;\\r\\n}\\r\\n\\r\\n/* 弹出菜单 */\\r\\n.edui-default .edui-popup {\\r\\n    z-index: 3000;\\r\\n    background-color: #ffffff;\\r\\n    width:auto;\\r\\n    height:auto;\\r\\n\\r\\n}\\r\\n\\r\\n.edui-default .edui-popup .edui-shadow {\\r\\n    left: 0;\\r\\n    top: 0;\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n}\\r\\n\\r\\n.edui-default .edui-popup-content {\\r\\n    border:1px solid #ccc;\\r\\n    border: 1px solid rgba(0, 0, 0, 0.2);\\r\\n    border-radius: 6px;\\r\\n    -webkit-box-shadow: 0 3px 4px rgba(0, 0, 0, 0.2);\\r\\n            box-shadow: 0 3px 4px rgba(0, 0, 0, 0.2);\\r\\n    background-clip: padding-box;\\r\\n    padding: 5px;\\r\\n    background:#ffffff;\\r\\n}\\r\\n\\r\\n.edui-default .edui-popup .edui-bordereraser {\\r\\n    background-color: white;\\r\\n    height: 3px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-menu .edui-bordereraser {\\r\\n    height: 3px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-anchor-topleft .edui-bordereraser {\\r\\n    left: 1px;\\r\\n    top: -2px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-anchor-topright .edui-bordereraser {\\r\\n    right: 1px;\\r\\n    top: -2px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-anchor-bottomleft .edui-bordereraser {\\r\\n    left: 0;\\r\\n    bottom: -6px;\\r\\n    height: 7px;\\r\\n    border-left: 1px solid gray;\\r\\n    border-right: 1px solid gray;\\r\\n}\\r\\n\\r\\n.edui-default .edui-anchor-bottomright .edui-bordereraser {\\r\\n    right: 0;\\r\\n    bottom: -6px;\\r\\n    height: 7px;\\r\\n    border-left: 1px solid gray;\\r\\n    border-right: 1px solid gray;\\r\\n}\\r\\n\\r\\n.edui-popup div{\\r\\n    width:auto;\\r\\n    height:auto;\\r\\n}\\r\\n.edui-default .edui-editor-messageholder {\\r\\n    display: block;\\r\\n    width: 150px;\\r\\n    height: auto;\\r\\n    border: 0;\\r\\n    margin: 0;\\r\\n    padding: 0;\\r\\n    position: absolute;\\r\\n    top: 28px;\\r\\n    right: 3px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-message{\\r\\n    min-height: 10px;\\r\\n    text-shadow: 0 1px 0 rgba(255,255,255,0.5);\\r\\n    padding: 0;\\r\\n    margin-bottom: 3px;\\r\\n    position: relative;\\r\\n}\\r\\n.edui-default .edui-message-body{\\r\\n    border-radius: 3px;\\r\\n    padding: 8px 15px 8px 8px;\\r\\n    color: #c09853;\\r\\n    background-color: #fcf8e3;\\r\\n    border: 1px solid #fbeed5;\\r\\n}\\r\\n.edui-default .edui-message-type-info{\\r\\n    color: #3a87ad;\\r\\n    background-color: #d9edf7;\\r\\n    border-color: #bce8f1\\r\\n}\\r\\n.edui-default .edui-message-type-success{\\r\\n    color: #468847;\\r\\n    background-color: #dff0d8;\\r\\n    border-color: #d6e9c6\\r\\n}\\r\\n.edui-default .edui-message-type-danger,\\r\\n.edui-default .edui-message-type-error{\\r\\n    color: #b94a48;\\r\\n    background-color: #f2dede;\\r\\n    border-color: #eed3d7\\r\\n}\\r\\n.edui-default .edui-message .edui-message-closer {\\r\\n    display: block;\\r\\n    width: 16px;\\r\\n    height: 16px;\\r\\n    line-height: 16px;\\r\\n    position: absolute;\\r\\n    top: 0;\\r\\n    right: 0;\\r\\n    padding: 0;\\r\\n    cursor: pointer;\\r\\n    background: transparent;\\r\\n    border: 0;\\r\\n    float: right;\\r\\n    font-size: 20px;\\r\\n    font-weight: bold;\\r\\n    color: #999;\\r\\n    text-shadow: 0 1px 0 #fff;\\r\\n    font-family: \\\"Helvetica Neue\\\",Helvetica,Arial,sans-serif;\\r\\n}\\r\\n.edui-default .edui-message .edui-message-content {\\r\\n    font-size: 10pt;\\r\\n    word-wrap: break-word;\\r\\n    word-break: normal;\\r\\n}\\r\\n/* 弹出对话框按钮和对话框大小 */\\r\\n.edui-default .edui-dialog {\\r\\n    z-index: 2000;\\r\\n    position: absolute;\\r\\n\\r\\n}\\r\\n\\r\\n.edui-dialog div{\\r\\n    width:auto;\\r\\n}\\r\\n\\r\\n.edui-default .edui-dialog-wrap {\\r\\n    margin-right: 6px;\\r\\n    margin-bottom: 6px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-dialog-fullscreen-flag {\\r\\n    margin-right: 0;\\r\\n    margin-bottom: 0;\\r\\n}\\r\\n\\r\\n.edui-default .edui-dialog-body {\\r\\n    position: relative;\\r\\n    padding:2px 0 0 2px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-dialog-fullscreen-flag .edui-dialog-body {\\r\\n    padding: 0;\\r\\n}\\r\\n\\r\\n.edui-default .edui-dialog-shadow {\\r\\n    position: absolute;\\r\\n    z-index: -1;\\r\\n    left: 0;\\r\\n    top: 0;\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n    background-color: #ffffff;\\r\\n    border: 1px solid #ccc;\\r\\n    border: 1px solid rgba(0, 0, 0, 0.2);\\r\\n    border-radius: 6px;\\r\\n    -webkit-box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);\\r\\n            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.2);\\r\\n    background-clip: padding-box;\\r\\n}\\r\\n\\r\\n.edui-default .edui-dialog-foot {\\r\\n    background-color: white;\\r\\n}\\r\\n\\r\\n.edui-default .edui-dialog-titlebar {\\r\\n    height: 26px;\\r\\n    border-bottom: 1px solid #c6c6c6;\\r\\n    background: url(\" + require(\"../images/dialog-title-bg.png\") + \") repeat-x bottom;\\r\\n    position: relative;\\r\\n    cursor: move;\\r\\n}\\r\\n.edui-default .edui-dialog-caption {\\r\\n    font-weight: bold;\\r\\n    font-size: 12px;\\r\\n    line-height: 26px;\\r\\n    padding-left: 5px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-dialog-draghandle {\\r\\n    height: 26px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-dialog-closebutton {\\r\\n    position: absolute !important;\\r\\n    right: 5px;\\r\\n    top: 3px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-dialog-closebutton .edui-button-body {\\r\\n    height: 20px;\\r\\n    width: 20px;\\r\\n    cursor: pointer;\\r\\n    background: url(\" + require(\"../images/icons-all.gif\") + \") no-repeat 0 -59px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-dialog-closebutton .edui-state-hover .edui-button-body {\\r\\n    background: url(\" + require(\"../images/icons-all.gif\") + \") no-repeat 0 -89px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-dialog-foot {\\r\\n    height: 40px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-dialog-buttons {\\r\\n    position: absolute;\\r\\n    right: 0;\\r\\n}\\r\\n\\r\\n.edui-default .edui-dialog-buttons .edui-button {\\r\\n    margin-right: 10px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-dialog-buttons .edui-button .edui-button-body {\\r\\n    background: url(\" + require(\"../images/icons-all.gif\") + \") no-repeat;\\r\\n    height: 24px;\\r\\n    width: 96px;\\r\\n    font-size: 12px;\\r\\n    line-height: 24px;\\r\\n    text-align: center;\\r\\n    cursor: default;\\r\\n}\\r\\n\\r\\n.edui-default .edui-dialog-buttons .edui-button .edui-state-hover .edui-button-body {\\r\\n    background: url(\" + require(\"../images/icons-all.gif\") + \") no-repeat 0 -30px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-dialog iframe {\\r\\n    border: 0;\\r\\n    padding: 0;\\r\\n    margin: 0;\\r\\n    vertical-align: top;\\r\\n}\\r\\n\\r\\n.edui-default .edui-dialog-modalmask {\\r\\n    opacity: 0.3;\\r\\n    background-color: #ccc;\\r\\n    position: absolute;\\r\\n    /*z-index: 1999;*/\\r\\n}\\r\\n\\r\\n.edui-default .edui-dialog-dragmask {\\r\\n    position: absolute;\\r\\n    /*z-index: 2001;*/\\r\\n    background-color: transparent;\\r\\n    cursor: move;\\r\\n}\\r\\n\\r\\n.edui-default .edui-dialog-content {\\r\\n    position: relative;\\r\\n}\\r\\n\\r\\n.edui-default .dialogcontmask {\\r\\n    cursor: move;\\r\\n    visibility: hidden;\\r\\n    display: block;\\r\\n    position: absolute;\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n    opacity: 0;\\r\\n}\\r\\n\\r\\n/*link-dialog*/\\r\\n.edui-default .edui-for-link .edui-dialog-content {\\r\\n    width: 420px;\\r\\n    height: 200px;\\r\\n    overflow: hidden;\\r\\n}\\r\\n/*background-dialog*/\\r\\n.edui-default .edui-for-background .edui-dialog-content {\\r\\n    width: 440px;\\r\\n    height: 280px;\\r\\n    overflow: hidden;\\r\\n}\\r\\n\\r\\n/*template-dialog*/\\r\\n.edui-default .edui-for-template .edui-dialog-content {\\r\\n    width: 630px;\\r\\n    height: 390px;\\r\\n    overflow: hidden;\\r\\n}\\r\\n\\r\\n/*scrawl-dialog*/\\r\\n.edui-default .edui-for-scrawl .edui-dialog-content {\\r\\n    width: 515px;\\r\\n    *width: 506px;\\r\\n    height: 360px;\\r\\n}\\r\\n\\r\\n/*spechars-dialog*/\\r\\n.edui-default .edui-for-spechars .edui-dialog-content {\\r\\n    width: 620px;\\r\\n    height: 500px;\\r\\n    *width: 630px;\\r\\n    *height: 570px;\\r\\n}\\r\\n\\r\\n/*image-dialog*/\\r\\n.edui-default .edui-for-insertimage .edui-dialog-content {\\r\\n    width: 650px;\\r\\n    height: 400px;\\r\\n    overflow: hidden;\\r\\n}\\r\\n/*webapp-dialog*/\\r\\n.edui-default .edui-for-webapp .edui-dialog-content {\\r\\n    width: 560px;\\r\\n    _width: 565px;\\r\\n    height: 450px;\\r\\n    overflow: hidden;\\r\\n}\\r\\n\\r\\n/*image-insertframe*/\\r\\n.edui-default .edui-for-insertframe .edui-dialog-content {\\r\\n    width: 350px;\\r\\n    height: 200px;\\r\\n    overflow: hidden;\\r\\n}\\r\\n\\r\\n/*wordImage-dialog*/\\r\\n.edui-default .edui-for-wordimage .edui-dialog-content {\\r\\n    width: 620px;\\r\\n    height: 380px;\\r\\n    overflow: hidden;\\r\\n}\\r\\n\\r\\n/*attachment-dialog*/\\r\\n.edui-default .edui-for-attachment .edui-dialog-content {\\r\\n    width: 650px;\\r\\n    height: 400px;\\r\\n    overflow: hidden;\\r\\n}\\r\\n\\r\\n\\r\\n/*map-dialog*/\\r\\n.edui-default .edui-for-map .edui-dialog-content {\\r\\n    width: 550px;\\r\\n    height: 400px;\\r\\n}\\r\\n\\r\\n/*gmap-dialog*/\\r\\n.edui-default .edui-for-gmap .edui-dialog-content {\\r\\n    width: 550px;\\r\\n    height: 400px;\\r\\n}\\r\\n\\r\\n/*video-dialog*/\\r\\n.edui-default .edui-for-insertvideo .edui-dialog-content {\\r\\n    width: 590px;\\r\\n    height: 390px;\\r\\n}\\r\\n\\r\\n/*anchor-dialog*/\\r\\n.edui-default .edui-for-anchor .edui-dialog-content {\\r\\n    width: 320px;\\r\\n    height: 60px;\\r\\n    overflow: hidden;\\r\\n}\\r\\n\\r\\n/*searchreplace-dialog*/\\r\\n.edui-default .edui-for-searchreplace .edui-dialog-content {\\r\\n    width: 400px;\\r\\n    height: 220px;\\r\\n}\\r\\n\\r\\n/*help-dialog*/\\r\\n.edui-default .edui-for-help .edui-dialog-content {\\r\\n    width: 400px;\\r\\n    height: 420px;\\r\\n}\\r\\n\\r\\n/*edittable-dialog*/\\r\\n.edui-default .edui-for-edittable .edui-dialog-content {\\r\\n    width: 540px;\\r\\n    _width:590px;\\r\\n    height: 335px;\\r\\n}\\r\\n\\r\\n/*edittip-dialog*/\\r\\n.edui-default .edui-for-edittip .edui-dialog-content {\\r\\n    width: 225px;\\r\\n    height: 60px;\\r\\n}\\r\\n\\r\\n/*edittd-dialog*/\\r\\n.edui-default .edui-for-edittd .edui-dialog-content {\\r\\n    width: 240px;\\r\\n    height: 50px;\\r\\n}\\r\\n/*snapscreen-dialog*/\\r\\n.edui-default .edui-for-snapscreen .edui-dialog-content {\\r\\n    width: 400px;\\r\\n    height: 220px;\\r\\n}\\r\\n\\r\\n/*music-dialog*/\\r\\n.edui-default .edui-for-music .edui-dialog-content {\\r\\n    width: 515px;\\r\\n    height: 360px;\\r\\n}\\r\\n\\r\\n/*段落弹出菜单*/\\r\\n.edui-default .edui-for-paragraph .edui-listitem-label {\\r\\n    font-family: Tahoma, Verdana, Arial, Helvetica;\\r\\n}\\r\\n\\r\\n.edui-default .edui-for-paragraph .edui-listitem-label .edui-for-p {\\r\\n    font-size: 22px;\\r\\n    line-height: 27px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-for-paragraph .edui-listitem-label .edui-for-h1 {\\r\\n    font-weight: bolder;\\r\\n    font-size: 32px;\\r\\n    line-height: 36px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-for-paragraph .edui-listitem-label .edui-for-h2 {\\r\\n    font-weight: bolder;\\r\\n    font-size: 27px;\\r\\n    line-height: 29px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-for-paragraph .edui-listitem-label .edui-for-h3 {\\r\\n    font-weight: bolder;\\r\\n    font-size: 19px;\\r\\n    line-height: 23px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-for-paragraph .edui-listitem-label .edui-for-h4 {\\r\\n    font-weight: bolder;\\r\\n    font-size: 16px;\\r\\n    line-height: 19px\\r\\n}\\r\\n\\r\\n.edui-default .edui-for-paragraph .edui-listitem-label .edui-for-h5 {\\r\\n    font-weight: bolder;\\r\\n    font-size: 13px;\\r\\n    line-height: 16px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-for-paragraph .edui-listitem-label .edui-for-h6 {\\r\\n    font-weight: bolder;\\r\\n    font-size: 12px;\\r\\n    line-height: 14px;\\r\\n}\\r\\n/* 表格弹出菜单 */\\r\\n.edui-default .edui-for-inserttable .edui-splitborder {\\r\\n    display: none\\r\\n}\\r\\n.edui-default .edui-for-inserttable  .edui-splitbutton-body .edui-arrow {\\r\\n    width: 0\\r\\n}\\r\\n.edui-default .edui-toolbar .edui-for-inserttable  .edui-state-active .edui-splitborder{\\r\\n    border-left: 1px solid transparent;\\r\\n}\\r\\n.edui-default .edui-tablepicker .edui-infoarea {\\r\\n    height: 14px;\\r\\n    line-height: 14px;\\r\\n    font-size: 12px;\\r\\n    width: 220px;\\r\\n    margin-bottom: 3px;\\r\\n    clear: both;\\r\\n}\\r\\n\\r\\n.edui-default .edui-tablepicker .edui-infoarea .edui-label {\\r\\n    float: left;\\r\\n}\\r\\n\\r\\n.edui-default .edui-dialog-buttons .edui-label {\\r\\n    line-height: 24px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-tablepicker .edui-infoarea .edui-clickable {\\r\\n    float: right;\\r\\n}\\r\\n\\r\\n.edui-default .edui-tablepicker .edui-pickarea {\\r\\n    background: url(\" + require(\"../images/unhighlighted.gif\") + \") repeat;\\r\\n    height: 220px;\\r\\n    width: 220px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-tablepicker .edui-pickarea .edui-overlay {\\r\\n    background: url(\" + require(\"../images/highlighted.gif\") + \") repeat;\\r\\n}\\r\\n\\r\\n/* 颜色弹出菜单 */\\r\\n.edui-default .edui-colorpicker-topbar {\\r\\n    height: 27px;\\r\\n    width: 200px;\\r\\n    /*border-bottom: 1px gray dashed;*/\\r\\n}\\r\\n\\r\\n.edui-default .edui-colorpicker-preview {\\r\\n    height: 20px;\\r\\n    border: 1px inset black;\\r\\n    margin-left: 1px;\\r\\n    width: 128px;\\r\\n    float: left;\\r\\n}\\r\\n\\r\\n.edui-default .edui-colorpicker-nocolor {\\r\\n    float: right;\\r\\n    margin-right: 1px;\\r\\n    font-size: 12px;\\r\\n    line-height: 14px;\\r\\n    height: 14px;\\r\\n    border: 1px solid #333;\\r\\n    padding: 3px 5px;\\r\\n    cursor: pointer;\\r\\n}\\r\\n\\r\\n.edui-default .edui-colorpicker-tablefirstrow {\\r\\n    height: 30px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-colorpicker-colorcell {\\r\\n    width: 14px;\\r\\n    height: 14px;\\r\\n    display: block;\\r\\n    margin: 0;\\r\\n    cursor: pointer;\\r\\n}\\r\\n\\r\\n.edui-default .edui-colorpicker-colorcell:hover {\\r\\n    width: 14px;\\r\\n    height: 14px;\\r\\n    margin: 0;\\r\\n}\\r\\n.edui-default .edui-colorpicker-advbtn{\\r\\n    display: block;\\r\\n    text-align: center;\\r\\n    cursor: pointer;\\r\\n    height:20px;\\r\\n}\\r\\n.arrow_down{\\r\\n    background: white url(\" + require(\"../images/arrow_down.png\") + \") no-repeat center;\\r\\n}\\r\\n.arrow_up{\\r\\n    background: white url(\" + require(\"../images/arrow_up.png\") + \") no-repeat center;\\r\\n}\\r\\n/*高级的样式*/\\r\\n.edui-colorpicker-adv{\\r\\n    position: relative;\\r\\n    overflow: hidden;\\r\\n    height: 180px;\\r\\n    display: none;\\r\\n}\\r\\n.edui-colorpicker-plant, .edui-colorpicker-hue {\\r\\n    border: solid 1px #666;\\r\\n}\\r\\n.edui-colorpicker-pad {\\r\\n    width: 150px;\\r\\n    height: 150px;\\r\\n    left: 14px;\\r\\n    top: 13px;\\r\\n    position: absolute;\\r\\n    background: red;\\r\\n    overflow: hidden;\\r\\n    cursor: crosshair;\\r\\n}\\r\\n.edui-colorpicker-cover{\\r\\n    position: absolute;\\r\\n    top: 0;\\r\\n    left: 0;\\r\\n    width: 150px;\\r\\n    height: 150px;\\r\\n    background: url(\" + require(\"../images/tangram-colorpicker.png\") + \") -160px -200px;\\r\\n}\\r\\n.edui-colorpicker-padDot{\\r\\n    position: absolute;\\r\\n    top: 0;\\r\\n    left: 0;\\r\\n    width: 11px;\\r\\n    height: 11px;\\r\\n    overflow: hidden;\\r\\n    background: url(\" + require(\"../images/tangram-colorpicker.png\") + \") 0px -200px repeat-x;\\r\\n    z-index: 1000;\\r\\n\\r\\n}\\r\\n.edui-colorpicker-sliderMain {\\r\\n    position: absolute;\\r\\n    left: 171px;\\r\\n    top: 13px;\\r\\n    width: 19px;\\r\\n    height: 152px;\\r\\n    background: url(\" + require(\"../images/tangram-colorpicker.png\") + \") -179px -12px no-repeat;\\r\\n\\r\\n}\\r\\n.edui-colorpicker-slider {\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n    cursor: pointer;\\r\\n}\\r\\n.edui-colorpicker-thumb{\\r\\n    position: absolute;\\r\\n    top: 0;\\r\\n    cursor: pointer;\\r\\n    height: 3px;\\r\\n    left: -1px;\\r\\n    right: -1px;\\r\\n    border: 1px solid black;\\r\\n    background: white;\\r\\n    opacity: .8;\\r\\n}\\r\\n/*自动排版弹出菜单*/\\r\\n.edui-default .edui-autotypesetpicker .edui-autotypesetpicker-body {\\r\\n    font-size: 12px;\\r\\n    margin-bottom: 3px;\\r\\n    clear: both;\\r\\n}\\r\\n\\r\\n.edui-default .edui-autotypesetpicker-body table {\\r\\n    border-collapse: separate;\\r\\n    border-spacing: 2px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-autotypesetpicker-body td {\\r\\n    font-size: 12px;\\r\\n    word-wrap:break-word;\\r\\n}\\r\\n\\r\\n.edui-default .edui-autotypesetpicker-body td input {\\r\\n    margin: 3px 3px 3px 4px;\\r\\n    *margin: 1px 0 0 0;\\r\\n}\\r\\n/*自动排版弹出菜单*/\\r\\n.edui-default .edui-cellalignpicker .edui-cellalignpicker-body {\\r\\n    width: 70px;\\r\\n    font-size: 12px;\\r\\n    cursor: default;\\r\\n}\\r\\n\\r\\n.edui-default .edui-cellalignpicker-body table {\\r\\n    border-collapse: separate;\\r\\n    border-spacing: 0;\\r\\n}\\r\\n.edui-default .edui-cellalignpicker-body td{\\r\\n    padding: 1px;\\r\\n}\\r\\n.edui-default .edui-cellalignpicker-body .edui-icon{\\r\\n    height: 20px;\\r\\n    width: 20px;\\r\\n    padding: 1px;\\r\\n    background-image: url(\" + require(\"../images/table-cell-align.png\") + \");\\r\\n}\\r\\n\\r\\n.edui-default .edui-cellalignpicker-body .edui-left{\\r\\n    background-position: 0 0;\\r\\n}\\r\\n\\r\\n.edui-default .edui-cellalignpicker-body .edui-center{\\r\\n    background-position: -25px 0;\\r\\n}\\r\\n.edui-default .edui-cellalignpicker-body .edui-right{\\r\\n    background-position: -51px 0;\\r\\n}\\r\\n\\r\\n.edui-default .edui-cellalignpicker-body td.edui-state-hover .edui-left{\\r\\n    background-position: -73px 0;\\r\\n}\\r\\n\\r\\n.edui-default .edui-cellalignpicker-body td.edui-state-hover .edui-center{\\r\\n    background-position: -98px 0;\\r\\n}\\r\\n\\r\\n.edui-default .edui-cellalignpicker-body td.edui-state-hover .edui-right{\\r\\n    background-position: -124px 0;\\r\\n}\\r\\n\\r\\n.edui-default .edui-cellalignpicker-body td.edui-cellalign-selected .edui-left {\\r\\n    background-position: -146px 0;\\r\\n    background-color: #f1f4f5;\\r\\n}\\r\\n\\r\\n.edui-default .edui-cellalignpicker-body td.edui-cellalign-selected .edui-center {\\r\\n    background-position: -245px 0;\\r\\n}\\r\\n\\r\\n.edui-default .edui-cellalignpicker-body td.edui-cellalign-selected .edui-right {\\r\\n    background-position: -271px 0;\\r\\n}\\r\\n/*分隔线*/\\r\\n.edui-default .edui-toolbar .edui-separator {\\r\\n    width: 2px;\\r\\n    height: 20px;\\r\\n    margin: 2px 4px 2px 3px;\\r\\n    background: url(\" + require(\"../images/icons.png\") + \") -181px 0;\\r\\n}\\r\\n\\r\\n/*颜色按钮 */\\r\\n.edui-default .edui-toolbar .edui-colorbutton .edui-colorlump {\\r\\n    position: absolute;\\r\\n    overflow: hidden;\\r\\n    bottom: 1px;\\r\\n    left: 1px;\\r\\n    width: 18px;\\r\\n    height: 4px;\\r\\n}\\r\\n/*表情按钮及弹出菜单*/\\r\\n/*去除了表情的下拉箭头*/\\r\\n.edui-default .edui-for-emotion .edui-icon {\\r\\n    background-position: -60px -20px;\\r\\n}\\r\\n.edui-default .edui-for-emotion .edui-popup-content iframe\\r\\n{\\r\\n    width: 514px;\\r\\n    height: 380px;\\r\\n    overflow: hidden;\\r\\n}\\r\\n.edui-default .edui-for-emotion .edui-popup-content\\r\\n{\\r\\n    position: relative;\\r\\n    z-index: 555\\r\\n}\\r\\n\\r\\n.edui-default .edui-for-emotion .edui-splitborder {\\r\\n    display: none\\r\\n}\\r\\n\\r\\n.edui-default .edui-for-emotion .edui-splitbutton-body .edui-arrow\\r\\n{\\r\\n    width: 0\\r\\n}\\r\\n.edui-default .edui-toolbar .edui-for-emotion  .edui-state-active .edui-splitborder\\r\\n{\\r\\n    border-left: 1px solid transparent;\\r\\n}\\r\\n/*contextmenu*/\\r\\n.edui-default .edui-hassubmenu .edui-arrow {\\r\\n    height: 20px;\\r\\n    width: 20px;\\r\\n    float: right;\\r\\n    background: url(\" + require(\"../images/icons-all.gif\") + \") no-repeat 10px -233px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-menu-body .edui-menuitem {\\r\\n    padding: 1px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-menuseparator {\\r\\n    margin: 2px 0;\\r\\n    height: 1px;\\r\\n    overflow: hidden;\\r\\n}\\r\\n\\r\\n.edui-default .edui-menuseparator-inner {\\r\\n    border-bottom: 1px solid #e2e3e3;\\r\\n    margin-left: 29px;\\r\\n    margin-right: 1px;\\r\\n}\\r\\n\\r\\n.edui-default .edui-menu-body .edui-state-hover {\\r\\n    padding: 0 !important;\\r\\n    background-color: #fff5d4;\\r\\n    border: 1px solid #dcac6c;\\r\\n}\\r\\n/*弹出菜单*/\\r\\n.edui-default .edui-shortcutmenu {\\r\\n    padding: 2px;\\r\\n    width: 190px;\\r\\n    height: 50px;\\r\\n    background-color: #fff;\\r\\n    border: 1px solid #ccc;\\r\\n    border-radius: 5px;\\r\\n}\\r\\n\\r\\n/*粘贴弹出菜单*/\\r\\n.edui-default .edui-wordpastepop .edui-popup-content{\\r\\n    border: none;\\r\\n    padding: 0;\\r\\n    width: 54px;\\r\\n    height: 21px;\\r\\n}\\r\\n.edui-default  .edui-pasteicon {\\r\\n    width: 100%;\\r\\n    height: 100%;\\r\\n    background-image: url(\" + require(\"../images/wordpaste.png\") + \");\\r\\n    background-position: 0 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-pasteicon.edui-state-opened {\\r\\n    background-position: 0 -34px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-pastecontainer {\\r\\n    position: relative;\\r\\n    visibility: hidden;\\r\\n    width: 97px;\\r\\n    background: #fff;\\r\\n    border: 1px solid #ccc;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-pastecontainer .edui-title {\\r\\n    font-weight: bold;\\r\\n    background: #F8F8FF;\\r\\n    height: 25px;\\r\\n    line-height: 25px;\\r\\n    font-size: 12px;\\r\\n    padding-left: 5px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-pastecontainer .edui-button {\\r\\n    overflow: hidden;\\r\\n    margin: 3px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-pastecontainer .edui-button .edui-richtxticon,\\r\\n.edui-default  .edui-pastecontainer .edui-button .edui-tagicon,\\r\\n.edui-default  .edui-pastecontainer .edui-button .edui-plaintxticon{\\r\\n    float: left;\\r\\n    cursor: pointer;\\r\\n    width: 29px;\\r\\n    height: 29px;\\r\\n    margin-left: 5px;\\r\\n    background-image: url(\" + require(\"../images/wordpaste.png\") + \");\\r\\n    background-repeat: no-repeat;\\r\\n}\\r\\n.edui-default  .edui-pastecontainer .edui-button .edui-richtxticon {\\r\\n    margin-left: 0;\\r\\n    background-position: -109px 0;\\r\\n}\\r\\n.edui-default  .edui-pastecontainer .edui-button .edui-tagicon {\\r\\n    background-position: -148px 1px;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-pastecontainer .edui-button .edui-plaintxticon {\\r\\n    background-position: -72px 0;\\r\\n}\\r\\n\\r\\n.edui-default  .edui-pastecontainer .edui-button .edui-state-hover .edui-richtxticon {\\r\\n    background-position: -109px -34px;\\r\\n}\\r\\n.edui-default  .edui-pastecontainer .edui-button .edui-state-hover .edui-tagicon{\\r\\n    background-position: -148px -34px;\\r\\n}\\r\\n.edui-default  .edui-pastecontainer .edui-button  .edui-state-hover .edui-plaintxticon{\\r\\n    background-position: -72px -34px;\\r\\n}\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/._css-loader@0.28.7@css-loader!./node_modules/._postcss-loader@2.0.9@postcss-loader/lib?{\"ident\":\"postcss\",\"plugins\":[null]}!../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/css/ueditor.css\n// module id = 131\n// module chunks = 0","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAMAAABhq6zVAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAZQTFRFZmZm////c0tZqAAAAAJ0Uk5T/wDltzBKAAAAKUlEQVR42lTKyQkAAAgDwbH/pn26BgKbw5woa68fZWXt9aP8rFm3FWAAIoUAZAh+YogAAAAASUVORK5CYII=\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/images/scale.png\n// module id = 132\n// module chunks = 0","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAIAAAABCAIAAAB7QOjdAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAPSURBVBhXY3j0+PH///8BE0gFps6OUcYAAAAASUVORK5CYII=\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/images/sparator_v.png\n// module id = 133\n// module chunks = 0","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABzUlEQVQ4jZWRv4pTQRTGf2fmkk1EkqAY8ggiim8gNgn4DPEJtBJsLG0FsdROBLGwtLyQWoQUsmAlaAp1myVIJjf338wcC3N3EzYr6wcDM8x8v/nOOcJG0+n0LnCHfyjG+Hk0Gn3Ye5mm6dOyLNU5p1mWqXNOnXO6Wq3UOafL5VJns1lI0/T+ti/ZPtR1TZ7nAKgqACKCqqKqDAYDMxwO36Rpyng8fgtgtgEigrUWay3GmJ0lIiwWC6qqMv1+/3Xj3Umw/diYU7aqYq1lMBigqvR6vRPfDqBJsE8iQpL8fV6W5f4eGGPOBZynCye4MGC7doDDH+9x9VeW2TH3br74f4APOe1LBa4o+PLuMZevDPnlTm1nxtjMPcZIjBFVRUQRoG0LrnV/U+dufwLgxOy93+wDwZcEjRAi6j2HeYdnn76Fj99/PjJbRgMQY6Sua6qqoqoqvA8UviCoJ/pAXOcUKuTdqwDdpNPpGGtte71et+fz+ZkmlWXJ2uT4GFAP9WoNwDKPqKpNrLUGMJPJ5LmqvtyU1SQzT17dfnjj1vUHZV4Wq4xETCtR1So7Pmpp8Ejz08HBAa1WywCEEEiSpCkpAdoiYjbgqKpRRHyMsfgDWrD7zzxxYpgAAAAASUVORK5CYII=\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/images/charts.png\n// module id = 134\n// module chunks = 0","module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAfCAIAAACpqzA1AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI2Mjk5RTk2OTdERTExRTA5Q0I4RDUyMDBFRTQ5QUNBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjI2Mjk5RTk3OTdERTExRTA5Q0I4RDUyMDBFRTQ5QUNBIj4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjYyOTlFOTQ5N0RFMTFFMDlDQjhENTIwMEVFNDlBQ0EiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6MjYyOTlFOTU5N0RFMTFFMDlDQjhENTIwMEVFNDlBQ0EiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7MIQ/jAAAAIElEQVR42mL+//8/EwMDAwZGFoexkWlcGJ88mhxAgAEAda08BB2XYREAAAAASUVORK5CYII=\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/images/dialog-title-bg.png\n// module id = 135\n// module chunks = 0","module.exports = \"data:image/gif;base64,R0lGODlhFgAWAKECAPj4+Onp6f///////yH5BAEKAAIALAAAAAAWABYAAAJAlI+pFu0P3wmg2otBm7nbzXgeKFDAiaYqaaouyr6yFnCzG99rHepp7jsBg0NfUXe8JWdLGSsChUyiVN7iis1mCwA7\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/images/unhighlighted.gif\n// module id = 136\n// module chunks = 0","module.exports = \"data:image/gif;base64,R0lGODlhFgAWAKECAN3q+8PZ/////////yH5BAEKAAIALAAAAAAWABYAAAJAlI+pFu0P3wmg2otBm7nbzXgeKFDAiaYqaaouyr6yFnCzG99rHepp7jsBg0NfUXe8JWdLGSsChUyiVN7iis1mCwA7\"\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/images/highlighted.gif\n// module id = 137\n// module chunks = 0","module.exports = __webpack_public_path__ + \"06a16826b506f5264e29cc3c84137455.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/images/arrow_down.png\n// module id = 138\n// module chunks = 0","module.exports = __webpack_public_path__ + \"888bff7ff3165632455621e1b899287d.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/images/arrow_up.png\n// module id = 139\n// module chunks = 0","module.exports = __webpack_public_path__ + \"676456b57740b2a325b23a54902d21a6.png\";\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/default/images/table-cell-align.png\n// module id = 140\n// module chunks = 0","/*!\n* ZeroClipboard\n* The ZeroClipboard library provides an easy way to copy text to the clipboard using an invisible Adobe Flash movie and a JavaScript interface.\n* Copyright (c) 2014 Jon Rohan, James M. Greene\n* Licensed MIT\n* http://zeroclipboard.org/\n* v2.0.0-beta.5\n*/\nimport swfPath from './ZeroClipboard.swf';\n\nvar _currentElement;\nvar _flashState = {\n  bridge: null,\n  version: \"0.0.0\",\n  pluginType: \"unknown\",\n  disabled: null,\n  outdated: null,\n  unavailable: null,\n  deactivated: null,\n  overdue: null,\n  ready: null\n};\nvar _clipData = {};\nvar _clipDataFormatMap = null;\nvar _clientIdCounter = 0;\nvar _clientMeta = {};\nvar _elementIdCounter = 0;\nvar _elementMeta = {};\n// var _swfPath = function() {\n//   var i, jsDir, tmpJsPath, jsPath, swfPath = \"ZeroClipboard.swf\";\n//   if (!(document.currentScript && (jsPath = document.currentScript.src))) {\n//     var scripts = document.getElementsByTagName(\"script\");\n//     if (\"readyState\" in scripts[0]) {\n//       for (i = scripts.length; i--; ) {\n//         if (scripts[i].readyState === \"interactive\" && (jsPath = scripts[i].src)) {\n//           break;\n//         }\n//       }\n//     } else if (document.readyState === \"loading\") {\n//       jsPath = scripts[scripts.length - 1].src;\n//     } else {\n//       for (i = scripts.length; i--; ) {\n//         tmpJsPath = scripts[i].src;\n//         if (!tmpJsPath) {\n//           jsDir = null;\n//           break;\n//         }\n//         tmpJsPath = tmpJsPath.split(\"#\")[0].split(\"?\")[0];\n//         tmpJsPath = tmpJsPath.slice(0, tmpJsPath.lastIndexOf(\"/\") + 1);\n//         if (jsDir == null) {\n//           jsDir = tmpJsPath;\n//         } else if (jsDir !== tmpJsPath) {\n//           jsDir = null;\n//           break;\n//         }\n//       }\n//       if (jsDir !== null) {\n//         jsPath = jsDir;\n//       }\n//     }\n//   }\n//   if (jsPath) {\n//     jsPath = jsPath.split(\"#\")[0].split(\"?\")[0];\n//     swfPath = jsPath.slice(0, jsPath.lastIndexOf(\"/\") + 1) + swfPath;\n//   }\n//   return swfPath;\n// }();\nvar _camelizeCssPropName = function () {\n  var matcherRegex = /\\-([a-z])/g, replacerFn = function (match, group) {\n    return group.toUpperCase();\n  };\n  return function (prop) {\n    return prop.replace(matcherRegex, replacerFn);\n  };\n}();\nvar _getStyle = function (el, prop) {\n  var value, camelProp, tagName;\n  if (window.getComputedStyle) {\n    value = window.getComputedStyle(el, null).getPropertyValue(prop);\n  } else {\n    camelProp = _camelizeCssPropName(prop);\n    if (el.currentStyle) {\n      value = el.currentStyle[camelProp];\n    } else {\n      value = el.style[camelProp];\n    }\n  }\n  if (prop === \"cursor\") {\n    if (!value || value === \"auto\") {\n      tagName = el.tagName.toLowerCase();\n      if (tagName === \"a\") {\n        return \"pointer\";\n      }\n    }\n  }\n  return value;\n};\nvar _elementMouseOver = function (event) {\n  if (!event) {\n    event = window.event;\n  }\n  var target;\n  if (this !== window) {\n    target = this;\n  } else if (event.target) {\n    target = event.target;\n  } else if (event.srcElement) {\n    target = event.srcElement;\n  }\n  ZeroClipboard.activate(target);\n};\nvar _addEventHandler = function (element, method, func) {\n  if (!element || element.nodeType !== 1) {\n    return;\n  }\n  if (element.addEventListener) {\n    element.addEventListener(method, func, false);\n  } else if (element.attachEvent) {\n    element.attachEvent(\"on\" + method, func);\n  }\n};\nvar _removeEventHandler = function (element, method, func) {\n  if (!element || element.nodeType !== 1) {\n    return;\n  }\n  if (element.removeEventListener) {\n    element.removeEventListener(method, func, false);\n  } else if (element.detachEvent) {\n    element.detachEvent(\"on\" + method, func);\n  }\n};\nvar _addClass = function (element, value) {\n  if (!element || element.nodeType !== 1) {\n    return element;\n  }\n  if (element.classList) {\n    if (!element.classList.contains(value)) {\n      element.classList.add(value);\n    }\n    return element;\n  }\n  if (value && typeof value === \"string\") {\n    var classNames = (value || \"\").split(/\\s+/);\n    if (element.nodeType === 1) {\n      if (!element.className) {\n        element.className = value;\n      } else {\n        var className = \" \" + element.className + \" \", setClass = element.className;\n        for (var c = 0, cl = classNames.length; c < cl; c++) {\n          if (className.indexOf(\" \" + classNames[c] + \" \") < 0) {\n            setClass += \" \" + classNames[c];\n          }\n        }\n        element.className = setClass.replace(/^\\s+|\\s+$/g, \"\");\n      }\n    }\n  }\n  return element;\n};\nvar _removeClass = function (element, value) {\n  if (!element || element.nodeType !== 1) {\n    return element;\n  }\n  if (element.classList) {\n    if (element.classList.contains(value)) {\n      element.classList.remove(value);\n    }\n    return element;\n  }\n  if (value && typeof value === \"string\" || value === undefined) {\n    var classNames = (value || \"\").split(/\\s+/);\n    if (element.nodeType === 1 && element.className) {\n      if (value) {\n        var className = (\" \" + element.className + \" \").replace(/[\\n\\t]/g, \" \");\n        for (var c = 0, cl = classNames.length; c < cl; c++) {\n          className = className.replace(\" \" + classNames[c] + \" \", \" \");\n        }\n        element.className = className.replace(/^\\s+|\\s+$/g, \"\");\n      } else {\n        element.className = \"\";\n      }\n    }\n  }\n  return element;\n};\nvar _getZoomFactor = function () {\n  var rect, physicalWidth, logicalWidth, zoomFactor = 1;\n  if (typeof document.body.getBoundingClientRect === \"function\") {\n    rect = document.body.getBoundingClientRect();\n    physicalWidth = rect.right - rect.left;\n    logicalWidth = document.body.offsetWidth;\n    zoomFactor = Math.round(physicalWidth / logicalWidth * 100) / 100;\n  }\n  return zoomFactor;\n};\nvar _getDOMObjectPosition = function (obj, defaultZIndex) {\n  var info = {\n    left: 0,\n    top: 0,\n    width: 0,\n    height: 0,\n    zIndex: _getSafeZIndex(defaultZIndex) - 1\n  };\n  if (obj.getBoundingClientRect) {\n    var rect = obj.getBoundingClientRect();\n    var pageXOffset, pageYOffset, zoomFactor;\n    if (\"pageXOffset\" in window && \"pageYOffset\" in window) {\n      pageXOffset = window.pageXOffset;\n      pageYOffset = window.pageYOffset;\n    } else {\n      zoomFactor = _getZoomFactor();\n      pageXOffset = Math.round(document.documentElement.scrollLeft / zoomFactor);\n      pageYOffset = Math.round(document.documentElement.scrollTop / zoomFactor);\n    }\n    var leftBorderWidth = document.documentElement.clientLeft || 0;\n    var topBorderWidth = document.documentElement.clientTop || 0;\n    info.left = rect.left + pageXOffset - leftBorderWidth;\n    info.top = rect.top + pageYOffset - topBorderWidth;\n    info.width = \"width\" in rect ? rect.width : rect.right - rect.left;\n    info.height = \"height\" in rect ? rect.height : rect.bottom - rect.top;\n  }\n  return info;\n};\nvar _cacheBust = function (path, options) {\n  var cacheBust = options == null || options && options.cacheBust === true;\n  if (cacheBust) {\n    return (path.indexOf(\"?\") === -1 ? \"?\" : \"&\") + \"noCache=\" + new Date().getTime();\n  } else {\n    return \"\";\n  }\n};\nvar _vars = function (options) {\n  var i, len, domain, domains, str = \"\", trustedOriginsExpanded = [];\n  if (options.trustedDomains) {\n    if (typeof options.trustedDomains === \"string\") {\n      domains = [options.trustedDomains];\n    } else if (typeof options.trustedDomains === \"object\" && \"length\" in options.trustedDomains) {\n      domains = options.trustedDomains;\n    }\n  }\n  if (domains && domains.length) {\n    for (i = 0, len = domains.length; i < len; i++) {\n      if (domains.hasOwnProperty(i) && domains[i] && typeof domains[i] === \"string\") {\n        domain = _extractDomain(domains[i]);\n        if (!domain) {\n          continue;\n        }\n        if (domain === \"*\") {\n          trustedOriginsExpanded = [domain];\n          break;\n        }\n        trustedOriginsExpanded.push.apply(trustedOriginsExpanded, [domain, \"//\" + domain, window.location.protocol + \"//\" + domain]);\n      }\n    }\n  }\n  if (trustedOriginsExpanded.length) {\n    str += \"trustedOrigins=\" + encodeURIComponent(trustedOriginsExpanded.join(\",\"));\n  }\n  if (options.forceEnhancedClipboard === true) {\n    str += (str ? \"&\" : \"\") + \"forceEnhancedClipboard=true\";\n  }\n  return str;\n};\nvar _inArray = function (elem, array, fromIndex) {\n  if (typeof array.indexOf === \"function\") {\n    return array.indexOf(elem, fromIndex);\n  }\n  var i, len = array.length;\n  if (typeof fromIndex === \"undefined\") {\n    fromIndex = 0;\n  } else if (fromIndex < 0) {\n    fromIndex = len + fromIndex;\n  }\n  for (i = fromIndex; i < len; i++) {\n    if (array.hasOwnProperty(i) && array[i] === elem) {\n      return i;\n    }\n  }\n  return -1;\n};\nvar _prepClip = function (elements) {\n  if (typeof elements === \"string\") {\n    throw new TypeError(\"ZeroClipboard doesn't accept query strings.\");\n  }\n  return typeof elements.length !== \"number\" ? [elements] : elements;\n};\nvar _dispatchCallback = function (func, context, args, async) {\n  if (async) {\n    window.setTimeout(function () {\n      func.apply(context, args);\n    }, 0);\n  } else {\n    func.apply(context, args);\n  }\n};\nvar _getSafeZIndex = function (val) {\n  var zIndex, tmp;\n  if (val) {\n    if (typeof val === \"number\" && val > 0) {\n      zIndex = val;\n    } else if (typeof val === \"string\" && (tmp = parseInt(val, 10)) && !isNaN(tmp) && tmp > 0) {\n      zIndex = tmp;\n    }\n  }\n  if (!zIndex) {\n    if (typeof _globalConfig.zIndex === \"number\" && _globalConfig.zIndex > 0) {\n      zIndex = _globalConfig.zIndex;\n    } else if (typeof _globalConfig.zIndex === \"string\" && (tmp = parseInt(_globalConfig.zIndex, 10)) && !isNaN(tmp) && tmp > 0) {\n      zIndex = tmp;\n    }\n  }\n  return zIndex || 0;\n};\nvar _extend = function () {\n  var i, len, arg, prop, src, copy, target = arguments[0] || {};\n  for (i = 1, len = arguments.length; i < len; i++) {\n    if ((arg = arguments[i]) != null) {\n      for (prop in arg) {\n        if (arg.hasOwnProperty(prop)) {\n          src = target[prop];\n          copy = arg[prop];\n          if (target === copy) {\n            continue;\n          }\n          if (copy !== undefined) {\n            target[prop] = copy;\n          }\n        }\n      }\n    }\n  }\n  return target;\n};\nvar _extractDomain = function (originOrUrl) {\n  if (originOrUrl == null || originOrUrl === \"\") {\n    return null;\n  }\n  originOrUrl = originOrUrl.replace(/^\\s+|\\s+$/g, \"\");\n  if (originOrUrl === \"\") {\n    return null;\n  }\n  var protocolIndex = originOrUrl.indexOf(\"//\");\n  originOrUrl = protocolIndex === -1 ? originOrUrl : originOrUrl.slice(protocolIndex + 2);\n  var pathIndex = originOrUrl.indexOf(\"/\");\n  originOrUrl = pathIndex === -1 ? originOrUrl : protocolIndex === -1 || pathIndex === 0 ? null : originOrUrl.slice(0, pathIndex);\n  if (originOrUrl && originOrUrl.slice(-4).toLowerCase() === \".swf\") {\n    return null;\n  }\n  return originOrUrl || null;\n};\nvar _determineScriptAccess = function () {\n  var _extractAllDomains = function (origins, resultsArray) {\n    var i, len, tmp;\n    if (origins == null || resultsArray[0] === \"*\") {\n      return;\n    }\n    if (typeof origins === \"string\") {\n      origins = [origins];\n    }\n    if (!(typeof origins === \"object\" && typeof origins.length === \"number\")) {\n      return;\n    }\n    for (i = 0, len = origins.length; i < len; i++) {\n      if (origins.hasOwnProperty(i) && (tmp = _extractDomain(origins[i]))) {\n        if (tmp === \"*\") {\n          resultsArray.length = 0;\n          resultsArray.push(\"*\");\n          break;\n        }\n        if (_inArray(tmp, resultsArray) === -1) {\n          resultsArray.push(tmp);\n        }\n      }\n    }\n  };\n  return function (currentDomain, configOptions) {\n    var swfDomain = _extractDomain(configOptions.swfPath);\n    if (swfDomain === null) {\n      swfDomain = currentDomain;\n    }\n    var trustedDomains = [];\n    _extractAllDomains(configOptions.trustedOrigins, trustedDomains);\n    _extractAllDomains(configOptions.trustedDomains, trustedDomains);\n    var len = trustedDomains.length;\n    if (len > 0) {\n      if (len === 1 && trustedDomains[0] === \"*\") {\n        return \"always\";\n      }\n      if (_inArray(currentDomain, trustedDomains) !== -1) {\n        if (len === 1 && currentDomain === swfDomain) {\n          return \"sameDomain\";\n        }\n        return \"always\";\n      }\n    }\n    return \"never\";\n  };\n}();\nvar _objectKeys = function (obj) {\n  if (obj == null) {\n    return [];\n  }\n  if (Object.keys) {\n    return Object.keys(obj);\n  }\n  var keys = [];\n  for (var prop in obj) {\n    if (obj.hasOwnProperty(prop)) {\n      keys.push(prop);\n    }\n  }\n  return keys;\n};\nvar _deleteOwnProperties = function (obj) {\n  if (obj) {\n    for (var prop in obj) {\n      if (obj.hasOwnProperty(prop)) {\n        delete obj[prop];\n      }\n    }\n  }\n  return obj;\n};\nvar _safeActiveElement = function () {\n  try {\n    return document.activeElement;\n  } catch (err) { }\n  return null;\n};\nvar _pick = function (obj, keys) {\n  var newObj = {};\n  for (var i = 0, len = keys.length; i < len; i++) {\n    if (keys[i] in obj) {\n      newObj[keys[i]] = obj[keys[i]];\n    }\n  }\n  return newObj;\n};\nvar _omit = function (obj, keys) {\n  var newObj = {};\n  for (var prop in obj) {\n    if (_inArray(prop, keys) === -1) {\n      newObj[prop] = obj[prop];\n    }\n  }\n  return newObj;\n};\nvar _mapClipDataToFlash = function (clipData) {\n  var newClipData = {}, formatMap = {};\n  if (!(typeof clipData === \"object\" && clipData)) {\n    return;\n  }\n  for (var dataFormat in clipData) {\n    if (dataFormat && clipData.hasOwnProperty(dataFormat) && typeof clipData[dataFormat] === \"string\" && clipData[dataFormat]) {\n      switch (dataFormat.toLowerCase()) {\n        case \"text/plain\":\n        case \"text\":\n        case \"air:text\":\n        case \"flash:text\":\n          newClipData.text = clipData[dataFormat];\n          formatMap.text = dataFormat;\n          break;\n\n        case \"text/html\":\n        case \"html\":\n        case \"air:html\":\n        case \"flash:html\":\n          newClipData.html = clipData[dataFormat];\n          formatMap.html = dataFormat;\n          break;\n\n        case \"application/rtf\":\n        case \"text/rtf\":\n        case \"rtf\":\n        case \"richtext\":\n        case \"air:rtf\":\n        case \"flash:rtf\":\n          newClipData.rtf = clipData[dataFormat];\n          formatMap.rtf = dataFormat;\n          break;\n\n        default:\n          break;\n      }\n    }\n  }\n  return {\n    data: newClipData,\n    formatMap: formatMap\n  };\n};\nvar _mapClipResultsFromFlash = function (clipResults, formatMap) {\n  if (!(typeof clipResults === \"object\" && clipResults && typeof formatMap === \"object\" && formatMap)) {\n    return clipResults;\n  }\n  var newResults = {};\n  for (var prop in clipResults) {\n    if (clipResults.hasOwnProperty(prop)) {\n      if (prop !== \"success\" && prop !== \"data\") {\n        newResults[prop] = clipResults[prop];\n        continue;\n      }\n      newResults[prop] = {};\n      var tmpHash = clipResults[prop];\n      for (var dataFormat in tmpHash) {\n        if (dataFormat && tmpHash.hasOwnProperty(dataFormat) && formatMap.hasOwnProperty(dataFormat)) {\n          newResults[prop][formatMap[dataFormat]] = tmpHash[dataFormat];\n        }\n      }\n    }\n  }\n  return newResults;\n};\nvar _args = function (arraySlice) {\n  return function (args) {\n    return arraySlice.call(args, 0);\n  };\n}(Array.prototype.slice);\nvar _detectFlashSupport = function () {\n  var plugin, ax, mimeType, hasFlash = false, isActiveX = false, isPPAPI = false, flashVersion = \"\";\n  function parseFlashVersion(desc) {\n    var matches = desc.match(/[\\d]+/g);\n    matches.length = 3;\n    return matches.join(\".\");\n  }\n  function isPepperFlash(flashPlayerFileName) {\n    return !!flashPlayerFileName && (flashPlayerFileName = flashPlayerFileName.toLowerCase()) && (/^(pepflashplayer\\.dll|libpepflashplayer\\.so|pepperflashplayer\\.plugin)$/.test(flashPlayerFileName) || flashPlayerFileName.slice(-13) === \"chrome.plugin\");\n  }\n  function inspectPlugin(plugin) {\n    if (plugin) {\n      hasFlash = true;\n      if (plugin.version) {\n        flashVersion = parseFlashVersion(plugin.version);\n      }\n      if (!flashVersion && plugin.description) {\n        flashVersion = parseFlashVersion(plugin.description);\n      }\n      if (plugin.filename) {\n        isPPAPI = isPepperFlash(plugin.filename);\n      }\n    }\n  }\n  if (navigator.plugins && navigator.plugins.length) {\n    plugin = navigator.plugins[\"Shockwave Flash\"];\n    inspectPlugin(plugin);\n    if (navigator.plugins[\"Shockwave Flash 2.0\"]) {\n      hasFlash = true;\n      flashVersion = \"2.0.0.11\";\n    }\n  } else if (navigator.mimeTypes && navigator.mimeTypes.length) {\n    mimeType = navigator.mimeTypes[\"application/x-shockwave-flash\"];\n    plugin = mimeType && mimeType.enabledPlugin;\n    inspectPlugin(plugin);\n  } else if (typeof ActiveXObject !== \"undefined\") {\n    isActiveX = true;\n    try {\n      ax = new ActiveXObject(\"ShockwaveFlash.ShockwaveFlash.7\");\n      hasFlash = true;\n      flashVersion = parseFlashVersion(ax.GetVariable(\"$version\"));\n    } catch (e1) {\n      try {\n        ax = new ActiveXObject(\"ShockwaveFlash.ShockwaveFlash.6\");\n        hasFlash = true;\n        flashVersion = \"6.0.21\";\n      } catch (e2) {\n        try {\n          ax = new ActiveXObject(\"ShockwaveFlash.ShockwaveFlash\");\n          hasFlash = true;\n          flashVersion = parseFlashVersion(ax.GetVariable(\"$version\"));\n        } catch (e3) {\n          isActiveX = false;\n        }\n      }\n    }\n  }\n  _flashState.disabled = hasFlash !== true;\n  _flashState.outdated = flashVersion && parseFloat(flashVersion) < 11;\n  _flashState.version = flashVersion || \"0.0.0\";\n  _flashState.pluginType = isPPAPI ? \"pepper\" : isActiveX ? \"activex\" : hasFlash ? \"netscape\" : \"unknown\";\n};\n_detectFlashSupport();\nvar ZeroClipboard = function (elements) {\n  if (!(this instanceof ZeroClipboard)) {\n    return new ZeroClipboard(elements);\n  }\n  this.id = \"\" + _clientIdCounter++;\n  _clientMeta[this.id] = {\n    instance: this,\n    elements: [],\n    handlers: {}\n  };\n  if (elements) {\n    this.clip(elements);\n  }\n  if (typeof _flashState.ready !== \"boolean\") {\n    _flashState.ready = false;\n  }\n  if (!ZeroClipboard.isFlashUnusable() && _flashState.bridge === null) {\n    var _client = this;\n    var maxWait = _globalConfig.flashLoadTimeout;\n    if (typeof maxWait === \"number\" && maxWait >= 0) {\n      setTimeout(function () {\n        if (typeof _flashState.deactivated !== \"boolean\") {\n          _flashState.deactivated = true;\n        }\n        if (_flashState.deactivated === true) {\n          ZeroClipboard.emit({\n            type: \"error\",\n            name: \"flash-deactivated\",\n            client: _client\n          });\n        }\n      }, maxWait);\n    }\n    _flashState.overdue = false;\n    _bridge();\n  }\n};\nZeroClipboard.prototype.setText = function (text) {\n  ZeroClipboard.setData(\"text/plain\", text);\n  return this;\n};\nZeroClipboard.prototype.setHtml = function (html) {\n  ZeroClipboard.setData(\"text/html\", html);\n  return this;\n};\nZeroClipboard.prototype.setRichText = function (richText) {\n  ZeroClipboard.setData(\"application/rtf\", richText);\n  return this;\n};\nZeroClipboard.prototype.setData = function () {\n  ZeroClipboard.setData.apply(ZeroClipboard, _args(arguments));\n  return this;\n};\nZeroClipboard.prototype.clearData = function () {\n  ZeroClipboard.clearData.apply(ZeroClipboard, _args(arguments));\n  return this;\n};\nZeroClipboard.prototype.setSize = function (width, height) {\n  _setSize(width, height);\n  return this;\n};\nvar _setHandCursor = function (enabled) {\n  if (_flashState.ready === true && _flashState.bridge && typeof _flashState.bridge.setHandCursor === \"function\") {\n    _flashState.bridge.setHandCursor(enabled);\n  } else {\n    _flashState.ready = false;\n  }\n};\nZeroClipboard.prototype.destroy = function () {\n  this.unclip();\n  this.off();\n  delete _clientMeta[this.id];\n};\nvar _getAllClients = function () {\n  var i, len, client, clients = [], clientIds = _objectKeys(_clientMeta);\n  for (i = 0, len = clientIds.length; i < len; i++) {\n    client = _clientMeta[clientIds[i]].instance;\n    if (client && client instanceof ZeroClipboard) {\n      clients.push(client);\n    }\n  }\n  return clients;\n};\nZeroClipboard.version = \"2.0.0-beta.5\";\nvar _globalConfig = {\n  swfPath,\n  trustedDomains: location.host ? [location.host] : [],\n  cacheBust: true,\n  forceHandCursor: false,\n  forceEnhancedClipboard: false,\n  zIndex: 999999999,\n  debug: false,\n  title: null,\n  autoActivate: true,\n  flashLoadTimeout: 3e4\n};\nZeroClipboard.isFlashUnusable = function () {\n  return !!(_flashState.disabled || _flashState.outdated || _flashState.unavailable || _flashState.deactivated);\n};\nZeroClipboard.config = function (options) {\n  if (typeof options === \"object\" && options !== null) {\n    _extend(_globalConfig, options);\n  }\n  if (typeof options === \"string\" && options) {\n    if (_globalConfig.hasOwnProperty(options)) {\n      return _globalConfig[options];\n    }\n    return;\n  }\n  var copy = {};\n  for (var prop in _globalConfig) {\n    if (_globalConfig.hasOwnProperty(prop)) {\n      if (typeof _globalConfig[prop] === \"object\" && _globalConfig[prop] !== null) {\n        if (\"length\" in _globalConfig[prop]) {\n          copy[prop] = _globalConfig[prop].slice(0);\n        } else {\n          copy[prop] = _extend({}, _globalConfig[prop]);\n        }\n      } else {\n        copy[prop] = _globalConfig[prop];\n      }\n    }\n  }\n  return copy;\n};\nZeroClipboard.destroy = function () {\n  ZeroClipboard.deactivate();\n  for (var clientId in _clientMeta) {\n    if (_clientMeta.hasOwnProperty(clientId) && _clientMeta[clientId]) {\n      var client = _clientMeta[clientId].instance;\n      if (client && typeof client.destroy === \"function\") {\n        client.destroy();\n      }\n    }\n  }\n  var flashBridge = _flashState.bridge;\n  if (flashBridge) {\n    var htmlBridge = _getHtmlBridge(flashBridge);\n    if (htmlBridge) {\n      if (_flashState.pluginType === \"activex\" && \"readyState\" in flashBridge) {\n        flashBridge.style.display = \"none\";\n        (function removeSwfFromIE() {\n          if (flashBridge.readyState === 4) {\n            for (var prop in flashBridge) {\n              if (typeof flashBridge[prop] === \"function\") {\n                flashBridge[prop] = null;\n              }\n            }\n            flashBridge.parentNode.removeChild(flashBridge);\n            if (htmlBridge.parentNode) {\n              htmlBridge.parentNode.removeChild(htmlBridge);\n            }\n          } else {\n            setTimeout(removeSwfFromIE, 10);\n          }\n        })();\n      } else {\n        flashBridge.parentNode.removeChild(flashBridge);\n        if (htmlBridge.parentNode) {\n          htmlBridge.parentNode.removeChild(htmlBridge);\n        }\n      }\n    }\n    _flashState.ready = null;\n    _flashState.bridge = null;\n    _flashState.deactivated = null;\n  }\n  ZeroClipboard.clearData();\n};\nZeroClipboard.activate = function (element) {\n  if (_currentElement) {\n    _removeClass(_currentElement, _globalConfig.hoverClass);\n    _removeClass(_currentElement, _globalConfig.activeClass);\n  }\n  _currentElement = element;\n  _addClass(element, _globalConfig.hoverClass);\n  _reposition();\n  var newTitle = _globalConfig.title || element.getAttribute(\"title\");\n  if (newTitle) {\n    var htmlBridge = _getHtmlBridge(_flashState.bridge);\n    if (htmlBridge) {\n      htmlBridge.setAttribute(\"title\", newTitle);\n    }\n  }\n  var useHandCursor = _globalConfig.forceHandCursor === true || _getStyle(element, \"cursor\") === \"pointer\";\n  _setHandCursor(useHandCursor);\n};\nZeroClipboard.deactivate = function () {\n  var htmlBridge = _getHtmlBridge(_flashState.bridge);\n  if (htmlBridge) {\n    htmlBridge.removeAttribute(\"title\");\n    htmlBridge.style.left = \"0px\";\n    htmlBridge.style.top = \"-9999px\";\n    _setSize(1, 1);\n  }\n  if (_currentElement) {\n    _removeClass(_currentElement, _globalConfig.hoverClass);\n    _removeClass(_currentElement, _globalConfig.activeClass);\n    _currentElement = null;\n  }\n};\nZeroClipboard.state = function () {\n  return {\n    browser: _pick(navigator, [\"userAgent\", \"platform\", \"appName\"]),\n    flash: _omit(_flashState, [\"bridge\"]),\n    zeroclipboard: {\n      version: ZeroClipboard.version,\n      config: ZeroClipboard.config()\n    }\n  };\n};\nZeroClipboard.setData = function (format, data) {\n  var dataObj;\n  if (typeof format === \"object\" && format && typeof data === \"undefined\") {\n    dataObj = format;\n    ZeroClipboard.clearData();\n  } else if (typeof format === \"string\" && format) {\n    dataObj = {};\n    dataObj[format] = data;\n  } else {\n    return;\n  }\n  for (var dataFormat in dataObj) {\n    if (dataFormat && dataObj.hasOwnProperty(dataFormat) && typeof dataObj[dataFormat] === \"string\" && dataObj[dataFormat]) {\n      _clipData[dataFormat] = dataObj[dataFormat];\n    }\n  }\n};\nZeroClipboard.clearData = function (format) {\n  if (typeof format === \"undefined\") {\n    _deleteOwnProperties(_clipData);\n    _clipDataFormatMap = null;\n  } else if (typeof format === \"string\" && _clipData.hasOwnProperty(format)) {\n    delete _clipData[format];\n  }\n};\nvar _bridge = function () {\n  var flashBridge, len;\n  var container = document.getElementById(\"global-zeroclipboard-html-bridge\");\n  if (!container) {\n    var allowScriptAccess = _determineScriptAccess(location.host, _globalConfig);\n    var allowNetworking = allowScriptAccess === \"never\" ? \"none\" : \"all\";\n    var flashvars = _vars(_globalConfig);\n    var swfUrl = _globalConfig.swfPath + _cacheBust(_globalConfig.swfPath, _globalConfig);\n    container = _createHtmlBridge();\n    var divToBeReplaced = document.createElement(\"div\");\n    container.appendChild(divToBeReplaced);\n    document.body.appendChild(container);\n    var tmpDiv = document.createElement(\"div\");\n    var oldIE = _flashState.pluginType === \"activex\";\n    tmpDiv.innerHTML = '<object id=\"global-zeroclipboard-flash-bridge\" name=\"global-zeroclipboard-flash-bridge\" ' + 'width=\"100%\" height=\"100%\" ' + (oldIE ? 'classid=\"clsid:d27cdb6e-ae6d-11cf-96b8-444553540000\"' : 'type=\"application/x-shockwave-flash\" data=\"' + swfUrl + '\"') + \">\" + (oldIE ? '<param name=\"movie\" value=\"' + swfUrl + '\"/>' : \"\") + '<param name=\"allowScriptAccess\" value=\"' + allowScriptAccess + '\"/>' + '<param name=\"allowNetworking\" value=\"' + allowNetworking + '\"/>' + '<param name=\"menu\" value=\"false\"/>' + '<param name=\"wmode\" value=\"transparent\"/>' + '<param name=\"flashvars\" value=\"' + flashvars + '\"/>' + \"</object>\";\n    flashBridge = tmpDiv.firstChild;\n    tmpDiv = null;\n    flashBridge.ZeroClipboard = ZeroClipboard;\n    container.replaceChild(flashBridge, divToBeReplaced);\n  }\n  if (!flashBridge) {\n    flashBridge = document[\"global-zeroclipboard-flash-bridge\"];\n    if (flashBridge && (len = flashBridge.length)) {\n      flashBridge = flashBridge[len - 1];\n    }\n    if (!flashBridge) {\n      flashBridge = container.firstChild;\n    }\n  }\n  _flashState.bridge = flashBridge || null;\n};\nvar _createHtmlBridge = function () {\n  var container = document.createElement(\"div\");\n  container.id = \"global-zeroclipboard-html-bridge\";\n  container.className = \"global-zeroclipboard-container\";\n  container.style.position = \"absolute\";\n  container.style.left = \"0px\";\n  container.style.top = \"-9999px\";\n  container.style.width = \"1px\";\n  container.style.height = \"1px\";\n  container.style.zIndex = \"\" + _getSafeZIndex(_globalConfig.zIndex);\n  return container;\n};\nvar _getHtmlBridge = function (flashBridge) {\n  var htmlBridge = flashBridge && flashBridge.parentNode;\n  while (htmlBridge && htmlBridge.nodeName === \"OBJECT\" && htmlBridge.parentNode) {\n    htmlBridge = htmlBridge.parentNode;\n  }\n  return htmlBridge || null;\n};\nvar _reposition = function () {\n  if (_currentElement) {\n    var pos = _getDOMObjectPosition(_currentElement, _globalConfig.zIndex);\n    var htmlBridge = _getHtmlBridge(_flashState.bridge);\n    if (htmlBridge) {\n      htmlBridge.style.top = pos.top + \"px\";\n      htmlBridge.style.left = pos.left + \"px\";\n      htmlBridge.style.width = pos.width + \"px\";\n      htmlBridge.style.height = pos.height + \"px\";\n      htmlBridge.style.zIndex = pos.zIndex + 1;\n    }\n    _setSize(pos.width, pos.height);\n  }\n};\nvar _setSize = function (width, height) {\n  var htmlBridge = _getHtmlBridge(_flashState.bridge);\n  if (htmlBridge) {\n    htmlBridge.style.width = width + \"px\";\n    htmlBridge.style.height = height + \"px\";\n  }\n};\nZeroClipboard.emit = function (event) {\n  var eventType, eventObj, performCallbackAsync, clients, i, len, eventCopy, returnVal, tmp;\n  if (typeof event === \"string\" && event) {\n    eventType = event;\n  }\n  if (typeof event === \"object\" && event && typeof event.type === \"string\" && event.type) {\n    eventType = event.type;\n    eventObj = event;\n  }\n  if (!eventType) {\n    return;\n  }\n  event = _createEvent(eventType, eventObj);\n  _preprocessEvent(event);\n  if (event.type === \"ready\" && _flashState.overdue === true) {\n    return ZeroClipboard.emit({\n      type: \"error\",\n      name: \"flash-overdue\"\n    });\n  }\n  performCallbackAsync = !/^(before)?copy$/.test(event.type);\n  if (event.client) {\n    _dispatchClientCallbacks.call(event.client, event, performCallbackAsync);\n  } else {\n    clients = event.target && event.target !== window && _globalConfig.autoActivate === true ? _getAllClientsClippedToElement(event.target) : _getAllClients();\n    for (i = 0, len = clients.length; i < len; i++) {\n      eventCopy = _extend({}, event, {\n        client: clients[i]\n      });\n      _dispatchClientCallbacks.call(clients[i], eventCopy, performCallbackAsync);\n    }\n  }\n  if (event.type === \"copy\") {\n    tmp = _mapClipDataToFlash(_clipData);\n    returnVal = tmp.data;\n    _clipDataFormatMap = tmp.formatMap;\n  }\n  return returnVal;\n};\nvar _dispatchClientCallbacks = function (event, async) {\n  var handlers = _clientMeta[this.id] && _clientMeta[this.id].handlers[event.type];\n  if (handlers && handlers.length) {\n    var i, len, func, context, originalContext = this;\n    for (i = 0, len = handlers.length; i < len; i++) {\n      func = handlers[i];\n      context = originalContext;\n      if (typeof func === \"string\" && typeof window[func] === \"function\") {\n        func = window[func];\n      }\n      if (typeof func === \"object\" && func && typeof func.handleEvent === \"function\") {\n        context = func;\n        func = func.handleEvent;\n      }\n      if (typeof func === \"function\") {\n        _dispatchCallback(func, context, [event], async);\n      }\n    }\n  }\n  return this;\n};\nvar _eventMessages = {\n  ready: \"Flash communication is established\",\n  error: {\n    \"flash-disabled\": \"Flash is disabled or not installed\",\n    \"flash-outdated\": \"Flash is too outdated to support ZeroClipboard\",\n    \"flash-unavailable\": \"Flash is unable to communicate bidirectionally with JavaScript\",\n    \"flash-deactivated\": \"Flash is too outdated for your browser and/or is configured as click-to-activate\",\n    \"flash-overdue\": \"Flash communication was established but NOT within the acceptable time limit\"\n  }\n};\nvar _createEvent = function (eventType, event) {\n  if (!(eventType || event && event.type)) {\n    return;\n  }\n  event = event || {};\n  eventType = (eventType || event.type).toLowerCase();\n  _extend(event, {\n    type: eventType,\n    target: event.target || _currentElement || null,\n    relatedTarget: event.relatedTarget || null,\n    currentTarget: _flashState && _flashState.bridge || null\n  });\n  var msg = _eventMessages[event.type];\n  if (event.type === \"error\" && event.name && msg) {\n    msg = msg[event.name];\n  }\n  if (msg) {\n    event.message = msg;\n  }\n  if (event.type === \"ready\") {\n    _extend(event, {\n      target: null,\n      version: _flashState.version\n    });\n  }\n  if (event.type === \"error\") {\n    event.target = null;\n    if (/^flash-(outdated|unavailable|deactivated|overdue)$/.test(event.name)) {\n      _extend(event, {\n        version: _flashState.version,\n        minimumVersion: \"11.0.0\"\n      });\n    }\n  }\n  if (event.type === \"copy\") {\n    event.clipboardData = {\n      setData: ZeroClipboard.setData,\n      clearData: ZeroClipboard.clearData\n    };\n  }\n  if (event.type === \"aftercopy\") {\n    event = _mapClipResultsFromFlash(event, _clipDataFormatMap);\n  }\n  if (event.target && !event.relatedTarget) {\n    event.relatedTarget = _getRelatedTarget(event.target);\n  }\n  return event;\n};\nvar _getRelatedTarget = function (targetEl) {\n  var relatedTargetId = targetEl && targetEl.getAttribute && targetEl.getAttribute(\"data-clipboard-target\");\n  return relatedTargetId ? document.getElementById(relatedTargetId) : null;\n};\nvar _preprocessEvent = function (event) {\n  var element = event.target || _currentElement;\n  switch (event.type) {\n    case \"error\":\n      if (_inArray(event.name, [\"flash-disabled\", \"flash-outdated\", \"flash-deactivated\", \"flash-overdue\"])) {\n        _extend(_flashState, {\n          disabled: event.name === \"flash-disabled\",\n          outdated: event.name === \"flash-outdated\",\n          unavailable: event.name === \"flash-unavailable\",\n          deactivated: event.name === \"flash-deactivated\",\n          overdue: event.name === \"flash-overdue\",\n          ready: false\n        });\n      }\n      break;\n\n    case \"ready\":\n      var wasDeactivated = _flashState.deactivated === true;\n      _extend(_flashState, {\n        disabled: false,\n        outdated: false,\n        unavailable: false,\n        deactivated: false,\n        overdue: wasDeactivated,\n        ready: !wasDeactivated\n      });\n      break;\n\n    case \"copy\":\n      var textContent, htmlContent, targetEl = event.relatedTarget;\n      if (!(_clipData[\"text/html\"] || _clipData[\"text/plain\"]) && targetEl && (htmlContent = targetEl.value || targetEl.outerHTML || targetEl.innerHTML) && (textContent = targetEl.value || targetEl.textContent || targetEl.innerText)) {\n        event.clipboardData.clearData();\n        event.clipboardData.setData(\"text/plain\", textContent);\n        if (htmlContent !== textContent) {\n          event.clipboardData.setData(\"text/html\", htmlContent);\n        }\n      } else if (!_clipData[\"text/plain\"] && event.target && (textContent = event.target.getAttribute(\"data-clipboard-text\"))) {\n        event.clipboardData.clearData();\n        event.clipboardData.setData(\"text/plain\", textContent);\n      }\n      break;\n\n    case \"aftercopy\":\n      ZeroClipboard.clearData();\n      if (element && element !== _safeActiveElement() && element.focus) {\n        element.focus();\n      }\n      break;\n\n    case \"mouseover\":\n      _addClass(element, _globalConfig.hoverClass);\n      break;\n\n    case \"mouseout\":\n      if (_globalConfig.autoActivate === true) {\n        ZeroClipboard.deactivate();\n      }\n      break;\n\n    case \"mousedown\":\n      _addClass(element, _globalConfig.activeClass);\n      break;\n\n    case \"mouseup\":\n      _removeClass(element, _globalConfig.activeClass);\n      break;\n  }\n};\nZeroClipboard.prototype.on = function (eventName, func) {\n  var i, len, events, added = {}, handlers = _clientMeta[this.id] && _clientMeta[this.id].handlers;\n  if (typeof eventName === \"string\" && eventName) {\n    events = eventName.toLowerCase().split(/\\s+/);\n  } else if (typeof eventName === \"object\" && eventName && typeof func === \"undefined\") {\n    for (i in eventName) {\n      if (eventName.hasOwnProperty(i) && typeof i === \"string\" && i && typeof eventName[i] === \"function\") {\n        this.on(i, eventName[i]);\n      }\n    }\n  }\n  if (events && events.length) {\n    for (i = 0, len = events.length; i < len; i++) {\n      eventName = events[i].replace(/^on/, \"\");\n      added[eventName] = true;\n      if (!handlers[eventName]) {\n        handlers[eventName] = [];\n      }\n      handlers[eventName].push(func);\n    }\n    if (added.ready && _flashState.ready) {\n      ZeroClipboard.emit({\n        type: \"ready\",\n        client: this\n      });\n    }\n    if (added.error) {\n      var errorTypes = [\"disabled\", \"outdated\", \"unavailable\", \"deactivated\", \"overdue\"];\n      for (i = 0, len = errorTypes.length; i < len; i++) {\n        if (_flashState[errorTypes[i]]) {\n          ZeroClipboard.emit({\n            type: \"error\",\n            name: \"flash-\" + errorTypes[i],\n            client: this\n          });\n          break;\n        }\n      }\n    }\n  }\n  return this;\n};\nZeroClipboard.prototype.off = function (eventName, func) {\n  var i, len, foundIndex, events, perEventHandlers, handlers = _clientMeta[this.id] && _clientMeta[this.id].handlers;\n  if (arguments.length === 0) {\n    events = _objectKeys(handlers);\n  } else if (typeof eventName === \"string\" && eventName) {\n    events = eventName.split(/\\s+/);\n  } else if (typeof eventName === \"object\" && eventName && typeof func === \"undefined\") {\n    for (i in eventName) {\n      if (eventName.hasOwnProperty(i) && typeof i === \"string\" && i && typeof eventName[i] === \"function\") {\n        this.off(i, eventName[i]);\n      }\n    }\n  }\n  if (events && events.length) {\n    for (i = 0, len = events.length; i < len; i++) {\n      eventName = events[i].toLowerCase().replace(/^on/, \"\");\n      perEventHandlers = handlers[eventName];\n      if (perEventHandlers && perEventHandlers.length) {\n        if (func) {\n          foundIndex = _inArray(func, perEventHandlers);\n          while (foundIndex !== -1) {\n            perEventHandlers.splice(foundIndex, 1);\n            foundIndex = _inArray(func, perEventHandlers, foundIndex);\n          }\n        } else {\n          handlers[eventName].length = 0;\n        }\n      }\n    }\n  }\n  return this;\n};\nZeroClipboard.prototype.handlers = function (eventName) {\n  var prop, copy = null, handlers = _clientMeta[this.id] && _clientMeta[this.id].handlers;\n  if (handlers) {\n    if (typeof eventName === \"string\" && eventName) {\n      return handlers[eventName] ? handlers[eventName].slice(0) : null;\n    }\n    copy = {};\n    for (prop in handlers) {\n      if (handlers.hasOwnProperty(prop) && handlers[prop]) {\n        copy[prop] = handlers[prop].slice(0);\n      }\n    }\n  }\n  return copy;\n};\nZeroClipboard.prototype.clip = function (elements) {\n  elements = _prepClip(elements);\n  for (var i = 0; i < elements.length; i++) {\n    if (elements.hasOwnProperty(i) && elements[i] && elements[i].nodeType === 1) {\n      if (!elements[i].zcClippingId) {\n        elements[i].zcClippingId = \"zcClippingId_\" + _elementIdCounter++;\n        _elementMeta[elements[i].zcClippingId] = [this.id];\n        if (_globalConfig.autoActivate === true) {\n          _addEventHandler(elements[i], \"mouseover\", _elementMouseOver);\n        }\n      } else if (_inArray(this.id, _elementMeta[elements[i].zcClippingId]) === -1) {\n        _elementMeta[elements[i].zcClippingId].push(this.id);\n      }\n      var clippedElements = _clientMeta[this.id].elements;\n      if (_inArray(elements[i], clippedElements) === -1) {\n        clippedElements.push(elements[i]);\n      }\n    }\n  }\n  return this;\n};\nZeroClipboard.prototype.unclip = function (elements) {\n  var meta = _clientMeta[this.id];\n  if (!meta) {\n    return this;\n  }\n  var clippedElements = meta.elements;\n  var arrayIndex;\n  if (typeof elements === \"undefined\") {\n    elements = clippedElements.slice(0);\n  } else {\n    elements = _prepClip(elements);\n  }\n  for (var i = elements.length; i--;) {\n    if (elements.hasOwnProperty(i) && elements[i] && elements[i].nodeType === 1) {\n      arrayIndex = 0;\n      while ((arrayIndex = _inArray(elements[i], clippedElements, arrayIndex)) !== -1) {\n        clippedElements.splice(arrayIndex, 1);\n      }\n      var clientIds = _elementMeta[elements[i].zcClippingId];\n      if (clientIds) {\n        arrayIndex = 0;\n        while ((arrayIndex = _inArray(this.id, clientIds, arrayIndex)) !== -1) {\n          clientIds.splice(arrayIndex, 1);\n        }\n        if (clientIds.length === 0) {\n          if (_globalConfig.autoActivate === true) {\n            _removeEventHandler(elements[i], \"mouseover\", _elementMouseOver);\n          }\n          delete elements[i].zcClippingId;\n        }\n      }\n    }\n  }\n  return this;\n};\nZeroClipboard.prototype.elements = function () {\n  var meta = _clientMeta[this.id];\n  return meta && meta.elements ? meta.elements.slice(0) : [];\n};\nvar _getAllClientsClippedToElement = function (element) {\n  var elementMetaId, clientIds, i, len, client, clients = [];\n  if (element && element.nodeType === 1 && (elementMetaId = element.zcClippingId) && _elementMeta.hasOwnProperty(elementMetaId)) {\n    clientIds = _elementMeta[elementMetaId];\n    if (clientIds && clientIds.length) {\n      for (i = 0, len = clientIds.length; i < len; i++) {\n        client = _clientMeta[clientIds[i]].instance;\n        if (client && client instanceof ZeroClipboard) {\n          clients.push(client);\n        }\n      }\n    }\n  }\n  return clients;\n};\n_globalConfig.hoverClass = \"zeroclipboard-is-hover\";\n_globalConfig.activeClass = \"zeroclipboard-is-active\";\nwindow.ZeroClipboard = ZeroClipboard;\n\n\n// WEBPACK FOOTER //\n// ./../ehuodiManagement/scms/trunk/src/libs/ueditor/third-party/zeroclipboard/ZeroClipboard.js","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../../../../../../angular-ui-webpack/node_modules/._css-loader@0.28.7@css-loader/index.js!../../../../../../../angular-ui-webpack/node_modules/._postcss-loader@2.0.9@postcss-loader/lib/index.js??postcss!./iframe.css?asFile\");\nif(typeof content === 'string') content = [[module.id, content, '']];\n// Prepare cssTransformation\nvar transform;\n\nvar options = {\"hmr\":true}\noptions.transform = transform\n// add the styles to the DOM\nvar update = require(\"!../../../../../../../angular-ui-webpack/node_modules/._style-loader@0.19.1@style-loader/lib/addStyles.js\")(content, options);\nif(content.locals) module.exports = content.locals;\n// Hot Module Replacement\nif(module.hot) {\n\t// When the styles change, update the <style> tags\n\tif(!content.locals) {\n\t\tmodule.hot.accept(\"!!../../../../../../../angular-ui-webpack/node_modules/._css-loader@0.28.7@css-loader/index.js!../../../../../../../angular-ui-webpack/node_modules/._postcss-loader@2.0.9@postcss-loader/lib/index.js??postcss!./iframe.css?asFile\", function() {\n\t\t\tvar newContent = require(\"!!../../../../../../../angular-ui-webpack/node_modules/._css-loader@0.28.7@css-loader/index.js!../../../../../../../angular-ui-webpack/node_modules/._postcss-loader@2.0.9@postcss-loader/lib/index.js??postcss!./iframe.css?asFile\");\n\t\t\tif(typeof newContent === 'string') newContent = [[module.id, newContent, '']];\n\t\t\tupdate(newContent);\n\t\t});\n\t}\n\t// When the module is disposed, remove the <style> tags\n\tmodule.hot.dispose(function() { update(); });\n}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/iframe.css?asFile\n// module id = 143\n// module chunks = 0","exports = module.exports = require(\"../../../../../../../angular-ui-webpack/node_modules/._css-loader@0.28.7@css-loader/lib/css-base.js\")(undefined);\n// imports\n\n\n// module\nexports.push([module.id, \"/*可以在这里添加你自己的css*/\\r\\n\", \"\"]);\n\n// exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/._css-loader@0.28.7@css-loader!./node_modules/._postcss-loader@2.0.9@postcss-loader/lib?{\"ident\":\"postcss\",\"plugins\":[null]}!../ehuodiManagement/scms/trunk/src/libs/ueditor/themes/iframe.css?asFile\n// module id = 144\n// module chunks = 0","/**\r\n * Created with JetBrains PhpStorm.\r\n * User: taoqili\r\n * Date: 12-6-12\r\n * Time: 下午5:02\r\n * To change this template use File | Settings | File Templates.\r\n */\r\nUE.I18N['zh-cn'] = {\r\n    'labelMap':{\r\n        'anchor':'锚点', 'undo':'撤销', 'redo':'重做', 'bold':'加粗', 'indent':'首行缩进', 'snapscreen':'截图',\r\n        'italic':'斜体', 'underline':'下划线', 'strikethrough':'删除线', 'subscript':'下标','fontborder':'字符边框',\r\n        'superscript':'上标', 'formatmatch':'格式刷', 'source':'源代码', 'blockquote':'引用',\r\n        'pasteplain':'纯文本粘贴模式', 'selectall':'全选', 'print':'打印', 'preview':'预览',\r\n        'horizontal':'分隔线', 'removeformat':'清除格式', 'time':'时间', 'date':'日期',\r\n        'unlink':'取消链接', 'insertrow':'前插入行', 'insertcol':'前插入列', 'mergeright':'右合并单元格', 'mergedown':'下合并单元格',\r\n        'deleterow':'删除行', 'deletecol':'删除列', 'splittorows':'拆分成行',\r\n        'splittocols':'拆分成列', 'splittocells':'完全拆分单元格','deletecaption':'删除表格标题','inserttitle':'插入标题',\r\n        'mergecells':'合并多个单元格', 'deletetable':'删除表格', 'cleardoc':'清空文档','insertparagraphbeforetable':\"表格前插入行\",'insertcode':'代码语言',\r\n        'fontfamily':'字体', 'fontsize':'字号', 'paragraph':'段落格式', 'simpleupload':'单图上传', 'insertimage':'多图上传','edittable':'表格属性','edittd':'单元格属性', 'link':'超链接',\r\n        'emotion':'表情', 'spechars':'特殊字符', 'searchreplace':'查询替换', 'map':'Baidu地图', 'gmap':'Google地图',\r\n        'insertvideo':'视频', 'help':'帮助', 'justifyleft':'居左对齐', 'justifyright':'居右对齐', 'justifycenter':'居中对齐',\r\n        'justifyjustify':'两端对齐', 'forecolor':'字体颜色', 'backcolor':'背景色', 'insertorderedlist':'有序列表',\r\n        'insertunorderedlist':'无序列表', 'fullscreen':'全屏', 'directionalityltr':'从左向右输入', 'directionalityrtl':'从右向左输入',\r\n        'rowspacingtop':'段前距', 'rowspacingbottom':'段后距',  'pagebreak':'分页', 'insertframe':'插入Iframe', 'imagenone':'默认',\r\n        'imageleft':'左浮动', 'imageright':'右浮动', 'attachment':'附件', 'imagecenter':'居中', 'wordimage':'图片转存',\r\n        'lineheight':'行间距','edittip' :'编辑提示','customstyle':'自定义标题', 'autotypeset':'自动排版',\r\n        'webapp':'百度应用','touppercase':'字母大写', 'tolowercase':'字母小写','background':'背景','template':'模板','scrawl':'涂鸦',\r\n        'music':'音乐','inserttable':'插入表格','drafts': '从草稿箱加载', 'charts': '图表'\r\n    },\r\n    'insertorderedlist':{\r\n        'num':'1,2,3...',\r\n        'num1':'1),2),3)...',\r\n        'num2':'(1),(2),(3)...',\r\n        'cn':'一,二,三....',\r\n        'cn1':'一),二),三)....',\r\n        'cn2':'(一),(二),(三)....',\r\n        'decimal':'1,2,3...',\r\n        'lower-alpha':'a,b,c...',\r\n        'lower-roman':'i,ii,iii...',\r\n        'upper-alpha':'A,B,C...',\r\n        'upper-roman':'I,II,III...'\r\n    },\r\n    'insertunorderedlist':{\r\n        'circle':'○ 大圆圈',\r\n        'disc':'● 小黑点',\r\n        'square':'■ 小方块 ',\r\n        'dash' :'— 破折号',\r\n        'dot':' 。 小圆圈'\r\n    },\r\n    'paragraph':{'p':'段落', 'h1':'标题 1', 'h2':'标题 2', 'h3':'标题 3', 'h4':'标题 4', 'h5':'标题 5', 'h6':'标题 6'},\r\n    'fontfamily':{\r\n        'songti':'宋体',\r\n        'kaiti':'楷体',\r\n        'heiti':'黑体',\r\n        'lishu':'隶书',\r\n        'yahei':'微软雅黑',\r\n        'andaleMono':'andale mono',\r\n        'arial': 'arial',\r\n        'arialBlack':'arial black',\r\n        'comicSansMs':'comic sans ms',\r\n        'impact':'impact',\r\n        'timesNewRoman':'times new roman'\r\n    },\r\n    'customstyle':{\r\n        'tc':'标题居中',\r\n        'tl':'标题居左',\r\n        'im':'强调',\r\n        'hi':'明显强调'\r\n    },\r\n    'autoupload': {\r\n        'exceedSizeError': '文件大小超出限制',\r\n        'exceedTypeError': '文件格式不允许',\r\n        'jsonEncodeError': '服务器返回格式错误',\r\n        'loading':\"正在上传...\",\r\n        'loadError':\"上传错误\",\r\n        'errorLoadConfig': '后端配置项没有正常加载，上传插件不能正常使用！'\r\n    },\r\n    'simpleupload':{\r\n        'exceedSizeError': '文件大小超出限制',\r\n        'exceedTypeError': '文件格式不允许',\r\n        'jsonEncodeError': '服务器返回格式错误',\r\n        'loading':\"正在上传...\",\r\n        'loadError':\"上传错误\",\r\n        'errorLoadConfig': '后端配置项没有正常加载，上传插件不能正常使用！'\r\n    },\r\n    'elementPathTip':\"元素路径\",\r\n    'wordCountTip':\"字数统计\",\r\n    'wordCountMsg':'当前已输入{#count}个字符, 您还可以输入{#leave}个字符。 ',\r\n    'wordOverFlowMsg':'<span style=\"color:red;\">字数超出最大允许值，服务器可能拒绝保存！</span>',\r\n    'ok':\"确认\",\r\n    'cancel':\"取消\",\r\n    'closeDialog':\"关闭对话框\",\r\n    'tableDrag':\"表格拖动必须引入uiUtils.js文件！\",\r\n    'autofloatMsg':\"工具栏浮动依赖编辑器UI，您首先需要引入UI文件!\",\r\n    'loadconfigError': '获取后台配置项请求出错，上传功能将不能正常使用！',\r\n    'loadconfigFormatError': '后台配置项返回格式出错，上传功能将不能正常使用！',\r\n    'loadconfigHttpError': '请求后台配置项http错误，上传功能将不能正常使用！',\r\n    'snapScreen_plugin':{\r\n        'browserMsg':\"仅支持IE浏览器！\",\r\n        'callBackErrorMsg':\"服务器返回数据有误，请检查配置项之后重试。\",\r\n        'uploadErrorMsg':\"截图上传失败，请检查服务器端环境! \"\r\n    },\r\n    'insertcode':{\r\n        'as3':'ActionScript 3',\r\n        'bash':'Bash/Shell',\r\n        'cpp':'C/C++',\r\n        'css':'CSS',\r\n        'cf':'ColdFusion',\r\n        'c#':'C#',\r\n        'delphi':'Delphi',\r\n        'diff':'Diff',\r\n        'erlang':'Erlang',\r\n        'groovy':'Groovy',\r\n        'html':'HTML',\r\n        'java':'Java',\r\n        'jfx':'JavaFX',\r\n        'js':'JavaScript',\r\n        'pl':'Perl',\r\n        'php':'PHP',\r\n        'plain':'Plain Text',\r\n        'ps':'PowerShell',\r\n        'python':'Python',\r\n        'ruby':'Ruby',\r\n        'scala':'Scala',\r\n        'sql':'SQL',\r\n        'vb':'Visual Basic',\r\n        'xml':'XML'\r\n    },\r\n    'confirmClear':\"确定清空当前文档么？\",\r\n    'contextMenu':{\r\n        'delete':\"删除\",\r\n        'selectall':\"全选\",\r\n        'deletecode':\"删除代码\",\r\n        'cleardoc':\"清空文档\",\r\n        'confirmclear':\"确定清空当前文档么？\",\r\n        'unlink':\"删除超链接\",\r\n        'paragraph':\"段落格式\",\r\n        'edittable':\"表格属性\",\r\n        'aligntd':\"单元格对齐方式\",\r\n        'aligntable':'表格对齐方式',\r\n        'tableleft':'左浮动',\r\n        'tablecenter':'居中显示',\r\n        'tableright':'右浮动',\r\n        'edittd':\"单元格属性\",\r\n        'setbordervisible':'设置表格边线可见',\r\n        'justifyleft':'左对齐',\r\n        'justifyright':'右对齐',\r\n        'justifycenter':'居中对齐',\r\n        'justifyjustify':'两端对齐',\r\n        'table':\"表格\",\r\n        'inserttable':'插入表格',\r\n        'deletetable':\"删除表格\",\r\n        'insertparagraphbefore':\"前插入段落\",\r\n        'insertparagraphafter':'后插入段落',\r\n        'deleterow':\"删除当前行\",\r\n        'deletecol':\"删除当前列\",\r\n        'insertrow':\"前插入行\",\r\n        'insertcol':\"左插入列\",\r\n        'insertrownext':'后插入行',\r\n        'insertcolnext':'右插入列',\r\n        'insertcaption':'插入表格名称',\r\n        'deletecaption':'删除表格名称',\r\n        'inserttitle':'插入表格标题行',\r\n        'deletetitle':'删除表格标题行',\r\n        'inserttitlecol':'插入表格标题列',\r\n        'deletetitlecol':'删除表格标题列',\r\n        'averageDiseRow':'平均分布各行',\r\n        'averageDisCol':'平均分布各列',\r\n        'mergeright':\"向右合并\",\r\n        'mergeleft':\"向左合并\",\r\n        'mergedown':\"向下合并\",\r\n        'mergecells':\"合并单元格\",\r\n        'splittocells':\"完全拆分单元格\",\r\n        'splittocols':\"拆分成列\",\r\n        'splittorows':\"拆分成行\",\r\n        'tablesort':'表格排序',\r\n        'enablesort':'设置表格可排序',\r\n        'disablesort':'取消表格可排序',\r\n        'reversecurrent':'逆序当前',\r\n        'orderbyasc':'按ASCII字符升序',\r\n        'reversebyasc':'按ASCII字符降序',\r\n        'orderbynum':'按数值大小升序',\r\n        'reversebynum':'按数值大小降序',\r\n        'borderbk':'边框底纹',\r\n        'setcolor':'表格隔行变色',\r\n        'unsetcolor':'取消表格隔行变色',\r\n        'setbackground':'选区背景隔行',\r\n        'unsetbackground':'取消选区背景',\r\n        'redandblue':'红蓝相间',\r\n        'threecolorgradient':'三色渐变',\r\n        'copy':\"复制(Ctrl + c)\",\r\n        'copymsg': \"浏览器不支持,请使用 'Ctrl + c'\",\r\n        'paste':\"粘贴(Ctrl + v)\",\r\n         'pastemsg': \"浏览器不支持,请使用 'Ctrl + v'\"\r\n    },\r\n    'copymsg': \"浏览器不支持,请使用 'Ctrl + c'\",\r\n    'pastemsg': \"浏览器不支持,请使用 'Ctrl + v'\",\r\n    'anthorMsg':\"链接\",\r\n    'clearColor':'清空颜色',\r\n    'standardColor':'标准颜色',\r\n    'themeColor':'主题颜色',\r\n    'property':'属性',\r\n    'default':'默认',\r\n    'modify':'修改',\r\n    'justifyleft':'左对齐',\r\n    'justifyright':'右对齐',\r\n    'justifycenter':'居中',\r\n    'justify':'默认',\r\n    'clear':'清除',\r\n    'anchorMsg':'锚点',\r\n    'delete':'删除',\r\n    'clickToUpload':\"点击上传\",\r\n    'unset':'尚未设置语言文件',\r\n    't_row':'行',\r\n    't_col':'列',\r\n    'more':'更多',\r\n    'pasteOpt':'粘贴选项',\r\n    'pasteSourceFormat':\"保留源格式\",\r\n    'tagFormat':'只保留标签',\r\n    'pasteTextFormat':'只保留文本',\r\n    'autoTypeSet':{\r\n        'mergeLine':\"合并空行\",\r\n        'delLine':\"清除空行\",\r\n        'removeFormat':\"清除格式\",\r\n        'indent':\"首行缩进\",\r\n        'alignment':\"对齐方式\",\r\n        'imageFloat':\"图片浮动\",\r\n        'removeFontsize':\"清除字号\",\r\n        'removeFontFamily':\"清除字体\",\r\n        'removeHtml':\"清除冗余HTML代码\",\r\n        'pasteFilter':\"粘贴过滤\",\r\n        'run':\"执行\",\r\n        'symbol':'符号转换',\r\n        'bdc2sb':'全角转半角',\r\n        'tobdc':'半角转全角'\r\n    },\r\n\r\n    'background':{\r\n        'static':{\r\n            'lang_background_normal':'背景设置',\r\n            'lang_background_local':'在线图片',\r\n            'lang_background_set':'选项',\r\n            'lang_background_none':'无背景色',\r\n            'lang_background_colored':'有背景色',\r\n            'lang_background_color':'颜色设置',\r\n            'lang_background_netimg':'网络图片',\r\n            'lang_background_align':'对齐方式',\r\n            'lang_background_position':'精确定位',\r\n            'repeatType':{'options':[\"居中\", \"横向重复\", \"纵向重复\", \"平铺\",\"自定义\"]}\r\n\r\n        },\r\n        'noUploadImage':\"当前未上传过任何图片！\",\r\n        'toggleSelect':\"单击可切换选中状态\\n原图尺寸: \"\r\n    },\r\n    //===============dialog i18N=======================\r\n    'insertimage':{\r\n        'static':{\r\n            'lang_tab_remote':\"插入图片\", //节点\r\n            'lang_tab_upload':\"本地上传\",\r\n            'lang_tab_online':\"在线管理\",\r\n            'lang_tab_search':\"图片搜索\",\r\n            'lang_input_url':\"地 址：\",\r\n            'lang_input_size':\"大 小：\",\r\n            'lang_input_width':\"宽度\",\r\n            'lang_input_height':\"高度\",\r\n            'lang_input_border':\"边 框：\",\r\n            'lang_input_vhspace':\"边 距：\",\r\n            'lang_input_title':\"描 述：\",\r\n            'lang_input_align':'图片浮动方式：',\r\n            'lang_imgLoading':\"　图片加载中……\",\r\n            'lang_start_upload':\"开始上传\",\r\n            'lock':{'title':\"锁定宽高比例\"}, //属性\r\n            'searchType':{'title':\"图片类型\", 'options':[\"新闻\", \"壁纸\", \"表情\", \"头像\"]}, //select的option\r\n            'searchTxt':{'value':\"请输入搜索关键词\"},\r\n            'searchBtn':{'value':\"百度一下\"},\r\n            'searchReset':{'value':\"清空搜索\"},\r\n            'noneAlign':{'title':'无浮动'},\r\n            'leftAlign':{'title':'左浮动'},\r\n            'rightAlign':{'title':'右浮动'},\r\n            'centerAlign':{'title':'居中独占一行'}\r\n        },\r\n        'uploadSelectFile':'点击选择图片',\r\n        'uploadAddFile':'继续添加',\r\n        'uploadStart':'开始上传',\r\n        'uploadPause':'暂停上传',\r\n        'uploadContinue':'继续上传',\r\n        'uploadRetry':'重试上传',\r\n        'uploadDelete':'删除',\r\n        'uploadTurnLeft':'向左旋转',\r\n        'uploadTurnRight':'向右旋转',\r\n        'uploadPreview':'预览中',\r\n        'uploadNoPreview':'不能预览',\r\n        'updateStatusReady': '选中_张图片，共_KB。',\r\n        'updateStatusConfirm': '已成功上传_张照片，_张照片上传失败',\r\n        'updateStatusFinish': '共_张（_KB），_张上传成功',\r\n        'updateStatusError': '，_张上传失败。',\r\n        'errorNotSupport': 'WebUploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器。',\r\n        'errorLoadConfig': '后端配置项没有正常加载，上传插件不能正常使用！',\r\n        'errorExceedSize':'文件大小超出',\r\n        'errorFileType':'文件格式不允许',\r\n        'errorInterrupt':'文件传输中断',\r\n        'errorUploadRetry':'上传失败，请重试',\r\n        'errorHttp':'http请求错误',\r\n        'errorServerUpload':'服务器返回出错',\r\n        'remoteLockError':\"宽高不正确,不能所定比例\",\r\n        'numError':\"请输入正确的长度或者宽度值！例如：123，400\",\r\n        'imageUrlError':\"不允许的图片格式或者图片域！\",\r\n        'imageLoadError':\"图片加载失败！请检查链接地址或网络状态！\",\r\n        'searchRemind':\"请输入搜索关键词\",\r\n        'searchLoading':\"图片加载中，请稍后……\",\r\n        'searchRetry':\" :( ，抱歉，没有找到图片！请重试一次！\"\r\n    },\r\n    'attachment':{\r\n        'static':{\r\n            'lang_tab_upload': '上传附件',\r\n            'lang_tab_online': '在线附件',\r\n            'lang_start_upload':\"开始上传\",\r\n            'lang_drop_remind':\"可以将文件拖到这里，单次最多可选100个文件\"\r\n        },\r\n        'uploadSelectFile':'点击选择文件',\r\n        'uploadAddFile':'继续添加',\r\n        'uploadStart':'开始上传',\r\n        'uploadPause':'暂停上传',\r\n        'uploadContinue':'继续上传',\r\n        'uploadRetry':'重试上传',\r\n        'uploadDelete':'删除',\r\n        'uploadTurnLeft':'向左旋转',\r\n        'uploadTurnRight':'向右旋转',\r\n        'uploadPreview':'预览中',\r\n        'updateStatusReady': '选中_个文件，共_KB。',\r\n        'updateStatusConfirm': '已成功上传_个文件，_个文件上传失败',\r\n        'updateStatusFinish': '共_个（_KB），_个上传成功',\r\n        'updateStatusError': '，_张上传失败。',\r\n        'errorNotSupport': 'WebUploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器。',\r\n        'errorLoadConfig': '后端配置项没有正常加载，上传插件不能正常使用！',\r\n        'errorExceedSize':'文件大小超出',\r\n        'errorFileType':'文件格式不允许',\r\n        'errorInterrupt':'文件传输中断',\r\n        'errorUploadRetry':'上传失败，请重试',\r\n        'errorHttp':'http请求错误',\r\n        'errorServerUpload':'服务器返回出错'\r\n    },\r\n    'insertvideo':{\r\n        'static':{\r\n            'lang_tab_insertV':\"插入视频\",\r\n            'lang_tab_searchV':\"搜索视频\",\r\n            'lang_tab_uploadV':\"上传视频\",\r\n            'lang_video_url':\"视频网址\",\r\n            'lang_video_size':\"视频尺寸\",\r\n            'lang_videoW':\"宽度\",\r\n            'lang_videoH':\"高度\",\r\n            'lang_alignment':\"对齐方式\",\r\n            'videoSearchTxt':{'value':\"请输入搜索关键字！\"},\r\n            'videoType':{'options':[\"全部\", \"热门\", \"娱乐\", \"搞笑\", \"体育\", \"科技\", \"综艺\"]},\r\n            'videoSearchBtn':{'value':\"百度一下\"},\r\n            'videoSearchReset':{'value':\"清空结果\"},\r\n\r\n            'lang_input_fileStatus':' 当前未上传文件',\r\n            'startUpload':{'style':\"background:url(upload.png) no-repeat;\"},\r\n\r\n            'lang_upload_size':\"视频尺寸\",\r\n            'lang_upload_width':\"宽度\",\r\n            'lang_upload_height':\"高度\",\r\n            'lang_upload_alignment':\"对齐方式\",\r\n            'lang_format_advice':\"建议使用mp4格式.\"\r\n\r\n        },\r\n        'numError':\"请输入正确的数值，如123,400\",\r\n        'floatLeft':\"左浮动\",\r\n        'floatRight':\"右浮动\",\r\n        '\"default\"':\"默认\",\r\n        'block':\"独占一行\",\r\n        'urlError':\"输入的视频地址有误，请检查后再试！\",\r\n        'loading':\" &nbsp;视频加载中，请等待……\",\r\n        'clickToSelect':\"点击选中\",\r\n        'goToSource':'访问源视频',\r\n        'noVideo':\" &nbsp; &nbsp;抱歉，找不到对应的视频，请重试！\",\r\n\r\n        'browseFiles':'浏览文件',\r\n        'uploadSuccess':'上传成功!',\r\n        'delSuccessFile':'从成功队列中移除',\r\n        'delFailSaveFile':'移除保存失败文件',\r\n        'statusPrompt':' 个文件已上传！ ',\r\n        'flashVersionError':'当前Flash版本过低，请更新FlashPlayer后重试！',\r\n        'flashLoadingError':'Flash加载失败!请检查路径或网络状态',\r\n        'fileUploadReady':'等待上传……',\r\n        'delUploadQueue':'从上传队列中移除',\r\n        'limitPrompt1':'单次不能选择超过',\r\n        'limitPrompt2':'个文件！请重新选择！',\r\n        'delFailFile':'移除失败文件',\r\n        'fileSizeLimit':'文件大小超出限制！',\r\n        'emptyFile':'空文件无法上传！',\r\n        'fileTypeError':'文件类型不允许！',\r\n        'unknownError':'未知错误！',\r\n        'fileUploading':'上传中，请等待……',\r\n        'cancelUpload':'取消上传',\r\n        'netError':'网络错误',\r\n        'failUpload':'上传失败!',\r\n        'serverIOError':'服务器IO错误！',\r\n        'noAuthority':'无权限！',\r\n        'fileNumLimit':'上传个数限制',\r\n        'failCheck':'验证失败，本次上传被跳过！',\r\n        'fileCanceling':'取消中，请等待……',\r\n        'stopUploading':'上传已停止……',\r\n\r\n        'uploadSelectFile':'点击选择文件',\r\n        'uploadAddFile':'继续添加',\r\n        'uploadStart':'开始上传',\r\n        'uploadPause':'暂停上传',\r\n        'uploadContinue':'继续上传',\r\n        'uploadRetry':'重试上传',\r\n        'uploadDelete':'删除',\r\n        'uploadTurnLeft':'向左旋转',\r\n        'uploadTurnRight':'向右旋转',\r\n        'uploadPreview':'预览中',\r\n        'updateStatusReady': '选中_个文件，共_KB。',\r\n        'updateStatusConfirm': '成功上传_个，_个失败',\r\n        'updateStatusFinish': '共_个(_KB)，_个成功上传',\r\n        'updateStatusError': '，_张上传失败。',\r\n        'errorNotSupport': 'WebUploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器。',\r\n        'errorLoadConfig': '后端配置项没有正常加载，上传插件不能正常使用！',\r\n        'errorExceedSize':'文件大小超出',\r\n        'errorFileType':'文件格式不允许',\r\n        'errorInterrupt':'文件传输中断',\r\n        'errorUploadRetry':'上传失败，请重试',\r\n        'errorHttp':'http请求错误',\r\n        'errorServerUpload':'服务器返回出错'\r\n    },\r\n    'webapp':{\r\n        'tip1':\"本功能由百度APP提供，如看到此页面，请各位站长首先申请百度APPKey!\",\r\n        'tip2':\"申请完成之后请至ueditor.config.js中配置获得的appkey! \",\r\n        'applyFor':\"点此申请\",\r\n        'anthorApi':\"百度API\"\r\n    },\r\n    'template':{\r\n        'static':{\r\n            'lang_template_bkcolor':'背景颜色',\r\n            'lang_template_clear' : '保留原有内容',\r\n            'lang_template_select' : '选择模板'\r\n        },\r\n        'blank':\"空白文档\",\r\n        'blog':\"博客文章\",\r\n        'resume':\"个人简历\",\r\n        'richText':\"图文混排\",\r\n        'sciPapers':\"科技论文\"\r\n\r\n\r\n    },\r\n    'scrawl':{\r\n        'static':{\r\n            'lang_input_previousStep':\"上一步\",\r\n            'lang_input_nextsStep':\"下一步\",\r\n            'lang_input_clear':'清空',\r\n            'lang_input_addPic':'添加背景',\r\n            'lang_input_ScalePic':'缩放背景',\r\n            'lang_input_removePic':'删除背景',\r\n            'J_imgTxt':{title:'添加背景图片'}\r\n        },\r\n        'noScarwl':\"尚未作画，白纸一张~\",\r\n        'scrawlUpLoading':\"涂鸦上传中,别急哦~\",\r\n        'continueBtn':\"继续\",\r\n        'imageError':\"糟糕，图片读取失败了！\",\r\n        'backgroundUploading':'背景图片上传中,别急哦~'\r\n    },\r\n    'music':{\r\n        'static':{\r\n            'lang_input_tips':\"输入歌手/歌曲/专辑，搜索您感兴趣的音乐！\",\r\n            'J_searchBtn':{value:'搜索歌曲'}\r\n        },\r\n        'emptyTxt':'未搜索到相关音乐结果，请换一个关键词试试。',\r\n        'chapter':'歌曲',\r\n        'singer':'歌手',\r\n        'special':'专辑',\r\n        'listenTest':'试听'\r\n    },\r\n    'anchor':{\r\n        'static':{\r\n            'lang_input_anchorName':'锚点名字：'\r\n        }\r\n    },\r\n    'charts':{\r\n        'static':{\r\n            'lang_data_source':'数据源：',\r\n            'lang_chart_format': '图表格式：',\r\n            'lang_data_align': '数据对齐方式',\r\n            'lang_chart_align_same': '数据源与图表X轴Y轴一致',\r\n            'lang_chart_align_reverse': '数据源与图表X轴Y轴相反',\r\n            'lang_chart_title': '图表标题',\r\n            'lang_chart_main_title': '主标题：',\r\n            'lang_chart_sub_title': '子标题：',\r\n            'lang_chart_x_title': 'X轴标题：',\r\n            'lang_chart_y_title': 'Y轴标题：',\r\n            'lang_chart_tip': '提示文字',\r\n            'lang_cahrt_tip_prefix': '提示文字前缀：',\r\n            'lang_cahrt_tip_description': '仅饼图有效， 当鼠标移动到饼图中相应的块上时，提示框内的文字的前缀',\r\n            'lang_chart_data_unit': '数据单位',\r\n            'lang_chart_data_unit_title': '单位：',\r\n            'lang_chart_data_unit_description': '显示在每个数据点上的数据的单位， 比如： 温度的单位 ℃',\r\n            'lang_chart_type': '图表类型：',\r\n            'lang_prev_btn': '上一个',\r\n            'lang_next_btn': '下一个'\r\n        }\r\n    },\r\n    'emotion':{\r\n        'static':{\r\n            'lang_input_choice':'精选',\r\n            'lang_input_Tuzki':'兔斯基',\r\n            'lang_input_BOBO':'BOBO',\r\n            'lang_input_lvdouwa':'绿豆蛙',\r\n            'lang_input_babyCat':'baby猫',\r\n            'lang_input_bubble':'泡泡',\r\n            'lang_input_youa':'有啊'\r\n        }\r\n    },\r\n    'gmap':{\r\n        'static':{\r\n            'lang_input_address':'地址',\r\n            'lang_input_search':'搜索',\r\n            'address':{value:\"北京\"}\r\n        },\r\n        searchError:'无法定位到该地址!'\r\n    },\r\n    'help':{\r\n        'static':{\r\n            'lang_input_about':'关于UEditor',\r\n            'lang_input_shortcuts':'快捷键',\r\n            'lang_input_introduction':'UEditor是由百度web前端研发部开发的所见即所得富文本web编辑器，具有轻量，可定制，注重用户体验等特点。开源基于BSD协议，允许自由使用和修改代码。',\r\n            'lang_Txt_shortcuts':'快捷键',\r\n            'lang_Txt_func':'功能',\r\n            'lang_Txt_bold':'给选中字设置为加粗',\r\n            'lang_Txt_copy':'复制选中内容',\r\n            'lang_Txt_cut':'剪切选中内容',\r\n            'lang_Txt_Paste':'粘贴',\r\n            'lang_Txt_undo':'重新执行上次操作',\r\n            'lang_Txt_redo':'撤销上一次操作',\r\n            'lang_Txt_italic':'给选中字设置为斜体',\r\n            'lang_Txt_underline':'给选中字加下划线',\r\n            'lang_Txt_selectAll':'全部选中',\r\n            'lang_Txt_visualEnter':'软回车',\r\n            'lang_Txt_fullscreen':'全屏'\r\n        }\r\n    },\r\n    'insertframe':{\r\n        'static':{\r\n            'lang_input_address':'地址：',\r\n            'lang_input_width':'宽度：',\r\n            'lang_input_height':'高度：',\r\n            'lang_input_isScroll':'允许滚动条：',\r\n            'lang_input_frameborder':'显示框架边框：',\r\n            'lang_input_alignMode':'对齐方式：',\r\n            'align':{title:\"对齐方式\", options:[\"默认\", \"左对齐\", \"右对齐\", \"居中\"]}\r\n        },\r\n        'enterAddress':'请输入地址!'\r\n    },\r\n    'link':{\r\n        'static':{\r\n            'lang_input_text':'文本内容：',\r\n            'lang_input_url':'链接地址：',\r\n            'lang_input_title':'标题：',\r\n            'lang_input_target':'是否在新窗口打开：'\r\n        },\r\n        'validLink':'只支持选中一个链接时生效',\r\n        'httpPrompt':'您输入的超链接中不包含http等协议名称，默认将为您添加http://前缀'\r\n    },\r\n    'map':{\r\n        'static':{\r\n            lang_city:\"城市\",\r\n            lang_address:\"地址\",\r\n            city:{value:\"北京\"},\r\n            lang_search:\"搜索\",\r\n            lang_dynamicmap:\"插入动态地图\"\r\n        },\r\n        cityMsg:\"请选择城市\",\r\n        errorMsg:\"抱歉，找不到该位置！\"\r\n    },\r\n    'searchreplace':{\r\n        'static':{\r\n            lang_tab_search:\"查找\",\r\n            lang_tab_replace:\"替换\",\r\n            lang_search1:\"查找\",\r\n            lang_search2:\"查找\",\r\n            lang_replace:\"替换\",\r\n            lang_searchReg:'支持正则表达式，添加前后斜杠标示为正则表达式，例如“/表达式/”',\r\n            lang_searchReg1:'支持正则表达式，添加前后斜杠标示为正则表达式，例如“/表达式/”',\r\n            lang_case_sensitive1:\"区分大小写\",\r\n            lang_case_sensitive2:\"区分大小写\",\r\n            nextFindBtn:{value:\"下一个\"},\r\n            preFindBtn:{value:\"上一个\"},\r\n            nextReplaceBtn:{value:\"下一个\"},\r\n            preReplaceBtn:{value:\"上一个\"},\r\n            repalceBtn:{value:\"替换\"},\r\n            repalceAllBtn:{value:\"全部替换\"}\r\n        },\r\n        getEnd:\"已经搜索到文章末尾！\",\r\n        getStart:\"已经搜索到文章头部\",\r\n        countMsg:\"总共替换了{#count}处！\"\r\n    },\r\n    'snapscreen':{\r\n        'static':{\r\n            lang_showMsg:\"截图功能需要首先安装UEditor截图插件！ \",\r\n            lang_download:\"点此下载\",\r\n            lang_step1:\"第一步，下载UEditor截图插件并运行安装。\",\r\n            lang_step2:\"第二步，插件安装完成后即可使用，如不生效，请重启浏览器后再试！\"\r\n        }\r\n    },\r\n    'spechars':{\r\n        'static':{},\r\n        tsfh:\"特殊字符\",\r\n        lmsz:\"罗马字符\",\r\n        szfh:\"数学字符\",\r\n        rwfh:\"日文字符\",\r\n        xlzm:\"希腊字母\",\r\n        ewzm:\"俄文字符\",\r\n        pyzm:\"拼音字母\",\r\n        yyyb:\"英语音标\",\r\n        zyzf:\"其他\"\r\n    },\r\n    'edittable':{\r\n        'static':{\r\n            'lang_tableStyle':'表格样式',\r\n            'lang_insertCaption':'添加表格名称行',\r\n            'lang_insertTitle':'添加表格标题行',\r\n            'lang_insertTitleCol':'添加表格标题列',\r\n            'lang_orderbycontent':\"使表格内容可排序\",\r\n            'lang_tableSize':'自动调整表格尺寸',\r\n            'lang_autoSizeContent':'按表格文字自适应',\r\n            'lang_autoSizePage':'按页面宽度自适应',\r\n            'lang_example':'示例',\r\n            'lang_borderStyle':'表格边框',\r\n            'lang_color':'颜色:'\r\n        },\r\n        captionName:'表格名称',\r\n        titleName:'标题',\r\n        cellsName:'内容',\r\n        errorMsg:'有合并单元格，不可排序'\r\n    },\r\n    'edittip':{\r\n        'static':{\r\n            lang_delRow:'删除整行',\r\n            lang_delCol:'删除整列'\r\n        }\r\n    },\r\n    'edittd':{\r\n        'static':{\r\n            lang_tdBkColor:'背景颜色:'\r\n        }\r\n    },\r\n    'formula':{\r\n        'static':{\r\n        }\r\n    },\r\n    'wordimage':{\r\n        'static':{\r\n            lang_resave:\"转存步骤\",\r\n            uploadBtn:{src:\"upload.png\",alt:\"上传\"},\r\n            clipboard:{style:\"background: url(copy.png) -153px -1px no-repeat;\"},\r\n            lang_step:\"1、点击顶部复制按钮，将地址复制到剪贴板；2、点击添加照片按钮，在弹出的对话框中使用Ctrl+V粘贴地址；3、点击打开后选择图片上传流程。\"\r\n        },\r\n        'fileType':\"图片\",\r\n        'flashError':\"FLASH初始化失败，请检查FLASH插件是否正确安装！\",\r\n        'netError':\"网络连接错误，请重试！\",\r\n        'copySuccess':\"图片地址已经复制！\",\r\n        'flashI18n':{} //留空默认中文\r\n    },\r\n    'autosave': {\r\n        'saving':'保存中...',\r\n        'success':'本地保存成功'\r\n    }\r\n};\r\n\n\n\n// WEBPACK FOOTER //\n// ./../ehuodiManagement/scms/trunk/src/libs/ueditor/lang/zh-cn/zh-cn.js"],"sourceRoot":""}